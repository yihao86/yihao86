/* COMBO: filename = js/jquery.1.11.3.min.js, type = application/javascript, resp = 200 */
/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;

return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=ba;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++])oa.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--)if(b=Ta[e]+c,b in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){
return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cb.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});

/* COMBO: filename = js/plugins/ali-loghub-tracking/loghub-tracking.js, type = application/javascript, resp = 200 */
(function(window, document){
    function createHttpRequest()
    {
        if(window.ActiveXObject){
            return new ActiveXObject("Microsoft.XMLHTTP");
        }
        else if(window.XMLHttpRequest){
            return new XMLHttpRequest();
        }
    }
    function AliLogTracker(host,project,logstore)
    {
        this.uri_ = '//' + project + '.' + host + '/logstores/' + logstore + '/track?APIVersion=0.6.0';
        this.params_=new Array();
        this.httpRequest_ = createHttpRequest();
    }
    AliLogTracker.prototype = {
        push: function(key,value) {
            if(!key || !value) {
                return;
            }
            this.params_.push(key);
            this.params_.push(value);
        },
        logger: function()
        {
            var url = this.uri_;
            var k = 0;
            while(this.params_.length > 0)
            {
                if(k % 2 == 0)
                {
                    url += '&' + encodeURIComponent(this.params_.shift());
                }
                else
                {
                    url += '=' + encodeURIComponent(this.params_.shift());
                }
                ++k;
            }
            try
            {
                this.httpRequest_.open("GET",url,true);
                this.httpRequest_.send(null);
            }
            catch (ex)
            {
                if (window && window.console && typeof window.console.log === 'function')
                {
                    console.log("Failed to log to ali log service because of this exception:\n" + ex);
                    console.log("Failed log data:", url);
                }
            }

        }
    };
    window.Tracker = AliLogTracker;
})(window, document);
/* COMBO: filename = js/jquery.SuperSlide.2.1.1.js, type = application/javascript, resp = 200 */
/*!
 * SuperSlide v2.1.1 
 * 轻松解决网站大部分特效展示问题
 * 详尽信息请看官网：http://www.SuperSlide2.com/
 *
 * Copyright 2011-2013, 大话主席
 *
 * 请尊重原创，保留头部版权
 * 在保留版权的前提下可应用于个人或商业用途

 * v2.1.1：修复当调用多个SuperSlide，并设置returnDefault:true 时返回defaultIndex索引错误

 */

!function(a){a.fn.slide=function(b){return a.fn.slide.defaults={type:"slide",effect:"fade",autoPlay:!1,delayTime:500,interTime:2500,triggerTime:150,defaultIndex:0,titCell:".hd li",mainCell:".bd",targetCell:null,trigger:"mouseover",scroll:1,vis:1,titOnClassName:"on",autoPage:!1,prevCell:".prev",nextCell:".next",pageStateCell:".pageState",opp:!1,pnLoop:!0,easing:"swing",startFun:null,endFun:null,switchLoad:null,playStateCell:".playState",mouseOverStop:!0,defaultPlay:!0,returnDefault:!1},this.each(function(){var c=a.extend({},a.fn.slide.defaults,b),d=a(this),e=c.effect,f=a(c.prevCell,d),g=a(c.nextCell,d),h=a(c.pageStateCell,d),i=a(c.playStateCell,d),j=a(c.titCell,d),k=j.size(),l=a(c.mainCell,d),m=l.children().size(),n=c.switchLoad,o=a(c.targetCell,d),p=parseInt(c.defaultIndex),q=parseInt(c.delayTime),r=parseInt(c.interTime);parseInt(c.triggerTime);var Q,t=parseInt(c.scroll),u=parseInt(c.vis),v="false"==c.autoPlay||0==c.autoPlay?!1:!0,w="false"==c.opp||0==c.opp?!1:!0,x="false"==c.autoPage||0==c.autoPage?!1:!0,y="false"==c.pnLoop||0==c.pnLoop?!1:!0,z="false"==c.mouseOverStop||0==c.mouseOverStop?!1:!0,A="false"==c.defaultPlay||0==c.defaultPlay?!1:!0,B="false"==c.returnDefault||0==c.returnDefault?!1:!0,C=0,D=0,E=0,F=0,G=c.easing,H=null,I=null,J=null,K=c.titOnClassName,L=j.index(d.find("."+K)),M=p=-1==L?p:L,N=p,O=p,P=m>=u?0!=m%t?m%t:t:0,R="leftMarquee"==e||"topMarquee"==e?!0:!1,S=function(){a.isFunction(c.startFun)&&c.startFun(p,k,d,a(c.titCell,d),l,o,f,g)},T=function(){a.isFunction(c.endFun)&&c.endFun(p,k,d,a(c.titCell,d),l,o,f,g)},U=function(){j.removeClass(K),A&&j.eq(N).addClass(K)};if("menu"==c.type)return A&&j.removeClass(K).eq(p).addClass(K),j.hover(function(){Q=a(this).find(c.targetCell);var b=j.index(a(this));I=setTimeout(function(){switch(p=b,j.removeClass(K).eq(p).addClass(K),S(),e){case"fade":Q.stop(!0,!0).animate({opacity:"show"},q,G,T);break;case"slideDown":Q.stop(!0,!0).animate({height:"show"},q,G,T)}},c.triggerTime)},function(){switch(clearTimeout(I),e){case"fade":Q.animate({opacity:"hide"},q,G);break;case"slideDown":Q.animate({height:"hide"},q,G)}}),B&&d.hover(function(){clearTimeout(J)},function(){J=setTimeout(U,q)}),void 0;if(0==k&&(k=m),R&&(k=2),x){if(m>=u)if("leftLoop"==e||"topLoop"==e)k=0!=m%t?(0^m/t)+1:m/t;else{var V=m-u;k=1+parseInt(0!=V%t?V/t+1:V/t),0>=k&&(k=1)}else k=1;j.html("");var W="";if(1==c.autoPage||"true"==c.autoPage)for(var X=0;k>X;X++)W+="<li>"+(X+1)+"</li>";else for(var X=0;k>X;X++)W+=c.autoPage.replace("$",X+1);j.html(W);var j=j.children()}if(m>=u){l.children().each(function(){a(this).width()>E&&(E=a(this).width(),D=a(this).outerWidth(!0)),a(this).height()>F&&(F=a(this).height(),C=a(this).outerHeight(!0))});var Y=l.children(),Z=function(){for(var a=0;u>a;a++)Y.eq(a).clone().addClass("clone").appendTo(l);for(var a=0;P>a;a++)Y.eq(m-a-1).clone().addClass("clone").prependTo(l)};switch(e){case"fold":l.css({position:"relative",width:D,height:C}).children().css({position:"absolute",width:E,left:0,top:0,display:"none"});break;case"top":l.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+u*C+'px"></div>').css({top:-(p*t)*C,position:"relative",padding:"0",margin:"0"}).children().css({height:F});break;case"left":l.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+u*D+'px"></div>').css({width:m*D,left:-(p*t)*D,position:"relative",overflow:"hidden",padding:"0",margin:"0"}).children().css({"float":"left",width:E});break;case"leftLoop":case"leftMarquee":Z(),l.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+u*D+'px"></div>').css({width:(m+u+P)*D,position:"relative",overflow:"hidden",padding:"0",margin:"0",left:-(P+p*t)*D}).children().css({"float":"left",width:E});break;case"topLoop":case"topMarquee":Z(),l.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+u*C+'px"></div>').css({height:(m+u+P)*C,position:"relative",padding:"0",margin:"0",top:-(P+p*t)*C}).children().css({height:F})}}var $=function(a){var b=a*t;return a==k?b=m:-1==a&&0!=m%t&&(b=-m%t),b},_=function(b){var c=function(c){for(var d=c;u+c>d;d++)b.eq(d).find("img["+n+"]").each(function(){var b=a(this);if(b.attr("src",b.attr(n)).removeAttr(n),l.find(".clone")[0])for(var c=l.children(),d=0;d<c.size();d++)c.eq(d).find("img["+n+"]").each(function(){a(this).attr(n)==b.attr("src")&&a(this).attr("src",a(this).attr(n)).removeAttr(n)})})};switch(e){case"fade":case"fold":case"top":case"left":case"slideDown":c(p*t);break;case"leftLoop":case"topLoop":c(P+$(O));break;case"leftMarquee":case"topMarquee":var d="leftMarquee"==e?l.css("left").replace("px",""):l.css("top").replace("px",""),f="leftMarquee"==e?D:C,g=P;if(0!=d%f){var h=Math.abs(0^d/f);g=1==p?P+h:P+h-1}c(g)}},ab=function(a){if(!A||M!=p||a||R){if(R?p>=1?p=1:0>=p&&(p=0):(O=p,p>=k?p=0:0>p&&(p=k-1)),S(),null!=n&&_(l.children()),o[0]&&(Q=o.eq(p),null!=n&&_(o),"slideDown"==e?(o.not(Q).stop(!0,!0).slideUp(q),Q.slideDown(q,G,function(){l[0]||T()})):(o.not(Q).stop(!0,!0).hide(),Q.animate({opacity:"show"},q,function(){l[0]||T()}))),m>=u)switch(e){case"fade":l.children().stop(!0,!0).eq(p).animate({opacity:"show"},q,G,function(){T()}).siblings().hide();break;case"fold":l.children().stop(!0,!0).eq(p).animate({opacity:"show"},q,G,function(){T()}).siblings().animate({opacity:"hide"},q,G);break;case"top":l.stop(!0,!1).animate({top:-p*t*C},q,G,function(){T()});break;case"left":l.stop(!0,!1).animate({left:-p*t*D},q,G,function(){T()});break;case"leftLoop":var b=O;l.stop(!0,!0).animate({left:-($(O)+P)*D},q,G,function(){-1>=b?l.css("left",-(P+(k-1)*t)*D):b>=k&&l.css("left",-P*D),T()});break;case"topLoop":var b=O;l.stop(!0,!0).animate({top:-($(O)+P)*C},q,G,function(){-1>=b?l.css("top",-(P+(k-1)*t)*C):b>=k&&l.css("top",-P*C),T()});break;case"leftMarquee":var c=l.css("left").replace("px","");0==p?l.animate({left:++c},0,function(){l.css("left").replace("px","")>=0&&l.css("left",-m*D)}):l.animate({left:--c},0,function(){l.css("left").replace("px","")<=-(m+P)*D&&l.css("left",-P*D)});break;case"topMarquee":var d=l.css("top").replace("px","");0==p?l.animate({top:++d},0,function(){l.css("top").replace("px","")>=0&&l.css("top",-m*C)}):l.animate({top:--d},0,function(){l.css("top").replace("px","")<=-(m+P)*C&&l.css("top",-P*C)})}j.removeClass(K).eq(p).addClass(K),M=p,y||(g.removeClass("nextStop"),f.removeClass("prevStop"),0==p&&f.addClass("prevStop"),p==k-1&&g.addClass("nextStop")),h.html("<span>"+(p+1)+"</span>/"+k)}};A&&ab(!0),B&&d.hover(function(){clearTimeout(J)},function(){J=setTimeout(function(){p=N,A?ab():"slideDown"==e?Q.slideUp(q,U):Q.animate({opacity:"hide"},q,U),M=p},300)});var bb=function(a){H=setInterval(function(){w?p--:p++,ab()},a?a:r)},cb=function(a){H=setInterval(ab,a?a:r)},db=function(){z||(clearInterval(H),bb())},eb=function(){(y||p!=k-1)&&(p++,ab(),R||db())},fb=function(){(y||0!=p)&&(p--,ab(),R||db())},gb=function(){clearInterval(H),R?cb():bb(),i.removeClass("pauseState")},hb=function(){clearInterval(H),i.addClass("pauseState")};if(v?R?(w?p--:p++,cb(),z&&l.hover(hb,gb)):(bb(),z&&d.hover(hb,gb)):(R&&(w?p--:p++),i.addClass("pauseState")),i.click(function(){i.hasClass("pauseState")?gb():hb()}),"mouseover"==c.trigger?j.hover(function(){var a=j.index(this);I=setTimeout(function(){p=a,ab(),db()},c.triggerTime)},function(){clearTimeout(I)}):j.click(function(){p=j.index(this),ab(),db()}),R){if(g.mousedown(eb),f.mousedown(fb),y){var ib,jb=function(){ib=setTimeout(function(){clearInterval(H),cb(0^r/10)},150)},kb=function(){clearTimeout(ib),clearInterval(H),cb()};g.mousedown(jb),g.mouseup(kb),f.mousedown(jb),f.mouseup(kb)}"mouseover"==c.trigger&&(g.hover(eb,function(){}),f.hover(fb,function(){}))}else g.click(eb),f.click(fb)})}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*.3*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:.5*h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}});
/* COMBO: filename = js/public.102.js, type = application/javascript, resp = 200 */
function ConfigFun() {
    var host = 'https://ajax.huke88.com';
    var config = {
        searchUrl: host + '/statistics-search/statistics', //搜索统计Url
        searchClickUrl: host + '/statistics-search/click', //搜索点击统计Url
        searchPlayUrl: host + '/statistics-search/play', //搜索播放统计Url
        searchWordsUrl: host + '/ajax/search-hot-words' //搜索热词统计Url
    };
    return config;
}

var Config = new ConfigFun();

/**
 * 阿里云统计页面按钮点击
 */
(function ($, window, document) {
    $.fn.aliLoggerClick = function () {
        var logHost = 'cn-shanghai.log.aliyuncs.com';
        var logProject = 'huke';
        var logStore = 'web_click_log';

        var logger = new window.Tracker(logHost, logProject, logStore);

        var uid = Param.uid;
        var uv = Param.uv_id;
        $(this).on('click', function () {
            var identify = $(this).attr('data-bind-click-identify');
            logger.push('uid', uid);
            logger.push('uv', uv);
            logger.push('identify', identify);
            logger.logger();
        });
    };

})(jQuery, window, document);

/**
 * Created by Mr.D on 2017/6/7.
 */
$(function () {

    //导航软件入门&设计教程下拉
    (function () {

        function loadNavSoftwareList() {

            var $container = $("#new-header .rjrm-list .top-con");

            if ($container.hasClass('hasLoading')) {
                return false;
            }

            $.ajax({
                url: Url.navSoftwareList,
                method: 'get',
                dataType: 'json',
                beforeSend: function () {
                    $container.addClass('hasLoading');
                },
                xhrFields: {
                    withCredentials: true
                },
                success: function (response) {
                    if (response.code === 200) {
                        $("#new-header .rjrm-list .top-con .rjrm-wrap").html(response.software);
                        $("#new-header .sjjc-list .top-con .sjjc-wrap").html(response.design);
                        $("#new-header .top-con-classify").html(response.classify);

                        // 导航栏设计教程里分类切换
                        $('.sjjc-wrap .list').hover(function () {
                            $(this).addClass('active').siblings().removeClass('active');
                        });
                    } else {
                        alert('系统出错，请联系客服解决');
                    }
                }
            })
        }

        // 消息下拉 刷新
        $("#new-header .rjrm-list").on('mousemove', function () {
            loadNavSoftwareList();
        });

        loadNavSoftwareList();
    })();
    //弹窗关闭
    $('.qt-tg').on('click', '.close', function () {
        $('.qt-tg').addClass('hide');
    });

    var renderingEndTime = (new Date()).valueOf();


    $('.search-m .txt').click(function () {
        $('.header-search .search-win').removeClass('hide');
        $('.header-search .txt').css('width', '170px');
    });
    $('.header-search').on('click', '.search-win', function (b) {
        b.stopPropagation();
    });
    $(document).click(function (event) {
        if (event.target.className != $('.txt').selector.substring(1)) {
            $('.search-win').addClass('hide');
            $('.header-search .txt').css('width', '140px');
        }
    });
    $('.list-m').on('click', '.close', function (b) {
        $(this).parents('p').remove();
        b.stopPropagation();
    });

    /**
     * 搜索记录删除(清空/单条)
     */
    $('#empty-btn').on('click', function () {
        $.get('//huke88.com/search/del-cookie', {name: 'qingkong'}, function (data) {
            $('#record-empty').children('p').remove();
        }, 'text');
        $('#record-empty').addClass('hide');
        $('#empty-record').addClass('hide');
    });

    //删除单条cookie
    $('.cookie').on('click', function () {
        var _this = $(this);
        $.get('//huke88.com/search/del-cookie', {name: $(this).parents('p').find('a').html()}, function (data) {
            _this.parents('p').remove();
        }, 'text');
        if ($("#record-empty p").length == 1) {
            $('#record-empty').addClass('hide');
            $('#empty-record').addClass('hide');
        }
    });

    //搜索词点击统计
    $('.hot-word').on('click', function () {
        var id = $(this).attr('data-id');
        var words = $(this).attr('data-words');
        $.ajax({
            type: "post",
            url: Config.searchWordsUrl,
            data: {
                id: id,
                words: words,
                '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
            },
            dataType: "json",
            success: function (message) {
                console.log(message);
            }
        });
    });

    // 绑定手机号弹窗
    $(".get-phone").on("click", ".c-btn,.close,.phone-bg", function () {
        $(".get-phone").hide();
    });
    /**
     * ajax方法封装
     * @param url
     * @param data
     * @param type
     * @param success
     * @param error
     * @param beforeSend
     * @param async
     */
    var ajax = function (url, data, type, success, error, beforeSend, async) {
        $.ajax({
            url: url,
            data: data,
            dataType: 'JSON',
            type: type,
            success: function (res) {
                layer.closeAll();
                success(res);
            },
            error: function () {
                if (typeof error === 'function') {
                    error();
                } else {
                    layer.msg('请求错误');
                }
            },
            beforeSend: function () {
                if (typeof beforeSend === 'function') {
                    beforeSend();
                } else {
                    var index = layer.load(1, {
                        shade: [0.1, '#fff'] //0.1透明度的白色背景
                    });
                }
            }
        });
    };

    $('#registerBtn').on('click', function () {
        $('#registerModal').removeClass('hide');
    });
    //隐藏模态框
    $('span[data-bind-bs="hideModal"]').on('click', function () {
        var _this = $(this);
        _this.parents('div.hkt-win').addClass('hide');
    });
    $('.show-input > span').click(function () {
        $('.show-input').hide();
        $('.nav').fadeIn(800);
        $('.click-seek').show();
    });

    //搜索
    $('#submit-search').on('click', function () {
        var $keyWorld = $(".header-search .txt").val();
        $keyWorld = $.trim($keyWorld);
        var identify = $('#search-identify').val();
        if ($keyWorld.length <= 0) {
            alert('请输入搜索关键词 ...');
            return false;
        }
        window.location.href = '//huke88.com/search/video?keyWorld=' + $keyWorld + '&identify=' + identify;
    });

    $(".header-search .txt").keydown(function (event) {
        if (event.keyCode === 13) { //绑定回车
            $('#submit-search').click();
        }
    });

    (function () {
        //百度统计代码
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?a0e66ced62f1926ee48b5f059ad9f039";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();

        //seo添加 百度/360 推送代码
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);

        var src = (document.location.protocol == "http:") ? "http://js.passport.qihucdn.com/11.0.1.js?e9003f5cb9108d8187ade032b2898cc3" : "https://jspassport.ssl.qhimg.com/11.0.1.js?e9003f5cb9108d8187ade032b2898cc3";
        $('body').append('<script src="' + src + '" id="sozz"><\/script>');
        // document.write('<script src="' + src + '" id="sozz"><\/script>');
    })();

    //低版本浏览器提示
    (function () {

        function getBrowserNoticeDomNew() {
            if ($(document).hasClass('upbrower')) {
                return false;
            }
            $.ajax({
                url: Url.getBrowserNoticeDom,
                type: 'get',
                dataType: 'jsonp',
                jsonp: "callback",
                success: function (response) {
                    $('body').append(response.html);
                    $(document).on('click', '.upbrower .close', function () {
                        $('.upbrower').addClass('hide')
                    });
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log(XMLHttpRequest.status);
                    console.log(XMLHttpRequest.readyState);
                    console.log(textStatus);
                }
            })
        }

        var b_name = navigator.appName;
        var b_version = navigator.appVersion;
        var version = b_version.split(";");
        if (b_name == "Microsoft Internet Explorer") {
            var trim_version = version[1].replace(/[ ]/g, "");
            /*如果是IE6或者IE7*/
            if (trim_version == "MSIE7.0" || trim_version == "MSIE6.0" || trim_version == "MSIE8.0" || trim_version == "MSIE9.0" || trim_version == "MSIE10.0") {
                getBrowserNoticeDomNew();
            }
        }
    })();

    /**
     * 页面统计
     */
    $.ajax({
        type: "post",
        url: Url.basicsStatistics,
        data: {
            type: Param.pageCodeId || 0,
            url: $('#referrer').val(),
            exectime: Param.execTime,
            run_time: (renderingEndTime - renderingStartTime) / 1000,
            currentUrl: $('#currentUrlInput').val(),
            pageType: Param.pageType,
            userIP: Param.userIP,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        dataType: "json",
        xhrFields: {
            withCredentials: true
        },
        success: function (message) {
        }
    });

    //点击按钮统计
    $('.trigger-click-statistics').aliLoggerClick();

    /**
     * 阿里云页面统计
     */
    (function ($) {
        var referrerUrl = $('#referrer').val(),
            exectime = Param.execTime,
            run_time = (renderingEndTime - renderingStartTime) / 1000,
            currentUrl = $('#currentUrlInput').val(),
            uid = Param.uid,
            uv = Param.uv_id;

        var logHost = 'cn-shanghai.log.aliyuncs.com';
        var logProject = 'huke';
        var logStore = 'web_log';
        var logger = new window.Tracker(logHost, logProject, logStore);
        logger.push('uid', uid);
        logger.push('uv', uv);
        logger.push('referrerUrl', referrerUrl);
        logger.push('exectime', exectime);
        logger.push('runtime', run_time);
        logger.push('currentUrl', currentUrl);
        logger.logger();
    })(jQuery);
});

/**
 * 去登陆
 */
function toLogin() {
    if (Param.is_sem) {
        buttonClickRecord(951);
    }
    $('#loginModal').removeClass('hide');
}

// 新版登录注册 2017-9-8
$(function () {

    if (Param.loginPop == 2) {
        //账号已在别处登录提示
        layer.confirm('<p class="fz20-c3">小虎提醒</p><p class="fz16-c6">您的账号已在别处登录</p><p class="fz16-c6">如非本人操作请立即修改密码哦~</p>',
            {
                btn: [],//按钮
                btnColor: ['0'] //按钮颜色 1白色 2黄色 3橙色 0不显示
            }, function () {
                // 跳转连接
                return false;
            }
        );
        toLogin();
    } else if (Param.loginPop == 3) {
        var popHtml = '<div class="proving-phone-win"><div class="win-m"><div class="close">×</div><p class="p1">小虎提醒</p>';
        popHtml += '<p class="p2">登录太频繁可能导致封号哦~请验证通过后登录！</p><div class="phone-num"><input type="hidden" name="" value="' + Param.userPhone + '">';
        popHtml += '<i class="phone-icon"></i>' + Param.userPhone.substr(0, 3) + '****' + Param.userPhone.substr(-4) + '</div>';
        popHtml += '<div class="phone-code clearfix"><div class="code-l fl"><input type="text" name="" placeholder="请输入图形验证码"></div>';
        popHtml += '<div class="code-r fr"><img class="captchaimg" src="" alt="换一个" title="换一个" style="cursor:pointer"></div>';
        popHtml += '<div class="error-txt">图形验证码错误，请重新输入</div></div>';
        popHtml += '<div class="phone-yz"><div class="yz-l fl"><input type="text" name="code" placeholder="请输入验证码"></div>';
        popHtml += '<div class="yz-r fr"><input type="button" value="获取动态密码" class="get-p"></div><div class="error-txt">验证码错误，请重新输入</div></div>';
        popHtml += '<div class="phone-btn">登录</div></div></div>';
        $('body').append(popHtml);

        // 验证码发送60秒倒计时
        var countdown_valid = 60; //倒计时秒数
        function send_valide_mail() {
            var obj = $(".proving-phone-win .get-p");
            settime2(obj);
        }

        function settime2(obj) { //发送验证码倒计时
            if (countdown_valid == 0) {
                obj.removeClass("ed");
                obj.attr("disabled", false);
                obj.val("发送验证码");
                countdown_valid = 60;
                return;
            } else {
                obj.addClass("ed");
                obj.attr("disabled", true);
                obj.val(countdown_valid + "s");
                countdown_valid--;
            }
            setTimeout(function () {
                    settime2(obj)
                }
                , 1000)
        }

        $(".proving-phone-win .close").click(function () {
            location.reload();
        });
        // 点击发送验证码
        var getValideCodeAlready = false;
        $(".proving-phone-win .get-p").click(function () {
            var that = $(this);
            if (getValideCodeAlready) {
                return false;
            }
            getValideCodeAlready = true;
            // 点击发送验证码后验证手机号码格式
            var phone = $(this).parents('.win-m').find('.phone-num input').val();

            var verifyCode = that.parents('.win-m').find('.phone-code input').val();
            if (verifyCode == '') {
                that.parents('.win-m').find('.phone-code').addClass('error');
                that.parents('.win-m').find('.phone-code .error-txt').html('请输入图形验证码');
                getValideCodeAlready = false;
                return false;
            }

            $.ajaxSetup({async: false});
            $.ajax({
                type: "get",
                url: Url.sendMessage,
                data: {
                    phone: phone,
                    verifyCode: verifyCode
                },
                dataType: "json",
                success: function (data) {
                    if (data.state == 1) { // 发送成功
                        send_valide_mail();
                        that.parents('.win-m').find('.phone-code').removeClass('error');
                        getValideCodeAlready = false;
                    } else if (data.state == 2) { // 图形验证码错误
                        if (that.parents('.win-m').find('.phone-code').is(':hidden')) {
                            var text = '请输入图形验证码';

                            that.parents('.win-m').find('.captchaimg').click();
                        } else {
                            var text = '图形验证码错误，请重新输入';
                        }

                        that.parents('.win-m').find('.phone-code').show();
                        that.parents('.win-m').find('.phone-code').addClass('error');
                        that.parents('.win-m').find('.phone-code .error-txt').html(text);
                        getValideCodeAlready = false;
                    } else if (data.count == 5) {
                        that.parents('.win-m').find('.phone-yz').addClass('error');
                        that.parents('.win-m').find('.phone-yz .error-txt').html(data.msg);
                        getValideCodeAlready = true;
                    } else {
                        alert(data.msg);
                        getValideCodeAlready = false;
                    }
                },
                error: function () {
                    getValideCodeAlready = false;
                }
            });

        });

        // 点击切换验证码
        $(".proving-phone-win .captchaimg").click(function () {
            var unique = new Date().getTime();
            var that = $(this);
            $.get('/site/captcha', {'refresh': 1, 'v': unique}, function (data) {
                that.attr('src', data.url);
            });
        })
        $(".proving-phone-win .captchaimg").click();
        // 点击登录（或注册）
        $('.proving-phone-win .phone-btn').click(function () {
            var that = $(this);
            var data = {};
            data.phone = $(this).parents('.win-m').find('.phone-num input').val();
            data.code = $(this).parents('.win-m').find('.phone-yz .yz-l input').val();

            $.get(Url.phoneValide, data, function (res) {
                var resData = $.parseJSON(res);
                if (resData.state == 1) {
                    location.reload();
                } else {
                    alert('验证失败！');
                }
            })
        });
        $(".proving-phone-win .close").click(function () {
            $('.proving-phone-win').remove();
        });

    } else if (Param.loginPop == 4) {
        // 提醒绑定手机弹窗
        layer.confirm('<p class="fz20-c3">小虎提醒</p><p class="fz16-c6">登录太频繁可能导致封号哦~请验证通过后登录！</p>',
            {
                btn: ['去绑定手机'],//按钮
                btnColor: ['2'], //按钮颜色 1白色 2黄色 3橙色
                cancel: function () {
                    location.reload();
                }
            }, function () {
                window.open(Url.bindUrl);
            }
        );
    } else if (Param.loginPop == 5) {
        // 提醒绑定手机弹窗
        layer.confirm('<p class="fz20-c3">小虎提醒</p><p class="fz16-c6">您的账号近期频繁登录，今日已无法登录</p><p class="fz16-c6">建议您修改密码，明日再来学习！</p><p class="fz16-c6">如有疑问请联系客服：<a href="javascript:;" onclick="open_kefu()" class="qq-icon"></a></p>',
            {
                btn: [],//按钮
                btnColor: ['0'] //按钮颜色 1白色 2黄色 3橙色 0不显示
            }, function () {
                // 跳转连接
                return false;
            }
        );
    }

    //登录,登录弹出框
    $('#loginBtn,.loginBtn').on('click', function () {
        toLogin();
        $("#loginModal .tab-head .t1").addClass("active").siblings().removeClass("active");
        $("#loginModal-t2").hide();
        $("#loginModal-t1").show();
    });

    //注册弹出框
    $('#registerBtn').on('click', function () {
        toLogin();
        $("#loginModal .tab-head .t2").addClass("active").siblings().removeClass("active");
        $("#loginModal-t1").hide();
        $("#loginModal-t2").show();
    });

    //登录注册切换
    $("#loginModal .tab-head span").on('click', function (e) {
        var _this = $(this);
        var _index = _this.index();
        _this.addClass('active').siblings('span').removeClass('active');
        $('.lrframe-box .tab-main').eq(_index).show().siblings('.tab-main').hide();
    });

    //切换到手机登录状态
    $(".tab-main").on("click", ".go-phone", function () {
        $(".tab-main").css({"margin-left": "-420px"}).find(".phone-m").show();
        changeLoginCaptcha();
    });
    // 验证码发送60秒倒计时
    var countdown = 60; //倒计时秒数
    function sendemail() {
        var obj = $(".get-p");
        settime(obj);
    }

    function settime(obj) { //发送验证码倒计时
        if (countdown == 0) {
            obj.removeClass("ed");
            obj.attr("disabled", false);
            obj.val("发送验证码");
            countdown = 60;
            return;
        } else {
            obj.addClass("ed");
            obj.attr("disabled", true);
            obj.val(countdown + "s");
            countdown--;
        }
        setTimeout(function () {
                settime(obj)
            }
            , 1000)
    }

    // 点击发送验证码
    var getPhoneCodeAlready = false;
    $("#loginModal .get-p").click(function () {
        var that = $(this);
        if (getPhoneCodeAlready) {
            return false;
        }
        getPhoneCodeAlready = true;
        // 点击发送验证码后验证手机号码格式
        var phone = $(this).parents('.phone-m').find('.phone-num input').val();
        if (checkTelNum(phone)) {
            that.parents('.phone-m').find('.phone-num').removeClass('error');
            var verifyCode = that.parents('.phone-m').find('.phone-code input').val();
            if (that.parents('.phone-m').find('.phone-code').is(':visible')) { // 需要图形验证码
                if (verifyCode.length <= 0) {
                    that.parents('.phone-m').find('.phone-code').addClass('error');
                    that.parents('.phone-m').find('.phone-code .error-txt').html('请输入图形验证码');
                    getPhoneCodeAlready = false;
                    return false;
                }

                if (verifyCode.length < 4) {
                    that.parents('.phone-m').find('.phone-code').addClass('error');
                    that.parents('.phone-m').find('.phone-code .error-txt').html('图形验证码错误');
                    getPhoneCodeAlready = false;
                    return false;
                }
            }

            $.ajax({
                type: "get",
                url: Url.sendMessage,
                async: false,
                data: {
                    phone: phone,
                    verifyCode: verifyCode
                },
                dataType: "json",
                success: function (data) {
                    if (data.state === 1) { // 发送成功
                        sendemail();
                        that.parents('.phone-m').find('.phone-code').removeClass('error');
                        getPhoneCodeAlready = false;
                    } else if (data.state === 2) { // 图形验证码错误
                        var text = '';
                        if (that.parents('.phone-m').find('.phone-code').is(':hidden')) {
                            text = '请输入图形验证码';
                            var unique = new Date().getTime();
                            that.parents('.phone-m').find('.captchaimg').attr('src', '/site/captcha?v=' + unique);
                        } else {
                            text = '图形验证码错误，请重新输入';
                        }

                        changeLoginCaptcha();
                        that.parents('.phone-m').find('.phone-code').show();
                        that.parents('.phone-m').find('.phone-code').addClass('error');
                        that.parents('.phone-m').find('.phone-code .error-txt').html(text);
                        getPhoneCodeAlready = false;
                    } else if (data.count === 5) {
                        that.parents('.phone-m').find('.phone-yz').addClass('error');
                        that.parents('.phone-m').find('.phone-yz .error-txt').html(data.msg);
                        getPhoneCodeAlready = true;
                    } else {
                        alert(data.msg);
                        getPhoneCodeAlready = false;
                    }
                },
                error: function () {
                    getPhoneCodeAlready = false;
                }
            });
        } else {
            that.parents('.phone-m').find('.phone-num').addClass('error');
            getPhoneCodeAlready = false;
        }
    });

    var loginCaptchaImage = $("#loginModal .captchaimg");

    /**
     * 切换登录/注册验证码
     */
    function changeLoginCaptcha() {
        var unique = new Date().getTime();
        $.get('/site/captcha', {'refresh': 1, 'v': unique}, function (data) {
            loginCaptchaImage.prop('src', data.url);
        });
    }

    // 点击切换验证码
    loginCaptchaImage.click(function () {
        changeLoginCaptcha();
    });

    // 点击登录（或注册）
    $('#loginModal .phone-btn').click(function () {
        var that = $(this);

        //手机号码
        var phone = $(this).parents('.phone-m').find('.phone-num input').val();
        //动态密码
        var code = $(this).parents('.phone-m').find('.phone-yz .yz-l input').val();
        //图形验证码
        var verifyCode = $(this).parents('.phone-m').find('.phone-code .code-l input').val();
        if (!checkTelNum(phone)) {
            that.parents('.phone-m').find('.phone-num').addClass('error');
            return false;
        }

        if (verifyCode.length < 4) {
            that.parents('.phone-m').find('.phone-code').addClass('error').find('div.error-txt').html('图形验证码错误');
            return false;
        }

        if (code.length < 4) {
            that.parents('.phone-m').find('.phone-yz').addClass('error').find('div.error-txt').html('动态密码错误');
            return false;
        }

        var data = {};
        data.phone = phone;
        data.code = code;
        data.verifyCode = verifyCode;

        $.get(Url.phoneMessageLogin, data, function (res) {
            var resData = $.parseJSON(res);
            if (resData.state === 1) {
                location.reload();
            } else {
                that.parents('.phone-m').find('.phone-num').removeClass('error');
                that.parents('.phone-m').find('.phone-yz').addClass('error').find('div.error-txt').html(resData.msg);
                changeLoginCaptcha();
            }
        });
    });

    $('.phone-m input').focus(function () {
        $(this).parents().removeClass('error');
    })

    // 前端校验手机号码
    function checkTelNum(mobile) {
        // var myreg = /^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(17[0-9]{1}))+\d{8})$/;
        var myreg = /^1[3456789]\d{9}$/;
        if (!myreg.test(mobile)) {
            return false;
        } else {
            return true;
        }
    }

    // *********************************  引导用户绑定手机号开始  *****************************************************
    if (typeof $('#bind-phone-new') != 'undefined' && $('#bind-phone-new').length > 0) {
        // 引导手机号绑定的图形验证码
        var _unique = new Date().getTime()
        var _csrf = $('meta[name="csrf-token"]').attr('content');
        $.get('/bind/captcha', {'refresh': 1, 'v': _unique}, function (data) {
            $('#bind-phone-new .win-m').find('.captchaimg-reduce').attr('src', data.url);
        });

        // 关闭弹窗 还你一个干净的弹窗！
        $('#bind-phone-new').find('.close').bind('click', function () {
            $('#bind-phone-new').addClass('hide');
            $('#bind-phone-new input[name=phone-new], #bind-phone-new input[name=code-new], #bind-phone-new input[name=sms-new]').val('');
            $('#bind-phone-new .phone-error, #bind-phone-new .code-error, #bind-phone-new .sms-error').addClass('hide');
        });

        /**
         * 绑定手机
         */
        $('#bind-phone-new input[name=bind-phone]').bind('click', function () {
            var $phone = $.trim($('#bind-phone-new input[name=phone-new]').val());
            var $phone_error = $('#bind-phone-new .phone-error');
            var $code = $.trim($('#bind-phone-new input[name=code-new]').val());
            var $code_error = $('#bind-phone-new .code-error');
            var $sms = $.trim($('#bind-phone-new input[name=sms-new]').val());
            var $sms_error = $('#bind-phone-new .sms-error');

            if ($phone == '' || !checkTelNum($phone)) {
                errorMessage($phone_error, true, '请输入正确的手机号码');
                return false;
            } else {
                errorMessage($phone_error, false);
            }

            if ($code == '' || $code.length != 4) {
                errorMessage($code_error, true, '请输入正确的图形验证码');
                return false;
            } else {
                errorMessage($code_error, false);
            }

            if ($sms == '' || $sms.length != 4) {
                errorMessage($sms_error, true, '请输入正确的短信验证码');
                setTimeout(function () {
                    errorMessage($sms_error, false);
                }, 3000)
                return false;
            } else {
                errorMessage($sms_error, false);
            }

            $.ajax({
                url: Url._bindPhone,
                type: 'POST',
                dataType: 'JSON',
                data: {
                    '_csrf-frontend': _csrf,
                    'phone': $phone,
                    'smsCode': $sms,
                    'verifyCode': $code
                },
                success: function (res) {
                    if (res.msg === 'noSmsCode' || res.msg === 'errorSms') {
                        errorMessage($sms_error, true, '请填写正确有效的短信验证码');
                        setTimeout(function () {
                            errorMessage($sms_error, false);
                        }, 3000);
                    } else if (res.msg === 'errorPhone') {
                        errorMessage($phone_error, true, '请填写正确的手机号码');
                    } else if (res.msg === 'errorCaptcha') {
                        errorMessage($code_error, true, '请填写正确的图形验证码');
                    } else if (res.msg === 'success') {
                        $('#bind-phone-new').remove();
                    }
                }
            })
        });

        /**
         * 发送短信验证码
         */
        $('#bind-phone-new input[name=sms-send]').bind('click', function () {
            var $phone = $.trim($('#bind-phone-new input[name=phone-new]').val());
            var $phone_error = $('#bind-phone-new .phone-error');
            var $code = $.trim($('#bind-phone-new input[name=code-new]').val());
            var $code_error = $('#bind-phone-new .code-error');
            var $sms_error = $('#bind-phone-new .sms-error');

            if ($phone == '' || !checkTelNum($phone)) {
                errorMessage($phone_error, true, '请输入正确的手机号码');
                return false;
            } else {
                errorMessage($phone_error, false);
            }

            if ($code == '' || $code.length != 4) {
                errorMessage($code_error, true, '请输入正确的图形验证码');
                return false;
            } else {
                errorMessage($code_error, false);
            }

            $.ajax({
                url: Url._sendMessageNew,
                type: 'POST',
                dateType: 'JSON',
                data: {'_csrf-frontend': _csrf, 'verifyCode': $code, 'phone': $phone, 'type': 1},
                success: function (res) {
                    var $res = $.parseJSON(res);

                    if ($res.state === 1) {
                        _clock($('#bind-phone-new input[name=sms-send]'));
                    } else if ($res.state === 2) {
                        errorMessage($code_error, true, $res.msg);
                    } else if ($res.state === 3) {
                        errorMessage($phone_error, true, $res.msg);
                    } else if ($res.state === 0) {
                        errorMessage($sms_error, true, $res.msg);
                        setTimeout(function () {
                            errorMessage($sms_error, false);
                        }, 3000);
                    } else if ($res.state === 4) {
                        errorMessage($sms_error, true, $res.msg);
                        setTimeout(function () {
                            errorMessage($sms_error, false);
                        }, 3000);
                    }
                }
            })
        });

        // 刷新图形验证码
        $('#bind-phone-new .win-m').find('.captchaimg-reduce').bind('click', function () {
            var $unique = new Date().getTime();
            var that = $(this);
            $.get('/bind/captcha', {'refresh': 1, 'v': $unique}, function (data) {
                that.attr('src', data.url);
            });
        });

        /**
         * 手机号码输入监听
         */
        $('#bind-phone-new input[name=phone-new]').bind('input propertychange', function () {
            var $phone = $.trim($(this).val());
            var $tip_dom = $('#bind-phone-new .phone-error');

            if ($phone.length == 11) {
                if (!checkTelNum($phone)) {
                    errorMessage($tip_dom, true, '请输入正确的手机号码');
                }
            } else {
                errorMessage($tip_dom, false);
            }
        });

        /**
         * 图形验证码输入监听
         */
        $('#bind-phone-new input[name=code-new]').bind('input propertychange', function () {
            var $code = $.trim($(this).val());
            var $tip_dom = $('#bind-phone-new .code-error');
            var $send_button = $('#bind-phone-new input[name=sms-send]');

            if ($code.length == 4) {
                $.post(Url._checkCaptchaNew, {'_csrf-frontend': _csrf, 'code': $code}, function (res) {
                    $res = $.parseJSON(res);

                    if ($res.msg === 'success') {
                        $send_button.removeClass('ed');
                        $send_button.attr('disabled', false);
                    } else {
                        errorMessage($tip_dom, true, '请输入正确的图形验证码');
                    }
                })
            } else {
                $send_button.addClass('ed');
                $send_button.attr('disabled', true);
                errorMessage($tip_dom, false);
            }
        });

        /**
         * 错误信息的展示和隐藏
         * @param _dom
         * @param _type
         * @param _message
         */
        function errorMessage(_dom, _type, _message) {
            if (_message !== '') {
                _dom.html(_message);
            }

            if (_type == true) {
                _dom.removeClass('hide');
            } else {
                _dom.addClass('hide');
            }
        };

        /**
         * 倒计时
         * @param obj
         * @private
         */
        function _clock(obj) {
            settime(obj)
        };
        // *********************************  引导用户绑定手机号结束  *****************************************************
    }
});

/**
 * 统计充值的方法
 * @param subtype
 */
function entrance(subtype) {
    $.ajax({
        type: "post",
        url: Url.entrance,
        data: {subtype: subtype, '_csrf-frontend': $('meta[name="csrf-token"]').attr('content'), uid: Param.uid},
        dataType: "json",
        xhrFields: {
            withCredentials: true
        },
        success: function (message) {
        }
    });
}

/**
 * 统计页面的按钮的点击
 * @param $button_type
 */
function buttonClickRecord($button_type) {
    var data = {
        'uid': Param.uid,
        'uv_id': Param.uv_id,
        'button_type': $button_type
    };
    $.post(Url.buttonClickRecordUrl, data, function (res) {
    });
}

/**
 * 作业评改点击记录 1免费提醒  2完成提醒
 * @param $type
 */
function taskButtonClickRecord($type, $this) {
    $this.closest('.task-tips').addClass('hide');
    var data = {
        'uid': Param.uid,
        'type': $type
    };

    $.ajax({
        url: Url.taskButtonClickRecordUrl,
        data: data,
        method: 'post',
        dataType: "json",
        xhrFields: {
            withCredentials: true
        },
        success: function () {
        }
    });
}


//全站通付费弹窗关闭 2017-08-25
$("#expire-win .close").on('click', function () {
    $("#expire-win").hide();
});

// 回到顶部的JS
$("#go-top").click(function () {
    $('body,html').animate({scrollTop: 0}, 500)
});

/******************************************签到start******************************************/
//今日签到
var signClick = false;
$("#sign-win .btn-not-sign").on('click', function () {
    if (signClick) {
        return false;
    } else {
        signClick = true;
        setTimeout(function(){signClick = false;}, 5000);
    }

    $.ajax({
        url: Url.signToday,
        method: 'post',
        data: {
            uid: Param.uid,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        success: function (response) {
            response = $.parseJSON(response);
            if (response.error == 0) {
                $(".btn-not-sign").addClass('hide');
                $(".btn-has-sign").removeClass('hide');
                $(".sing-m-main .sign-list .list").each(function (k, v) {
                    if ($(this).hasClass('on') && !$(this).hasClass('ed')) {
                        $(this).addClass('on ed');
                    }
                });

                var num = $(".sing-m-main .num").html();
                $(".sing-m-main .num").html('').html(parseInt(num) + 1);
                $("#new-header .sign-txt").html('已签');
                window.location.reload();
            }
        },
        error: function () {

        }
    });
});

//再次签到
$("#sign-win .btn-agagin-sign").on('click', function () {
    $(".failed").addClass('hide');
    $(".sing-m-main").removeClass('hide');

    getSignData();
});

function getSignData() {

    $.ajax({
        url: Url.sign,
        method: 'post',
        data: {
            uid: Param.uid,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        success: function (response) {
            response = $.parseJSON(response);
            switch (response.code) {
                case 10001:
                case 10003:
                    $(".sing-m-main").removeClass('hide');
                    $(".sing-m-main .sign-list .list").each(function (k, v) {
                        if (k < response.data.days) {
                            $(this).addClass('on ed');
                        }
                        if (k == response.data.days) {
                            $(this).addClass('on');
                        }
                    });
                    $(".sing-m-main .num").html(response.data.days);
                    break;
                case 10002:
                    $(".sing-m-main").removeClass('hide');
                    $(".sing-m-main .sign-list .list").each(function (k, v) {
                        if (k < response.data.days) {
                            $(this).addClass('on ed');
                        }
                    });
                    $(".btn-not-sign").addClass('hide');
                    $(".btn-has-sign").removeClass('hide');
                    $(".sing-m-main .num").html(response.data.days);
                    $(".sign-action span").html(response.data.gold);
                    break;
                case 10004:
                    $(".last").removeClass('hide');
                    $(".last .num").html(response.data.days);
                    $(".sign-action span").html(response.data.gold);
                    break;
                case 20001:
                    $("#sign-win").addClass('hide');
                    toLogin();
                    break;
            }
        },
        error: function () {
            $(".failed-error").removeClass('hide');
        }
    });
}

// 点击签到关闭按钮
$("#sign-win .sign-m .close").on('click', function () {
    $('#sign-win').addClass('hide');
});

// 我知道了 签到点击关闭
$("#sign-win .sign-m .i-know").on('click', function () {
    $('#sign-win').addClass('hide');
});

// 点击页面空白处关闭按钮
$("#sign-win .sign-m .close").on('click', function () {
    $('#sign-win').addClass('hide');
});
/******************************************签到end******************************************/


/******************************************导航start******************************************/

// 个人信息下拉 刷新
$(".user-nav-info").on('mousemove', function () {
    var $container = $(".user-nav-info");

    if (Param.isLogin == 0) {
        return false;
    }
    if ($container.hasClass('hasLoading')) {
        return false;
    }
    $.ajax({
        url: Url.personalDropDown,
        method: 'post',
        dataType: 'json',
        data: {
            uid: Param.uid,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        xhrFields: {
            withCredentials: true
        },
        beforeSend: function () {
            $container.addClass('hasLoading');
        },
        success: function (response) {
            if (response.error !== 1) {

                $(".user-drop-loading").addClass('hide');

                $item = $("#new-header .user-drop");

                //开启
                $item.removeClass('hide');

                var signHtml = '';
                if (response.hasSign) {
                    signHtml = '<a href="javascript:void(0);" class="day-check-button fl sign-btn-sidebar ed">已签到</a>';
                } else {
                    signHtml = '<a href="javascript:void(0);" class="day-check-button fl sign-btn-sidebar">立即签到</a>';
                }


                var $user_i =
                    '<div class="user-i">' +
                    '<a href="' + response.ucenter + '" target="_blank"><img src="' + response.avator + '"></a>' +
                    '<div class="user-r">' +
                    '<div class="user-t clearfix">' +
                    '<div class="fl user-name"><a href="' + response.ucenter + '" target="_blank">' + response.name + '</a></div>' +

                    '<div class="fl user-icon clearfix">' +
                    '<a href="' + response.phone_url + '" target="_blank"><i class="' + response.phone_identity + '"></i></a>' +
                    '<i class="' + response.vip_identity + '"></i>' +
                    '</div>' +
                    // '<div class="fr quit"><a href="' + response.logout + '">退出</a></div>' +
                    signHtml +

                    '</div>' +
                    '<div class="user-id">ID：' + response.id + '</div>' +
                    '<div class="hkb">我的虎课币：<span>' + response.gold + '</span>' +
                    '<a href="' + response.goldUrl + '" target="_blank">立即使用</a></div>' +
                    '</div>' +
                    '</div>';


                var $discount = '';
                if (response.discount) {
                    $discount =

                        '<div class="yhj">' +
                        '     <a href="' + response.discountUrl + '" class="fr" target="_blank">去使用>></a>' +
                        '     <a href="' + response.discountUrl + '" class="uyhj" target="_blank">' + response.discountWord + '</a>' +
                        '</div>';
                }

                var $surplus = '';
                if (!response.is_vip) {
                    //##invite_free_60
                    if (typeof response.is_open_free_60 != 'undefined' && response.is_open_free_60) {
                        $surplus += '<div class="surplus clearfix"><span class="fl">总免费学习数：<i>' + response.TotalFree + '次</i></span><span class="fr">今日可免费学习数：<i>' + response.free + '次</i></span></div><a href="' + response.inviteUrl + '" target="_blank" class="get-free">获得更多免费学习次数</a>';
                    }
                    $surplus += '<div class="surplus">今日可学教程<span>' + response.free + '个</span></div>' +
                        '<div class="vip-info">' +
                        '<p>开通VIP可收获更有自信的自己</p>' +
                        '<p>视频和图文<span>无限观看</span></p>' +
                        '<p>素材和源文件<span>无限下载</span></p>' +
                        '</div>';
                }

                if (!response.isAllVip) {
                    $surplus += '';
                }

                var buttonHtml = '';
                if (response.button.name) {
                    if (response.button.upgrade) {  //能升级的
                        if (response.isAllVip) {
                            buttonHtml = '<div class="upvip"><a href="' + response.button.url + '"target="_blank" onclick="entrance(57);buttonClickRecord(70);"><img src="//js.huke88.com/assets/revision/images/upvip2.png"></a></div>'
                        } else {
                            buttonHtml = '<div class="vip-btn"><a href="' + response.button.url + '" target="_blank" onclick="entrance(57);buttonClickRecord(70);">' + response.button.name + '</a></div>';
                        }
                    } else {    //不能升级的
                        buttonHtml = '<div class="vip-btn"><a href="' + response.button.url + '" target="_blank" onclick="entrance(2);buttonClickRecord(153);">' + response.button.name + '</a></div>'
                    }
                }

                buttonHtml +=
                    '<div class="spare-parts clearfix">' +
                    '<a href="' + response.down.center + '" target="_blank" class="fl collect">' +
                    '<span></span>' +
                    '<p>我的收藏</p>' +
                    '</a>' +
                    '<a href="' + response.studyCoreUrl + '" target="_blank" class="fl study-ed">' +
                    '<span></span>' +
                    '<p>学习中心</p>' +
                    '</a>' +
                    '<a href="' + response.down.thirdUrl + '" target="_blank" class="fl myvip">' +
                    '<span></span>' +
                    '<p>' + response.down.thirdName + '</p>' +
                    '</a>' +
                    '</div>' +
                    '<div class="user-bottom">' +
                    '<a href="' + response.logout + '" class="fr">退出</a>' +
                    '<a href="' + response.setting + '" target="_blank">账户设置</a>' +
                    '</div>';

                $item.html($user_i + $discount + $surplus + buttonHtml);
            } else {
                return false;
            }
        },
        error: function (response) {
            return false;
        }
    });

    return false
});

// 消息下拉 刷新
$(".user-news").on('mousemove', function () {
    var $container = $(".user-news");

    if ($container.hasClass('hasLoading')) {
        return false;
    }
    $.ajax({
        url: Url.MessageDropDown,
        method: 'post',
        dataType: 'json',
        data: {
            uid: Param.uid,
            type: 1,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        xhrFields: {
            withCredentials: true
        },
        beforeSend: function () {
            $container.addClass('hasLoading');
        },
        success: function (response) {

            if (response.error !== 1) {
                $container = $(".news-t-container");
                $(".news-t-loading").addClass('hide');
                $container.removeClass('hide');

                //头部菜单
                var systemReadHtml = '系统消息';
                var commentReadHtml = '评论回复';
                var lessonReadHtml = '课程提醒';
                if (response.status.system !== 0) {
                    systemReadHtml = '<i></i>' + systemReadHtml;
                }
                if (response.status.comment !== 0) {
                    commentReadHtml = '<i></i>' + commentReadHtml;
                }
                if (response.status.lesson !== 0) {
                    lessonReadHtml = '<i></i>' + lessonReadHtml;
                }

                var readHtml = '' +
                    '<div class="news-t clearfix" style="width:380px;"> ' +
                    '<span class="nav-system active">' + systemReadHtml + '</span>' +
                    '<span class="nav-comment">' + commentReadHtml + '</span>' +
                    '<span class="nav-lesson">' + lessonReadHtml + '</span>' +
                    '</div>';

                //系统消息
                var systemHtml = '';
                $.each(response.list.system, function (k, v) {
                    var systemIHtml = '';
                    if (v.noticeUserRecode === null) {
                        systemIHtml = '<i class="dian"></i>';
                    }
                    systemHtml += '    ' +
                        '<div class="list">' +
                        systemIHtml +
                        '<dl>' +
                        '<dt>' +
                        '<a href="' + v.url + '" target="_blank" onclick="totalNumDesc(); selfRemovePoint($(this))" data-reply-id="' + v.id + '">' + v.title + '</a>' +
                        '</dt>' +
                        '<dd>发布时间:' + v.time + '</dd>' +
                        '</dl>' +
                        '</div>';
                });
                systemHtml += '<div class="more-news"><a href="' + response.url.system + '" target="_blank">查看全部 ></a></div>';
                systemHtml = '<div class="news-con news-con-xitong">' + systemHtml + '</div>';
                systemHtml += '<div class="news-con pl news-con-comment" style="display: none;"><div class="loading"><img src="https://js.huke88.com/assets/revision/images/nav/hk_loading.gif"></div></div>' +
                    '<div class="news-con pl news-con-lesson" style="display: none;"><div class="loading"><img src="https://js.huke88.com/assets/revision/images/nav/hk_loading.gif"></div></div>';

                $container.html(readHtml + systemHtml);

                // 头部消息切换
                $(".news-list .news-t span").click(function () {

                    $(".news-t-container .nav-system").removeClass('active');
                    $(".news-t-container .nav-comment").removeClass('active');
                    $(".news-t-container .nav-lesson").removeClass('active');

                    if (Param.isLogin == 0) {
                        toLogin();
                        return false;
                    }
                    if ($(this).hasClass("nav-comment")) {
                        navAjaxGetMessage(2);
                    }
                    if ($(this).hasClass("nav-lesson")) {
                        navAjaxGetMessage(3);
                    }
                    var a = $(".news-list .news-t span").index(this);
                    $(this).addClass("active");
                    $(".news-list .news-con").hide().eq(a).show();

                });

                /**
                 * 获取评论回复和课程提醒
                 * @param type
                 * @returns {boolean}
                 */
                function navAjaxGetMessage(type) {
                    $container = $(".news-t-container");
                    if (type === 2 && $container.find(".news-con-comment").hasClass("has-content")) {
                        return false;
                    }
                    if (type === 3 && $container.find(".news-con-lesson").hasClass("has-content")) {
                        return false;
                    }
                    $.ajax({
                        url: Url.MessageDropDown,
                        method: 'post',
                        dataType: 'json',
                        data: {
                            uid: Param.uid,
                            type: type,
                            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
                        },
                        xhrFields: {
                            withCredentials: true
                        },
                        beforeSend: function () {
                            $container.addClass('hasLoading');
                        },
                        success: function (response) {

                            if (response.error !== 1) {
                                if (type === 2) {
                                    //评论回复
                                    var commentHtml = '';
                                    $.each(response.list.comment.list, function (k, v) {
                                        var commentIHtml = '';
                                        if (v.uid === '0' || v.uid === null) {
                                            commentIHtml = '<i class="dian"></i>';
                                        }
                                        commentHtml +=
                                            '<div class="list">' +
                                            commentIHtml +
                                            '<div class="user-avatar"><a href="' + v.url + '" target="_blank" onclick="changeStatusForLessonOrComment(2, $(this));" data-reply-id="' + v.id + '"><img src="' + v.avator + '"></a></div>' +
                                            '<dl>' +
                                            '<dt><a href="' + v.url + '" target="_blank" onclick="changeStatusForLessonOrComment(2, $(this));" data-reply-id="' + v.id + '">' + v.username + '</a>在《<a href="' + v.url + '" target="_blank" onclick="changeStatusForLessonOrComment(2, $(this));" data-reply-id="' + v.id + '">' + v.title + '</a>》回复您</dt>' +
                                            '<dd><a href="' + v.url + '" target="_blank" onclick="changeStatusForLessonOrComment(2, $(this));" data-reply-id="' + v.id + '">' + v.content + '</dd></a>' +
                                            '</dl>' +
                                            '</div>';
                                    });
                                    commentHtml += '<div class="more-news"><a href="' + response.url.comment + '" target="_blank">查看全部 ></a></div>';
                                    $container.find(".news-con-comment").addClass('has-content');
                                    $container.find(".news-con-comment").html(commentHtml);
                                } else if (type === 3) {
                                    //课程提醒
                                    var lessonHtml = '';
                                    $.each(response.list.lesson.list, function (k, v) {
                                        var lessonIHtml = '';
                                        if (v.readed_at == '0' || v.uid === null) {
                                            lessonIHtml = '<i class="dian"></i>';
                                        }
                                        lessonHtml +=
                                            '<div class="list">' +
                                            lessonIHtml +
                                            '<div class="user-avatar"><a href="' + v.center + '" target="_blank" onclick="changeStatusForLessonOrComment(3, $(this));" data-reply-id="' + v.id + '"><img src="' + v.avator + '"></a></div>' +
                                            '<dl>' +
                                            '<dt><a href="' + v.center + '" target="_blank">讲师' + v.name + '</a>上传了<span>' + v.time + '</span></dt>' +
                                            '<dd><a href="' + v.url + '" target="_blank" onclick="changeStatusForLessonOrComment(3, $(this));" data-reply-id="' + v.id + '">' + v.title + '</a></dd>' +
                                            '</dl>' +
                                            '</div>';
                                    });

                                    lessonHtml += '<div class="more-news"><a href="' + response.url.lesson + '" target="_blank">查看全部 ></a></div>';
                                    $container.find(".news-con-lesson").addClass('has-content');
                                    $container.find(".news-con-lesson").html(lessonHtml);
                                }
                            } else {
                                return false;
                            }
                        },
                        error: function (response) {
                            return false;
                        }
                    });
                }
            } else {
                return false;
            }
        },
        error: function (response) {
            return false;
        }
    });

    return false
});

navGetNotReadTotal();

function navGetNotReadTotal() {
    $number = $(".user-news .news-icon");
    if ($number.hasClass('hasRead')) {
        return false;
    }

    $.ajax({
        url: Url.MessageNotReadCount,
        method: 'post',
        dataType: 'json',
        data: {
            uid: Param.uid,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        xhrFields: {
            withCredentials: true
        },
        beforeSend: function () {
            $number.addClass('hasRead');
        },
        success: function (response) {

            if (response.error !== 1) {
                if (response.count !== 0) {
                    $number.html('<i>' + response.count + '</i>');
                }


                if (response.task.free.show === 1) {
                    var taskFreeHtml = '' +
                        '<div class="task-tips">' +
                        '你有一次<span>限时免费</span>评改的机会' + '<a href="' + response.task.free.url + '" target="_blank" onclick="taskButtonClickRecord(1, $(this))">立即使用</a>' +
                        '<i class="close" onclick="taskButtonClickRecord(1, $(this))">×</i>' +
                        '</div>';
                    $(".nav-task").append(taskFreeHtml);
                }

                if (response.task.finish.show === 1) {
                    var taskFinishHtml = '<div class="tasked-tips">你的作业已点评完成<a href="' + response.task.finish.url + '" onclick="taskButtonClickRecord(2, $(this))" target="_blank">立即查看</a></div>';
                    $(".user-nav-info").after(taskFinishHtml);
                }
            }
        }
    })
}

//头部固定
var animateFlag = 1;
$(document).scroll(function () {
    var scrollTop = $(document).scrollTop();
    if (scrollTop > 65) {
        $("#header").addClass('header-fixed');
        if (animateFlag) {
            animateFlag = 0;
            $("#header").stop().animate({
                'top': '0px'
            }, 500);
        }
    } else {
        if (animateFlag == 0) {
            animateFlag = 1;
            $("#header").removeClass('header-fixed');
            $("#header").animate({
                'top': '-65px'
            }, 500);
        }
    }
});

//banner加载
$('div.nav-banner div.img').each(function (k, v) {
    if (k !== 0) {
        var address = $(v).attr('data-address');
        var style = "background: url(" + address + ") no-repeat  center;background-size: cover";
        $(v).removeAttr('style').attr('style', style);
    }
});
var _hmq = _hmq || [];

function load() {

    function stopPropagation(e) {
        if (e.stopPropagation) {
            e.stopPropagation();
        } else {
            e.cancelBubble = false;
        }
    }

    var btn = $(".user-drop");
    var layer = $("#sign-win");
    btn.on('click', '.sign-btn-sidebar', function (e) {
        if (Param.uid == 0) {
            toLogin();
            return false;
        }

        layer.removeClass('hide');

        getSignData();
        stopPropagation(e);
    });

    window.onclick = function (e) {
        e = e || event;
        if (!$(".sign-m").is(e.target) && $(".sign-m").has(e.target).length === 0) {
            layer.addClass('hide');
        }

    };

    $("#slide-box").slide({
        mainCell: ".bd ul",
        autoPlay: true,
        trigger: "click",
        interTime: 4000
    });

    $(window).scroll(function () {
        if ($(window).scrollTop() > $(window).height()) {
            $('#go-top').removeClass('hide');
        } else {
            $('#go-top').addClass('hide');
        }
    });

    //handata
    var handata = $('#handata_uid');
    var uid = handata.attr('bind-data-uid');
    var is_pay = handata.attr('bind-data-payUser');
    _hmq.push(['_uid', uid]);
    _hmq.push(['_is_pay', is_pay]);
    (function () {
        var stat = document.createElement('script');
        stat.type = 'text/javascript';
        stat.async = true;
        stat.src = 'https://stats.hanmaker.com/stats.js?v=2.0';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(stat, s);
    })();
}


/**
 * 视频分类统计
 * @param video_id 视频id
 * @param type     存储类型（记录ippvuv时=1，其余为0）
 * @param field    当type为0时，记录的键值
 */
function videoClassificationStatistics(id, field, videoOrTag, type) {

    $.ajax({
        type: "post",
        url: Url.videoClassificationStatistics,
        data: {
            id: id,
            type: type,
            field: field,
            uv: Param.uv_id,
            videoOrTag: videoOrTag,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        dataType: "json",
        xhrFields: {
            withCredentials: true
        },
        success: function (message) {
        }
    });
}

// 头部导航悬浮
function fixed() {
    var scrollTop = $(document).scrollTop();
    if (scrollTop > 140) {
        $("#new-header").addClass("header-fixed");
        $('#body-container').css('padding-top', '60px');
    }
    else {
        $("#new-header").removeClass("header-fixed");
        $('#body-container').css('padding-top', '0');
    }
}

fixed();
$(window).scroll(function () {
    fixed();
});


/**
 * 视频曝光量对象(仅阅读数)
 * @type {{}}
 */

var exposure = {
    //懒加载id集合，实时清零
    ids: [],
    //当前页面id集合
    idCollections: [],
    //最大id数发送请求
    maxLength: 4,
    //页面类型
    type: 1,
    //特例id集合
    sids: [],
    //视频详情页id集合
    sidCollections: [],

    //初始化，3秒执行一次
    _init: function () {
        setInterval(this.verify, "3000");
    },

    //发送请求
    verify: function () {
        if (Param.openStatistics == '1') {
            if (exposure.ids.length >= exposure.maxLength) {
                duplicateRemoval(exposure.ids, exposure.idCollections);
                if (exposure.ids.length >= exposure.maxLength) {
                    videoExposureLogic(exposure.ids, exposure.type, 'display_times');
                    exposure.idCollections = $.unique($.merge(exposure.idCollections, exposure.ids));
                    exposure.ids = [];
                }
            }
        }
    },

    //特例：无法使用懒加载
    special: function () {
        $(window).scroll(function () {
            if (Param.openStatistics == '1') {
                if ($(window).scrollTop() >= 300 && exposure.sids.length > 0) {
                    videoExposureLogic(exposure.sids, exposure.type, 'display_times');
                    exposure.sids = [];
                }
            }
        });
    }
};

/**
 * 去除新增重复数据
 * @param $new
 * @param $total
 */
function duplicateRemoval(newlys, total) {
    if (total.length === 0) {
        return newlys;
    }
    $.each(newlys, function (k, v) {
        if ($.inArray(v, total) !== -1) {
            exposure.ids.splice(k);
        } else {
            exposure.idCollections.push(v);
        }
    });
}

/**
 * 视频曝光相关统计
 * @returns {boolean}
 */
function videoExposureLogic() {
    if (!arguments[0] || !arguments[1] || arguments[2] == '') {
        return false;
    }
    ids = arguments[0];
    type = arguments[1];
    field = arguments[2];

    //记录曝光量
    $.ajax({
        type: "post",
        url: Url.videoExposure,
        data: {
            type: type,
            video_id: ids,
            field: field,
            '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
        },
        dataType: "json",
        xhrFields: {
            withCredentials: true
        },
        success: function (message) {
        }
    });
}

/**
 * 课程提醒 评论回复提醒 点击阅读后状态改变
 * @param type
 * @param _self
 * @returns {boolean}
 */
function changeStatusForLessonOrComment(type, _self) {
    var $sid = _self.attr('data-reply-id');

    // 如果已经没有红色状态标记 不做处理
    if (_self.parents('.list').find('i.dian').length <= 0) {
        return false;
    }

    if (type == 3) {        // 课程提醒
        ajaxChangeBegin(Url.lessonNoticeStatusChange);
    } else if (type == 2) { // 视频评论
        ajaxChangeBegin(Url.videoCommentStatusChange);
    }

    /**
     * 后端记录表 改变提醒信息真实状态
     * @param _url
     */
    function ajaxChangeBegin(_url) {
        $.ajax({
            url: _url,
            type: 'post',
            data: {
                '_csrf-frontend': $('meta[name="csrf-token"]').attr('content'),
                'id': $sid
            },
            dataType: 'json',
            success: function (message) {
                if (0 == message.isError) {
                    totalNumDesc();         // 总未读数减一
                    selfRemovePoint(_self); // 红点去除
                }
            },
            error: function (res) {
                return false;
            }
        })
    }
}

/**
 * 总未读提醒数量减一
 */
function totalNumDesc() {
    var total_num = parseInt($('.news-icon.hasRead').find('i').text());

    if (total_num > 0) {
        $('.news-icon.hasRead').find('i').text(total_num - 1);
    }
}

/**
 * 除去自身对应的红色状态点
 * @param _dom
 */
function selfRemovePoint(_dom) {
    _dom.parents('.list').find('i.dian').remove();
}

/**
 * 多处登录提醒
 */
$(function () {
    $(".login-tips").on("click", ".close,.btn", function () {
        $(".login-tips").addClass("hide");
        window.location.reload();
    });
});

/**
 * 赠送VIP关闭弹窗按钮
 */
$(".v1,.v2 .close").on('click', function () {
    $(this).closest('.vip-win').addClass('hide');
});

$(".v2 .close-r").on('click', function () {
    $('.v2').addClass('hide');
});

$('.welfare-win').on('click', '.close', function() {
    $('#loginModal').addClass('hide');

});
$('.welfare-win2').on('click', '.close', function() {
    $('.welfare-win2').addClass('hide');
});


//输入字符按钮变色
function pointer() {
    var curLength = $('.add-album .txt').val().length;
    if (curLength > 0) {
        $('.add-album .btn').addClass('pointer')
    } else {
        $('.add-album .btn').removeClass('pointer')
    }
}

/**
 * 导航 标签点击次数统计
 */
$('p.tags-list-click a').bind('click', function () {
    var $this = $(this);
    var $parent_tag_id = $this.parent('.tags-list-click').attr('data-parent-tag-id');
    var $parent_tag_name = $this.parent('.tags-list-click').attr('data-parent-tag-name');
    var $tag_id = $this.attr('data-tag-id');
    var $tag_name = $this.attr('data-tag-name');
    var $class_id = $this.parent('.tags-list-click').attr('data-class');

    $.ajax({
        url: Url.tagClickStatistics,
        dataType: 'Json',
        method: 'Post',
        data: {
            'parent_tag_id': $parent_tag_id,
            'tag_id': $tag_id,
            'parent_tag_name': $parent_tag_name,
            'tag_name': $tag_name,
            'class': $class_id
        },
        success: function ($res) {

        }
    });
});

/**
 * 首页点击统计
 * @param $position_id
 */
function pagePositionClick($position_id) {

    $.ajax({
        url: Url.pagePositionClick,
        dataType: 'Json',
        method: 'Post',
        data: {
            'position_id': $position_id
        },
        success: function ($res) {

        }
    });
}

/**
 *统计
 * @param url             url
 * @param data            object
 * @param withCredentials true|false
 */
function sendStatisticsCommonFunction(url, data, withCredentials) {
    $.ajax({
        url: url,
        dataType: 'json',
        method: 'Post',
        data: data,
        xhrFields: {
            withCredentials: withCredentials
        },
        success: function ($res) {
        }
    });
}

/**
 * 打开客服按钮
 */
function open_kefu(){
	window.open('http://wpa.b.qq.com/cgi/wpa.php?ln=2&uin=800190846&eid=218808P8z8p8y8z8R8x8p&o=www.huke88.com&q=7&ref='+document.location, '_blank', 'height=544, width=644,toolbar=no,scrollbars=no,menubar=no,status=no');
}

/**
 * 底部友链左右滑动
 */
function friendSlide() {
    var cm = $('.friends-link .slide-m').width();
    sm = $('.friends-link .link-m').width();
    dm = sm - cm;
    if (sm > cm) {
        $('.friends-link .link-m').css({
            left: '0',
        });
        $('.link-t .next').show();
        $('.link-t').on('click', '.next', function () {
            $('.friends-link .link-m').css({
                left: -dm,
            });
            $(this).hide();
            $('.prev').show();
        });
        $('.link-t').on('click', '.prev', function () {
            $('.friends-link .link-m').css({
                left: '0'
            });
            $(this).hide();
            $('.next').show();
        });
    } else {
        $('.link-t .next').hide();
    }

}

friendSlide();
$(window).resize(function () {
    friendSlide();
});

/* COMBO: filename = js/index.js, type = application/javascript, resp = 200 */

// 切换封装
(function ($) {
    $.fn.extend({
        tabCut:function (options) {
            var settings = {
                content:$('ul li'),// 切换的内容
                current:'current', // 切换的动态类
                cutway:"mouseover" // 切换的方式
            };
            settings = $.extend({},settings,options);

            this.on('' + settings.cutway + '',function () {
                var $this = $(this);
                var $t = $this.index();
                $this.addClass('' + settings.current + '').siblings().removeClass('' + settings.current + '');
                settings.content.eq($t).show().siblings().hide();
            });
            return this;
        }
    })
})(jQuery);
// 限制文字数封装方法
(function ($) {
    $.fn.extend({
        setTextNum:function (options) {
            var settings = {
                Num:8,
                end:"......"
            };
            settings = $.extend({},settings,options);
            $this = $(this);
            $str = $this.html();
            if($str.length<=settings.Num){
                $this.html($str);
            }else{
                $strf = $str.substr(0,settings.Num);
                $i = $strf+settings.end;
                $this.html($i);
            }
            return this;
        }

    })
})(jQuery);

//头部固定
var animateFlag = 1;
$(document).scroll(function () {
    var scrollTop = $(document).scrollTop();
    if (scrollTop > 65) {
        $("#header").addClass('header-fixed');
        if (animateFlag) {
            animateFlag = 0;
            $("#header").stop().animate({
                'top': '0px'
            }, 500);
        }
    } else {
        if (animateFlag == 0) {
            animateFlag = 1;
            $("#header").removeClass('header-fixed');
            $("#header").animate({
                'top': '-65px'
            }, 500);
        }
    }
});

// $tem.find(".client-mid .vip-box").slide({
//     mainCell: ".has-box",
//     autoPage: true,
//     effect: "leftLoop",
//     autoPlay: false,
//     vis: 3,
//     prevCell: '.prev-btn',
//     nextCell: '.next-btn'
// });
$(".header .client-mid .vip-box").slide({
    mainCell: ".has-box",
    autoPage: true,
    effect: "leftLoop",
    autoPlay: false,
    vis: 3,
    prevCell: '.prev-btn',
    nextCell: '.next-btn'
});
// 返回顶部
$("#go-top").click(function () {
    $('body,html').animate({scrollTop: 0}, 500)
});


/* COMBO: filename = js/jquery.lazyload.js, type = application/javascript, resp = 200 */
/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.3
 *
 */

(function($, window, document, undefined) {
    var $window = $(window);

    $.fn.lazyload = function(options) {
        var elements = this;
        var $container;
        var settings = {
            threshold       : 0,
            failure_limit   : 0,
            event           : "scroll",
            effect          : "show",
            container       : window,
            data_attribute  : "original",
            skip_invisible  : true,
            appear          : null,
            load            : null,
            placeholder     : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"
        };

        function update() {
            var counter = 0;

            elements.each(function() {
                var $this = $(this);
                if (settings.skip_invisible && !$this.is(":visible")) {
                    return;
                }
                if ($.abovethetop(this, settings) ||
                    $.leftofbegin(this, settings)) {
                        /* Nothing. */
                } else if (!$.belowthefold(this, settings) &&
                    !$.rightoffold(this, settings)) {
                        $this.trigger("appear");
                        /* if we found an image we'll load, reset the counter */
                        counter = 0;
                } else {
                    if (++counter > settings.failure_limit) {
                        return false;
                    }
                }
            });

        }

        if(options) {
            /* Maintain BC for a couple of versions. */
            if (undefined !== options.failurelimit) {
                options.failure_limit = options.failurelimit;
                delete options.failurelimit;
            }
            if (undefined !== options.effectspeed) {
                options.effect_speed = options.effectspeed;
                delete options.effectspeed;
            }

            $.extend(settings, options);
        }

        /* Cache container as jQuery as object. */
        $container = (settings.container === undefined ||
                      settings.container === window) ? $window : $(settings.container);

        /* Fire one scroll event per scroll. Not one scroll event per image. */
        if (0 === settings.event.indexOf("scroll")) {
            $container.bind(settings.event, function() {
                return update();
            });
        }

        /*2017-10-22新增：曝光量*/
        function pushExpose(self) {
            var id = self.attr("data-exposure-id");
            if(id !== undefined){
                if($.inArray(id, exposure.idCollections)  === -1){
                    exposure.ids.push(id);
                }
            }
        }

        this.each(function() {
            var self = this;
            var $self = $(self);

            self.loaded = false;

            /* If no src attribute given use data:uri. */
            if ($self.attr("src") === undefined || $self.attr("src") === false) {
                if ($self.is("img")) {
                    $self.attr("src", settings.placeholder);
                }
            }

            /* When appear is triggered load original image. */
            $self.one("appear", function() {
                if (!this.loaded) {
                    if (settings.appear) {
                        var elements_left = elements.length;
                        settings.appear.call(self, elements_left, settings, true);
                    }
                    $("<img />")
                        .bind("load", function() {
                            pushExpose($self);

                            var original = $self.attr("data-" + settings.data_attribute);
                            $self.hide();
                            if ($self.is("img")) {
                                $self.attr("src", original);
                            } else {
                                $self.css("background-image", "url('" + original + "')");
                            }
                            $self[settings.effect](settings.effect_speed);

                            self.loaded = true;

                            /* Remove image from array so it is not looped next time. */
                            var temp = $.grep(elements, function(element) {
                                return !element.loaded;
                            });
                            elements = $(temp);

                            if (settings.load) {
                                var elements_left = elements.length;
                                settings.load.call(self, elements_left, settings);
                            }
                        })
                        .attr("src", $self.attr("data-" + settings.data_attribute));
                }
            });

            /* When wanted event is triggered load original image */
            /* by triggering appear.                              */
            if (0 !== settings.event.indexOf("scroll")) {
                $self.bind(settings.event, function() {
                    if (!self.loaded) {
                        $self.trigger("appear");
                    }
                });
            }
        });

        /* Check if something appears when window is resized. */
        $window.bind("resize", function() {
            update();
        });

        /* With IOS5 force loading images when navigating with back button. */
        /* Non optimal workaround. */
        if ((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)) {
            $window.bind("pageshow", function(event) {
                if (event.originalEvent && event.originalEvent.persisted) {
                    elements.each(function() {
                        $(this).trigger("appear");
                    });
                }
            });
        }

        /* Force initial check if images should appear. */
        $(document).ready(function() {
            update();
        });

        return this;
    };

    /* Convenience methods in jQuery namespace.           */
    /* Use as  $.belowthefold(element, {threshold : 100, container : window}) */

    $.belowthefold = function(element, settings) {
        var fold;

        if (settings.container === undefined || settings.container === window) {
            fold = (window.innerHeight ? window.innerHeight : $window.height()) + $window.scrollTop();
        } else {
            fold = $(settings.container).offset().top + $(settings.container).height();
        }

        return fold <= $(element).offset().top - settings.threshold;
    };

    $.rightoffold = function(element, settings) {
        var fold;

        if (settings.container === undefined || settings.container === window) {
            fold = $window.width() + $window.scrollLeft();
        } else {
            fold = $(settings.container).offset().left + $(settings.container).width();
        }

        return fold <= $(element).offset().left - settings.threshold;
    };

    $.abovethetop = function(element, settings) {
        var fold;

        if (settings.container === undefined || settings.container === window) {
            fold = $window.scrollTop();
        } else {
            fold = $(settings.container).offset().top;
        }

        return fold >= $(element).offset().top + settings.threshold  + $(element).height();
    };

    $.leftofbegin = function(element, settings) {
        var fold;

        if (settings.container === undefined || settings.container === window) {
            fold = $window.scrollLeft();
        } else {
            fold = $(settings.container).offset().left;
        }

        return fold >= $(element).offset().left + settings.threshold + $(element).width();
    };

    $.inviewport = function(element, settings) {
         return !$.rightoffold(element, settings) && !$.leftofbegin(element, settings) &&
                !$.belowthefold(element, settings) && !$.abovethetop(element, settings);
     };

    /* Custom selectors for your convenience.   */
    /* Use as $("img:below-the-fold").something() or */
    /* $("img").filter(":below-the-fold").something() which is faster */

    $.extend($.expr[":"], {
        "below-the-fold" : function(a) { return $.belowthefold(a, {threshold : 0}); },
        "above-the-top"  : function(a) { return !$.belowthefold(a, {threshold : 0}); },
        "right-of-screen": function(a) { return $.rightoffold(a, {threshold : 0}); },
        "left-of-screen" : function(a) { return !$.rightoffold(a, {threshold : 0}); },
        "in-viewport"    : function(a) { return $.inviewport(a, {threshold : 0}); },
        /* Maintain BC for couple of versions. */
        "above-the-fold" : function(a) { return !$.belowthefold(a, {threshold : 0}); },
        "right-of-fold"  : function(a) { return $.rightoffold(a, {threshold : 0}); },
        "left-of-fold"   : function(a) { return !$.rightoffold(a, {threshold : 0}); }
    });

})(jQuery, window, document);

/* COMBO: filename = js/album/albumAjax.js, type = application/javascript, resp = 200 */

    /*****************************************合辑JS*****************************************************/
// 添加合集
    var $album = {

        //初始化，绑定事件
        _init: function () {
            //点击其他地方关闭弹窗
            $(document).bind('click', function () {
                $('#album-win').addClass('hide');
            });

            //.album-win-btn这个class来触发弹窗
            $album._config.$btn.click(function (e) {
                if(Param.uid == 0){
                    toLogin();
                    return false;
                }
                $album.ajaxGetPopupContent($(this));
                stopPropagation(e);
            });

            $album._config.$container.on('click', function (e) {
                stopPropagation(e);
            });

            // 创建合集
            $album._config.$container.on('click', '.add-album .btn', function (e) {
                $album.ajaxCreateAlbum();
                stopPropagation(e);
            });

            // 添加到合集
            $album._config.$container.on('click', '.add-album-btn', function (e) {
                $album.ajaxCreateAlbumVideoRelation($(this).closest('.plist').attr('data-id'));
                stopPropagation(e);
            });

            // 页面大小变化 重新计算弹窗位置
            $(window).resize(function () {
                $album.popupSite(1);
            });

            //收藏成功
            $('.album-collect-success').on('click', 'span', function () {
                $('.album-collect-success').addClass('hide')
            });

            //详情页绑定事件（收藏）
            $album._config.detailBtn.collect.on('click', function () {
                $album.ajaxCreateAlbumVideoRelationDetail($(this).attr('data-id'), 'collect');
            });

            //详情页绑定事件（取消收藏）
            $album._config.detailBtn.collectd.on('click', function () {
                $album.ajaxCreateAlbumVideoRelationDetail($(this).attr('data-id'), 'collectd');
            });

            //处理参数
            if ($album._config.passive_id == 0 && Param.passive_id != 'undefined') {
                $album._config.passive_id = Param.passive_id;
            }

            //处理参数
            if (Param.album_type != 'undefined') {
                $album._config.type = Param.album_type;
            }

            $("#album-win .add-album input").focus(function () {
                $("#album-win .add-album input").css('border', '1px #e8e8e8 solid');
            });

            //隐藏创建成功的提示框
            $('.album-collect-success').on('click', 'span', function () {
                $('.album-collect-success').addClass('hide')
            });

            // 点击页面其他地方隐藏添加合集弹窗
            function stopPropagation(e) {
                if (e.stopPropagation)
                    e.stopPropagation();
                else {
                    e.cancelBubble = true;
                }
            }
        },

        _config: {
            passive_id: 0,
            type: 1,
            $container: $("#album-win"),
            detailBtn: {
                collect: $("#album .collect"),
                collectd: $("#album .collected")
            },
            $btn: $(".album-win-btn"),
            inputBtnStatus: 1,
            $relationBtn: $(".add-album-btn")
        },

        _login: function () {
            if (Param.uid == 0) {
                toLogin();
                return false;
            }
        },

        //重新定位弹窗位置
        popupSite: function (t) {
            var wins = $album._config.$container.hasClass('hide');
            if (wins == false || t === 1) {

                var t = ($('.album-win-btn').offset().top) - 228;
                l = ($('.album-win-btn').offset().left) - 187;
                $('#album-win').css({
                    top: t,
                    left: l
                });

                var b = ($('.album-win-btn').offset().top) + 40;
                s = ($('.album-win-btn').offset().left) - 153;

                $('.album-collect-success').css({
                    top: b,
                    left: s
                });
            }
        },

        //初始化弹窗（点击时）
        ajaxGetPopupContent: function ($btn) {

            $album._login();

            if ($album._config.$container.hasClass('hasHtml')) {
                return false;
            }

            $album._config.$container.addClass('hasHtml')

            $.ajax({
                url: Url.ajaxGetPopupContentUrl,
                data: {passive_id: $album._config.passive_id},
                dataType: 'JSON',
                type: 'get',
                success: function (response) {
                    $album._config.$container.removeClass('hasHtml')
                    if (response.error === 0) {
                        success(response.data);
                    } else {
                        error();
                    }
                },
                error: function () {
                    error();
                }
            });

            function success(data) {


                var html = '';

                $.each(data.albums, function (k, v) {
                    if ($.inArray(v['id'], data.collectAlbumIds) !== -1) {
                        html += '<div class="plist"><span>' + v.name + '</span><i class="fr">（已添加）</i></div>';
                    } else {
                        html += '<div class="plist" data-id="' + v['id'] + '"><span>' + v.name + '</span><a href="javascript:;" class="add-album-btn">添加</a></div>';
                    }
                });

                if (html != '') {
                    $album._config.$container.find(".album-plist").html(html);
                }

                $album._config.$container.removeClass('hide');
                $album.popupSite(1);
                $album._config.$container.find(".add-album input").css('border', '');

            }

            function error() {
                $album._config.$container.html(
                    '<div style="font-size: 18px;margin: 0 auto;width: 109px;padding-top: 96px;">数据读取失败</div>');
                $album._config.$container.removeClass('hide');
            }
        },

        //创建合辑
        ajaxCreateAlbum: function () {

            if ($album._config.inputBtnStatus === 0) {
                return false;
            }

            $album._login();

            var vl = $("#album-win .add-album input").val();
            if (vl == '') {
                $("#album-win .add-album input").css('border', '1px solid red');
                return false;
            }
            $album._config.inputBtnStatus = 0;


            $.ajax({
                url: Url.ajaxCreateAlbumUrl,
                data: {name: vl, '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')},
                dataType: 'JSON',
                type: 'post',
                success: function (response) {
                    if (response.error === 0) {

                        if ($(".album-plist .album-plist-empty").length != 0) {
                            $(".album-plist").html('');
                        }

                        //$('.album-plist').scrollTop(0).find('.plist').removeClass('active')//添加合集的时候默认滚动的div顶部，防止看不见新添加的合集而重复添加
                        // $('#album-win .album-plist .plist:eq(0)').after('<div class="plist active" data-id="'+ response.id +'">' + vl + '</div>')
                        $('#album-win .album-plist').prepend('<div class="plist" data-id="' + response.id + '"><span>' + vl + '</span><a href="javascript:;" class="add-album-btn">添加</a></div>')

                        $(".add-album input").val('');
                        $("#album-win .add-album input").on('foucs', function () {
                            $(this).css('border', '');
                        });
                        $album._config.inputBtnStatus = 1;
                        $("#album-win .add-album input").val('');
                        $album._config.$btn.removeClass('pointer');
                    } else {

                    }
                },
                error: function () {

                }
            });
        },

        ajaxCreateAlbumVideoRelation: function (dataId) {
            $.ajax({
                url: Url.ajaxCreateAlbumVideoRelationUrl,
                data: {
                    id: dataId,
                    passive_id: $album._config.passive_id,
                    type: $album._config.type,
                    '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
                },
                dataType: 'JSON',
                type: 'post',
                success: function (response) {
                    if (response.error === 0) {
                        $album._config.$container.addClass('hide');
                        $(".album-collect-success").removeClass('hide');
                    } else {
                        $album._config.$container.find(".bottom-btn fl").html(response.message);
                        $album._config.$container.find(".bottom-btn fl").addClass('hide');
                    }
                },
                error: function () {

                }
            });
        },

        ajaxCreateAlbumVideoRelationDetail: function (id, type) {
            $album._login();

            var url = '';
            if (type == 'collect') {
                url = Url.ajaxCreateAlbumVideoRelationUrl;
            } else {
                url = Url.ajaxDeleteAlbumVideoRelationUrl;
            }

            $.ajax({
                url: url,
                data: {
                    id: id,
                    passive_id: $album._config.passive_id,
                    type: $album._config.type,
                    '_csrf-frontend': $('meta[name="csrf-token"]').attr('content')
                },
                dataType: 'JSON',
                type: 'post',
                success: function (response) {
                    if (response.error === 0) {
                        if (type == 'collect') {
                            $album._config.detailBtn.collect.addClass('hide');
                            $album._config.detailBtn.collectd.removeClass('hide');
                        } else {
                            $album._config.detailBtn.collect.removeClass('hide');
                            $album._config.detailBtn.collectd.addClass('hide');
                        }

                    } else {
                        console.log(response.message);
                    }
                },
                error: function () {

                }
            });

        }
    };

    $(".recommend-album .close").on('click', function () {
        $(".recommend-album").addClass('hide')
    });
    /*****************************************合辑JS*****************************************************/


/* COMBO: filename = js/comment/index.v8.js, type = application/javascript, resp = 200 */
$(function () {



    var comment = {

        defaults  : {
            'score': true,       //评分
            'difficulty': true, //难易程度
            'study': true,      //是否学习
            'uploadNum': 1,
            'page':Param.pages - 1
        },

        //初始化评论
        init: function () {

            this.bind();
            this.initUpload();
            this.submitComment();
            this.getLists(this.defaults.page, 0);
            this.change();
        },

        //初始化上传
        initUpload: function () {

            if(Param.uid === 0){
                $("#picker1,picker2").on('click', function () {
                    toLogin();
                    return false;
                });
            }

            if(this.defaults.uploadNum > 2){
                this.defaults.uploadNum = 2;
            }

            if(this.defaults.uploadNum == 0){
                return false;
            }

            for(var $i=1; $i <= this.defaults.uploadNum; $i++){
                upload('#picker'+ $i);
            }

            function upload($button) {

                if(Param.uid == 0){

                    $(".uploader-container").on('click', function () {
                        toLogin();
                    });
                    return false;
                }

                var $messageContanier = $($button).closest('.comment-wrap').find('.progress-bar '),
                    $uploaderInput = $($button).closest('.comment-wrap').find('.uploaderInput');

                uploader = WebUploader.create({
                    auto: true,
                    swf: Url.webUploaderSwf,
                    server: Url.webUploaderApiUrl,
                    pick: $button,
                    fileSingleSizeLimit: 1024 * 1024 * 2,
                    duplicate: true,
                    accept: {
                        title: '评论图片上传',
                        extensions: 'jpg,jpeg,png,gif',
                        mimeTypes: 'image/jpg,image/jpeg,image/png,image/gif'
                    },
                });

                // 当有文件添加进来的时候
                uploader.on('fileQueued', function (file) {
                    $messageContanier.find(".hi3de .file-name").html(file.name);
                    $messageContanier.find(".pbar-num").removeClass('hide').html('0%');
                    $messageContanier.find('.pbar-fth').removeClass('hide');
                    $messageContanier.find('.pbar-line').css('width', '0%');
                });

                uploader.on('uploadBeforeSend', function (Object, data, headers) {
                    $.ajax({
                        type: "POST",
                        url: Url.uploadCommentPictureUrl,
                        dataType: 'json',
                        data: {'_csrf-frontend': $('meta[name="csrf-token"]').attr("content")},
                        async: false,
                        success: function (res) {
                            data.policy = res.policy;
                            data.signature = res.signature;
                        }
                    });
                });

                // 文件上传过程中创建进度条实时显示。
                uploader.on('uploadProgress', function (file, percentage) {
                    $messageContanier.find(".hi3de").addClass('hide');
                    var percent = parseInt(percentage * 100) + '%';
                    $messageContanier.find('.pbar-line').css('width', percent);
                    $messageContanier.find(".pbar-num").html(percent);
                });

                //上传成功
                uploader.on('uploadSuccess', function (file, response) {
                    $messageContanier.find(".pbar-num").addClass('hide');
                    $messageContanier.find('.pbar-fth').addClass('hide');
                    $messageContanier.find(".hi3de").removeClass('hide');
                    $messageContanier.find(".hi3de a").attr("onclick", "viewBigImg('" + Url.ypImageDomain + response.url + "')");
                    $uploaderInput.val(response.url);
                });

                //上传出错
                uploader.on('uploadError', function (file, error) {
                    layer.msg('上传出错，请刷新页面重试');
                });

                //上传完成
                uploader.on('uploadComplete', function (file) {

                });

                //上传错误
                uploader.on('error', function (error) {
                    switch (error) {
                        case 'Q_EXCEED_NUM_LIMIT':
                            layer.msg('只能上传一个文件');
                            break;
                        case 'F_EXCEED_SIZE':
                            layer.msg('文件大小超出限制，最多只能上传2Mb');
                            break;
                        case 'Q_TYPE_DENIED' :
                            layer.msg('文件类型错误，只能上传jpg,png,gif格式图片');
                            break;
                        case 'F_DUPLICATE':
                            layer.msg('重复上传');
                            break;
                    }
                });
            }
        },

        getLists: function (page, onlyComment) {

            var commentSort = $(".comment-sort");
            var has_content = commentSort.find('.check').eq(0).hasClass('active');
            var has_image = commentSort.find('.check').eq(1).hasClass('active');
            var sort = commentSort.find('.down-sort .active').attr('data-id');

            if(has_content === false){
                has_content = 0;
            }else{
                has_content = 1;
            }
            if(has_image === false){
                has_image = 0;
            }else{
                has_image = 1;
            }

            $.ajax({
                type: 'POST',
                url: Url.getCommentList,
                dataType: 'json',
                data: {
                    "video_id": Param.video_id,
                    "pages": page,
                    "onlyComment": onlyComment,
                    "has_content": has_content,
                    "has_image": has_image,
                    "sort": sort,
                    "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                },
                xhrFields: {
                    withCredentials: true
                },
                success: function (response) {

                    var html = '';

                    if(response.comment.list.length !== 0){
                        var recommand_info = response.comment.recommandVideoInfo;
                        $.each(response.comment.list, function (k, v) {
                            //星级
                            var star = '';
                            if(comment.defaults.score){
                                star += '<span class="star-level">';
                                for (var i=0;i<5;i++)
                                {
                                    if(i < v.score){
                                        star += '<i class="full-star"></i>';
                                    }else{
                                        star += '<i></i>';
                                    }
                                }
                                star += '</span>';
                            }

                            //客户端
                            var client = '';
                            if(v.client !== '0'){
                                if(v.client === '1'){
                                    client = '<span class="fl">来自<a href="'+Url.app+'" class="down-link" target="_blank">安卓客户端</a></span>';
                                }else{
                                    client = '<span class="fl">来自<a href="'+Url.app+'" class="down-link" target="_blank">iOS客户端</a></span>';
                                }
                            }

                            //图片
                            var picture = '';
                            if(v.image_url !== ""){
                                picture = '<div class="list-img"><a href="javascript:;" class="viewBigImg" onclick="viewBigImg(\''+v.big_image_url+'\')"><img src="'+v.image_url+'" alt=""></a></div>';
                            }

                            //二级评论
                            var reply = '';
                            if(v.reply.length !== 0){
                                $.each(v.reply, function (kk, vv) {

                                    var replyContent = '<a href="'+vv.owner_url+'" target="_blank">'+vv.owner_username+'</a>';
                                    if(vv.target_uid !== vv.owner_uid){
                                        replyContent += '<span>回复</span><a href="'+vv.target_url+'" target="_blank">'+vv.taget_username+'</a>';
                                    }

                                    var zan_reply = '';
                                    if(vv.thumb !== null && vv.thumb !== undefined ){
                                        zan_reply = 'active disabled';
                                    }
                                    var recommand = '';
                                    var hasRecommand = false;
                                    if(vv.offical_video_id !== '0'){
                                        var recommand_response_info = {};
                                        $.each(recommand_info, function (rek, rev) {
                                            if(rek == vv.offical_video_id){
                                                recommand_response_info = rev;
                                                hasRecommand = true;
                                            }
                                        });

                                        if(hasRecommand){
                                            recommand = '' +
                                                '<div class="comment-course tj">' +
                                                '    <div class="img">' +
                                                '        <a href="'+recommand_response_info.href+'" target="_blank">' +
                                                '            <img src="'+recommand_response_info.src+'" alt="">' +
                                                '        </a>' +
                                                '    </div>' +
                                                '    <div class="img-r">' +
                                                '        <p class="p1">' +
                                                '            <a href="'+recommand_response_info.href+'" target="_blank">'+recommand_response_info.title+'</a>' +
                                                '        </p>' +
                                                '        <p class="p2">' +
                                                '            <span class="fr">评论数：'+recommand_response_info.video_reply+'</span>' +
                                                '            <span class="fr">学习人数：'+recommand_response_info.video_play+'</span>' +
                                                '            <span class="user-name">' +
                                                '                <a class="avatar" href="'+recommand_response_info.teacher_href+'" target="_blank">' +
                                                '                    <img src="'+recommand_response_info.avator+'" class="avatar">' +
                                                '                </a>' +
                                                '                讲师：<a href="'+recommand_response_info.teacher_href+'" target="_blank">'+recommand_response_info.name+'</a>' +
                                                '            </span>' +
                                                '        </p>' +
                                                '    </div>' +
                                                '</div>';
                                        }
                                    }


                                    replyContent = '<div class="list-txt-two">'+replyContent;
                                    reply += '' +
                                        '<div class="comment-two" data-id="'+vv.id+'">' +
                                        '<div class="avatar-two"><a href="'+vv.owner_url+'" target="_blank"><img src="'+vv.owner_avator+'"></a></div>' +
                                        replyContent + vv.content + '</div>' +
                                        '<div class="list-b-two"><span>'+vv.created_at+'</span><span class="zan-btn '+zan_reply+'"><i></i>'+vv.thumbs+'</span><span class="reply-btn" data-id="'+vv.id+'" data-username="'+vv.owner_username+'" data-type="2">回复</span></div>' +
                                        recommand +
                                        '</div>';
                                });
                            }

                            //回复评论底部
                            var replyFooter = '';
                            if(parseInt(v.replay_count) > 3){
                                replyFooter = '<div class="more-comment-two">共'+v.replay_count+'条回复<a href="javascript:;">点击查看</a></div>';
                            }

                            //置顶操作
                            var top = '';
                            if(v.stick_mark === '1'){
                                top = '<span class="top-comment">置顶</span>';
                            }

                            //管理员/个人权限
                            var outsideBtn = '';
                            var insideBtn = '';
                            if(response.auth){
                                if(v.stick_mark === '1'){
                                    outsideBtn =
                                        '<span class="fr del-btn" data-id="'+v.id+'">删除</span>' +
                                        '<span class="fr cancel-top-btn" data-id="'+v.id+'">取消置顶</span>';
                                }else{
                                    outsideBtn =
                                        '<span class="fr del-btn" data-id="'+v.id+'">删除</span>' +
                                        '<span class="fr top-btn" data-id="'+v.id+'">置顶</span>';
                                }
                            }

                            if(v.is_self){
                                insideBtn =
                                    '<span class="del" data-id="'+v.id+'">删除</span>';
                            }

                            //点赞
                            var zan = '';
                            if(v.hasOwnProperty('thumb')){
                                if(v.thumb !== null){
                                    zan = 'active disabled';
                                }
                            }

                            //标签
                            var tags = '';
                            if(v.tags.length !== 0){

                                $.each(v.tags, function (kk, vv) {
                                    if(vv.tag){
                                        tags += '<span class="diff">'+vv.tag.name+'</span>';
                                    }
                                });
                            }

                            html += '' +
                                '<div class="comment-one" data-page-id="1" data-comment-id="'+v.id+'">' +
                                '    <div class="avatar"><a href="'+v.url+'" target="_blank"><img src="'+v.avator+'"></a></div>' +
                                '    <div class="list-m">' +
                                '        <div class="list-one"><a href="'+v.url+'" target="_blank">'+v.username+'</a>' + star + top+'</div><div class="list-one"><span class="hard">'+v.difficult+'</span>'+tags+'</div>' +
                                '        <div class="list-txt">'+v.content+'</div>' + picture +
                                '        <div class="list-b clearfix">' + client +
                                '            <span class="fl">'+v.created_at+'</span>' +
                                '            <div class="more-btn fr">' +
                                '                <i class="fr dian"></i>' +
                                '                <div class="win-cover">' + insideBtn +
                                '                    <span class="report" data-id="'+v.id+'">举报</span>' +
                                '                </div>' +
                                '            </div>' +
                                '            <span class="fr zan-btn '+zan+'"><i></i>'+v.thumbs+'</span>' +
                                '            <span class="fr reply-btn" data-id="'+v.id+'" data-username="'+v.username+'" data-type="1">回复</span>' +
                                outsideBtn +
                                '        </div>' +

                                '<div class="comment-list-two"  >'+reply  +'</div><div class="page-list-two-new"></div>' +  replyFooter +
                                '        <!-- 二级评论回复框 -->' +
                                '        <div class="comment-textarea-two">' +
                                '        </div>' +
                                '    </div>' +
                                '</div>';
                        });

                        $(".page-container").html(response.comment.pageHtml);
                        $(".comment-list").html(html);


                        //绑定事件
                        comment.top();
                        comment.delete();
                        comment.submitCommentReplay();
                        comment.thumbs();
                        comment.more();
                        comment.report();
                        comment.moreReply();
                    }else{
                        $('.comment-list').html('<div class="default-null-page "><img src="http://js.huke88.com/assets/new/common/images/none.png"><p>暂无评论~~</p></div>');
                    }

                    //分页
                    $(".page_click_class").on('click', function () {
                        var page = $(this).attr('data-page');
                        $('html, body').animate({
                            scrollTop: $(".video-b").offset().top - 60
                        }, 500);
                        comment.getLists(page, 1);
                    });

                    //推荐和专辑推荐
                    if(onlyComment === 0){
                        if(response.albumVideoInfos.length !== 0){
                            var albumHtml = '';

                            $.each(response.albumVideoInfos.videoInfos, function (k, v) {
                                albumHtml += '' +
                                    '<div class="list">' +
                                    '<div class="list-img">' +
                                    '<a class="show-img" href="'+v.url+'" target="_blank"><img src="'+v.image_url+'" alt="'+v.title+'"><span class="play-cover"></span></a></div><div class="img-name clearfix"><a href="'+v.url+'" class="name-link fl" target="_blank">'+v.title+'</a></div>\n' +
                                    '</div>';
                            });

                            albumHtml = '<div class="album-list">'+albumHtml+'</div>';
                            albumHtml = '<div class="head"><h3>相关专辑课程</h3></div>'+albumHtml+'<a href="'+response.albumVideoInfos.album_url+'" class="flink" target="_blank">查看专辑</a>';

                            $('.albumRecommendDiv').removeClass('hide').html(albumHtml);
                        }

                        if(response.videoRecommend.length !== 0){
                            var recommendHtml = '';
                            $.each(response.videoRecommend[1], function (k, v) {
                                recommendHtml +=
                                    '<div class="list">' +
                                    '<div class="img"><a href="'+v.video_href+'" target="_blank"><img src="'+v.image_url+'" alt="'+v.title+'"></a></div>' +
                                    '<div class="img-r">' +
                                    '<a href="'+v.video_href+'" target="_blank">'+v.title+'</a>' +
                                    '<p>'+v.video_view+'人已学</p>' +
                                    '<p>难度：'+v.level_id+'</p>' +
                                    '</div>' +
                                    '</div>';
                            });
                            $('.videoRecommendDiv .recommend-list').html(recommendHtml);
                            exposure.sids = response.videoRecommend[0];
                        }
                    }
                },
            });
        },

        //发表一级评论  评论提交成功 将在审核通过后显示
        submitComment: function () {
            $('.comment-wrap .comment-textarea').on('click', '.submit-btn', function() {


                var containter = $(this).closest('.comment-wrap');
                var $this = $(this);
                if(Param.uid == 0){
                    toLogin();
                    return false;
                }

                if(!course.hasStudy) {
                    layer.confirm('<p class="fz16-c3">学习后才能评价哦!</p>',
                        {
                            btn: ['我知道了'],//按钮
                            btnColor: ['2'] //按钮颜色 1白色 2橙色
                        },
                        function() {
                            layer.close(layer.index);//关闭弹窗
                        }
                    );
                    return false;
                }

                if(containter.find(".star_num").val() == '0'){
                    layer.msg('请选择课程评分');
                    return false;
                }
                if(containter.find(".score-cont .active").length == '0'){
                    layer.msg('课程难易程度');
                    return false;
                }


                //1星 2星 输入框至少要5个字
                var content = containter.find('.textarea').val().length;

                if(content !== 0 && content < 5){
                    layer.msg('至少要5个字哟~~~');
                    return false;
                }

                if(containter.find(".star_num").val() <= 2 && content < 5){
                    layer.msg('至少要5个字哟~~~');
                    return false;
                }

                $commentTgaContainer = containter.find('.mood .active');
                var commentTags = [];

                if($commentTgaContainer.length !== 0){
                    $.each($commentTgaContainer, function (k, v) {
                        commentTags.push($(v).attr('data-id'));

                    });
                    if(commentTags.length === 1){
                        containter.find('.tags').val(commentTags[0]);
                    }else{
                        containter.find('.tags').val(commentTags.join('-'));
                    }

                }

                if(containter.find('.seek-ans').hasClass('active')){
                    containter.find('.is_ask').val(1);
                }

                $.ajax({
                    type: "POST",
                    url: Url.commentSubmitUrl,
                    dataType: 'json',

                    data: containter.find('.firstCommentForm').serialize(),
                    success: function (res) {
                        if (res.error == 0) {
                            $(".textarea").val('');
                            $(".uploaderInput").val('');
                            $(".hi3de").addClass('hide');
                            $(".score-cont .star-level .full-star").removeClass('full-star');
                            $(".easy-hard .active").removeClass('active');
                            $(".hkb-c").addClass('hide');
                            $(".mid-disc-btn").html('评论');
                            containter.find('#look').removeAttr('class');
                            containter.find('.mood').addClass('hide');
                            $(".seek-ans").removeClass('active');
                            containter.find('.cont-num em').html(0);
                            $(".star_num").val(0);
                            //评论成功提示
                            if (Param.Checking) {
                                if(Param.huke_gold){
                                    layer.confirm('<p class="fz16-c3">已获得今日评论奖励虎课币（<span class="cf70">'+res.gold+'</span>/40）</p><p class="fz16-c6">评论提交成功，将在审核通过后显示</p>',
                                        {
                                            btn: ['确认'],//按钮
                                            btnColor: ['2'] //按钮颜色 1白色 2橙色
                                        },
                                        function() {
                                            layer.close(layer.index);//关闭弹窗
                                        }
                                    );
                                    Param.huke_gold = 0;
                                }else{
                                    layer.msg('评论提交成功 审核通过后显示');
                                }
                            } else {
                                layer.msg('评论提交成功');
                                comment.getLists(comment.defaults.page, 1);
                            }
                        } else {
                            layer.msg(res.message);
                        }
                    },
                    error: function () {
                        $(".pbar-tips-one").html('保存失败，请联系管理员~~').removeClass('hide');
                    }
                });
            });
            return this;
        },

        //发表评论回复
        submitCommentReplay: function () {

            $(".reply-btn").on('click', function () {

                if(Param.uid === 0){
                    toLogin();
                    return false;
                }

                var comment_id = $(this).attr('data-id');
                var username = $(this).attr('data-username');
                var type = $(this).attr('data-type');

                var comForm = '<div class="avatar"><img src="'+Param.avator+'" ></div><div class="textarea-wrap"><textarea placeholder="回复 '+username+'" class="textarea"></textarea><span class="cont-num"><em data-reply-js="input-num">0</em>/200</span></div><div class="submit-btn"><a href="javascript:;" class="btn" data-id="'+comment_id+'" data-type="'+type+'">发表评论</a></div>';
                comm = $(this).parents('.list-m').find('.comment-textarea-two');
                winH = ($(window).height())/2;
                commTop = $(window).scrollTop();
                thisT = comm.offset().top;
                sH = thisT - commTop - winH;
                $('html,body').animate({scrollTop: commTop + sH}, 500);
                comm.html(comForm);

                comment.textareaBind();
                $(".comment-textarea-two").on('click', '.submit-btn', function () {
                    var $this = $(this);
                    var containter = $this.closest('.comment-textarea-two');
                    var content = containter.find('.textarea').val();
                    var comment_id = $this.find('.btn').attr('data-id');
                    var type =$this.find('.btn').attr('data-type');

                    if (content.length < 5) {
                        layer.msg('至少要5个字哟~~~');
                        return false;
                    }

                    if($this.hasClass('disabled')){
                        return false;
                    }

                    $this.addClass('disabled');

                    $.ajax({
                        url: Url.commentReply,
                        data:{
                            uid: Param.uid,
                            comment_id:comment_id,
                            type:type,
                            content:content,
                            "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                        },
                        method: 'post',
                        dataType: 'json',
                        success: function (response) {
                            if(response.error === 0){
                                layer.msg('评论提交成功，将在审核通过后显示');
                                // comment.getReplyList(parent_container, parent_comment_id, parent_page-1);
                                $this.removeClass('disabled');
                                containter.empty();
                            }else{
                                $this.removeClass('disabled');
                                layer.msg(response.message);
                            }
                        }
                    });

                });
            });
        },

        //错误提示
        error: function () {

        },

        //replac
        change: function () {
            $('.videoRecommendDiv .renovate-btn').on('click', function () {
                $.ajax({
                    url: Url.changeRecommend,
                    data:{
                        uid: Param.video_id,
                        "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                    },
                    method: 'post',
                    dataType: 'json',
                    xhrFields: {
                        withCredentials: true
                    },
                    success: function (response) {
                        if(response.error === 0){
                            var recommendHtml = '';
                            $.each(response.data[1], function (k, v) {
                                recommendHtml +=
                                    '<div class="list">' +
                                    '<div class="img"><a href="'+v.video_href+'" target="_blank"><img  src="'+v.image_url+'" alt="'+v.title+'"></a></div>' +
                                    '<div class="img-r">' +
                                    '<a href="'+v.video_href+'" target="_blank">'+v.title+'</a>' +
                                    '<p>'+v.video_view+'人已学</p>' +
                                    '<p>难度：'+v.level_id+'</p>' +
                                    '</div>' +
                                    '</div>';
                            });
                            $('.videoRecommendDiv .recommend-list').html(recommendHtml);
                            exposure.sids = response.data[0];
                        }
                    }
                });
            });
        },

        //置顶操作
        top: function () {

            $(".top-btn").on('click', function () {
                top($(this).attr('data-id'), 1, '确认置顶评论吗？');
            });

            $(".cancel-top-btn").on('click', function () {
                top($(this).attr('data-id'), 0, '确认取消置顶吗？');
            });

            function top(comment_id, type, msg) {

                if(Param.uid === 0){
                    toLogin();
                    return false;
                }

                //询问框
                layer.confirm(msg, {
                    btn: ['取消','确定'], //按钮
                    btnColor: ['1','2'] //按钮颜色 1白色 2橙色
                }, function(){
                    layer.close(layer.index);//关闭弹窗
                }, function () {
                    $.ajax({
                        url: Url.commentTop,
                        data:{
                            "comment_id": comment_id,
                            "type": type,
                            "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                        },
                        method: 'post',
                        dataType: 'json',
                        success: function (response) {
                            if (0 == response.error) {
                                layer.msg('置顶成功');
                                comment.getLists(comment.defaults.page, 1);
                            }else{
                                layer.msg(response.message);
                            }
                        },
                        error: function (response) {
                            layer.msg(response.message);
                        }
                    });
                });
            }
        },

        //删除操作
        delete: function () {
            $('.more-btn').on('click', '.del', function() {
                del($(this));
            });

            $('.del-btn').on('click', function () {
                del($(this));
            });

            function del($this) {
                if(Param.uid === 0){
                    toLogin();
                    return false;
                }
                var comment = $this.closest('.comment-one');
                var comment_id = $this.attr('data-id');

                layer.confirm('<p class="fz16-c3">确认删除该评论吗</p>',
                    {
                        btn: ['取消','确定'], //按钮
                        btnColor: ['1', '2'] //按钮颜色 1白色 2橙色
                    },
                    function() {
                        layer.close(layer.index);//关闭弹窗
                    },function () {
                        $.post(
                            Url.commentDelete,
                            {
                                "comment_id": comment_id,
                                "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                            }, function (b) {
                                if (0 == b.error) {
                                    layer.msg('删除成功');
                                    comment.remove();
                                }else{
                                    layer.msg(b.message);
                                }
                            }, "json");
                    }
                );
            }
        },

        //点赞操作
        thumbs: function () {
            $('.list-b .zan-btn').on('click', function () {
                if($(this).hasClass('disabled')){
                    return false;
                }
                thumbs($(this), 1, $(this).closest('.comment-one').attr('data-comment-id'));
            });

            $(".list-b-two .zan-btn").on('click', function () {
                if($(this).hasClass('disabled')){
                    return false;
                }
                thumbs($(this), 2, $(this).closest('.comment-two').attr('data-id'));
            });

            function thumbs($this, type, comment_id) {
                if(Param.uid === 0){
                    toLogin();
                    return false;
                }

                $this.addClass('disabled');

                $.ajax({
                    type: 'POST',
                    url: Url.thumbs,
                    dataType: 'json',
                    method: 'post',
                    data: {
                        "comment_id": comment_id,
                        "type": type,
                        "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                    },
                    success: function (response) {

                        if(response.error === 0){
                            layer.msg('点赞成功');
                            $this.addClass('active');
                            $this.html('<i></i>' + response.count);
                        }else{
                            $this.removeClass('disabled');
                            layer.msg(response.message);
                        }
                    },
                    error: function () {
                        $this.removeClass('disabled');
                    }
                });


            }
        },

        //一级评论展示更多
        more: function () {

            $('.more-btn').on('click', '.dian', function(e) {
                $(this).siblings('.win-cover').toggle();
                e.stopPropagation();
            });
        },

        //点击查看更多回复
        moreReply: function () {
            $('.more-comment-two a').on('click', function () {

                var page = $(this).closest('.comment-one').attr('data-page-id');
                var comment_id = $(this).closest('.comment-one').attr('data-comment-id');
                var container = $(this).closest('.list-m');

                comment.getReplyList(container, comment_id, page-1);
            });

        },

        //获取回复列表
        getReplyList:function (container, comment_id, page) {

            $.ajax({
                type: 'POST',
                url: Url.moreReply,
                dataType: 'json',
                method: 'post',
                data: {
                    "comment_id": comment_id,
                    "pages": page,
                    "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                },
                success: function (response) {

                    if(response.error === 0){

                        var html = '';
                        if(response.comment.list.length !== 0){
                            var recommand_info = response.comment.recommandVideoInfo;
                            $.each(response.comment.list, function (k, v) {

                                var replyContent = '<a href="'+v.owner_url+'" target="_blank">'+v.owner_username+'</a>';
                                if(v.target_uid !== v.owner_uid){
                                    replyContent += '<span>回复</span><a href="'+v.target_url+'" target="_blank">'+v.taget_username+'</a>';
                                }

                                replyContent = '<div class="list-txt-two">'+replyContent;


                                var zan = '';
                                if(v.thumb){
                                    zan = 'active disabled';
                                }

                                var recommand = '';
                                var hasRecommand = false;
                                if(v.offical_video_id !== '0'){
                                    var recommand_response_info = {};
                                    $.each(recommand_info, function (rek, rev) {
                                        if(rek == v.offical_video_id){
                                            recommand_response_info = rev;
                                            hasRecommand = true;
                                        }
                                    });

                                    if(hasRecommand){
                                        recommand = '' +
                                            '<div class="comment-course tj">' +
                                            '    <div class="img">' +
                                            '        <a href="'+recommand_response_info.href+'" target="_blank">' +
                                            '            <img src="'+recommand_response_info.src+'" alt="">' +
                                            '        </a>' +
                                            '    </div>' +
                                            '    <div class="img-r">' +
                                            '        <p class="p1">' +
                                            '            <a href="'+recommand_response_info.href+'" target="_blank">'+recommand_response_info.title+'</a>' +
                                            '        </p>' +
                                            '        <p class="p2">' +
                                            '            <span class="fr">评论数：'+recommand_response_info.video_reply+'</span>' +
                                            '            <span class="fr">学习人数：'+recommand_response_info.video_play+'</span>' +
                                            '            <span class="user-name">' +
                                            '                <a class="avatar" href="'+recommand_response_info.teacher_href+'" target="_blank">' +
                                            '                    <img src="'+recommand_response_info.avator+'" class="avatar">' +
                                            '                </a>' +
                                            '                讲师：<a href="'+recommand_response_info.teacher_href+'" target="_blank">'+recommand_response_info.name+'</a>' +
                                            '            </span>' +
                                            '        </p>' +
                                            '    </div>' +
                                            '</div>';
                                    }
                                }

                                html +=
                                    '<div class="comment-two" data-id="'+v.id+'">' +
                                    '<div class="avatar-two"><a href="'+v.owner_url+'" target="_blank"><img src="'+v.owner_avator+'"></a></div>' + replyContent + v.content + '</div>' +
                                    '<div class="list-b-two"><span>'+v.created_at+'</span><span class="zan-btn '+zan+'"><i></i>'+v.thumbs+'</span><span class="reply-btn" data-id="'+v.id+'" data-username="'+v.owner_username+'" data-type="2">回复</span></div>' +
                                    recommand +
                                    '</div>';
                            });

                            container.find('.comment-list-two').html(html);
                            container.find('.page-list-two-new').addClass('page-list-two').html('<span>共'+response.comment.pageCount+'页</span>' + response.comment.pageHtml);
                            container.find('.more-comment-two').addClass('hide');

                            //分页
                            $(".comment_click_class ").on('click', function () {
                                var page = $(this).attr('data-page');
                                comment.getReplyList(container, comment_id, page);
                            });

                            comment.submitCommentReplay();
                            comment.thumbs();
                        }

                    }else{
                        layer.msg(response.message);
                    }
                }
            });
        },

        //举报操作
        report: function () {
            $('.more-btn').on('click', '.report', function() {
                if(Param.uid === 0){
                    toLogin();
                    return false;
                }

                var comment_id = $(this).attr('data-id');
                var csrf = $('meta[name="csrf-token"]').attr("content");

                var html = '<div class="report-win"><div class="report-head">请选择举报理由</div><div class="report-m"><form id="reportForm"><div class="report-list"><p>违反法律法规</p><div class="report-input"><label><input type="radio" name="report_content" value="1"><span>违法违规</span></label><label><input type="radio" name="report_content"  value="2"><span>色情</span></label><label><input type="radio" name="report_content"  value="3"><span>低俗</span></label><label><input type="radio" name="report_content"  value="4"><span>赌博诈骗</span></label></div></div><div class="report-list"><p>侵犯个人权益</p><div class="report-input"><label><input type="radio" name="report_content"  value="5"><span>人身攻击</span></label><label><input type="radio" name="report_content"  value="6"><span>侵犯隐私</span></label></div></div><div class="report-list"><p>有害网站环境</p><div class="report-input"><label><input type="radio" name="report_content"  value="7"><span>垃圾广告</span></label><label><input type="radio" name="report_content"  value="8"><span>与视频无关</span></label><label><input type="radio" name="report_content"  value="9"><input type="hidden" name="report_id" value="'+comment_id+'"><input type="hidden" name="_csrf-frontend" value="'+csrf+'"><span>刷屏</span></label></div></div></form></div></div>';

                report(html);


                function report(html) {
                    layer.confirm(html,
                        {
                            btn: ['取消','确认'],//按钮
                            btnColor: ['1','2'] //按钮颜色 1白色 2橙色
                        },
                        function(){
                            layer.close(layer.index);//关闭弹窗
                        }, function(){
                            var report_id = $('input[name=report_content]:checked').val();
                            if(report_id === undefined){
                                layer.msg('请选择举报理由', {time: 1000}, function () {
                                    report(html);
                                });
                                return false;
                            }
                            $.ajax({
                                type: 'POST',
                                url: Url.report,
                                dataType: 'json',
                                method: 'post',
                                data: $("#reportForm").serialize(),
                                success: function (response) {

                                    if(response.error === 0){
                                        layer.msg('举报成功，请等待后台审核');
                                    }else{
                                        layer.msg(response.message);
                                    }
                                },
                                error: function () {
                                }
                            });
                            // layer.msg('1',{time:3000});//执行事件
                        }
                    );
                }
            });
        },

        //页面绑定事件
        bind: function () {
            //星星点击
            $('.score-cont').on('click', '.star-level i', function() {

                if(Param.uid == 0){
                    toLogin();
                    return false;
                }
                //星级

                $(this).nextAll('i').removeClass('full-star');
                $(this).prevAll('i').addClass('full-star');
                $(this).addClass('full-star');

                //form
                var num = $('.score-cont .star-level .full-star').length;
                $(this).closest('.comment-wrap').find('.star_num').val(num);

                //图标
                var starComment = $(this).attr('data-comment');
                var lk = $(this).parents('span').find('.full-star').length;
                $(this).parents('.star-level').siblings('#look').attr({
                    "class":"look"+lk,
                    "data-com":starComment
                });

                //标签
                var mood = $(this).closest('.score-cont').find('.mood');
                var tags = mood.attr('data-content');
                tags = JSON.parse(tags);

                if(tags.length === 0){
                    return false;
                }

                html = '';
                $.each(tags[lk], function (k, v) {
                    html += '<span data-id="'+v.id+'">'+v.name+'</span>';
                });
                mood.html(html);
                mood.removeClass('hide');

                var textareaHtml = '';
                var textareaHtml_1_2 = '请留下您发现的问题与建议，我们将积极改善！至少5字以上哦~';
                var textareaHtml_3 = '您的评价有助于我们做出更好的教学视频，至少5个字哦~';
                var textareaHtml_4_5 = '感谢您的认可，留下您的体验将帮助更多的学员，至少5个字哦~';
                var textareaContainer = $(this).closest('.comment-wrap').find('textarea');

                if(lk <= 2){
                    textareaHtml = textareaHtml_1_2;
                }else if(lk === 3){
                    textareaHtml = textareaHtml_3;
                }else{
                    textareaHtml = textareaHtml_4_5;
                }
                textareaContainer.attr('placeholder', textareaHtml);
            });

            //用户上传图片后点击关闭
            $(".re-upload").on('click', function () {

                var upload_container_dom = $(this).closest('.hi3de');
                var textarea_container_dom = $(this).closest('.comment-textarea');

                textarea_container_dom.find('.uploaderInput').val('');
                upload_container_dom.find('a').attr('onclick', '');
                upload_container_dom.find('.file-name').empty();
                upload_container_dom.addClass('hide');
            });

            // 求解答
            $('.textarea-wrap').on('click', '.seek-ans', function() {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                }else{
                    $(this).addClass('active');
                }
            });

            //排序
            $('.comment-sort').on('click', '.check', function() {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                }else{
                    $(this).addClass('active');
                }
                comment.getLists(comment.defaults.page, 1);
            });

            // 排序方式
            $('.down-sort-m').on('click', 'a', function() {

                $(this).addClass('active').siblings('a').removeClass('active');
                var cl = $(this).clone();
                $(this).remove();
                $('.down-sort-m').prepend(cl);

                comment.getLists(comment.defaults.page, 1);
            });

            //评论标签
            $('.mood').on('click', 'span', function() {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                }else{
                    $(this).addClass('active');
                }
            });

            //课程难易程度选择
            $('.easy-hard').on('click', 'i', function() {
                if(Param.uid == 0){
                    toLogin();
                    return false;
                }
                $(this).addClass('active').siblings().removeClass('active');
                $(this).closest('.comment-wrap').find('.difficult').val($(this).attr('data-id'));
            });

            // 关闭图片遮罩层
            $('.bigImgShow-mask,.bigImgShow-box .close').on('click', function () {
                $('#BigImgShowBox').fadeOut();
            });

            // 点击查看评论图片大图
            function viewBig() {
                $('a.viewBigImg').off('click').on('click', function () {
                    var _clickObj = $(this);
                    var src = _clickObj.find('img').prop('src');
                    viewBigImg(src);
                });
            }

            //看大图
            viewBig();

            function viewBigImg(img) {
                $('#BigImgShowBox img').attr('src', img);
                $('#BigImgShowBox').fadeIn();
            }

            //文本框绑定事件
            comment.textareaBind();

            $(document).click(function () {
                $('.win-cover').hide();
            });

            //右侧评论
            $('span[data-reply-js="publish"]').on('click', function () {
                if(Param.uid == 0){
                    toLogin();
                    return false;
                }
                if(!course.hasStudy) {
                    layer.confirm('<p class="fz16-c3">学习后才能评价哦!</p>',
                        {
                            btn: ['我知道了'],//按钮
                            btnColor: ['2'] //按钮颜色 1白色 2橙色
                        },
                        function() {
                            layer.close(layer.index);//关闭弹窗
                        }
                    );
                    return false;
                }
                var modeType = $(this).attr('data-id');
                $(".mode").val(parseInt(modeType));

                $('html, body').animate({
                    scrollTop: $(".video-b").offset().top - 60
                }, 500);
            });

        },
        textareaBind:function () {

            $('.textarea').on('input', function () {
                onInputt($(this));
            });

            $(".textarea").on('propertychange', function () {
                onInputt($(this));
            });

            // 输入框计数
            function onInputt(_self) {
                var se = $(_self);
                dis = se.parent('.textarea-wrap').siblings('.submit-btn').find('.btn')
                se.siblings('.cont-num').find('em').text(se.val().length);
                if (se.val().length >= 200) {
                    var oninput  = se.val().substring(0, 200);
                    se.val(oninput);
                    se.siblings('.cont-num').find('em').text(se.val().length);
                }
                // if (se.val().length >= 5) {
                //     dis.removeClass('disable')
                // }else{
                //     dis.addClass('disable');
                //
                // }
            };
        }
    };

    comment.defaults.uploadNum = 2;
    comment.init();
});
/* COMBO: filename = js/plugins/ckplayer-x/ckplayer/ckplayer.js, type = application/javascript, resp = 200 */
/*
	软件名称：ckplayer
	软件版本：X
	软件作者：http://www.ckplayer.com
	---------------------------------------------------------------------------------------------
	开发说明：
	使用的主要程序语言：javascript(js)及actionscript3.0(as3.0)(as3.0主要用于flashplayer部分的开发，不在该页面呈现)
	功能：播放视频
	特点：兼容HTML5-VIDEO(优先)以及FlashPlayer
	=====================================================================================================================
*/
function ckplayerConfig() {
	return {
		flashvars: {}, //用来补充flashvars里的对象
		languagePath: '', //语言包文件地址
		stylePath: '', //风格包文件地址
		config: {
			fullInteractive: true, //是否开启交互功能
			schedule: 1, //是否启用进度调节栏,0不启用，1是启用，2是只能前进（向右拖动），3是只能后退，4是只能前进但能回到第一次拖动时的位置，5是看过的地方可以随意拖动
			delay: 30, //延迟加载视频，单位：毫秒
			timeFrequency: 100, //计算当前播放时间和加载量的时间频率，单位：毫秒
			autoLoad: true, //视频是否自动加载
			loadNext: 0, //多段视频预加载的段数，设置成0则全部加载
			definition: false, //是否使用清晰度组件
			smartRemove: true, //是否使用智能清理，使用该功能则在多段时当前播放段之前的段都会被清除出内存，减少对内存的使用
			bufferTime: 200, //缓存区的长度，单位：毫秒,不要小于100
			click: true, //是否支持屏幕单击暂停
			doubleClick: true, //是否支持屏幕双击全屏
			doubleClickInterval: 200, //判断双击的标准，即二次单击间隔的时间差之内判断为是双击，单位：毫秒
			keyDown: {
				space: true, //是否启用空格键切换播放/暂停
				left: true, //是否启用左方向键快退
				right: true, //是否启用右方向键快进
				up: true, //是否支持上方向键增加音量
				down: true //是否支持下方向键减少音量
			},
			timeJump: 10, //快进快退时的秒数
			volumeJump: 0.1, //音量调整的数量，大于0小于1的小数
			timeScheduleAdjust: 1, //是否可调节调节栏,0不启用，1是启用，2是只能前进（向右拖动），3是只能后退，4是只能前进但能回到第一次拖动时的位置，5是看过的地方可以随意拖动
			previewDefaultLoad: true, //预览图片是否默认加载，优点是鼠标第一次经过进度条即可显示预览图片
			promptSpotTime: false, //提示点文字是否在前面加上对应时间
			buttonMode: {
				player: false, //鼠标在播放器上是否显示可点击形态
				controlBar: false, //鼠标在控制栏上是否显示可点击形态
				timeSchedule: true, //鼠标在时间进度条上是否显示可点击形态
				volumeSchedule: true //鼠标在音量调节栏上是否显示可点击形态
			},
			liveAndVod: { //直播+点播=回播功能
				open: false, //是否开启，开启该功能需要设置flashvars里live=true
				vodTime: 2, //可以回看的整点数
				start: 'start' //回看请求参数
			},
			errorNum: 3, //错误重连次数
			playCorrect: false, //是否需要错误修正，这是针对rtmp的
			timeCorrect: true, //http视频播放时间错误纠正，有些因为视频格式的问题导致视频没有实际播放结束视频文件就返回了stop命令
			m3u8Definition: { //m3u8自动清晰度时按关键字来进行判断
				//tags:['200k','110k','400k','600k','1000k']
			},
			m3u8MaxBufferLength: 30, //m3u8每次缓冲时间，单位：秒数
			timeStamp: '', //一个地址，用来请求当前时间戳，用于播放器内部时间效准
			addCallback: 'adPlay,adPause,playOrPause,videoPlay,videoPause,videoMute,videoEscMute,videoClear,changeVolume,fastBack,fastNext,videoSeek,newVideo,getMetaDate,videoRotation,videoBrightness,videoContrast,videoSaturation,videoHue,videoZoom,videoProportion,videoError,addListener,removeListener,addElement,getElement,deleteElement,animate,animateResume,animatePause,changeConfig,getConfig,openUrl,fullScreen,quitFullScreen,switchFull,screenshot,custom'
			//需要支持的事件
		},
		menu: { //版权名称支持
			ckkey: '',
			name: '',
			link: '',
			version: '',
			domain: '',
			more: []
		},
		style: { //风格部分内容配置，这里主要配置loading和logo以及广告的部分内容
			loading: {
				file: 'data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==',
				align: 'center',
				vAlign: 'middle',
				offsetX: -100,
				offsetY: -40
			},
			logo: {
				file: 'data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==',
				align: 'right',
				vAlign: 'top',
				offsetX: -100,
				offsetY: 10
			},
			advertisement: { //广告相关的配置
				time: 5, //广告默认播放时长以及多个广告时每个广告默认播放时间，单位：秒
				method: 'get', //广告监测地址默认请求方式，get/post
				videoForce: false, //频广告是否强制播放结束
				videoVolume: 0.8, //视频音量
				skipButtonShow: true, //是否显示跳过广告按钮
				linkButtonShow: true, //是否显示广告链接按钮，如果选择显示，只有在提供了广告链接地址时才会显示
				muteButtonShow: true, //是否显示跳过广告按钮
				closeButtonShow: true, //暂停时是否显示关闭广告按钮
				closeOtherButtonShow: true, //其它广告是否需要关闭广告按钮
				frontSkipButtonDelay: 0, //前置广告跳过广告按钮延时显示的时间，单位：秒
				insertSkipButtonDelay: 0, //插入广告跳过广告按钮延时显示的时间，单位：秒
				endSkipButtonDelay: 0, //后置广告跳过广告按钮延时显示的时间，单位：秒
				frontStretched: 2, //前置广告拉伸方式，0=原始大小，1=自动缩放，2=只有当广告的宽或高大于播放器宽高时才进行缩放，3=参考播放器宽高，4=宽度参考播放器宽、高度自动，5=高度参考播放器高、宽度自动
				insertStretched: 2, //插入广告拉伸方式，0=原始大小，1=自动缩放，2=只有当广告的宽或高大于播放器宽高时才进行缩放，3=参考播放器宽高，4=宽度参考播放器宽、高度自动，5=高度参考播放器高、宽度自动
				pauseStretched: 2, //暂停广告拉伸方式，0=原始大小，1=自动缩放，2=只有当广告的宽或高大于播放器宽高时才进行缩放，3=参考播放器宽高，4=宽度参考播放器宽、高度自动，5=高度参考播放器高、宽度自动
				endStretched: 2 //结束广告拉伸方式，0=原始大小，1=自动缩放，2=只有当广告的宽或高大于播放器宽高时才进行缩放，3=参考播放器宽高，4=宽度参考播放器宽、高度自动，5=高度参考播放器高、宽度自动
			},
			video: { //视频的默认比例
				defaultWidth: 4, //宽度
				defaultHeight: 3 //高度
			}
		}
	};
}!(function() {
	var javascriptPath = '';
	! function() {
		var scriptList = document.scripts,
			thisPath = scriptList[scriptList.length - 1].src;
		javascriptPath = thisPath.substring(0, thisPath.lastIndexOf('/') + 1);
	}();
	var ckplayer = function(obj) {
		if(obj) {
			this.embed(obj);
		}
	};
	ckplayer.prototype = {
		/*
			javascript部分开发所用的注释说明：
			1：初始化-程序调用时即运行的代码部分
			2：定义样式-定义容器（div,p,canvas等）的样式表，即css
			3：监听动作-监听元素节点（单击-click，鼠标进入-mouseover，鼠标离开-mouseout，鼠标移动-mousemove等）事件
			4：监听事件-监听视频的状态（播放，暂停，全屏，音量调节等）事件
			5：共用函数-这类函数在外部也可以使用
			6：全局变量-定义成全局使用的变量
			7：其它相关注释
			全局变量说明：
			在本软件中所使用到的全局变量（变量（类型）包括Boolean，String，Int，Object（包含元素对象和变量对象），Array，Function等）
			下面列出重要的全局变量：
				V:Object：视频对象
				VA:Array：视频列表（包括视频地址，类型，清晰度说明）
				ID:String：视频ID
				CB:Object：控制栏各元素的集合对象
				PD:Object：内部视频容器对象
			---------------------------------------------------------------------------------------------
			程序开始
			下面为需要初始化配置的全局变量
			初始化配置
			config：全局变量/变量类型：Object/功能：定义一些基本配置
		*/
		config: {
			videoClick: true, //是否支持单击播放/暂停动作
			videoDbClick: true, //是否支持双击全屏/退出全屏动作
			errorTime: 100, //延迟判断失败的时间，单位：毫秒
			videoDrawImage: false //是否使用视频drawImage功能，注意，该功能在移动端表现不了
		},
		//全局变量/变量类型：Object/功能：播放器默认配置，在外部传递过来相应配置后，则进行相关替换
		varsConfig: {
			container: '', //视频容器的ID
			variable: 'ckplayer', //播放函数(变量)名称
			volume: 0.8, //默认音量，范围0-1
			poster: '', //封面图片地址
			autoplay: false, //是否自动播放
			loop: false, //是否需要循环播放
			live: false, //是否是直播
			duration: 0, //指定总时间
			seek: 0, //默认需要跳转的秒数
			drag: '', //拖动时支持的前置参数
			front: '', //前一集按钮动作
			next: '', //下一集按钮动作
			loaded: '', //加载播放器后调用的函数
			flashplayer: false, //设置成true则强制使用flashplayer
			html5m3u8: false, //PC平台上是否使用h5播放器播放m3u8
			track: null, //字幕轨道
			cktrack: null, //ck字幕
			preview: null, //预览图片对象
			prompt: null, //提示点功能
			video: null, //视频地址
			config: '', //调用配置函数名称
			type: '', //视频格式
			crossorigin: '', //设置html5视频的crossOrigin属性
			crossdomain: '', //安全策略文件地址
			unescape: false, //默认flashplayer里需要解码
			debug: false //是否开启调试模式
		},
		vars: {},
		//全局变量/变量类型：Object/功能：语言配置
		language: {
			volume: '音量：',
			play: '点击播放',
			pause: '点击暂停',
			full: '点击全屏',
			escFull: '退出全屏',
			mute: '点击静音',
			escMute: '取消静音',
			front: '上一集',
			next: '下一集',
			definition: '点击选择清晰度',
			error: '加载出错'
		},
		//全局变量/变量类型：Array/功能：右键菜单：[菜单标题,类型(link:链接，default:灰色，function：调用函数，javascript:调用js函数),执行内容(包含链接地址，函数名称),[line(间隔线)]]
		contextMenu: [
			['ckplayer', 'link', 'http://www.ckplayer.com'],
			['version:X', 'default'],
			['播放视频', 'function', 'videoPlay', 'line'],
			['暂停视频', 'function', 'videoPause'],
			['播放/暂停', 'function', 'playOrPause']
		],
		//全局变量/变量类型：Array/功能：错误列表
		errorList: [
			['000', 'Object does not exist'],
			['001', 'Variables type is not a object'],
			['002', 'Video object does not exist'],
			['003', 'Video object format error'],
			['004', 'Video object format error'],
			['005', 'Video object format error'],
			['006', '[error] does not exist '],
			['007', 'Ajax error'],
			['008', 'Ajax error'],
			['009', 'Ajax object format error'],
			['010', 'Ajax.status:[error]']
		],
		//全局变量/变量类型：String/功能：定义logo
		logo: '',
		//全局变量/变量类型：Boolean/功能：是否加载了播放器
		loaded: false,
		//全局变量/变量类型：计时器/功能：监听视频加载出错的状态
		timerError: null,
		//全局变量/变量类型：Boolean/功能：是否出错
		error: false,
		//全局变量/变量类型：Array/功能：出错地址的数组
		errorUrl: [],
		//全局变量/变量类型：计时器/功能：监听全屏与非全屏状态
		timerFull: null,
		//全局变量/变量类型：Boolean/功能：是否全屏状态
		full: false,
		//全局变量/变量类型：计时器/功能：监听当前的月/日 时:分:秒
		timerTime: null,
		//全局变量/变量类型：计时器/功能：监听视频加载
		timerBuffer: null,
		//全局变量/变量类型：Boolean/功能：设置进度按钮及进度条是否跟着时间变化，该属性主要用来在按下进度按钮时暂停进度按钮移动和进度条的长度变化
		isTimeButtonMove: true,
		//全局变量/变量类型：Boolean/功能：进度栏是否有效，如果是直播，则不需要监听时间让进度按钮和进度条变化
		isTimeButtonDown: false,
		//全局变量/变量类型：Boolean/功能：用来模拟双击功能的判断
		isClick: false,
		//全局变量/变量类型：计时器/功能：用来模拟双击功能的计时器
		timerClick: null,
		//全局变量/变量类型：计时器/功能：旋转loading
		timerLoading: null,
		//全局变量/变量类型：计时器/功能：监听鼠标在视频上移动显示控制栏
		timerCBar: null,
		//全局变量/变量类型：Int/功能：播放视频时如果该变量的值大于0，则进行跳转后设置该值为0
		needSeek: 0,
		//全局变量/变量类型：Int/功能：当前音量
		volume: 0,
		//全局变量/变量类型：Int/功能：静音时保存临时音量
		volumeTemp: 0,
		//全局变量/变量类型：Number/功能：当前播放时间
		time: 0,
		//全局变量/变量类型：Boolean/功能：定义首次调用
		isFirst: true,
		//全局变量/变量类型：Boolean/功能：是否使用HTML5-VIDEO播放
		html5Video: true,
		//全局变量/变量类型：Object/功能：记录视频容器节点的x,y
		pdCoor: {
			x: 0,
			y: 0
		},
		//全局变量/变量类型：String/功能：判断当前使用的播放器类型，html5video或flashplayer
		playerType: '',
		//全局变量/变量类型：Int/功能：加载进度条的长度
		loadTime: 0,
		//全局变量/body对象
		body: document.body || document.documentElement,
		//全局变量/V/播放器
		V: null,
		//全局变量/保存外部js监听事件数组
		listenerJsArr: [],
		//全局变量/保存控制栏显示元素的总宽度
		buttonLen: 0,
		//全局变量/保存控制栏显示元素的数组
		buttonArr: [],
		//全局变量/保存按钮元素的宽
		buttonWidth: {},
		//全局变量/保存播放器上新增元件的数组
		elementArr: [],
		//全局变量/字幕内容
		track: [],
		//全局变量/字幕索引
		trackIndex: 0,
		//全局变量/当前显示的字幕内容
		nowTrackShow: {
			sn: ''
		},
		//全局变量/保存字幕元件数组
		trackElement: [],
		//全局变量/将视频转换为图片
		timerVCanvas: null,
		//全局变量/animate
		animateArray: [],
		//全局变量/保存animate的元件
		animateElementArray: [],
		//全局变量/保存需要在暂停时停止缓动的数组
		animatePauseArray: [],
		//全局变量/预览图片加载状态/0=没有加载，1=正在加载，2=加载完成
		previewStart: 0,
		//全局变量/预览图片容器
		previewDiv: null,
		//全局变量/预览框
		previewTop: null,
		//全局变量/预览框的宽
		previewWidth: 120,
		//全局变量/预览图片容器缓动函数
		previewTween: null,
		//全局变量/是否是m3u8格式，是的话则可以加载hls.js
		isM3u8: false,
		//全局变量/保存提示点数组
		promptArr: [],
		//全局变量/显示提示点文件的容器
		promptElement: null,
		//配置文件函数
		ckplayerConfig: {},
		//字体
		fontFamily: '"Microsoft YaHei", YaHei, "\5FAE\8F6F\96C5\9ED1", SimHei, "\9ED1\4F53",Arial',
		/*
			主要函数部分开始
			主接口函数：
			调用播放器需初始化该函数
		*/
		embed: function(c) {
			//c:Object：是调用接口传递的属性对象
			if(c == undefined || !c) {
				this.eject(this.errorList[0]);
				return;
			}
			if(typeof(c) != 'object') {
				this.eject(this.errorList[1]);
			}

			this.vars = this.standardization(this.varsConfig, c);
			if(this.vars['config']) {
				this.ckplayerConfig = eval(this.vars['config'] + '()');
			} else {
				this.ckplayerConfig = ckplayerConfig();
			}
			if((!this.supportVideo() && this.vars['flashplayer'] != '') || (this.vars['flashplayer'] && this.uploadFlash()) || !this.isMsie()) {
				this.html5Video = false;
				this.getVideo();
			} else if(this.vars['video']) {
				//判断视频数据类型
				this.analysedVideoUrl(this.vars['video']);
				return this;
			} else {
				this.eject(this.errorList[2]);
			}
		},
		/*
			内部函数
			根据外部传递过来的video开始分析视频地址
		*/
		analysedVideoUrl: function(video) {
			var i = 0,
				y = 0;
			var thisTemp = this;
			//定义全局变量VA:Array：视频列表（包括视频地址，类型，清晰度说明）
			this.VA = [];
			if(typeof(video) == 'string') { //如果是字符形式的则判断后缀进行填充
				if(video.substr(0, 8) != 'website:') {
					this.VA = [
						[video, '', '', 0]
					];
					var fileExt = this.getFileExt(video);
					switch(fileExt) {
						case '.mp4':
							this.VA[0][1] = 'video/mp4';
							break;
						case '.ogg':
							this.VA[0][1] = 'video/ogg';
							break;
						case '.webm':
							this.VA[0][1] = 'video/webm';
							break;
						default:
							break;
					}
					this.getVideo();
				} else {
					if(this.html5Video) {
						var ajaxObj = {
							url: video.substr(8),
							success: function(data) {
								if(data) {
									thisTemp.analysedUrl(data);
								} else {
									thisTemp.eject(thisTemp.errorList[5]);
									this.VA = video;
									thisTemp.getVideo();
								}
							}
						};
						this.ajax(ajaxObj);
					} else {
						this.VA = video;
						this.getVideo();
					}

				}
			} else if(typeof(video) == 'object') { //对象或数组
				if(!this.isUndefined(typeof(video.length))) { //说明是数组
					if(!this.isUndefined(typeof(video[0].length))) { //说明是数组形式的数组
						this.VA = video;
					}
					this.getVideo();
				} else {
					/*
						如果video格式是对象形式，则分二种
						如果video对象里包含type，则直接播放
					*/
					if(!this.isUndefined(video['type'])) {
						this.VA.push([video['file'], video['type'], '', 0]);
						this.getVideo();
					} else {
						this.eject(this.errorList[5]);
					}
				}
			} else {
				this.eject(this.errorList[4]);
			}
		},
		/*
			对请求到的视频地址进行重新分析
		*/
		analysedUrl: function(data) {

			this.vars = this.standardization(this.vars, data);
			if(!this.isUndefined(data['video'])) {
				this.vars['video'] = data['video'];
			}
			this.analysedVideoUrl(this.vars['video']);
		},
		/*
			内部函数
			检查浏览器支持的视频格式，如果是则将支持的视频格式重新分组给播放列表
		*/
		getHtml5Video: function() {

			var va = this.VA;
			var nva = [];
			var mobile = false;
			var video = document.createElement('video');
			var codecs = function(type) {
				var cod = '';
				switch(type) {
					case 'video/mp4':
						cod = 'avc1.4D401E, mp4a.40.2';
						break;
					case 'video/ogg':
						cod = 'theora, vorbis';
						break;
					case 'video/webm':
						cod = 'vp8.0, vorbis';
						break;
					default:
						break;
				}
				return cod;
			};
			var supportType = function(vidType, codType) {
				if(!video.canPlayType) {
					this.html5Video = false;
					return;
				}
				var isSupp = video.canPlayType(vidType + ';codecs="' + codType + '"');
				if(isSupp == '') {
					return false
				}
				return true;

			};

			if(this.vars['flashplayer'] || !this.isMsie()) {
				this.html5Video = false;

				return;
			}
			if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)) {
				mobile = true;
			}
			for(var i = 0; i < va.length; i++) {
				var v = va[i];
				if(v) {
					if(v[1] != '' && !mobile && supportType(v[1], codecs(v[1])) && v[0].substr(0, 4) != 'rtmp') {
						nva.push(v);
					}
					if(this.getFileExt(v[0]) == '.m3u8' && this.vars['html5m3u8']) {
						this.isM3u8 = true;
						nva.push(v);
					}
				}
			}
			if(nva.length > 0) {
				this.VA = nva;
			} else {
				if(!mobile) {
					this.html5Video = false;
				}
			}
		},
		/*
			内部函数
			根据视频地址开始构建播放器
		*/
		getVideo: function() {
			//如果存在字幕则加载
			if(this.V) { //如果播放器已存在，则认为是从newVideo函数发送过来的请求
				this.changeVideo();
				return;
			}
			if(this.vars['cktrack']) {
				this.loadTrack();
			}
			if(this.supportVideo() && !this.vars['flashplayer']) {
				this.getHtml5Video(); //判断浏览器支持的视频格式
			}
			var thisTemp = this;
			var v = this.vars;
			var src = '',
				source = '',
				poster = '',
				loop = '',
				autoplay = '',
				track = '';
			var video = v['video'];
			var i = 0;
			this.CD = this.getByElement(v['container']);
			volume = v['volume'];
			if(!this.CD) {
				this.eject(this.errorList[6], v['container']);
				return false;
			}
			//开始构建播放容器
			var playerID = 'ckplayer' + this.randomString();
			var playerDiv = document.createElement('div');

			playerDiv.className = playerID;
			this.V = undefined;
			this.CD.innerHTML = '';
			this.CD.appendChild(playerDiv);
			this.PD = this.getByElement(playerID); //PD:定义播放器容器对象全局变量
			this.css(this.CD, {
				backgroundColor: '#000000',
				overflow: 'hidden',
				position: 'relative'
			});
			this.css(this.PD, {
				backgroundColor: '#000000',
				width: '100%',
				height: '100%',
				fontFamily: '"Microsoft YaHei", YaHei, "\5FAE\8F6F\96C5\9ED1", SimHei, "\9ED1\4F53",Arial'
			});

			if(this.html5Video) { //如果支持HTML5-VIDEO则默认使用HTML5-VIDEO播放器
				//禁止播放器容器上鼠标选择文本
				this.PD.onselectstart = this.PD.ondrag = function() {
					return false;
				};
				//播放容器构建完成并且设置好样式
				//构建播放器
				if(this.VA.length == 1) {
					src = ' src="' + decodeURIComponent(this.VA[0][0]) + '"';
				} else {
					var videoArr = this.VA.slice(0);
					videoArr = this.arrSort(videoArr);
					for(i = 0; i < videoArr.length; i++) {
						var type = '';
						var va = videoArr[i];
						if(va[1]) {
							type = ' type="' + va[1] + '"';
							if(type == 'video/m3u8') {
								type = '';
							}
						}
						source += '<source src="' + decodeURIComponent(va[0]) + '"' + type + '>';
					}
				}
				//分析视频地址结束
				if(v['autoplay']) {
					autoplay = ' autoplay="autoplay"';
				}
				if(v['poster']) {
					poster = ' poster="' + v['poster'] + '"';
				}
				if(v['loop']) {
					loop = ' loop="loop"';
				}
				if(v['seek'] > 0) {
					this.needSeek = v['seek'];
				}
				if(v['track'] != null && v['cktrack'] == null) {
					var trackArr = v['track'];
					var trackDefault = '';
					var defaultHave = false;
					for(i = 0; i < trackArr.length; i++) {
						var trackObj = trackArr[i];
						if(trackObj['default'] && !defaultHave) {
							trackDefault = ' default';
							defaultHave = true;
						} else {
							trackDefault = '';
						}
						track += '<track kind="' + trackObj['kind'] + '" src="' + trackObj['src'] + '" srclang="' + trackObj['srclang'] + '" label="' + trackObj['label'] + '"' + trackDefault + '>';
					}
				}
				var autoLoad = this.ckplayerConfig['config']['autoLoad'];
				var preload = '';
				if(!autoLoad) {
					preload = ' preload="meta"';
				}
				var vid = this.randomString();
				var html = '';
				if(!this.isM3u8) {
					html = '<video id="' + vid + '"' + src + ' width="100%" height="100%"' + autoplay + poster + loop + preload + ' webkit-playsinline="true">' + source + track + '</video>';
				} else {
					html = '<video id="' + vid + '" width="100%" height="100%"' + poster + loop + preload + ' webkit-playsinline="true">' + track + '</video>';
				}
				this.PD.innerHTML = html;
				this.V = this.getByElement('#' + vid); //V：定义播放器对象全局变量
				if(this.vars['crossorigin']) {
					this.V.crossOrigin = this.vars['crossorigin'];
				}
				try {
					this.V.volume = volume; //定义音量
				} catch(error) {}
				this.css(this.V, {
					'width': '100%',
					height: '100%'
				});
				if(this.isM3u8) {
					var loadJsHandler = function() {
						thisTemp.embedHls(thisTemp.VA[0][0], v['autoplay']);
					};
					this.loadJs(javascriptPath + 'hls/hls.min.js', loadJsHandler);
				}
				this.css(this.V, 'backgroundColor', '#000000');
				//创建一个画布容器
				if(this.config['videoDrawImage']) {
					var canvasID = 'vcanvas' + this.randomString();
					var canvasDiv = document.createElement('div');
					canvasDiv.className = canvasID;
					this.PD.appendChild(canvasDiv);
					this.MD = this.getByElement(canvasID); //定义画布存储容器
					this.css(this.MD, {
						backgroundColor: '#000000',
						width: '100%',
						height: '100%',
						position: 'absolute',
						display: 'none',
						cursor: 'pointer',
						left: '0px',
						top: '0px',
						zIndex: '10'
					});
					var cvid = 'ccanvas' + this.randomString();
					this.MD.innerHTML = this.newCanvas(cvid, this.PD.offsetWidth, this.PD.offsetHeight);
					this.MDC = this.getByElement(cvid + '-canvas');
					this.MDCX = this.MDC.getContext('2d');
				}
				this.playerType = 'html5video';
				//播放器构建完成并且设置好样式
				//建立播放器的监听函数，包含操作监听及事件监听
				this.addVEvent();
				//根据清晰度的值构建清晰度切换按钮
				this.definition();
				this.playerLoad();
			} else { //如果不支持HTML5-VIDEO则调用flashplayer
				this.embedSWF();
			}
		},
		/*
			内部函数
			发送播放器加载成功的消息
		*/
		playerLoad: function() {
			var thisTemp = this;
			if(this.isFirst) {
				this.isFirst = false;
				window.setTimeout(function() {
					thisTemp.loadedHandler();
				}, 1);
			}
		},
		/*
			内部函数
			建立播放器的监听函数，包含操作监听及事件监听
		*/
		addVEvent: function() {
			var thisTemp = this;
			//监听视频单击事件
			var eventVideoClick = function(event) {
				thisTemp.videoClick();
			};
			this.addListenerInside('click', eventVideoClick);
			this.addListenerInside('click', eventVideoClick, this.MDC);
			//延迟计算加载失败事件
			this.timerErrorFun();
			//监听视频加载到元数据事件
			var eventJudgeIsLive = function(event) {
				thisTemp.sendJS('loadedmetadata');
				thisTemp.sendJS('duration', thisTemp.V.duration);
				thisTemp.judgeIsLive();
			};
			this.addListenerInside('loadedmetadata', eventJudgeIsLive);
			//监听视频播放事件
			var eventPlaying = function(event) {
				thisTemp.playingHandler();
				thisTemp.sendJS('play');
				thisTemp.sendJS('paused', false);
			};
			this.addListenerInside('playing', eventPlaying);
			//监听视频暂停事件
			var eventPause = function(event) {
				thisTemp.pauseHandler();
				thisTemp.sendJS('pause');
				thisTemp.sendJS('paused', true);
			};
			this.addListenerInside('pause', eventPause);
			//监听视频播放时间事件
			var eventTimeupdate = function(event) {
				if(thisTemp.timerLoading != null) {
					thisTemp.loadingStart(false);
				}
				if(thisTemp.time) {
					thisTemp.sendJS('time', thisTemp.time);
				}
			};
			this.addListenerInside('timeupdate', eventTimeupdate);
			//监听视频缓冲事件
			var eventWaiting = function(event) {
				thisTemp.loadingStart(true);
			};
			this.addListenerInside('waiting', eventWaiting);
			//监听视频seek开始事件
			var eventSeeking = function(event) {
				thisTemp.sendJS('seek', 'start');
			};
			this.addListenerInside('seeking', eventSeeking);
			//监听视频seek结束事件
			var eventSeeked = function(event) {
				thisTemp.seekedHandler();
				thisTemp.sendJS('seek', 'ended');
			};
			this.addListenerInside('seeked', eventSeeked);
			//监听视频播放结束事件
			var eventEnded = function(event) {
				thisTemp.endedHandler();
				thisTemp.sendJS('ended');
			};
			this.addListenerInside('ended', eventEnded);
			//监听视频音量
			var eventVolumeChange = function(event) {
				try {
					thisTemp.volumechangeHandler();
					thisTemp.sendJS('volume', thisTemp.volume);
				} catch(event) {}
			};
			this.addListenerInside('volumechange', eventVolumeChange);
			//建立界面
			this.interFace();
		},
		/*
			内部函数
			重置界面元素
		*/
		resetPlayer: function() {
			this.timeTextHandler();
			this.timeProgress(0, 1); //改变时间进度条宽
			this.changeLoad(0);
			this.initPlayPause(); //判断显示播放或暂停按钮
			// this.definition(); //构建清晰度按钮
			this.showFrontNext(); //构建上一集下一集按钮
			this.deletePrompt(); //删除提示点
			this.deletePreview(); //删除预览图
			this.trackHide(); //重置字幕
			this.resetTrack();
			this.trackElement = [];
			this.track = [];
		},
		/*
			内部函数
			构建界面元素
		 */
		interFace: function() {
			var thisTemp = this;
			var html = ''; //控制栏内容
			var i = 0;
			var bWidth = 38, //按钮的宽
				bHeight = 38; //按钮的高
			var bBgColor = '#FFFFFF', //按钮元素默认颜色
				bOverColor = '#0782F5'; //按钮元素鼠标经过时的颜色
			var timeInto = this.formatTime(0) + ' / ' + this.formatTime(this.vars['duration']); //时间显示框默认显示内容
			var randomS = this.randomString(10); //获取一个随机字符串
			/*
				以下定义界面各元素的ID，统一以ID结束
			*/
			var controlBarBgID = 'controlbgbar' + randomS, //控制栏背景
				controlBarID = 'controlbar' + randomS, //控制栏容器
				timeProgressBgID = 'timeprogressbg' + randomS, //播放进度条背景
				loadProgressID = 'loadprogress' + randomS, //加载进度条
				timeProgressID = 'timeprogress' + randomS, //播放进度条
				timeBOBGID = 'timebobg' + randomS, //播放进度按钮容器，该元素为一个透明覆盖在播放进度条上
				timeBOID = 'timebo' + randomS, //播放进度可拖动按钮外框
				timeBWID = 'timebw' + randomS, //播放进度可拖动按钮内框
				timeTextID = 'timetext' + randomS, //时间文本框
				playID = 'play' + randomS, //播放按钮
				pauseID = 'pause' + randomS, //暂停按钮
				frontID = 'front' + randomS, //前一集按钮
				nextID = 'next' + randomS, //下一集按钮
				fullID = 'full' + randomS, //全屏按钮
				escFullID = 'escfull' + randomS, //退出全屏按钮
				muteID = 'mute' + randomS, //静音按钮
				escMuteID = 'escmute' + randomS, //取消静音按钮				
				volumeID = 'volume' + randomS, //音量调节框容器
				volumeDbgID = 'volumedbg' + randomS, //音量调节框容器背景
				volumeBgID = 'volumebg' + randomS, //音量调节框背景层
				volumeUpID = 'volumeup' + randomS, //音量调节框可变宽度层
				volumeBOID = 'volumebo' + randomS, //音量调节按钮外框
				volumeBWID = 'volumebw' + randomS, //音量调节按钮内框
				definitionID = 'definition' + randomS, //清晰度容器
				definitionPID = 'definitionp' + randomS, //清晰度列表容器
				promptBgID = 'promptbg' + randomS, //提示框背景
				promptID = 'prompt' + randomS, //提示框
				dlineID = 'dline' + randomS, //分隔线共用前缀
				menuID = 'menu' + randomS, //右键容器
				pauseCenterID = 'pausecenter' + randomS, //中间暂停按钮
				loadingID = 'loading' + randomS, //缓冲
				errorTextID = 'errortext' + randomS, //错误文本框
				logoID = 'logo' + randomS; //logo
			//构建一些PD（播放器容器）里使用的元素
			var controlBarBg = document.createElement('div'),
				controlBar = document.createElement('div'),
				timeProgressBg = document.createElement('div'),
				timeBoBg = document.createElement('div'),
				pauseCenter = document.createElement('div'),
				errorText = document.createElement('div'),
				promptBg = document.createElement('div'),
				prompt = document.createElement('div'),
				menuDiv = document.createElement('div'),
				definitionP = document.createElement('div'),
				loading = document.createElement('div'),
				logo = document.createElement('div');

			controlBarBg.className = controlBarBgID;
			controlBar.className = controlBarID;
			timeProgressBg.className = timeProgressBgID;
			timeBoBg.className = timeBOBGID;
			promptBg.className = promptBgID;
			prompt.className = promptID;
			menuDiv.className = menuID;
			definitionP.className = definitionPID;
			pauseCenter.className = pauseCenterID;
			loading.className = loadingID;
			logo.className = logoID;
			errorText.className = errorTextID;

			this.PD.appendChild(controlBarBg);
			this.PD.appendChild(controlBar);
			this.PD.appendChild(timeProgressBg);
			this.PD.appendChild(timeBoBg);
			this.PD.appendChild(promptBg);
			this.PD.appendChild(prompt);
			this.PD.appendChild(definitionP);
			this.PD.appendChild(pauseCenter);

			this.PD.appendChild(loading);
			this.PD.appendChild(errorText);
			this.PD.appendChild(logo);
			this.body.appendChild(menuDiv);
			//构建一些PD（播放器容器）里使用的元素结束

			if(this.vars['live']) { //如果是直播，时间显示文本框里显示当前系统时间
				timeInto = this.getNowDate();
			}
			//构建控制栏的内容
			html += '<div class="' + playID + '" data-title="' + thisTemp.language['play'] + '">' + this.newCanvas(playID, bWidth, bHeight) + '</div>'; //播放按钮
			html += '<div class="' + pauseID + '" data-title="' + thisTemp.language['pause'] + '">' + this.newCanvas(pauseID, bWidth, bHeight) + '</div>'; //暂停按钮
			html += '<div class="' + dlineID + '-la"></div>'; //分隔线
			html += '<div class="' + frontID + '" data-title="' + thisTemp.language['front'] + '">' + this.newCanvas(frontID, bWidth, bHeight) + '</div>'; //前一集按钮
			html += '<div class="' + dlineID + '-lb"></div>'; //分隔线
			html += '<div class="' + nextID + '" data-title="' + thisTemp.language['next'] + '">' + this.newCanvas(nextID, bWidth, bHeight) + '</div>'; //下一集按钮
			html += '<div class="' + dlineID + '-lc"></div>'; //分隔线

			html += '<div class="' + timeTextID + '">' + timeInto + '</div>'; //时间文本
			html += '<div class="' + fullID + '" data-title="' + thisTemp.language['full'] + '">' + this.newCanvas(fullID, bWidth, bHeight) + '</div>'; //全屏按钮
			html += '<div class="' + escFullID + '" data-title="' + thisTemp.language['escFull'] + '">' + this.newCanvas(escFullID, bWidth, bHeight) + '</div>'; //退出全屏按钮
			html += '<div class="' + dlineID + '-ra"></div>'; //分隔线
			html += '<div class="' + definitionID + '" data-title="' + thisTemp.language['definition'] + '"></div>'; //清晰度容器
			html += '<div class="' + dlineID + '-rb"></div>'; //分隔线
			html += '<div class="' + volumeID + '"><div class="' + volumeDbgID + '"><div class="' + volumeBgID + '"><div class="' + volumeUpID + '"></div></div><div class="' + volumeBOID + '"><div class="' + volumeBWID + '"></div></div></div></div>'; //音量调节框,音量调节按钮
			html += '<div class="' + muteID + '" data-title="' + thisTemp.language['mute'] + '">' + this.newCanvas(muteID, bWidth, bHeight) + '</div>'; //静音按钮
			html += '<div class="' + escMuteID + '" data-title="' + thisTemp.language['escMute'] + '">' + this.newCanvas(escMuteID, bWidth, bHeight) + '</div>'; //退出静音按钮
			html += '<div class="' + dlineID + '-rc"></div>'; //分隔线
			this.getByElement(controlBarID).innerHTML = html;
			//构建控制栏内容结束
			//构建进度条内容
			this.getByElement(timeProgressBgID).innerHTML = '<div class="' + loadProgressID + '"></div><div class="' + timeProgressID + '"></div>';
			this.getByElement(timeBOBGID).innerHTML = '<div class="' + timeBOID + '"><div class="' + timeBWID + '"></div></div>';
			//构建进度条内容结束
			this.getByElement(pauseCenterID).innerHTML = this.newCanvas(pauseCenterID, 80, 80); //构建中间暂停按钮
			this.getByElement(loadingID).innerHTML = this.newCanvas(loadingID, 60, 60); //构建中间缓冲时显示的图标
			this.getByElement(errorTextID).innerHTML = this.language['error']; //构建错误时显示的文本框
			if(this.ckplayerConfig['style']['logo']['file']) {
				var logoFile = this.ckplayerConfig['style']['logo']['file'];
				if(logoFile.substr(0, 15) == 'data:image/png;' || logoFile.substr(0, 15) == 'data:image/jpg;' || logoFile.substr(0, 15) == 'data:image/jpeg;') {
					this.getByElement(logoID).innerHTML = '<img src="' + logoFile + '" border="0">'; //构建logo
				}
			} else {
				this.getByElement(logoID).innerHTML = this.vars['logo'] || this.logo || ''; //构建logo
			}
			//CB:Object：全局变量，将一些全局需要用到的元素统一放在CB对象里
			var pd = this.PD;
			this.CB = {
				controlBarBg: this.getByElement(controlBarBgID, pd),
				controlBar: this.getByElement(controlBarID, pd),
				promptBg: this.getByElement(promptBgID, pd),
				prompt: this.getByElement(promptID, pd),
				timeProgressBg: this.getByElement(timeProgressBgID, pd),
				loadProgress: this.getByElement(loadProgressID, pd),
				timeProgress: this.getByElement(timeProgressID, pd),
				timeBoBg: this.getByElement(timeBOBGID, pd),
				timeButton: this.getByElement(timeBOID, pd),
				timeText: this.getByElement(timeTextID, pd),
				play: this.getByElement(playID, pd),
				front: this.getByElement(frontID, pd),
				next: this.getByElement(nextID, pd),
				pause: this.getByElement(pauseID, pd),
				definition: this.getByElement(definitionID, pd),
				definitionP: this.getByElement(definitionPID, pd),
				definitionLine: this.getByElement(dlineID + '-rb', pd),
				full: this.getByElement(fullID, pd),
				escFull: this.getByElement(escFullID, pd),
				mute: this.getByElement(muteID, pd),
				escMute: this.getByElement(escMuteID, pd),
				volume: this.getByElement(volumeID, pd),
				volumeBg: this.getByElement(volumeBgID, pd),
				volumeUp: this.getByElement(volumeUpID, pd),
				volumeBO: this.getByElement(volumeBOID, pd),
				pauseCenter: this.getByElement(pauseCenterID, pd),
				menu: this.getByElement(menuID),
				loading: this.getByElement(loadingID, pd),
				loadingCanvas: this.getByElement(loadingID + '-canvas', pd),
				errorText: this.getByElement(errorTextID, pd),
				logo: this.getByElement(logoID, pd),
				playLine: this.getByElement(dlineID + '-la', pd),
				frontLine: this.getByElement(dlineID + '-lb', pd),
				nextLine: this.getByElement(dlineID + '-lc', pd),
				fullLine: this.getByElement(dlineID + '-ra'),
				definitionLine: this.getByElement(dlineID + '-rb', pd),
				muteLine: this.getByElement(dlineID + '-rc', pd)
			};
			this.buttonWidth = {
				play: bWidth,
				full: bWidth,
				front: bWidth,
				next: bWidth,
				mute: bWidth
			};
			//定义界面元素的样式
			//控制栏背景
			this.css(controlBarBgID, {
				width: '100%',
				height: bHeight + 'px',
				backgroundColor: '#000000',
				position: 'absolute',
				bottom: '0px',
				filter: 'alpha(opacity:0.8)',
				opacity: '0.8',
				zIndex: '90'
			});
			//控制栏容器
			this.css(controlBarID, {
				width: '100%',
				height: bHeight + 'px',
				position: 'absolute',
				bottom: '0px',
				zIndex: '90'
			});
			//中间暂停按钮
			this.css(pauseCenterID, {
				width: '80px',
				height: '80px',
				borderRadius: '50%',
				position: 'absolute',
				display: 'none',
				cursor: 'pointer',
				zIndex: '100'
			});
			//loading
			this.css(loadingID, {
				width: '60px',
				height: '60px',
				position: 'absolute',
				display: 'none',
				zIndex: '100'
			});
			//出错文本框
			this.css(errorTextID, {
				width: '120px',
				height: '30px',
				lineHeight: '30px',
				color: '#FFFFFF',
				fontSize: '14px',
				textAlign: 'center',
				position: 'absolute',
				display: 'none',
				zIndex: '101',
				cursor: 'default',
				zIndex: '100'
			});
			//定义logo文字的样式
			this.css(logoID, {
				height: '30px',
				lineHeight: '30px',
				color: '#FFFFFF',
				fontFamily: 'Arial',
				fontSize: '28px',
				textAlign: 'center',
				position: 'absolute',
				float: 'left',
				left: '-1000px',
				top: '20px',
				zIndex: '100',
				filter: 'alpha(opacity:0.8)',
				opacity: '0.8',
				cursor: 'default'
			});

			this.css(this.CB['loadingCanvas'], {
				transform: 'rotate(0deg)',
				msTransform: 'rotate(0deg)',
				mozTransform: 'rotate(0deg)',
				webkitTransform: 'rotate(0deg)',
				oTransform: 'rotate(0deg)'
			});
			//定义提示语的样式
			this.css([promptBgID, promptID], {
				height: '30px',
				lineHeight: '30px',
				color: '#FFFFFF',
				fontSize: '14px',
				textAlign: 'center',
				position: 'absolute',
				borderRadius: '5px',
				paddingLeft: '5px',
				paddingRight: '5px',
				bottom: '0px',
				display: 'none',
				zIndex: '95'
			});
			this.css(promptBgID, {
				backgroundColor: '#000000',
				filter: 'alpha(opacity:0.5)',
				opacity: '0.5'
			});
			//时间进度条背景容器
			this.css(timeProgressBgID, {
				width: '100%',
				height: '6px',
				backgroundColor: '#3F3F3F',
				overflow: 'hidden',
				position: 'absolute',
				bottom: '38px',
				zIndex: '88'
			});
			//加载进度和时间进度
			this.css([loadProgressID, timeProgressID], {
				width: '1px',
				height: '6px',
				position: 'absolute',
				bottom: '38px',
				top: '0px',
				zIndex: '91'
			});
			this.css(loadProgressID, 'backgroundColor', '#6F6F6F');
			this.css(timeProgressID, 'backgroundColor', bOverColor);
			//时间进度按钮
			this.css(timeBOBGID, {
				width: '100%',
				height: '14px',
				overflow: 'hidden',
				position: 'absolute',
				bottom: '34px',
				cursor: 'pointer',
				zIndex: '92'
			});
			this.css(timeBOID, {
				width: '14px',
				height: '14px',
				overflow: 'hidden',
				borderRadius: '50%',
				backgroundColor: bBgColor,
				cursor: 'pointer',
				position: 'absolute',
				top: '0px',
				zIndex: '20'
			});
			this.css(timeBWID, {
				width: '8px',
				height: '8px',
				overflow: 'hidden',
				borderRadius: '50%',
				position: 'absolute',
				backgroundColor: bOverColor,
				left: '3px',
				top: '3px'
			});
			this.css(timeTextID, {
				lineHeight: bHeight + 'px',
				color: '#FFFFFF',
				fontFamily: 'arial',
				fontSize: '16px',
				paddingLeft: '10px',
				float: 'left',
				overflow: 'hidden',
				cursor: 'default'
			});

			//分隔线
			this.css([dlineID + '-la', dlineID + '-lb', dlineID + '-lc', dlineID + '-ra', dlineID + '-rb', dlineID + '-rc'], {
				width: '0px',
				height: bHeight + 'px',
				overflow: 'hidden',
				borderLeft: '1px solid #303030',
				borderRight: '1px solid #151515',
				filter: 'alpha(opacity:0.9)',
				opacity: '0.9'
			});
			this.css([dlineID + '-la', dlineID + '-lb', dlineID + '-lc'], 'float', 'left');
			this.css([dlineID + '-ra', dlineID + '-rb', dlineID + '-rc'], 'float', 'right');
			this.css([dlineID + '-lb', dlineID + '-lc', dlineID + '-rb'], 'display', 'none');
			//播放/暂停/上一集/下一集按钮
			this.css([playID, pauseID, frontID, nextID], {
				width: bWidth + 'px',
				height: bHeight + 'px',
				float: 'left',
				overflow: 'hidden',
				cursor: 'pointer'
			});
			this.css([frontID, nextID], 'display', 'none');
			//初始化判断播放/暂停按钮隐藏项
			this.initPlayPause();

			//设置静音/取消静音的按钮样式
			this.css([muteID, escMuteID], {
				width: bWidth + 'px',
				height: bHeight + 'px',
				float: 'right',
				overflow: 'hidden',
				cursor: 'pointer'
			});
			if(this.vars['volume'] > 0) {
				this.css(escMuteID, 'display', 'none');
			} else {
				this.css(muteID, 'display', 'none');
			}
			//音量调节框
			this.css([volumeID, volumeDbgID], {
				width: '110px',
				height: bHeight + 'px',
				overflow: 'hidden',
				float: 'right'
			});
			this.css(volumeDbgID, {
				position: 'absolute'
			});
			this.css([volumeBgID, volumeUpID], {
				width: '100px',
				height: '6px',
				overflow: 'hidden',
				borderRadius: '5px',
				cursor: 'pointer'
			});
			this.css(volumeBgID, {
				position: 'absolute',
				top: '16px'
			});
			this.css(volumeBgID, 'backgroundColor', '#666666');
			this.css(volumeUpID, 'backgroundColor', bOverColor);
			this.buttonWidth['volume'] = 100;
			//音量调节按钮
			this.css(volumeBOID, {
				width: '12px',
				height: '12px',
				overflow: 'hidden',
				borderRadius: '50%',
				position: 'absolute',
				backgroundColor: bBgColor,
				top: '13px',
				left: '0px',
				cursor: 'pointer'
			});
			this.css(volumeBWID, {
				width: '6px',
				height: '6px',
				overflow: 'hidden',
				borderRadius: '50%',
				position: 'absolute',
				backgroundColor: bOverColor,
				left: '3px',
				top: '3px'
			});
			//清晰度容器
			this.css(definitionID, {
				lineHeight: bHeight + 'px',
				color: '#FFFFFF',
				float: 'right',
				fontSize: '14px',
				textAlign: 'center',
				overflow: 'hidden',
				display: 'none',
				cursor: 'pointer'
			});
			this.css(definitionPID, {
				lineHeight: (bHeight - 8) + 'px',
				color: '#FFFFFF',
				overflow: 'hidden',
				position: 'absolute',
				bottom: '4px',
				backgroundColor: '#000000',
				textAlign: 'center',
				zIndex: '95',
				cursor: 'pointer',
				display: 'none'
			});
			//设置全屏/退出全屏按钮样式
			this.css([fullID, escFullID], {
				width: bWidth + 'px',
				height: bHeight + 'px',
				float: 'right',
				overflow: 'hidden',
				cursor: 'pointer'
			});
			this.css(escFullID, 'display', 'none');
			//构建各按钮的形状
			//播放按钮
			var cPlay = this.getByElement(playID + '-canvas').getContext('2d');
			var cPlayFillRect = function() {
				thisTemp.canvasFill(cPlay, [
					[12, 10],
					[29, 19],
					[12, 28]
				]);
			};
			cPlay.fillStyle = bBgColor;
			cPlayFillRect();
			var cPlayOver = function(event) {
				cPlay.clearRect(0, 0, bWidth, bHeight);
				cPlay.fillStyle = bOverColor;
				cPlayFillRect();
			};
			var cPlayOut = function(event) {
				cPlay.clearRect(0, 0, bWidth, bHeight);
				cPlay.fillStyle = bBgColor;
				cPlayFillRect();
			};

			this.addListenerInside('mouseover', cPlayOver, this.getByElement(playID + '-canvas'));
			this.addListenerInside('mouseout', cPlayOut, this.getByElement(playID + '-canvas'));
			//暂停按钮
			var cPause = this.getByElement(pauseID + '-canvas').getContext('2d');
			var cPauseFillRect = function() {
				thisTemp.canvasFillRect(cPause, [
					[10, 10, 5, 18],
					[22, 10, 5, 18]
				]);
			};
			cPause.fillStyle = bBgColor;
			cPauseFillRect();
			var cPauseOver = function(event) {
				cPause.clearRect(0, 0, bWidth, bHeight);
				cPause.fillStyle = bOverColor;
				cPauseFillRect();
			};
			var cPauseOut = function(event) {
				cPause.clearRect(0, 0, bWidth, bHeight);
				cPause.fillStyle = bBgColor;
				cPauseFillRect();
			};
			this.addListenerInside('mouseover', cPauseOver, this.getByElement(pauseID + '-canvas'));
			this.addListenerInside('mouseout', cPauseOut, this.getByElement(pauseID + '-canvas'));
			//前一集按钮
			var cFront = this.getByElement(frontID + '-canvas').getContext('2d');
			var cFrontFillRect = function() {
				thisTemp.canvasFill(cFront, [
					[16, 19],
					[30, 10],
					[30, 28]
				]);
				thisTemp.canvasFillRect(cFront, [
					[8, 10, 5, 18]
				]);
			};
			cFront.fillStyle = bBgColor;
			cFrontFillRect();
			var cFrontOver = function(event) {
				cFront.clearRect(0, 0, bWidth, bHeight);
				cFront.fillStyle = bOverColor;
				cFrontFillRect();
			};
			var cFrontOut = function(event) {
				cFront.clearRect(0, 0, bWidth, bHeight);
				cFront.fillStyle = bBgColor;
				cFrontFillRect();
			};

			this.addListenerInside('mouseover', cFrontOver, this.getByElement(frontID + '-canvas'));
			this.addListenerInside('mouseout', cFrontOut, this.getByElement(frontID + '-canvas'));
			//下一集按钮
			var cNext = this.getByElement(nextID + '-canvas').getContext('2d');
			var cNextFillRect = function() {
				thisTemp.canvasFill(cNext, [
					[8, 10],
					[22, 19],
					[8, 28]
				]);
				thisTemp.canvasFillRect(cNext, [
					[25, 10, 5, 18]
				]);
			};
			cNext.fillStyle = bBgColor;
			cNextFillRect();
			var cNextOver = function(event) {
				cNext.clearRect(0, 0, bWidth, bHeight);
				cNext.fillStyle = bOverColor;
				cNextFillRect();
			};
			var cNextOut = function(event) {
				cNext.clearRect(0, 0, bWidth, bHeight);
				cNext.fillStyle = bBgColor;
				cNextFillRect();
			};
			this.addListenerInside('mouseover', cNextOver, this.getByElement(nextID + '-canvas'));
			this.addListenerInside('mouseout', cNextOut, this.getByElement(nextID + '-canvas'));
			//全屏按钮
			var cFull = this.getByElement(fullID + '-canvas').getContext('2d');
			var cFullFillRect = function() {
				thisTemp.canvasFillRect(cFull, [
					[19, 10, 9, 3],
					[25, 13, 3, 6],
					[10, 19, 3, 9],
					[13, 25, 6, 3]
				]);
			};
			cFull.fillStyle = bBgColor;
			cFullFillRect();
			var cFullOver = function() {
				cFull.clearRect(0, 0, bWidth, bHeight);
				cFull.fillStyle = bOverColor;
				cFullFillRect();
			};
			var cFullOut = function() {
				cFull.clearRect(0, 0, bWidth, bHeight);
				cFull.fillStyle = bBgColor;
				cFullFillRect();
			};
			this.addListenerInside('mouseover', cFullOver, this.getByElement(fullID + '-canvas'));
			this.addListenerInside('mouseout', cFullOut, this.getByElement(fullID + '-canvas'));
			//定义退出全屏按钮样式
			var cEscFull = this.getByElement(escFullID + '-canvas').getContext('2d');
			var cEscFullFillRect = function() {
				thisTemp.canvasFillRect(cEscFull, [
					[20, 9, 3, 9],
					[23, 15, 6, 3],
					[9, 20, 9, 3],
					[15, 23, 3, 6]
				]);
			};
			cEscFull.fillStyle = bBgColor;
			cEscFullFillRect();

			var cEscFullOver = function() {
				cEscFull.clearRect(0, 0, bWidth, bHeight);
				cEscFull.fillStyle = bOverColor;
				cEscFullFillRect();
			};
			var cEscFullOut = function() {
				cEscFull.clearRect(0, 0, bWidth, bHeight);
				cEscFull.fillStyle = bBgColor;
				cEscFullFillRect();
			};
			this.addListenerInside('mouseover', cEscFullOver, this.getByElement(escFullID + '-canvas'));
			this.addListenerInside('mouseout', cEscFullOut, this.getByElement(escFullID + '-canvas'));
			//定义全屏按钮的样式
			var cMute = this.getByElement(muteID + '-canvas').getContext('2d');
			var cMuteFillRect = function() {
				thisTemp.canvasFill(cMute, [
					[10, 15],
					[15, 15],
					[21, 10],
					[21, 28],
					[15, 23],
					[10, 23]
				]);
				thisTemp.canvasFillRect(cMute, [
					[23, 15, 2, 8],
					[27, 10, 2, 18]
				]);
			};
			cMute.fillStyle = bBgColor;
			cMuteFillRect();
			var cMuteOver = function() {
				cMute.clearRect(0, 0, bWidth, bHeight);
				cMute.fillStyle = bOverColor;
				cMuteFillRect();
			};
			var cMuteOut = function() {
				cMute.clearRect(0, 0, bWidth, bHeight);
				cMute.fillStyle = bBgColor;
				cMuteFillRect();
			};
			this.addListenerInside('mouseover', cMuteOver, this.getByElement(muteID + '-canvas'));
			this.addListenerInside('mouseout', cMuteOut, this.getByElement(muteID + '-canvas'));
			//定义退出全屏按钮样式
			var cEscMute = this.getByElement(escMuteID + '-canvas').getContext('2d');
			var cEscMuteFillRect = function() {
				thisTemp.canvasFill(cEscMute, [
					[10, 15],
					[15, 15],
					[21, 10],
					[21, 28],
					[15, 23],
					[10, 23]
				]);
				thisTemp.canvasFill(cEscMute, [
					[23, 13],
					[24, 13],
					[33, 25],
					[32, 25]
				]);
				thisTemp.canvasFill(cEscMute, [
					[32, 13],
					[33, 13],
					[24, 25],
					[23, 25]
				]);
			};
			cEscMute.fillStyle = bBgColor;
			cEscMuteFillRect();
			var cEscMuteOver = function() {
				cEscMute.clearRect(0, 0, bWidth, bHeight);
				cEscMute.fillStyle = bOverColor;
				cEscMuteFillRect();
			};
			var cEscMuteOut = function() {
				cEscMute.clearRect(0, 0, bWidth, bHeight);
				cEscMute.fillStyle = bBgColor;
				cEscMuteFillRect();
			};
			this.addListenerInside('mouseover', cEscMuteOver, this.getByElement(escMuteID + '-canvas'));
			this.addListenerInside('mouseout', cEscMuteOut, this.getByElement(escMuteID + '-canvas'));
			//定义loading样式
			var cLoading = this.getByElement(loadingID + '-canvas').getContext('2d');
			var cLoadingFillRect = function() {
				cLoading.save();
				var grad = cLoading.createLinearGradient(0, 0, 60, 60);
				grad.addColorStop(0, bBgColor);
				var grad2 = cLoading.createLinearGradient(0, 0, 80, 60);
				grad2.addColorStop(1, bOverColor);
				cLoading.strokeStyle = grad; //设置描边样式
				cLoading.lineWidth = 8; //设置线宽
				cLoading.beginPath(); //路径开始
				cLoading.arc(30, 30, 25, 0.25 * Math.PI, 2 * Math.PI, false); //用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)
				cLoading.stroke(); //绘制
				cLoading.closePath(); //路径结束
				cLoading.beginPath(); //路径开始
				cLoading.strokeStyle = grad2; //设置描边样式
				cLoading.arc(30, 30, 25, 0, 0.25 * Math.PI, false); //用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)
				cLoading.stroke(); //绘制
				cLoading.closePath(); //路径结束
				cLoading.restore();
			};
			cLoading.fillStyle = bBgColor;
			cLoadingFillRect();
			//定义中间暂停按钮的样式
			var cPauseCenter = this.getByElement(pauseCenterID + '-canvas').getContext('2d');
			var cPauseCenterFillRect = function() {
				thisTemp.canvasFill(cPauseCenter, [
					[28, 22],
					[59, 38],
					[28, 58]
				]);
				/* 指定几个颜色 */
				cPauseCenter.save();
				cPauseCenter.lineWidth = 5; //设置线宽
				cPauseCenter.beginPath(); //路径开始
				cPauseCenter.arc(40, 40, 35, 0, 2 * Math.PI, false); //用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)
				cPauseCenter.stroke(); //绘制
				cPauseCenter.closePath(); //路径结束
				cPauseCenter.restore();
			};
			cPauseCenter.fillStyle = bBgColor;
			cPauseCenter.strokeStyle = bBgColor;
			cPauseCenterFillRect();
			var cPauseCenterOver = function() {
				cPauseCenter.clearRect(0, 0, 80, 80);
				cPauseCenter.fillStyle = bOverColor;
				cPauseCenter.strokeStyle = bOverColor;
				cPauseCenterFillRect();
			};
			var cPauseCenterOut = function() {
				cPauseCenter.clearRect(0, 0, 80, 80);
				cPauseCenter.fillStyle = bBgColor;
				cPauseCenter.strokeStyle = bBgColor;
				cPauseCenterFillRect();
			};
			this.addListenerInside('mouseover', cPauseCenterOver, this.getByElement(pauseCenterID + '-canvas'));
			this.addListenerInside('mouseout', cPauseCenterOut, this.getByElement(pauseCenterID + '-canvas'));

			//鼠标经过/离开音量调节按钮
			var volumeBOOver = function() {
				thisTemp.css(volumeBOID, 'backgroundColor', bOverColor);
				thisTemp.css(volumeBWID, 'backgroundColor', bBgColor);
			};
			var volumeBOOut = function() {
				thisTemp.css(volumeBOID, 'backgroundColor', bBgColor);
				thisTemp.css(volumeBWID, 'backgroundColor', bOverColor);
			};
			this.addListenerInside('mouseover', volumeBOOver, this.getByElement(volumeBOID));
			this.addListenerInside('mouseout', volumeBOOut, this.getByElement(volumeBOID));
			//鼠标经过/离开进度按钮
			var timeBOOver = function() {
				thisTemp.css(timeBOID, 'backgroundColor', bOverColor);
				thisTemp.css(timeBWID, 'backgroundColor', bBgColor);
			};
			var timeBOOut = function() {
				thisTemp.css(timeBOID, 'backgroundColor', bBgColor);
				thisTemp.css(timeBWID, 'backgroundColor', bOverColor);
			};
			this.addListenerInside('mouseover', timeBOOver, this.getByElement(timeBOID));
			this.addListenerInside('mouseout', timeBOOut, this.getByElement(timeBOID));

			this.addButtonEvent(); //注册按钮及音量调节，进度操作事件
			this.newMenu(); //单独设置右键的样式和事件
			this.controlBarHide(); //单独注册控制栏隐藏事件
			this.keypress(); //单独注册键盘事件
			//初始化音量调节框
			this.changeVolume(this.vars['volume']);
			//初始化判断是否需要显示上一集和下一集按钮
			this.showFrontNext();
			window.setTimeout(function() {
				thisTemp.elementCoordinate(); //调整中间暂停按钮/loading的位置/error的位置
			}, 100);
			this.checkBarWidth();
			var resize = function() {
				thisTemp.elementCoordinate();
				thisTemp.timeUpdateHandler();
				thisTemp.changeLoad();
				thisTemp.checkBarWidth();
				thisTemp.changeElementCoor(); //修改新加元件的坐标
				thisTemp.changePrompt();
			};
			this.addListenerInside('resize', resize, window);
		},
		/*
			内部函数
			创建按钮，使用canvas画布
		*/
		newCanvas: function(id, width, height) {
			return '<canvas class="' + id + '-canvas" width="' + width + '" height="' + height + '"></canvas>';
		},
		/*
			内部函数
			注册按钮，音量调节框，进度操作框事件
		*/
		addButtonEvent: function() {
			var thisTemp = this;
			//定义按钮的单击事件
			var playClick = function(event) {
				thisTemp.videoPlay();
			};
			this.addListenerInside('click', playClick, this.CB['play']);
			this.addListenerInside('click', playClick, this.CB['pauseCenter']);
			var pauseClick = function(event) {
				thisTemp.videoPause();
			};
			this.addListenerInside('click', pauseClick, this.CB['pause']);
			var frontClick = function(event) {
				if(thisTemp.vars['front']) {
					eval(thisTemp.vars['front'] + '()');
				}
			};
			this.addListenerInside('click', frontClick, this.CB['front']);
			var nextClick = function(event) {
				if(thisTemp.vars['next']) {
					eval(thisTemp.vars['next'] + '()');
				}
			};
			this.addListenerInside('click', nextClick, this.CB['next']);
			var muteClick = function(event) {
				thisTemp.videoMute();
			};
			this.addListenerInside('click', muteClick, this.CB['mute']);
			var escMuteClick = function(event) {
				thisTemp.videoEscMute();
			};
			this.addListenerInside('click', escMuteClick, this.CB['escMute']);
			var fullClick = function(event) {
				thisTemp.fullScreen();
			};
			this.addListenerInside('click', fullClick, this.CB['full']);
			var escFullClick = function(event) {
				thisTemp.quitFullScreen();
			};
			this.addListenerInside('click', escFullClick, this.CB['escFull']);
			//定义各个按钮的鼠标经过/离开事件
			var promptHide = function(event) {
				thisTemp.promptShow(false);
			};
			var playOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['play']);
			};
			this.addListenerInside('mouseover', playOver, this.CB['play']);
			this.addListenerInside('mouseout', promptHide, this.CB['play']);
			var pauseOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['pause']);
			};
			this.addListenerInside('mouseover', pauseOver, this.CB['pause']);
			this.addListenerInside('mouseout', promptHide, this.CB['pause']);
			var frontOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['front']);
			};
			this.addListenerInside('mouseover', frontOver, this.CB['front']);
			this.addListenerInside('mouseout', promptHide, this.CB['front']);
			var nextOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['next']);
			};
			this.addListenerInside('mouseover', nextOver, this.CB['next']);
			this.addListenerInside('mouseout', promptHide, this.CB['next']);
			var muteOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['mute']);
			};
			this.addListenerInside('mouseover', muteOver, this.CB['mute']);
			this.addListenerInside('mouseout', promptHide, this.CB['mute']);
			var escMuteOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['escMute']);
			};
			this.addListenerInside('mouseover', escMuteOver, this.CB['escMute']);
			this.addListenerInside('mouseout', promptHide, this.CB['escMute']);
			var fullOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['full']);
			};
			this.addListenerInside('mouseover', fullOver, this.CB['full']);
			this.addListenerInside('mouseout', promptHide, this.CB['full']);
			var escFullOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['escFull']);
			};
			this.addListenerInside('mouseover', escFullOver, this.CB['escFull']);
			this.addListenerInside('mouseout', promptHide, this.CB['escFull']);
			var definitionOver = function(event) {
				thisTemp.promptShow(thisTemp.CB['definition']);
			};
			this.addListenerInside('mouseover', definitionOver, this.CB['definition']);
			this.addListenerInside('mouseout', promptHide, this.CB['definition']);
			//定义音量和进度按钮的滑块事件

			var volumePrompt = function(vol) {
				var volumeBOXY = thisTemp.getCoor(thisTemp.CB['volumeBO']);
				var promptObj = {
					title: thisTemp.language['volume'] + vol + '%',
					x: volumeBOXY['x'] + thisTemp.CB['volumeBO'].offsetWidth * 0.5,
					y: volumeBOXY['y']
				};
				thisTemp.promptShow(false, promptObj);
			};
			var volumeObj = {
				slider: this.CB['volumeBO'],
				follow: this.CB['volumeUp'],
				refer: this.CB['volumeBg'],
				grossValue: 'volume',
				pd: true,
				startFun: function(vol) {},
				monitorFun: function(vol) {
					thisTemp.changeVolume(vol * 0.01, false, false);
					volumePrompt(vol);
				},
				endFun: function(vol) {},
				overFun: function(vol) {
					volumePrompt(vol);
				}
			};
			this.slider(volumeObj);
			var volumeClickObj = {
				refer: this.CB['volumeBg'],
				grossValue: 'volume',
				fun: function(vol) {
					thisTemp.changeVolume(vol * 0.01, true, true);
				}
			};
			this.progressClick(volumeClickObj);
			this.timeButtonMouseDown(); //用单击的函数来判断是否需要建立控制栏监听
			//鼠标经过/离开音量调节框时的
			var volumeBgMove = function(event) {
				var volumeBgXY = thisTemp.getCoor(thisTemp.CB['volumeBg']);
				var eventX = thisTemp.client(event)['x'];
				var eventVolume = parseInt((eventX - volumeBgXY['x']) * 100 / thisTemp.CB['volumeBg'].offsetWidth);
				var buttonPromptObj = {
					title: thisTemp.language['volume'] + eventVolume + '%',
					x: eventX,
					y: volumeBgXY['y']
				};
				thisTemp.promptShow(false, buttonPromptObj);
			};
			this.addListenerInside('mousemove', volumeBgMove, this.CB['volumeBg']);
			this.addListenerInside('mouseout', promptHide, this.CB['volumeBg']);
			this.addListenerInside('mouseout', promptHide, this.CB['volumeBO']);
			//注册清晰度相关事件
			this.addDefListener();
		},
		/*
			内部函数
			注册单击视频动作
		*/
		videoClick: function() {
			var thisTemp = this;
			var clearTimerClick = function() {
				if(thisTemp.timerClick != null) {
					if(thisTemp.timerClick.runing) {
						thisTemp.timerClick.stop();
					}
					thisTemp.timerClick = null;
				}
			};
			var timerClickFun = function() {
				clearTimerClick();
				thisTemp.isClick = false;
				thisTemp.playOrPause();

			};
			clearTimerClick();
			if(this.isClick) {
				this.isClick = false;
				if(thisTemp.config['videoDbClick']) {
					if(!this.full) {
						thisTemp.fullScreen();
					} else {
						thisTemp.quitFullScreen();
					}
				}

			} else {
				this.isClick = true;
				this.timerClick = new this.timer(300, timerClickFun, 1)
				//this.timerClick.start();
			}

		},
		/*
			内部函数
			注册鼠标经过进度滑块的事件
		*/
		timeButtonMouseDown: function() {
			var thisTemp = this;
			var timePrompt = function(time) {
				if(isNaN(time)) {
					time = 0;
				}
				var timeButtonXY = thisTemp.getCoor(thisTemp.CB['timeButton']);
				var promptObj = {
					title: thisTemp.formatTime(time),
					x: timeButtonXY['x'] - thisTemp.pdCoor['x'] + thisTemp.CB['timeButton'].offsetWidth * 0.5,
					y: timeButtonXY['y'] - thisTemp.pdCoor['y']
				};
				thisTemp.promptShow(false, promptObj);
			};
			var timeObj = {
				slider: this.CB['timeButton'],
				follow: this.CB['timeProgress'],
				refer: this.CB['timeBoBg'],
				grossValue: 'time',
				pd: false,
				startFun: function(time) {
					thisTemp.isTimeButtonMove = false;
				},
				monitorFun: function(time) {},
				endFun: function(time) {
					if(thisTemp.V) {
						if(thisTemp.V.duration > 0) {
							thisTemp.needSeek = 0;
							thisTemp.videoSeek(parseInt(time));
						}
					}
				},
				overFun: function(time) {
					timePrompt(time);
				}
			};
			var timeClickObj = {
				refer: this.CB['timeBoBg'],
				grossValue: 'time',
				fun: function(time) {
					if(thisTemp.V) {
						if(thisTemp.V.duration > 0) {
							thisTemp.needSeek = 0;
							thisTemp.videoSeek(parseInt(time));
						}
					}
				}
			};
			var timeBoBgmousemove = function(event) {
				var timeBoBgXY = thisTemp.getCoor(thisTemp.CB['timeBoBg']);
				var eventX = thisTemp.client(event)['x'];
				var eventTime = parseInt((eventX - timeBoBgXY['x']) * thisTemp.V.duration / thisTemp.CB['timeBoBg'].offsetWidth);
				var buttonPromptObj = {
					title: thisTemp.formatTime(eventTime),
					x: eventX,
					y: timeBoBgXY['y']
				};
				thisTemp.promptShow(false, buttonPromptObj);
				var def = false;
				if(!thisTemp.isUndefined(thisTemp.CB['definitionP'])) {
					if(thisTemp.css(thisTemp.CB['definitionP'], 'display') != 'block') {
						def = true;
					}
				}
				if(thisTemp.vars['preview'] != null && def) {
					buttonPromptObj['time'] = eventTime;
					thisTemp.preview(buttonPromptObj);
				}
			};
			var promptHide = function(event) {
				thisTemp.promptShow(false);
				if(thisTemp.previewDiv != null) {
					thisTemp.css([thisTemp.previewDiv, thisTemp.previewTop], 'display', 'none');
				}
			};
			if(!this.vars['live']) { //如果不是直播
				this.isTimeButtonDown = true;
				this.addListenerInside('mousemove', timeBoBgmousemove, this.CB['timeBoBg']);
				this.addListenerInside('mouseout', promptHide, this.CB['timeBoBg']);
			} else {
				this.isTimeButtonDown = false;
				timeObj['removeListenerInside'] = true;
				timeClickObj['removeListenerInside'] = true;
			}
			this.slider(timeObj);
			this.progressClick(timeClickObj);
		},
		/*
			内部函数
			注册调节框上单击事件，包含音量调节框和播放时度调节框
		*/
		progressClick: function(obj) {
			/*
				refer:参考对象
				fun:返回函数
				refer:参考元素，即背景
				grossValue:调用的参考值类型
				pd:
			*/
			//建立参考元素的mouseClick事件，用来做为鼠标在其上按下时触发的状态
			var thisTemp = this;
			var referMouseClick = function(event) {
				var referX = thisTemp.client(event)['x'] - thisTemp.getCoor(obj['refer'])['x'];
				var rWidth = obj['refer'].offsetWidth;
				var grossValue = 0;
				if(obj['grossValue'] == 'volume') {
					grossValue = 100;
				} else {
					if(thisTemp.V) {
						grossValue = thisTemp.V.duration;
					}
				}
				var nowZ = parseInt(referX * grossValue / rWidth);
				if(obj['fun']) {
					obj['fun'](nowZ);
				}
			};
			if(this.isUndefined(obj['removeListenerInside'])) {
				this.addListenerInside('click', referMouseClick, obj['refer']);
			} else {
				this.removeListenerInside('click', referMouseClick, obj['refer']);
			}

		},

		/*
			内部函数
			共用的注册滑块事件
		*/
		slider: function(obj) {
			/*
				obj={
					slider:滑块元素
					follow:跟随滑块的元素
					refer:参考元素，即背景
					grossValue:调用的参考值类型
					startFun:开始调用的元素
					monitorFun:监听函数
					endFun:结束调用的函数
					overFun:鼠标放上去后调用的函数
					pd:是否需要修正
				}
			*/
			var thisTemp = this;
			var clientX = 0,
				criterionWidth = 0,
				sliderLeft = 0,
				referLeft = 0;
			var value = 0;
			var calculation = function() { //根据滑块的left计算百分比
				var sLeft = parseInt(thisTemp.css(obj['slider'], 'left'));
				var rWidth = obj['refer'].offsetWidth - obj['slider'].offsetWidth;
				var grossValue = 0;
				if(thisTemp.isUndefined(sLeft) || isNaN(sLeft)) {
					sLeft = 0;
				}
				if(obj['grossValue'] == 'volume') {
					grossValue = 100;
				} else {
					if(thisTemp.V) {
						grossValue = thisTemp.V.duration;
					}
				}
				return parseInt(sLeft * grossValue / rWidth);
			};
			var mDown = function(event) {
				thisTemp.addListenerInside('mousemove', mMove, document);
				thisTemp.addListenerInside('mouseup', mUp, document);
				var referXY = thisTemp.getCoor(obj['refer']);
				var sliderXY = thisTemp.getCoor(obj['slider']);
				clientX = thisTemp.client(event)['x'];
				referLeft = referXY['x'];
				sliderLeft = sliderXY['x'];
				criterionWidth = clientX - sliderLeft;
				if(obj['startFun']) {
					obj['startFun'](calculation());
				}
			};
			var mMove = function(event) {
				clientX = thisTemp.client(event)['x'];
				var newX = clientX - criterionWidth - referLeft;
				if(newX < 0) {
					newX = 0;
				}
				if(newX > obj['refer'].offsetWidth - obj['slider'].offsetWidth) {
					newX = obj['refer'].offsetWidth - obj['slider'].offsetWidth;
				}
				thisTemp.css(obj['slider'], 'left', newX + 'px');
				thisTemp.css(obj['follow'], 'width', (newX + obj['slider'].offsetWidth * 0.5) + 'px');
				var nowZ = calculation();
				if(obj['monitorFun']) {
					obj['monitorFun'](nowZ);
				}
			};
			var mUp = function(event) {
				thisTemp.removeListenerInside('mousemove', mMove, document);
				thisTemp.removeListenerInside('mouseup', mUp, document);
				if(obj['endFun']) {
					obj['endFun'](calculation());
				}
			};
			var mOver = function(event) {
				if(obj['overFun']) {
					obj['overFun'](calculation());
				}

			};
			if(this.isUndefined(obj['removeListenerInside'])) {
				this.addListenerInside('mousedown', mDown, obj['slider']);
				this.addListenerInside('mouseover', mOver, obj['slider']);
			} else {
				this.removeListenerInside('mousedown', mDown, obj['slider']);
				this.removeListenerInside('mouseover', mOver, obj['slider']);
			}
		},
		/*
			内部函数
			显示loading
		*/
		loadingStart: function(rot) {
			var thisTemp = this;
			if(this.isUndefined(rot)) {
				rot = true;
			}
			this.css(thisTemp.CB['loading'], 'display', 'none');
			if(this.timerLoading != null) {
				if(this.timerLoading.runing) {
					this.timerLoading.stop();
				}
				this.timerLoading = null;
			}
			var buffer = 0;
			var loadingFun = function() {
				var nowRotate = '0';
				try {
					nowRotate = thisTemp.css(thisTemp.CB['loadingCanvas'], 'transform') || thisTemp.css(thisTemp.CB['loadingCanvas'], '-ms-transform') || thisTemp.css(thisTemp.CB['loadingCanvas'], '-moz-transform') || thisTemp.css(thisTemp.CB['loadingCanvas'], '-webkit-transform') || thisTemp.css(thisTemp.CB['loadingCanvas'], '-o-transform') || '0';
				} catch(event) {}
				nowRotate = parseInt(nowRotate.replace('rotate(', '').replace('deg);', ''));
				nowRotate += 4;
				if(nowRotate > 360) {
					nowRotate = 0;
				}
				thisTemp.css(thisTemp.CB['loadingCanvas'], {
					transform: 'rotate(' + nowRotate + 'deg)',
					msTransform: 'rotate(' + nowRotate + 'deg)',
					mozTransform: 'rotate(' + nowRotate + 'deg)',
					webkitTransform: 'rotate(' + nowRotate + 'deg)',
					oTransform: 'rotate(' + nowRotate + 'deg)'
				});
				buffer++;
				if(buffer >= 99) {
					buffer = 99;
				}
				thisTemp.sendJS('buffer', buffer);
			};
			if(rot) {
				this.timerLoading = new this.timer(10, loadingFun);
				//this.timerLoading.start();
				this.css(thisTemp.CB['loading'], 'display', 'block');
			} else {
				thisTemp.sendJS('buffer', 100);
			}
		},
		/*
			内部函数
			判断是否需要显示上一集和下一集
		*/
		showFrontNext: function() {
			if(this.vars['front']) {
				this.css([this.CB['front'], this.CB['frontLine']], 'display', 'block');
			} else {
				this.css([this.CB['front'], this.CB['frontLine']], 'display', 'none');
			}
			if(this.vars['next']) {
				this.css([this.CB['next'], this.CB['nextLine']], 'display', 'block');
			} else {
				this.css([this.CB['next'], this.CB['nextLine']], 'display', 'none');
			}
		},
		/*
			内部函数
			显示提示语
		*/
		promptShow: function(ele, data) {
			var obj = {};
			if(ele || data) {
				if(!this.isUndefined(data)) {
					obj = data;
				} else {
					var offsetCoor = this.getCoor(ele);
					obj = {
						title: this.getDataset(ele, 'title'),
						x: offsetCoor['x'] + ele.offsetWidth * 0.5,
						y: offsetCoor['y']
					};
				}
				this.CB['prompt'].innerHTML = obj['title'];
				this.css(this.CB['prompt'], 'display', 'block');
				var promoptWidth = this.getStringLen(obj['title']) * 10;
				this.css(this.CB['promptBg'], 'width', promoptWidth + 'px');
				this.css(this.CB['prompt'], 'width', promoptWidth + 'px');
				promoptWidth += 10;
				var x = obj['x'] - (promoptWidth * 0.5);
				var y = this.PD.offsetHeight - obj['y'] + 8;
				if(x < 0) {
					x = 0;
				}
				if(x > this.PD.offsetWidth - promoptWidth) {
					x = this.PD.offsetWidth - promoptWidth;
				}
				this.css([this.CB['promptBg'], this.CB['prompt']], {
					display: 'block',
					left: x + 'px',
					bottom: y + 'px'
				});
			} else {
				this.css([this.CB['promptBg'], this.CB['prompt']], {
					display: 'none'
				});
			}
		},
		/*
			内部函数
			监听错误
		*/
		timerErrorFun: function() {
			var thisTemp = this;
			var clearIntervalError = function(event) {
				if(thisTemp.timerError != null) {
					if(thisTemp.timerError.runing) {
						thisTemp.timerError.stop();
					}
					thisTemp.timerError = null;
				}
			};
			var errorFun = function(event) {
				clearIntervalError();
				thisTemp.error = true;
				//提取错误播放地址
				thisTemp.errorUrl = thisTemp.getVideoUrl();
				//提取错误播放地址结束
				thisTemp.sendJS('error');
				thisTemp.css(thisTemp.CB['errorText'], 'display', 'block');
				thisTemp.css(thisTemp.CB['pauseCenter'], 'display', 'none');
				thisTemp.css(thisTemp.CB['loading'], 'display', 'none');
				thisTemp.V.removeAttribute('poster');
				thisTemp.resetPlayer();
			};
			var errorListenerFun = function(event) {
				window.setTimeout(function() {
					if(isNaN(thisTemp.V.duration)) {
						errorFun(event);
					}
				}, 500);

			};
			this.addListenerInside('error', errorListenerFun, this.V);
			clearIntervalError();
			var timerErrorFun = function() {
				if(thisTemp.V && parseInt(thisTemp.V.networkState) == 3) {
					errorFun();
				}
			};
			this.timerError = new this.timer(this.config['errorTime'], timerErrorFun);
			//this.timerError.start();
		},
		/*
			内部函数
			构建判断全屏还是非全屏的判断
		*/
		judgeFullScreen: function() {
			var thisTemp = this;
			if(this.timerFull != null) {
				if(this.timerFull.runing) {
					this.timerFull.stop();
				}
				this.timerFull = null;
			}
			var fullFun = function() {
				thisTemp.isFullScreen();
			};
			this.timerFull = new this.timer(20, fullFun);
			//this.timerFull.start();
		},
		/*
			内部函数
			判断是否是全屏
		*/
		isFullScreen: function() {
			var controlbarbgW = this.CB['controlBarBg'].offsetWidth;
			var containerW = this.CD.offsetWidth;
			if(controlbarbgW != containerW && !this.full) {
				this.full = true;
				this.sendJS('full', true);
				this.elementCoordinate();
				this.css(this.CB['full'], 'display', 'none');
				this.css(this.CB['escFull'], 'display', 'block');
				if(this.vars['live'] == 0) {
					this.timeUpdateHandler();
				}
				this.PD.appendChild(this.CB['menu']);
			}
			if(controlbarbgW == containerW && this.full) {
				this.full = false;
				this.sendJS('full', false);
				this.elementCoordinate();
				this.css(this.CB['full'], 'display', 'block');
				this.css(this.CB['escFull'], 'display', 'none');
				if(this.timerFull != null) {
					if(this.timerFull.runing) {
						this.timerFull.stop();
					}
					this.timerFull = null;
				}
				if(this.vars['live'] == 0) {
					this.timeUpdateHandler();
				}
				this.body.appendChild(this.CB['menu']);
			}
		},
		/*
			内部函数
			构建右键内容及注册相关动作事件
		*/
		newMenu: function() {
			var thisTemp = this;
			var i = 0;
			this.css(this.CB['menu'], {
				backgroundColor: '#FFFFFF',
				padding: '5px',
				position: 'absolute',
				left: '10px',
				top: '20px',
				display: 'none',
				zIndex: '999',
				color: '#A1A9BE',
				boxShadow: '2px 2px 3px #AAAAAA'
			});
			var mArr = this.contextMenu;
			var html = '';
			for(i = 0; i < mArr.length; i++) {
				var me = mArr[i];
				switch(me[1]) {
					case 'default':
						html += '<p>' + me[0] + '</p>';
						break;
					case 'link':
						html += '<p><a href="' + me[2] + '" target="_blank">' + me[0] + '</a></p>';
						break;
					case 'javascript':
						html += '<p><a href="javascript:' + me[2] + '()">' + me[0] + '</a></p>';
						break;
					case 'function':
						html += '<p><a href="javascript:' + this.vars['variable'] + '.' + me[2] + '()">' + me[0] + '</a></p>';
						break;
					default:
						break;
				}
			}
			this.CB['menu'].innerHTML = html;
			var pArr = this.CB['menu'].childNodes;
			for(i = 0; i < pArr.length; i++) {
				this.css(pArr[i], {
					height: '30px',
					lineHeight: '30px',
					margin: '0px',
					fontFamily: this.fontFamily,
					fontSize: '12px',
					paddingLeft: '10px',
					paddingRight: '30px'
				});
				if(mArr[i].length >= 4) {
					if(mArr[i][3] == 'line') {
						this.css(pArr[i], 'borderTop', '1px solid #e9e9e9');
					}
				}
				var aArr = pArr[i].childNodes;
				for(var n = 0; n < aArr.length; n++) {
					if(aArr[n].localName == 'a') {
						this.css(aArr[n], {
							color: '#000000',
							textDecoration: 'none'
						});
					}
				}
			}
			this.PD.oncontextmenu = function(event) {
				var eve = event || window.event;
				var client = thisTemp.client(event);
				if(eve.button == 2) {
					eve.returnvalue = false;
					var x = client['x'] + thisTemp.pdCoor['x'] - 2;
					var y = client['y'] + thisTemp.pdCoor['y'] - 2;
					thisTemp.css(thisTemp.CB['menu'], {
						display: 'block',
						left: x + 'px',
						top: y + 'px'
					});
					return false;
				}
				return true;
			};
			var setTimeOutPClose = function() {
				if(setTimeOutP) {
					window.clearTimeout(setTimeOutP);
					setTimeOutP = null;
				}
			};
			var setTimeOutP = null;
			var mouseOut = function(event) {
				setTimeOutPClose();
				setTimeOutP = window.setTimeout(function(event) {
					thisTemp.css(thisTemp.CB['menu'], 'display', 'none');
				}, 500);
			};
			this.addListenerInside('mouseout', mouseOut, thisTemp.CB['menu']);
			var mouseOver = function(event) {
				setTimeOutPClose();
			};
			this.addListenerInside('mouseover', mouseOver, thisTemp.CB['menu']);

		},
		/*
			内部函数
			构建控制栏隐藏事件
		*/
		controlBarHide: function() {
			var thisTemp = this;
			var client = {
					x: 0,
					y: 0
				},
				oldClient = {
					x: 0,
					y: 0
				};
			var cShow = true;
			var oldCoor = [0, 0];
			var controlBarShow = function(show) {
				if(show && !cShow) {
					cShow = true;
					thisTemp.css(thisTemp.CB['controlBarBg'], 'display', 'block');
					thisTemp.css(thisTemp.CB['controlBar'], 'display', 'block');
					thisTemp.css(thisTemp.CB['timeProgressBg'], 'display', 'block');
					thisTemp.css(thisTemp.CB['timeBoBg'], 'display', 'block');
					thisTemp.changeVolume(thisTemp.volume);
					thisTemp.changeLoad();
					if(!thisTemp.timerBuffer) {
						thisTemp.bufferEdHandler();
					}
				} else {
					if(cShow) {
						cShow = false;
						var paused = thisTemp.getMetaDate()['paused'];
						if(!paused) {
							thisTemp.css(thisTemp.CB['controlBarBg'], 'display', 'none');
							thisTemp.css(thisTemp.CB['controlBar'], 'display', 'none');
							thisTemp.css(thisTemp.CB['timeProgressBg'], 'display', 'none');
							thisTemp.css(thisTemp.CB['timeBoBg'], 'display', 'none');
							thisTemp.promptShow(false);

						}
					}
				}
			};
			var cbarFun = function(event) {
				if(client['x'] == oldClient['x'] && client['y'] == oldClient['y']) {
					var cdH = parseInt(thisTemp.CD.offsetHeight);
					if((client['y'] < cdH - 50 || client['y'] > cdH - 2) && cShow) {
						controlBarShow(false);
					}
				} else {
					if(!cShow) {
						controlBarShow(true);
					}
				}
				oldClient = {
					x: client['x'],
					y: client['y']
				}
			};
			this.timerCBar = new this.timer(2000, cbarFun);
			var cdMove = function(event) {
				var getClient = thisTemp.client(event);
				client['x'] = getClient['x'];
				client['y'] = getClient['y'];
				if(!cShow) {
					controlBarShow(true);
				}
			};
			this.addListenerInside('mousemove', cdMove, thisTemp.CD);
			this.addListenerInside('ended', cdMove);
			this.addListenerInside('resize', cdMove, window);
		},
		/*
			内部函数
			注册键盘按键事件
		*/
		keypress: function() {
			var thisTemp = this;
			var keyDown = function(eve) {
				var keycode = eve.keyCode || eve.which;
				switch(keycode) {
					case 32:
						thisTemp.playOrPause();
						break;
					case 37:
						thisTemp.fastBack();
						break;
					case 39:
						thisTemp.fastNext();
						break;
					case 38:
						now = thisTemp.volume + this.ckplayerConfig['config']['volumeJump'];
						thisTemp.changeVolume(now > 1 ? 1 : now);
						break;
					case 40:
						now = thisTemp.volume - this.ckplayerConfig['config']['volumeJump'];
						thisTemp.changeVolume(now < 0 ? 0 : now);
						break;
					default:
						break;
				}
			};
			this.addListenerInside('keydown', keyDown, window || document);
		},

		/*
			内部函数
			构建清晰度按钮及切换事件(Click事件)
		*/
		definition: function() {
			var thisTemp = this;
			var vArr = this.VA;
			var dArr = [];
			var html = '';
			var nowD = ''; //当前的清晰度
			var i = 0;
			for(i = 0; i < vArr.length; i++) {
				var d = vArr[i][2];
				if(dArr.indexOf(d) == -1) {
					dArr.push(d);
				}
				if(this.V) {
					if(vArr[i][0] == this.V.currentSrc) {
						nowD = d;
					}
				}
			}
			if(!nowD) {
				nowD = dArr[0];
			}
			if(dArr.length > 1) {
				var zlen = 0;
				for(i = dArr.length - 1; i > -1; i--) {
					html = '<p>' + dArr[i] + '</p>' + html;
					var dlen = this.getStringLen(dArr[i]);
					if(dlen > zlen) {
						zlen = dlen;
					}
				}
				if(html) {
					html += '<p>' + nowD + '</p>';
				}
				this.CB['definition'].innerHTML = nowD;
				this.CB['definitionP'].innerHTML = html;
				this.css([this.CB['definition'], this.CB['definitionLine']], 'display', 'block');
				var pArr = this.CB['definitionP'].childNodes;
				for(var i = 0; i < pArr.length; i++) {
					var fontColor = '#FFFFFF';
					if(pArr[i].innerHTML == nowD) {
						fontColor = '#0782F5';
					}
					this.css(pArr[i], {
						color: fontColor,
						margin: '0px',
						padding: '0px',
						fontSize: '14px'
					});
					if(i < pArr.length - 1) {
						this.css(pArr[i], 'borderBottom', '1px solid #282828')
					}
					var defClick = function() {
						if(nowD != this.innerHTML) {
							thisTemp.css(thisTemp.CB['definitionP'], 'display', 'none');
							thisTemp.newDefinition(this.innerHTML);
						}
					};
					this.addListenerInside('click', defClick, pArr[i]);

				}
				var pW = (zlen * 10) + 20;
				this.css(this.CB['definitionP'], {
					width: pW + 'px'
				});
				this.css(this.CB['definition'], {
					width: pW + 'px'
				});
				this.buttonWidth['definition'] = this.CB['definition'].offsetWidth;
			} else {
				this.CB['definition'].innerHTML = '';
				this.CB['definitionP'].innerHTML = '';
				this.css([this.CB['definition'], this.CB['definitionLine']], 'display', 'none');
			}
		},
		/*
			内部函数
			注册清晰度相关事件
		*/
		addDefListener: function() {
			var thisTemp = this;
			var setTimeOutP = null;
			var defClick = function(event) {
				thisTemp.css(thisTemp.CB['definitionP'], {
					left: thisTemp.getCoor(thisTemp.CB['definition'])['x'] + 'px',
					display: 'block'
				});
			};
			this.addListenerInside('click', defClick, this.CB['definition']);
			var defMouseOut = function(event) {
				if(setTimeOutP) {
					window.clearTimeout(setTimeOutP);
					setTimeOutP = null;
				}
				setTimeOutP = window.setTimeout(function(event) {
					thisTemp.css(thisTemp.CB['definitionP'], 'display', 'none');
				}, 500);
			};
			this.addListenerInside('mouseout', defMouseOut, thisTemp.CB['definitionP']);
			var defMouseOver = function(event) {
				if(setTimeOutP) {
					window.clearTimeout(setTimeOutP);
					setTimeOutP = null;
				}
			};
			this.addListenerInside('mouseover', defMouseOver, thisTemp.CB['definitionP']);
		},
		/*
			内部函数
			切换清晰度后发生的动作
		*/
		newDefinition: function(title) {
			var vArr = this.VA;
			var nVArr = [];
			var i = 0;
			for(i = 0; i < vArr.length; i++) {
				var v = vArr[i];
				if(v[2] == title) {
					nVArr.push(v);
				}
			}
			if(nVArr.length < 1) {
				return;
			}
			if(this.V != null && this.needSeek == 0) {
				this.needSeek = this.V.currentTime;
			}
			if(this.getFileExt(nVArr[0][0]) != '.m3u8') {
				this.isM3u8 = false;
			}
			if(!this.isM3u8) {
				if(nVArr.length == 1) {
					this.V.innerHTML = '';
					this.V.src = nVArr[0][0];
				} else {
					var source = '';
					nVArr = this.arrSort(nVArr);
					for(i = 0; i < nVArr.length; i++) {
						var type = '';
						var va = nVArr[i];
						if(va[1]) {
							type = ' type="' + va[1] + '"';
						}
						source += '<source src="' + va[0] + '"' + type + '>';
					}
					this.V.removeAttribute('src');
					this.V.innerHTML = source;
				}
			} else {
				this.embedHls(vArr[0][0], this.vars['autoplay']);
			}
			this.V.autoplay = 'autoplay';
			this.V.load();
			this.timerErrorFun();
		},
		/*
			内置函数
			播放hls
		*/
		embedHls: function(url, autoplay) {
			var thisTemp = this;
			if(Hls.isSupported()) {
				var hls = new Hls();
				hls.loadSource(url);
				hls.attachMedia(this.V);
				hls.on(Hls.Events.MANIFEST_PARSED, function() {
					thisTemp.playerLoad();
					if(autoplay) {
						thisTemp.videoPlay();
					}
				});
			}
		},
		/*
			内部函数
			构建提示点
		*/
		prompt: function() {
			var thisTemp = this;
			var prompt = this.vars['promptSpot'];
			if(prompt == null || this.promptArr.length > 0) {
				return;
			}
			var showPrompt = function(event) {
				if(thisTemp.promptElement == null) {
					var random2 = 'prompte' + thisTemp.randomString(5);
					var ele2 = document.createElement('div');
					ele2.className = random2;
					thisTemp.PD.appendChild(ele2);
					thisTemp.promptElement = thisTemp.getByElement(random2);
					thisTemp.css(thisTemp.promptElement, {
						overflowX: 'hidden',
						lineHeight: '22px',
						fontSize: '14px',
						color: '#FFFFFF',
						position: 'absolute',
						display: 'block',
						zIndex: '90'
					});
				}
				var pcon = thisTemp.getPromptTest();
				var pW = pcon['pW'],
					pT = pcon['pT'],
					pL = parseInt(thisTemp.css(this, 'left')) - parseInt(pW * 0.5);
				if(pcon['pL'] > 10) {
					pL = pcon['pL'];
				}
				if(pL < 0) {
					pL = 0;
				}
				thisTemp.css(thisTemp.promptElement, {
					width: pW + 'px',
					left: (-pW - 10) + 'px',
					display: 'block'
				});
				thisTemp.promptElement.innerHTML = thisTemp.getDataset(this, 'words');
				thisTemp.css(thisTemp.promptElement, {
					left: pL + 'px',
					top: (pT - thisTemp.promptElement.offsetHeight - 10) + 'px'
				});
			};
			var hidePrompt = function(event) {
				if(thisTemp.promptElement != null) {
					thisTemp.css(thisTemp.promptElement, {
						display: 'none'
					});
				}
			};
			var i = 0;
			for(i = 0; i < prompt.length; i++) {
				var pr = prompt[i];
				var words = pr['words'];
				var time = pr['time'];
				var random = 'prompt' + this.randomString(5);
				var ele = document.createElement('div');
				ele.className = random;
				this.CB['timeBoBg'].appendChild(ele);
				var div = this.getByElement(random);
				div.setAttribute('data-time', time);
				div.setAttribute('data-words', words);
				this.css(div, {
					width: '6px',
					height: '6px',
					backgroundColor: '#FFFFFF',
					position: 'absolute',
					top: '4px',
					left: '-100px',
					display: 'none',
					zIndex: '1'
				});

				this.addListenerInside('mouseover', showPrompt, div);
				this.addListenerInside('mouseout', hidePrompt, div);
				this.promptArr.push(div);
			}
			this.changePrompt();
		},
		/*
			内部函数
			计算提示文本的位置
		*/
		getPromptTest: function() {
			var pW = this.previewWidth,
				pT = this.getCoor(this.CB['timeButton'])['y'],
				pL = 0;
			if(this.previewTop != null) {
				pT -= parseInt(this.css(this.previewTop, 'height'));
				pL = parseInt(this.css(this.previewTop, 'left'));
			} else {
				pT -= 35;
			}
			pL += 2;
			if(pL < 0) {
				pL = 0;
			}
			if(pL > this.PD.offsetWidth - pW) {
				pL = this.PD.offsetWidth - pW;
			}
			return {
				pW: pW,
				pT: pT,
				pL: pL
			};
		},
		/*
			内部函数
			删除提示点
		*/
		deletePrompt: function() {
			var arr = this.promptArr;
			if(arr.length > 0) {
				for(var i = 0; i < arr.length; i++) {
					if(arr[i]) {
						this.deleteChild(arr[i]);
					}
				}
			}
			this.promptArr = [];
		},
		/*
			内部函数
			计算提示点坐标
		*/
		changePrompt: function() {
			if(this.promptArr.length == 0) {
				return;
			}
			var arr = this.promptArr;
			var duration = this.getMetaDate()['duration'];
			var bw = this.CB['timeBoBg'].offsetWidth;
			for(var i = 0; i < arr.length; i++) {
				var time = parseInt(this.getDataset(arr[i], 'time'));
				var left = parseInt(time * bw / duration) - parseInt(arr[i].offsetWidth * 0.5);
				if(left < 0) {
					left = 0;
				}
				if(left > bw - parseInt(arr[i].offsetWidth * 0.5)) {
					left = bw - parseInt(arr[i].offsetWidth * 0.5);
				}
				this.css(arr[i], {
					left: left + 'px',
					display: 'block'
				});
			}
		},
		/*
			内部函数
			构建预览图片效果
		*/
		preview: function(obj) {
			var thisTemp = this;
			var preview = {
				file: null,
				scale: 0
			};
			preview = this.standardization(preview, this.vars['preview']);
			if(preview['file'] == null || preview['scale'] <= 0) {
				return;
			}
			var srcArr = preview['file'];
			if(this.previewStart == 0) { //如果还没有构建，则先进行构建
				this.previewStart = 1;
				if(srcArr.length > 0) {
					var i = 0;
					var imgW = 0,
						imgH = 0;
					var random = thisTemp.randomString(10);
					var loadNum = 0;
					var loadImg = function(i) {
						srcArr[i] = thisTemp.getNewUrl(srcArr[i]);
						var n = 0;
						var img = new Image();
						img.src = srcArr[i];
						img.className = random + i;
						img.onload = function(event) {
							loadNum++;
							if(thisTemp.previewDiv == null) { //如果没有建立DIV，则建
								imgW = img.width;
								imgH = img.height;
								thisTemp.previewWidth = parseInt(imgW * 0.1);
								var ele = document.createElement('div');
								ele.className = random;
								thisTemp.PD.appendChild(ele);
								thisTemp.previewDiv = thisTemp.getByElement(random);
								var eleTop = (obj['y'] - parseInt(imgH * 0.1) + 2);
								thisTemp.css(thisTemp.previewDiv, {
									width: srcArr.length * imgW * 10 + 'px',
									height: parseInt(imgH * 0.1) + 'px',
									backgroundColor: '#000000',
									position: 'absolute',
									left: '0px',
									top: eleTop + 'px',
									display: 'none',
									zIndex: '80'
								});
								ele.setAttribute('data-x', '0');
								ele.setAttribute('data-y', eleTop);
								var ele2 = document.createElement('div');
								ele2.className = random + 'd2';
								thisTemp.PD.appendChild(ele2);
								thisTemp.previewTop = thisTemp.getByElement(ele2.className);
								thisTemp.css(thisTemp.previewTop, {
									width: parseInt(imgW * 0.1) + 'px',
									height: parseInt(imgH * 0.1) + 'px',
									position: 'absolute',
									border: '5px solid ' + thisTemp.css(thisTemp.CB['timeProgress'], 'backgroundColor'),
									left: '0px',
									top: (obj['y'] - parseInt(imgH * 0.1) + 2) + 'px',
									display: 'none',
									zIndex: '81'
								});
								var html = '';
								for(n = 0; n < srcArr.length; n++) {
									html += thisTemp.newCanvas(random + n, imgW * 10, parseInt(imgH * 0.1))
								}
								thisTemp.previewDiv.innerHTML = html;
							}
							thisTemp.previewDiv.appendChild(img);
							var cimg = thisTemp.getByElement(img.className);
							var canvas = thisTemp.getByElement(img.className + '-canvas');
							var context = canvas.getContext('2d');
							var sx = 0,
								sy = 0,
								x = 0,
								h = parseInt(imgH * 0.1);
							for(n = 0; n < 100; n++) {
								x = parseInt(n * imgW * 0.1);
								context.drawImage(cimg, sx, sy, parseInt(imgW * 0.1), h, x, 0, parseInt(imgW * 0.1), h);
								sx += parseInt(imgW * 0.1);
								if(sx >= imgW) {
									sx = 0;
									sy += h;
								}
								thisTemp.css(cimg, 'display', 'none');
							}
							if(loadNum == srcArr.length) {
								thisTemp.previewStart = 2;
							} else {
								i++;
								loadImg(i);
							}
						};
					};
				}
				loadImg(i);
				return;
			}
			if(this.previewStart == 2) {
				var isTween = true;
				var nowNum = parseInt(obj['time'] / this.vars['preview']['scale']);
				var numTotal = parseInt(thisTemp.getMetaDate()['duration'] / this.vars['preview']['scale']);
				if(thisTemp.css(thisTemp.previewDiv, 'display') == 'none') {
					isTween = false;
				}
				thisTemp.css(thisTemp.previewDiv, 'display', 'block');
				var imgWidth = thisTemp.previewDiv.offsetWidth * 0.01 / srcArr.length;
				var left = (imgWidth * nowNum) - obj['x'] + parseInt(imgWidth * 0.5),
					top = obj['y'] - thisTemp.previewDiv.offsetHeight;
				thisTemp.css(thisTemp.previewDiv, 'top', top + 2 + 'px');
				var topLeft = obj['x'] - parseInt(imgWidth * 0.5);
				var timepieces = 0;
				if(topLeft < 0) {
					topLeft = 0;
					timepieces = obj['x'] - topLeft - imgWidth * 0.5;
				}
				if(topLeft > thisTemp.PD.offsetWidth - imgWidth) {
					topLeft = thisTemp.PD.offsetWidth - imgWidth;
					timepieces = obj['x'] - topLeft - imgWidth * 0.5;
				}
				if(left < 0) {
					left = 0;
				}
				if(left > numTotal * imgWidth - thisTemp.PD.offsetWidth) {
					left = numTotal * imgWidth - thisTemp.PD.offsetWidth;
				}
				thisTemp.css(thisTemp.previewTop, {
					left: topLeft + 'px',
					top: top + 2 + 'px',
					display: 'block'
				});
				if(thisTemp.previewTop.offsetHeight > thisTemp.previewDiv.offsetHeight) {
					thisTemp.css(thisTemp.previewTop, {
						height: thisTemp.previewDiv.offsetHeight - (thisTemp.previewTop.offsetHeight - thisTemp.previewDiv.offsetHeight) + 'px'
					});
				}
				if(this.previewTween != null) {
					this.animatePause(this.previewTween);
					this.previewTween = null
				}
				var nowLeft = parseInt(thisTemp.css(thisTemp.previewDiv, 'left'));
				var leftC = nowLeft + left;
				if(nowLeft == -(left + timepieces)) {
					return;
				}
				if(isTween) {
					var obj = {
						element: thisTemp.previewDiv,
						start: null,
						end: -(left + timepieces),
						speed: 0.3
					};
					this.previewTween = this.animate(obj);
				} else {
					thisTemp.css(thisTemp.previewDiv, 'left', -(left + timepieces) + 'px')
				}
			}
		},
		/*
			内部函数
			删除预览图节点
		*/
		deletePreview: function() {
			if(this.previewDiv != null) {
				this.deleteChild(this.previewDiv);
				this.previewDiv = null;
				this.previewStart = 0;
			}
		},
		/*
			内部函数
			修改视频地址，属性
		*/
		changeVideo: function() {
			if(!this.html5Video) {
				this.getVarsObject();
				this.V.newVideo(this.vars);
				return;
			}
			var vArr = this.VA;
			var v = this.vars;
			var i = 0;
			if(vArr.length < 1) {
				return;
			}
			if(this.V != null && this.needSeek == 0) {
				this.needSeek = this.V.currentTime;
			}
			if(v['poster']) {
				this.V.poster = v['poster'];
			} else {
				this.V.removeAttribute('poster');
			}
			if(v['loop']) {
				this.V.loop = 'loop';
			} else {
				this.V.removeAttribute('loop');
			}
			if(v['seek'] > 0) {
				this.needSeek = v['seek'];
			} else {
				this.needSeek = 0;
			}
			if(this.getFileExt(vArr[0][0]) != '.m3u8') {
				this.isM3u8 = false;
			}
			if(!this.isM3u8) {
				if(vArr.length == 1) {
					this.V.innerHTML = '';
					this.V.src = vArr[0][0];
				} else {
					var source = '';
					vArr = this.arrSort(vArr);
					for(i = 0; i < vArr.length; i++) {
						var type = '';
						var va = vArr[i];
						if(va[1]) {
							type = ' type="' + va[1] + '"';
						}
						source += '<source src="' + va[0] + '"' + type + '>';
					}
					this.V.removeAttribute('src');
					this.V.innerHTML = source;
				}
				//分析视频地址结束
				if(v['autoplay']) {
					this.V.autoplay = 'autoplay';
				} else {
					this.V.removeAttribute('autoplay');
				}
				this.V.load();
			} else {
				this.embedHls(vArr[0][0], v['autoplay']);
			}
			if(!this.isUndefined(v['volume'])) {
				this.changeVolume(v['volume']);
			}
			this.resetPlayer(); //重置界面元素
			this.timerErrorFun();
			//如果存在字幕则加载
			if(this.vars['cktrack']) {
				this.loadTrack();
			}
		},
		/*
			内部函数
			调整中间暂停按钮,缓冲loading，错误提示文本框的位置
		*/
		elementCoordinate: function() {
			this.pdCoor = this.getXY(this.PD);
			this.css(this.CB['pauseCenter'], {
				left: parseInt((this.PD.offsetWidth - 80) * 0.5) + 'px',
				top: parseInt((this.PD.offsetHeight - 80) * 0.5) + 'px'
			});
			this.css(this.CB['loading'], {
				left: parseInt((this.PD.offsetWidth - 60) * 0.5) + 'px',
				top: parseInt((this.PD.offsetHeight - 60) * 0.5) + 'px'
			});
			this.css(this.CB['errorText'], {
				left: parseInt((this.PD.offsetWidth - 120) * 0.5) + 'px',
				top: parseInt((this.PD.offsetHeight - 30) * 0.5) + 'px'
			});
			this.css(this.CB['logo'], {
				left: parseInt(this.PD.offsetWidth - this.CB['logo'].offsetWidth - 20) + 'px',
				top: '20px'
			});
			this.checkBarWidth();
		},
		/*
			内部函数
			当播放器尺寸变化时，显示和隐藏相关节点
		*/
		checkBarWidth: function() {
			var controlBarW = this.CB['controlBar'].offsetWidth;
			var ele = [];
			ele.push([
				[this.CB['full'], this.CB['escFull'], this.CB['fullLine']], this.buttonWidth['full'] + 2, 'full'
			]);
			if(this.vars['front'] != '') {
				ele.push([
					[this.CB['front'], this.CB['frontLine']], this.buttonWidth['front'] + 2
				]);
			}
			if(this.vars['next'] != '') {
				ele.push([
					[this.CB['next'], this.CB['nextLine']], this.buttonWidth['next'] + 2
				]);
			}
			if(this.CB['definition'].innerHTML != '') {
				ele.push([
					[this.CB['definition'], this.CB['definitionLine']], this.buttonWidth['definition'] + 2
				]);
			}
			ele.push([
				[this.CB['volume']], this.buttonWidth['volume']
			]);
			ele.push([
				[this.CB['mute'], this.CB['escMute'], this.CB['muteLine']], this.buttonWidth['mute'] + 2, 'mute'
			]);
			ele.push([
				[this.CB['timeText']], this.buttonWidth['timeText']
			]);
			ele.push([
				[this.CB['play'], this.CB['pause'], this.CB['playLine']], this.buttonWidth['play'] + 2, 'play'
			]);

			var i = 0;
			var len = 0;
			var isc = true;
			//计算所有要显示的节点的总宽度
			for(var i = 0; i < ele.length; i++) {
				var nlen = ele[i][1];
				if(nlen > 2) {
					len += nlen;
				} else {
					isc = false;
				}
			}
			if(isc) {
				this.buttonLen = len;
				this.buttonArr = ele;
			}
			len = this.buttonLen;
			ele = this.buttonArr;
			for(var i = 0; i < ele.length; i++) {
				if(len > controlBarW) {
					len -= ele[i][1];
					this.css(ele[i][0], 'display', 'none');
				} else {
					this.css(ele[i][0], 'display', 'block');
					if(ele[i].length == 3) {
						var name = ele[i][2];
						switch(name) {
							case 'mute':
								if(this.volume == 0) {
									this.css(this.CB['mute'], 'display', 'none');
								} else {
									this.css(this.CB['escMute'], 'display', 'none');
								}
								break;
							case 'play':
								this.playShow(this.V.paused ? false : true);
								break;
							case 'full':
								if(this.full) {
									this.css(this.CB['full'], 'display', 'none');
								} else {
									this.css(this.CB['escFull'], 'display', 'none');
								}
								break;
						}
					}
				}
			}
		},
		/*
			内部函数
			初始化暂停或播放按钮
		*/
		initPlayPause: function() {
			if(this.vars['autoplay']) {
				this.css([this.CB['play'], this.CB['pauseCenter']], 'display', 'none');
				this.css(this.CB['pause'], 'display', 'block');
			} else {
				this.css(this.CB['play'], 'display', 'block');
				if(this.css(this.CB['errorText'], 'display') == 'none') {
					this.css(this.CB['pauseCenter'], 'display', 'block');
				}
				this.css(this.CB['pause'], 'display', 'none');
			}
		},

		/*
			下面为监听事件
			内部函数
			监听元数据已加载
		*/
		loadedHandler: function() {
			this.loaded = true;
			if(this.vars['loaded'] != '') {
				try {
					eval(this.vars['loaded'] + '()');
				} catch(event) {
					this.log(event);
				}
			}
		},
		/*
			内部函数
			监听播放
		*/
		playingHandler: function() {
			this.playShow(true);
			if(this.needSeek > 0) {
				this.videoSeek(this.needSeek);
				this.needSeek = 0;
			}
			if(this.animatePauseArray.length > 0) {
				this.animateResume('pause');
			}
			if(this.playerType == 'html5video' && this.V != null && this.config['videoDrawImage']) {
				this.sendVCanvas();
			}
		},
		/*
			内部函数
			使用画布附加视频
		*/
		sendVCanvas: function() {
			if(this.timerVCanvas == null) {
				this.css(this.V, 'display', 'none');
				this.css(this.MD, 'display', 'block');
				var thisTemp = this;
				var videoCanvas = function() {
					if(thisTemp.MDCX.width != thisTemp.PD.offsetWidth) {
						thisTemp.MDC.width = thisTemp.PD.offsetWidth;
					}
					if(thisTemp.MDCX.height != thisTemp.PD.offsetHeight) {
						thisTemp.MDC.height = thisTemp.PD.offsetHeight;
					}
					thisTemp.MDCX.clearRect(0, 0, thisTemp.MDCX.width, thisTemp.MDCX.height);
					var coor = thisTemp.getProportionCoor(thisTemp.PD.offsetWidth, thisTemp.PD.offsetHeight, thisTemp.V.videoWidth, thisTemp.V.videoHeight);
					thisTemp.MDCX.drawImage(thisTemp.V, 0, 0, thisTemp.V.videoWidth, thisTemp.V.videoHeight, coor['x'], coor['y'], coor['width'], coor['height']);
				};
				this.timerVCanvas = new this.timer(0, videoCanvas);
			}
		},
		/*
			内部函数
			监听暂停
		*/
		pauseHandler: function() {
			this.playShow(false);
			if(this.animatePauseArray.length > 0) {
				this.animatePause('pause');
			}
			if(this.playerType == 'html5video' && this.V != null && this.config['videoDrawImage']) {
				this.stopVCanvas();
			}
		},
		/*
			内部函数
			停止画布
		*/
		stopVCanvas: function() {
			if(this.timerVCanvas != null) {
				this.css(this.V, 'display', 'block');
				this.css(this.MD, 'display', 'none');
				if(this.timerVCanvas.runing) {
					this.timerVCanvas.stop();
				}
				this.timerVCanvas = null;
			}
		},
		/*
			内部函数
			根据当前播放还是暂停确认图标显示
		*/
		playShow: function(b) {
			if(b) {
				this.css(this.CB['play'], 'display', 'none');
				this.css(this.CB['pauseCenter'], 'display', 'none');
				this.css(this.CB['pause'], 'display', 'block');
			} else {
				this.css(this.CB['play'], 'display', 'block');
				if(this.css(this.CB['errorText'], 'display') == 'none') {
					this.css(this.CB['pauseCenter'], 'display', 'block');
				} else {
					this.css(this.CB['pauseCenter'], 'display', 'none');
				}
				this.css(this.CB['pause'], 'display', 'none');
			}
		},
		/*
			内部函数
			监听seek结束
		*/
		seekedHandler: function() {
			this.resetTrack();
			this.isTimeButtonMove = true;
			if(this.V.paused) {
				this.videoPlay();
			}
		},
		/*
			内部函数
			监听播放结束
		*/
		endedHandler: function() {
			if(!this.vars['loop']) {
				this.videoPause();
			}
		},
		/*
			内部函数
			监听音量改变
		*/
		volumechangeHandler: function() {
			try {
				if(this.V.volume > 0) {
					this.css(this.CB['mute'], 'display', 'block');
					this.css(this.CB['escMute'], 'display', 'none');
				} else {
					this.css(this.CB['mute'], 'display', 'none');
					this.css(this.CB['escMute'], 'display', 'block');
				}
			} catch(event) {}
		},

		/*
			内部函数
			监听播放时间调节进度条
		*/
		timeUpdateHandler: function() {
			var duration = 0;
			if(this.playerType == 'html5video') {
				try {
					duration = this.V.duration;
				} catch(event) {}
			}
			if(duration > 0) {
				this.time = this.V.currentTime;
				this.timeTextHandler();
				this.trackShowHandler();
				if(this.isTimeButtonMove) {
					this.timeProgress(this.time, duration);
				}
			}
		},
		/*
			内部函数
			按时间改变进度条
		*/
		timeProgress: function(time, duration) {
			var timeProgressBgW = this.CB['timeProgressBg'].offsetWidth;
			var timeBOW = parseInt((time * timeProgressBgW / duration) - (this.CB['timeButton'].offsetWidth * 0.5));
			if(timeBOW > timeProgressBgW - this.CB['timeButton'].offsetWidth) {
				timeBOW = timeProgressBgW - this.CB['timeButton'].offsetWidth;
			}
			if(timeBOW < 0) {
				timeBOW = 0;
			}
			this.css(this.CB['timeProgress'], 'width', timeBOW + 'px');
			this.css(this.CB['timeButton'], 'left', parseInt(timeBOW) + 'px');
		},
		/*
			内部函数
			监听播放时间改变时间显示文本框
		*/
		timeTextHandler: function() { //显示时间/总时间
			var duration = this.V.duration;
			var time = this.V.currentTime;
			if(isNaN(duration) || parseInt(duration) < 0.2) {
				duration = this.vars['duration'];
			}
			this.CB['timeText'].innerHTML = this.formatTime(time) + ' / ' + this.formatTime(duration);
			if(this.CB['timeText'].offsetWidth > 0) {
				this.buttonWidth['timeText'] = this.CB['timeText'].offsetWidth;
			}
		},
		/*
			内部函数
			监听是否是缓冲状态
		*/
		bufferEdHandler: function() {
			var thisTemp = this;
			var clearTimerBuffer = function() {
				if(thisTemp.timerBuffer != null) {
					if(thisTemp.timerBuffer.runing) {
						thisTemp.sendJS('buffer', 100);
						thisTemp.timerBuffer.stop();
					}
					thisTemp.timerBuffer = null;
				}
			};
			clearTimerBuffer();
			var bufferFun = function() {
				if(thisTemp.V.buffered.length > 0) {
					var duration = thisTemp.V.duration;
					var len = thisTemp.V.buffered.length;
					var bufferStart = thisTemp.V.buffered.start(len - 1);
					var bufferEnd = thisTemp.V.buffered.end(len - 1);
					var loadTime = bufferStart + bufferEnd;
					var loadProgressBgW = thisTemp.CB['timeProgressBg'].offsetWidth;
					var timeButtonW = thisTemp.CB['timeButton'].offsetWidth;
					var loadW = parseInt((loadTime * loadProgressBgW / duration) + timeButtonW);
					if(loadW >= loadProgressBgW) {
						loadW = loadProgressBgW;
						clearTimerBuffer();
					}
					thisTemp.changeLoad(loadTime);
				}
			};
			this.timerBuffer = new this.timer(200, bufferFun);
		},
		/*
			内部函数
			单独计算加载进度
		*/
		changeLoad: function(loadTime) {
			if(this.V == null) {
				return;
			}
			var loadProgressBgW = this.CB['timeProgressBg'].offsetWidth;
			var timeButtonW = this.CB['timeButton'].offsetWidth;
			var duration = this.V.duration;
			if(this.isUndefined(loadTime)) {
				loadTime = this.loadTime;
			} else {
				this.loadTime = loadTime;
			}
			var loadW = parseInt((loadTime * loadProgressBgW / duration) + timeButtonW);
			this.css(this.CB['loadProgress'], 'width', loadW + 'px');
		},
		/*
			内部函数
			判断是否是直播
		*/
		judgeIsLive: function() {
			var thisTemp = this;
			if(this.timerError != null) {
				if(this.timerError.runing) {
					this.timerError.stop();
				}
				this.timerError = null;
			}
			this.error = false;
			this.css(this.CB['errorText'], 'display', 'none');
			var timeupdate = function(event) {
				thisTemp.timeUpdateHandler();
			};
			if(!this.vars['live']) {
				if(this.V != null && this.playerType == 'html5video') {
					this.addListenerInside('timeupdate', timeupdate);
					thisTemp.timeTextHandler();
					thisTemp.prompt(); //添加提示点
					window.setTimeout(function() {
						thisTemp.bufferEdHandler();
					}, 200);
				}
			} else {
				this.removeListenerInside('timeupdate', timeupdate);
				if(this.timerTime != null) {
					window.clearInterval(this.timerTime);
					timerTime = null;
				}
				if(this.timerTime != null) {
					if(this.timerTime.runing) {
						this.timerTime.stop();
					}
					this.timerTime = null;
				}
				var timeFun = function() {
					if(thisTemp.V != null && !thisTemp.V.paused) {
						thisTemp.CB['timeText'].innerHTML = thisTemp.getNowDate();
					}
				};
				this.timerTime = new this.timer(1000, timeFun);
				//timerTime.start();
			}
			this.definition();
		},
		/*
			内部函数
			加载字幕
		*/
		loadTrack: function() {
			if(this.playerType == 'flashplayer' || this.vars['flashplayer'] == true) {
				return;
			}
			var thisTemp = this;
			var track = this.vars['cktrack'];
			var obj = {
				method: 'get',
				dataType: 'text',
				url: track,
				charset: 'utf-8',
				success: function(data) {
					thisTemp.track = thisTemp.parseSrtSubtitles(data);
					thisTemp.trackIndex = 0;
					thisTemp.nowTrackShow = {
						sn: ''
					};
				}
			};
			this.ajax(obj);
		},
		/*
			内部函数
			重置字幕
		*/
		resetTrack: function() {
			this.trackIndex = 0;
			this.nowTrackShow = {
				sn: ''
			};
		},
		/*
			内部函数
			根据时间改变读取显示字幕
		*/
		trackShowHandler: function() {
			if(this.track.length < 1) {
				return;
			}
			if(this.trackIndex >= this.track.length) {
				this.trackIndex = 0;
			}
			var nowTrack = this.track[this.trackIndex]; //当前编号对应的字幕内容
			/*
				this.nowTrackShow=当前显示在界面上的内容
				如果当前时间正好在nowTrack时间内，则需要判断
			*/
			if(this.time >= nowTrack['startTime'] && this.time <= nowTrack['endTime']) {
				/*
				 	如果当前显示的内容不等于当前需要显示的内容时，则需要显示正确的内容
				*/
				var nowShow = this.nowTrackShow;
				if(nowShow['sn'] != nowTrack['sn']) {
					this.trackHide();
					this.trackShow(nowTrack);
				}
			} else {
				/*
				 * 如果当前播放时间不在当前编号字幕内，则需要先清空当前的字幕内容，再显示新的字幕内容
				 */
				this.trackHide();
				this.checkTrack();
			}
		},
		/*
			内部函数
			显示字幕内容
		*/
		trackShow: function(track) {
			this.nowTrackShow = track;
			var arr = track['content'];
			for(var i = 0; i < arr.length; i++) {
				var obj = {
					list: [{
						type: 'text',
						text: arr[i],
						fontColor: '#FFFFFF',
						fontSize: 16,
						fontFamily: this.fontFamily,
						lineHeight: 30
					}],
					position: [1, 2, null, -(arr.length - i) * 30 - 50]
				};
				var ele = this.addElement(obj);
				this.trackElement.push(ele);
			}
		},
		/*
			内部函数
			隐藏字字幕内容
		*/
		trackHide: function() {
			for(var i = 0; i < this.trackElement.length; i++) {
				this.deleteElement(this.trackElement[i]);
			}
			this.trackElement = [];
		},
		/*
			内部函数
			重新计算字幕的编号
		*/
		checkTrack: function() {
			var num = this.trackIndex;
			var arr = this.track;
			var i = 0;
			for(i = num; i < arr.length; i++) {
				if(this.time >= arr[i]['startTime'] && this.time <= arr[i]['endTime']) {
					this.trackIndex = i;
					break;
				}
			}
		},
		/*
		-----------------------------------------------------------------------------接口函数开始
			接口函数
			在播放和暂停之间切换
		*/
		playOrPause: function() {
			if(!this.loaded) {
				return;
			}
			if(this.config['videoClick']) {
				if(this.V == null) {
					return;
				}
				if(this.playerType == 'flashplayer') {
					this.V.playOrPause();
					return;
				}
				if(this.V.paused) {
					this.videoPlay();
				} else {
					this.videoPause();
				}
			}
		},
		/*
			接口函数
			播放动作
		*/
		videoPlay: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoPlay();
				return;
			}
			this.V.play();
		},
		/*
			接口函数
			暂停动作
		*/
		videoPause: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoPause();
				return;
			}
			this.V.pause();
		},
		/*
			接口函数
			跳转时间动作
		*/
		videoSeek: function(time) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoSeek(time);
				return;
			}
			var meta = this.getMetaDate();
			var duration = meta['duration'];
			if(duration > 0 && time > duration) {
				time = duration;
			}
			this.V.currentTime = time;
			this.sendJS('seekTime', time);
		},
		/*
			接口函数
			调节音量/获取音量
		*/
		changeVolume: function(vol, bg, button) {
			if(this.loaded) {
				if(this.playerType == 'flashplayer') {
					this.V.changeVolume(time);
					return;
				}
			}
			if(isNaN(vol) || this.isUndefined(vol)) {
				vol = 0;
			}
			if(!this.loaded) {
				this.vars['volume'] = vol;
			}
			if(!this.html5Video) {
				this.V.changeVolume(vol);
				return;
			}
			try {
				if(this.isUndefined(bg)) {
					bg = true;
				}
			} catch(e) {}
			try {
				if(this.isUndefined(button)) {
					button = true;
				}
			} catch(e) {}
			if(!vol) {
				vol = 0;
			}
			if(vol < 0) {
				vol = 0;
			}
			if(vol > 1) {
				vol = 1;
			}
			try {
				this.V.volume = vol;
			} catch(error) {}
			this.volume = vol;
			if(bg) {
				var bgW = vol * this.CB['volumeBg'].offsetWidth;
				if(bgW < 0) {
					bgW = 0;
				}
				if(bgW > this.CB['volumeBg'].offsetWidth) {
					bgW = this.CB['volumeBg'].offsetWidth;
				}
				this.css(this.CB['volumeUp'], 'width', bgW + 'px');
			}

			if(button) {
				var buLeft = parseInt(this.CB['volumeUp'].offsetWidth - (this.CB['volumeBO'].offsetWidth * 0.5));
				if(buLeft > this.CB['volumeBg'].offsetWidth - this.CB['volumeBO'].offsetWidth) {
					buLeft = this.CB['volumeBg'].offsetWidth - this.CB['volumeBO'].offsetWidth
				}
				if(buLeft < 0) {
					buLeft = 0;
				}
				this.css(this.CB['volumeBO'], 'left', buLeft + 'px');
			}
		},
		/*
			接口函数
			静音
		*/
		videoMute: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoMute();
				return;
			}
			this.volumeTemp = this.V ? (this.V.volume > 0 ? this.V.volume : this.vars['volume']) : this.vars['volume'];
			this.changeVolume(0);
		},
		/*
			接口函数
			取消静音
		*/
		videoEscMute: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoEscMute();
				return;
			}
			this.changeVolume(this.volumeTemp > 0 ? this.volumeTemp : this.vars['volume']);
		},
		/*
			接口函数
			快退
		*/
		fastBack: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.fastBack();
				return;
			}
			var time = this.V.time - this.ckplayerConfig['config']['timeJump'];
			if(time < 0) {
				time = 0;
			}
			this.videoSeek(time);
		},
		/*
			接口函数
			快进
		*/
		fastNext: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.fastNext();
				return;
			}
			var time = this.V.time + this.ckplayerConfig['config']['timeJump'];
			if(time > this.V.duration) {
				time = this.V.duration;
			}
			this.videoSeek(time);
		},

		/*
			内置函数
			全屏/退出全屏动作，该动作只能是用户操作才可以触发，比如用户点击按钮触发该事件
		*/
		switchFull: function() {
			if(this.full) {
				this.quitFullScreen();
			} else {
				this.fullScreen();
			}
		},
		/*
			内置函数
			全屏动作，该动作只能是用户操作才可以触发，比如用户点击按钮触发该事件
		*/
		fullScreen: function() {
			if(this.html5Video && this.playerType == 'html5video') {
				var element = this.PD;
				if(element.requestFullscreen) {
					element.requestFullscreen();
				} else if(element.mozRequestFullScreen) {
					element.mozRequestFullScreen();
				} else if(element.webkitRequestFullscreen) {
					element.webkitRequestFullscreen();
				} else if(element.msRequestFullscreen) {
					element.msRequestFullscreen();
				}
				this.judgeFullScreen();
			} else {
				//this.V.fullScreen();
			}
		},
		/*
			接口函数
			退出全屏动作
		*/
		quitFullScreen: function() {
			if(this.html5Video && this.playerType == 'html5video') {
				if(document.exitFullscreen) {
					document.exitFullscreen();
				} else if(document.msExitFullscreen) {
					document.msExitFullscreen();
				} else if(document.mozCancelFullScreen) {
					document.mozCancelFullScreen();
				} else if(document.oRequestFullscreen) {
					document.oCancelFullScreen();
				} else if(document.requestFullscreen) {
					document.requestFullscreen();
				} else if(document.webkitExitFullscreen) {
					document.webkitExitFullscreen();
				} else {
					this.css(document.documentElement, 'cssText', '');
					this.css(document.document.body, 'cssText', '');
					this.css(this.PD, 'cssText', '');
				}
				this.judgeFullScreen();
			}
		},
		/*
		 下面列出只有flashplayer里支持的 
		 */
		videoRotation: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoRotation(n);
				return;
			}
			if(this.isUndefined(n)) {
				n = 0;
			}
			var tf = this.css(this.V, 'transform');
			if(this.isUndefined(tf) && !tf) {
				tf = 'rotate(0deg)';
			}
			var reg = tf.match(/rotate\([^)]+\)/);
			reg = reg ? reg[0].replace('rotate(', '').replace('deg)', '') : '';
			if(reg == '') {
				reg = 0;
			} else {
				reg = parseInt(reg);
			}
			if(n == -1) {
				reg -= 90;
			} else if(n == 1) {
				reg += 90;
			} else {
				if(n != 90 && n != 180 && n != 270 && n != -90 && n != -180 && n != -270) {
					reg = 0;
				}
				else{
					reg=n;
				}
			}
			n = reg;
			tf = tf.replace(/rotate\([^)]+\)/, '') + ' rotate(' + n + 'deg)';
			this.css(this.V, 'transform', tf);
			return;
		},
		videoBrightness: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoBrightness(n);
				return;
			}
		},
		videoContrast: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoContrast(n);
				return;
			}
		},
		videoSaturation: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoSaturation(n);
				return;
			}
		},
		videoHue: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoHue(n);
				return;
			}
		},
		videoZoom: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoZoom(n);
				return;
			}
			if(this.isUndefined(n)) {
				n = 1;
			}
			if(n<0){
				n=0;
			}
			if(n>2){
				n=2;
			}
			var tf = this.css(this.V, 'transform');
			tf = tf.replace(/scale\([^)]+\)/, '') + ' scale(' + n + ')';
			this.css(this.V, 'transform', tf);
			return;
		},
		videoProportion: function(w, h) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoProportion(w, h);
				return;
			}
		},
		adPlay: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.adPlay();
				return;
			}
		},
		adPause: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.adPause();
				return;
			}
		},
		videoError: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoError(n);
				return;
			}
		},
		changeConfig: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.changeConfig(arguments);
				return;
			}
		},
		custom: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.custom(arguments);
				return;
			}
		},
		getConfig: function() {
			if(!this.loaded) {
				return null;
			}
			if(this.playerType == 'flashplayer') {
				return this.V.getConfig(arguments);
			}
		},
		openUrl: function(n) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.openUrl(n);
				return;
			}
		},
		/*
			接口函数
			清除视频
		*/
		videoClear: function() {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.videoClear();
				return;
			}
		},
		/*
			接口函数
			向播放器传递新的视频地址
		*/
		newVideo: function(c) {
			if(this.playerType == 'flashplayer') {
				this.V.newVideo(c);
				return;
			} else {
				this.embed(c);
			}
		},
		/*
			接口函数
			截图
		*/
		screenshot: function(obj, save, name) {
			if(!this.loaded) {
				return;
			}
			if(this.playerType == 'flashplayer') {
				this.V.screenshot(obj, save, name);
				return;
			}
			if(obj == 'video') {
				var newCanvas = document.createElement('canvas');
				newCanvas.width = this.V.videoWidth;
				newCanvas.height = this.V.videoHeight;
				newCanvas.getContext('2d').drawImage(this.V, 0, 0, this.V.videoWidth, this.V.videoHeight);
				try {
					var base64 = newCanvas.toDataURL('image/jpeg');
					this.sendJS('screenshot', {
						object: obj,
						save: save,
						name: name,
						base64: base64
					});
				} catch(error) {
					this.log(error)
				}
			}
		},

		/*
			接口函数
			改变播放器尺寸
		*/
		changeSize: function(w, h) {
			if(this.isUndefined(w)) {
				w = 0;
			}
			if(this.isUndefined(h)) {
				h = 0;
			}
			if(w > 0) {
				this.css(this.CD, 'width', w + 'px');
			}
			if(h > 0) {
				this.css(this.CD, 'height', h + 'px');
			}
			if(this.html5Video) {
				this.elementCoordinate();
			}
		},

		/*
			-----------------------------------------------------------------------
			调用flashplayer
		*/
		embedSWF: function() {
			var vid = this.randomString();
			var flashvars = this.getFlashVars();
			var param = this.getFlashplayerParam();
			var flashplayerUrl = 'http://www.macromedia.com/go/getflashplayer';
			var html = '',
				// src = javascriptPath + 'ckplayer.swf';
				src = 'https://js.huke88.com/assets/revision/js/plugins/ckplayer-x/ckplayer/ckplayer.swf';
			id = 'id="' + vid + '" name="' + vid + '" ';
			html += '<object pluginspage="' + flashplayerUrl + '" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"  codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=11,3,0,0" width="100%" height="100%" ' + id + ' align="middle">';
			html += param['v'];
			html += '<param name="movie" value="' + src + '">';
			html += '<param name="flashvars" value="' + flashvars + '">';
			html += '<embed ' + param['w'] + ' src="' + src + '" flashvars="' + flashvars + '" width="100%" height="100%" ' + id + ' align="middle" type="application/x-shockwave-flash" pluginspage="' + flashplayerUrl + '" />';
			html += '</object>';
			this.PD.innerHTML = html;
			this.V = this.getObjectById(vid); //V：定义播放器对象全局变量
			this.playerType = 'flashplayer';
			//this.loaded=true;
		},
		/*
			内置函数
			将vars对象转换成字符
		*/
		getFlashVars: function() {
			this.getVarsObject();
			var v = this.vars;
			var z = '';
			for(k in v) {
				if(k != 'flashplayer' && k != 'container' && v[k] != '') {
					if(z != '') {
						z += '&';
					}
					var vk = v[k];
					if(vk == true) {
						vk = 1;
					}
					if(vk == false) {
						vk = 0;
					}
					z += k + '=' + vk;
				}

			}
			return z;
		},
		/*
			内置函数
			将vars格式化成flash能接受的对象。再由getFlashVars函数转化成字符串或由newVideo直接使用
		*/
		getVarsObject: function() {
			var v = this.vars;
			var f = '',
				d = '',
				w = ''; //f=视频地址，d=清晰度地址,w=权重，z=最终地址
			var arr = this.VA;
			var prompt = v['promptSpot'];
			var i = 0;
			var video = this.vars['video'];
			if(typeof(video) == 'object') { //对象或数组
				if(!this.isUndefined(typeof(video.length))) { //说明是数组
					var arr = video;
					for(i = 0; i < arr.length; i++) {
						var arr2 = arr[i];
						if(arr2) {
							if(f != '') {
								f += ',';
								d += ',';
								w += ',';
							}
							f += encodeURIComponent(decodeURIComponent(arr2[0]));
							d += arr2[2];
							w += arr2[3];
						}
					}
				} else {
					f = encodeURIComponent(decodeURIComponent(video['file']));
					if(!this.isUndefined(video['type'])) {
						v['type'] = video['type']
					}
					d = '';
					w = '';
				}
			} else {
				f = encodeURIComponent(decodeURIComponent(video));
			}
			if(v['preview'] != null) {
				v['previewscale'] = v['preview']['scale'];
				v['preview'] = v['preview']['file'].join(',');

			}
			if(prompt != null) {
				v['promptspot'] = '';
				v['promptspottime'] = '';
				for(i = 0; i < prompt.length; i++) {
					if(v['promptspot'] != '') {
						v['promptspot'] += ',';
						v['promptspottime'] += ',';
					}
					v['promptspot'] += prompt[i]['words'];
					v['promptspottime'] += prompt[i]['time'];
				}

			}
			if(f != '') {
				v['video'] = f;
				v['definition'] = d;
				v['weight'] = w;
			}

			var newV = {};
			for(var k in v) {
				if(v[k] != null) {
					newV[k] = v[k];
				}
			}
			this.vars = newV;
		},
		/*
			内置函数
			将embedSWF里的param的对象进行转换
		*/
		getFlashplayerParam: function() {
			var w = '',
				v = '',
				o = {
					allowScriptAccess: 'always',
                    wmode:'Opaque',
					allowFullScreen: true,
					quality: 'high',
					bgcolor: '#000'
				};
			for(var e in o) {
				w += e + '="' + o[e] + '" ';
				v += '<param name="' + e + '" value="' + o[e] + '" />';
			}
			w = w.replace('movie=', 'src=');
			return {
				w: w,
				v: v
			};
		},

		/*
			操作动作结束
			-----------------------------------------------------------------------
			
			接口函数
			获取元数据部分
		*/
		getMetaDate: function() {
			if(!this.loaded || this.V == null) {
				return false;
			}
			if(this.playerType == 'html5video') {
				var duration = 0;
				try {
					duration = !isNaN(this.V.duration) ? this.V.duration : 0;
				} catch(event) {}
				var data = {
					duration: duration,
					volume: this.V.volume,
					width: this.PD.offsetWidth || this.V.offsetWidth || this.V.width,
					height: this.PD.offsetHeight || this.V.offsetHeight || this.V.height,
					streamWidth: this.V.videoWidth,
					streamHeight: this.V.videoHeight,
					videoWidth: this.V.offsetWidth,
					videoHeight: this.V.offsetHeight,
					paused: this.V.paused
				};
				return data;
			} else {
				return this.V.getMetaDate();
			}
			return false;
		},
		/*
			接口函数
			取当前提供给播放器播放的视频列表
		*/
		getVideoUrl: function() {
			var arr = [];
			if(this.V.src) {
				arr.push(this.V.src);
			} else {
				var uArr = this.V.childNodes;
				for(var i = 0; i < uArr.length; i++) {
					arr.push(uArr[i].src);
				}
			}
			return arr;
		},
		/*
			内置函数
			格式化函数
		*/
		clickEvent: function(call) {
			if(call == "none" || call == "" || call == null) {
				return {
					type: 'none'
				};
			}
			var callArr = call.split("->");
			var type = '',
				fun = '',
				link = '',
				target = '';
			if(callArr.length == 2) {
				var callM = callArr[0];
				var callE = callArr[1];
				if(!callE) {
					return {
						type: 'none'
					};
				}
				var val = '';
				var eArr = [];
				type = callM;
				switch(callM) {
					case 'actionScript':
						//trace(THIS.hasOwnProperty(callE));

						if(callE.indexOf('(') > -1) {
							eArr = callE.split('(');
							callE = eArr[0];
							val = eArr[1].replace(')', '');
						}
						if(val == '') {
							fun = 'thisTemp.' + callE + '()';
						} else {
							fun = 'thisTemp.' + callE + '(' + val + ')';
						}
						break;
					case 'javaScript':
						if(callE.substr(0, 11) == '[flashvars]') {
							callE = callE.substr(11);
							if(this.vars.hasOwnProperty(callE)) {
								callE = this.vars[callE];
							} else {
								break;
							}

						}
						if(callE.indexOf('(') > -1) {
							eArr = callE.split('(');
							callE = eArr[0];
							val = eArr[1].replace(')', '');
						}
						if(val == '') {
							fun = callE + '()';
						} else {
							fun = callE + '(' + val + ')';
						}
						break;
					case "link":
						var callLink = (callE + ',').split(',');
						if(callLink[0].substr(0, 11) == '[flashvars]') {
							var fl = callLink[0].replace('[flashvars]', '');
							if(this.vars.hasOwnProperty(fl)) {
								callLink[0] = this.vars[fl];
							} else {
								break;
							}
						}
						if(!callLink[1]) {
							callLink[1] = '_blank';
						}
						link = callLink[0];
						target = callLink[1];
						break;
				}
			}
			return {
				type: type,
				fun: fun,
				link: link,
				target: target
			}
		},
		/*
			内置函数
			向播放器界面添加一个文本
		*/
		addElement: function(attribute) {
			var thisTemp = this;
			if(this.playerType == 'flashplayer') {
				return this.V.addElement(attribute);
			}
			var i = 0;
			var obj = {
				list: null,
				x: '100%',
				y: "50%",
				position: null,
				alpha: 1,
				backgroundColor: '',
				backAlpha: 1,
				backRadius: 0,
				clickEvent: ''
			};
			obj = this.standardization(obj, attribute);
			var list = obj['list'];
			if(list == null) {
				return '';
			}
			var id = 'element' + this.randomString(10);
			var ele = document.createElement('div');
			ele.className = id;
			if(obj['x']) {
				ele.setAttribute('data-x', obj['x']);
			}
			if(obj['y']) {
				ele.setAttribute('data-y', obj['y']);
			}
			if(obj['position'] != null) {
				ele.setAttribute('data-position', obj['position'].join(','));
			}

			this.PD.appendChild(ele);
			var eid = this.getByElement(id);
			this.css(eid, {
				position: 'absolute',
				filter: 'alpha(opacity:' + obj['alpha'] + ')',
				opacity: obj['alpha'].toString(),
				width: '800px',
				zIndex: '20'
			});
			var bgid = 'elementbg' + this.randomString(10);
			var bgAlpha = obj['alpha'].toString();
			var bgColor = obj['backgroundColor'].replace('0x', '#');
			var html = '';
			var idArr = [];
			var clickArr = [];
			if(!this.isUndefined(list) && list.length > 0) {
				var textObj, returnObj, clickEvent;
				for(i = 0; i < list.length; i++) {
					var newEleid = 'elementnew' + this.randomString(10);
					switch(list[i]['type']) {
						case 'image':
						case 'png':
						case 'jpg':
						case 'jpeg':
						case 'gif':
							textObj = {
								type: 'image',
								file: '',
								radius: 0, //圆角弧度
								width: 30, //定义宽，必需要定义
								height: 30, //定义高，必需要定义
								alpha: 1, //透明度
								paddingLeft: 0, //左边距离
								paddingRight: 0, //右边距离
								paddingTop: 0,
								paddingBottom: 0,
								marginLeft: 0,
								marginRight: 0,
								marginTop: 0,
								marginBottom: 0,
								backgroundColor: '',
								clickEvent: ''
							};

							list[i] = this.standardization(textObj, list[i]);
							clickEvent = this.clickEvent(list[i]['clickEvent']);
							clickArr.push(clickEvent);
							if(clickEvent['type'] == 'link') {
								html += '<div class="' + newEleid + '" data-i="' + i + '"><a href="' + clickEvent['link'] + '" target="' + clickEvent['target'] + '"><img class="' + newEleid + '_image" src="' + list[i]['file'] + '" style="border:0;"></a></div>';
							} else {
								html += '<div class="' + newEleid + '" data-i="' + i + '"><img class="' + newEleid + '_image" src="' + list[i]['file'] + '" style="border:0;"></div>';
							}
							break;
						case 'text':
							textObj = {
								type: 'text', //说明是文本
								text: '', //文本内容
								color: '0xFFFFFF',
								size: 14,
								font: this.fontFamily,
								leading: 0,
								alpha: 1, //透明度
								paddingLeft: 0, //左边距离
								paddingRight: 0, //右边距离
								paddingTop: 0,
								paddingBottom: 0,
								marginLeft: 0,
								marginRight: 0,
								marginTop: 0,
								marginBottom: 0,
								backgroundColor: '',
								backAlpha: 1,
								backRadius: 0, //背景圆角弧度，支持数字统一设置，也支持分开设置[30,20,20,50]，对应上左，上右，下右，下左
								clickEvent: ''
							};
							list[i] = this.standardization(textObj, list[i]);
							clickEvent = this.clickEvent(list[i]['clickEvent']);
							clickArr.push(clickEvent);
							if(clickEvent['type'] == 'link') {
								html += '<div class="' + newEleid + '" data-i="' + i + '"><div class="' + newEleid + '_bg"></div><div class="' + newEleid + '_text"><a href="' + clickEvent['link'] + '" target="' + clickEvent['target'] + '">' + list[i]['text'] + '</a></div></div>';
							} else {
								html += '<div  class="' + newEleid + '" data-i="' + i + '"><div class="' + newEleid + '_bg"></div><div class="' + newEleid + '_text">' + list[i]['text'] + '</div></div>';
							}
							break;
						default:
							break;
					}
					idArr.push(newEleid);
				}
			}
			var objClickEvent = this.clickEvent(obj['clickEvent']);
			/*if(objClickEvent['type']=='link'){
				html = '<a href="'+objClickEvent['link']+'" target="'+objClickEvent['target']+'">' + html + '</a>';
			}*/
			eid.innerHTML = '<div class="' + bgid + '"></div><div class="' + bgid + '_c">' + html + '</div>';
			if(objClickEvent['type'] == 'javaScript' || objClickEvent['type'] == 'actionScript') {
				var objClickHandler = function() {
					eval(objClickEvent['fun']);
				};
				this.addListenerInside('click', objClickHandler, this.getByElement(bgid + '_c'))
			}
			this.css(bgid + '_c', {
				position: 'absolute',
				zIndex: '2'
			});
			for(i = 0; i < idArr.length; i++) {
				var clk = clickArr[i];

				if(clk['type'] == 'javaScript' || clk['type'] == 'actionScript') {
					var clickHandler = function() {
						clk = clickArr[this.getAttribute('data-i')];
						eval(clk['fun']);
					};
					this.addListenerInside('click', clickHandler, this.getByElement(idArr[i]))
				}
				switch(list[i]['type']) {
					case 'image':
					case 'png':
					case 'jpg':
					case 'jpeg':
					case 'gif':
						this.css(idArr[i], {
							float: 'left',
							width: list[i]['width'] + 'px',
							height: list[i]['height'] + 'px',
							filter: 'alpha(opacity:' + list[i]['alpha'] + ')',
							opacity: list[i]['alpha'].toString(),
							marginLeft: list[i]['marginLeft'] + 'px',
							marginRight: list[i]['marginRight'] + 'px',
							marginTop: list[i]['marginTop'] + 'px',
							marginBottom: list[i]['marginBottom'] + 'px',
							borderRadius: list[i]['radius'] + 'px',
							cursor: 'pointer'
						});
						this.css(idArr[i] + '_image', {
							width: list[i]['width'] + 'px',
							height: list[i]['height'] + 'px',
							borderRadius: list[i]['radius'] + 'px'
						});
						break;
					case 'text':
						this.css(idArr[i] + '_text', {
							filter: 'alpha(opacity:' + list[i]['alpha'] + ')',
							opacity: list[i]['alpha'].toString(),
							borderRadius: list[i]['radius'] + 'px',
							fontFamily: list[i]['font'],
							fontSize: list[i]['size'] + 'px',
							color: list[i]['color'].replace('0x', '#'),
							lineHeight: list[i]['leading'] > 0 ? list[i]['leading'] + 'px' : '',
							paddingLeft: list[i]['paddingLeft'] + 'px',
							paddingRight: list[i]['paddingRight'] + 'px',
							paddingTop: list[i]['paddingTop'] + 'px',
							paddingBottom: list[i]['paddingBottom'] + 'px',
							whiteSpace: 'nowrap',
							position: 'absolute',
							zIndex: '3',
							cursor: 'pointer'
						});
						this.css(idArr[i], {
							float: 'left',
							width: this.getByElement(idArr[i] + '_text').offsetWidth + 'px',
							height: this.getByElement(idArr[i] + '_text').offsetHeight + 'px',
							marginLeft: list[i]['marginLeft'] + 'px',
							marginRight: list[i]['marginRight'] + 'px',
							marginTop: list[i]['marginTop'] + 'px',
							marginBottom: list[i]['marginBottom'] + 'px'
						});
						this.css(idArr[i] + '_bg', {
							width: this.getByElement(idArr[i] + '_text').offsetWidth + 'px',
							height: this.getByElement(idArr[i] + '_text').offsetHeight + 'px',
							filter: 'alpha(opacity:' + list[i]['backAlpha'] + ')',
							opacity: list[i]['backAlpha'].toString(),
							borderRadius: list[i]['backRadius'] + 'px',
							backgroundColor: list[i]['backgroundColor'].replace('0x', '#'),
							position: 'absolute',
							zIndex: '2'
						});
						break;
					default:
						break;
				}
			}
			this.css(bgid, {
				width: this.getByElement(bgid + '_c').offsetWidth + 'px',
				height: this.getByElement(bgid + '_c').offsetHeight + 'px',
				position: 'absolute',
				filter: 'alpha(opacity:' + bgAlpha + ')',
				opacity: bgAlpha,
				backgroundColor: bgColor.replace('0x', '#'),
				borderRadius: obj['backRadius'] + 'px',
				zIndex: '1'
			});
			this.css(eid, {
				width: this.getByElement(bgid).offsetWidth + 'px',
				height: this.getByElement(bgid).offsetHeight + 'px'
			});
			var eidCoor = this.calculationCoor(eid);
			this.css(eid, {
				left: eidCoor['x'] + 'px',
				top: eidCoor['y'] + 'px'
			});

			this.elementArr.push(eid.className);
			return eid;
		},
		/*
			内置函数
			获取元件的属性，包括x,y,width,height,alpha
		*/
		getElement: function(element) {
			if(this.playerType == 'flashplayer') {
				return this.V.getElement(element);
			}
			var ele = element;
			if(typeof(element) == 'string') {
				ele = this.getByElement(element);
			}
			var coor = this.getCoor(ele);
			return {
				x: coor['x'],
				y: coor['y'],
				width: ele.offsetWidth,
				height: ele.offsetHeight,
				alpha: !this.isUndefined(this.css(ele, 'opacity')) ? parseFloat(this.css(ele, 'opacity')) : 1
			};
		},
		/*
			内置函数
			根据节点的x,y计算在播放器里的坐标
		*/
		calculationCoor: function(ele) {
			if(this.playerType == 'flashplayer') {
				return this.V.calculationCoor(ele);
			}
			if(ele == []) {
				return;
			}
			var x, y, position = [];
			var w = this.PD.offsetWidth,
				h = this.PD.offsetHeight;
			var ew = ele.offsetWidth,
				eh = ele.offsetHeight;
			if(!this.isUndefined(this.getDataset(ele, 'x'))) {
				x = this.getDataset(ele, 'x');
			}
			if(!this.isUndefined(this.getDataset(ele, 'y'))) {
				y = this.getDataset(ele, 'y');
			}
			if(!this.isUndefined(this.getDataset(ele, 'position'))) {
				position = this.getDataset(ele, 'position').split(',');
			}
			if(position.length > 0) {
				position.push(null, null, null, null);
				var i = 0;
				for(i = 0; i < position.length; i++) {
					if(this.isUndefined(position[i]) || position[i] == null || position[i] == 'null' || position[i] == '') {
						position[i] = null;
					} else {
						position[i] = parseFloat(position[i]);
					}
				}

				if(position[2] == null) {
					switch(position[0]) {
						case 0:
							x = 0;
							break;
						case 1:
							x = parseInt((w - ew) * 0.5);
							break;
						default:
							x = w - ew;
							break;
					}
				} else {
					switch(position[0]) {
						case 0:
							x = position[2];
							break;
						case 1:
							x = parseInt(w * 0.5) + position[2];
							break;
						default:
							x = w + position[2];
							break;
					}
				}
				if(position[3] == null) {
					switch(position[1]) {
						case 0:
							y = 0;
							break;
						case 1:
							y = parseInt((h - eh) * 0.5);
							break;
						default:
							y = h - eh;
							break;
					}
				} else {
					switch(position[1]) {
						case 0:
							y = position[3];
							break;
						case 1:
							y = parseInt(h * 0.5) + position[3];
							break;
						default:
							y = h + position[3];
							break;
					}
				}
			} else {
				if(x.substring(x.length - 1, x.length) == '%') {
					x = Math.floor(parseInt(x.substring(0, x.length - 1)) * w * 0.01);
				}
				if(y.substring(y.length - 1, y.length) == '%') {
					y = Math.floor(parseInt(y.substring(0, y.length - 1)) * h * 0.01);
				}
			}

			return {
				x: x,
				y: y
			}

		},
		/*
			内置函数
			修改新增元件的坐标
		*/
		changeElementCoor: function() {
			for(var i = 0; i < this.elementArr.length; i++) {
				if(this.getByElement(this.elementArr[i]) != []) {
					var c = this.calculationCoor(this.getByElement(this.elementArr[i]));
					this.css(this.elementArr[i], {
						top: c['y'] + 'px',
						left: c['x'] + 'px'
					});
				}
			}
		},
		/*
			内置函数
			缓动效果集
		*/
		tween: function() {
			var Tween = {
				None: { //均速运动
					easeIn: function(t, b, c, d) {
						return c * t / d + b;
					},
					easeOut: function(t, b, c, d) {
						return c * t / d + b;
					},
					easeInOut: function(t, b, c, d) {
						return c * t / d + b;
					}
				},
				Quadratic: {
					easeIn: function(t, b, c, d) {
						return c * (t /= d) * t + b;
					},
					easeOut: function(t, b, c, d) {
						return -c * (t /= d) * (t - 2) + b;
					},
					easeInOut: function(t, b, c, d) {
						if((t /= d / 2) < 1) return c / 2 * t * t + b;
						return -c / 2 * ((--t) * (t - 2) - 1) + b;
					}
				},
				Cubic: {
					easeIn: function(t, b, c, d) {
						return c * (t /= d) * t * t + b;
					},
					easeOut: function(t, b, c, d) {
						return c * ((t = t / d - 1) * t * t + 1) + b;
					},
					easeInOut: function(t, b, c, d) {
						if((t /= d / 2) < 1) return c / 2 * t * t * t + b;
						return c / 2 * ((t -= 2) * t * t + 2) + b;
					}
				},
				Quartic: {
					easeIn: function(t, b, c, d) {
						return c * (t /= d) * t * t * t + b;
					},
					easeOut: function(t, b, c, d) {
						return -c * ((t = t / d - 1) * t * t * t - 1) + b;
					},
					easeInOut: function(t, b, c, d) {
						if((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
						return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
					}
				},
				Quintic: {
					easeIn: function(t, b, c, d) {
						return c * (t /= d) * t * t * t * t + b;
					},
					easeOut: function(t, b, c, d) {
						return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
					},
					easeInOut: function(t, b, c, d) {
						if((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
						return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
					}
				},
				Sine: {
					easeIn: function(t, b, c, d) {
						return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
					},
					easeOut: function(t, b, c, d) {
						return c * Math.sin(t / d * (Math.PI / 2)) + b;
					},
					easeInOut: function(t, b, c, d) {
						return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
					}
				},
				Exponential: {
					easeIn: function(t, b, c, d) {
						return(t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
					},
					easeOut: function(t, b, c, d) {
						return(t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
					},
					easeInOut: function(t, b, c, d) {
						if(t == 0) return b;
						if(t == d) return b + c;
						if((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
						return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
					}
				},
				Circular: {
					easeIn: function(t, b, c, d) {
						return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
					},
					easeOut: function(t, b, c, d) {
						return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
					},
					easeInOut: function(t, b, c, d) {
						if((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
						return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
					}
				},
				Elastic: {
					easeIn: function(t, b, c, d, a, p) {
						if(t == 0) return b;
						if((t /= d) == 1) return b + c;
						if(!p) p = d * .3;
						if(!a || a < Math.abs(c)) {
							a = c;
							var s = p / 4;
						} else var s = p / (2 * Math.PI) * Math.asin(c / a);
						return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
					},
					easeOut: function(t, b, c, d, a, p) {
						if(t == 0) return b;
						if((t /= d) == 1) return b + c;
						if(!p) p = d * .3;
						if(!a || a < Math.abs(c)) {
							a = c;
							var s = p / 4;
						} else var s = p / (2 * Math.PI) * Math.asin(c / a);
						return(a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);
					},
					easeInOut: function(t, b, c, d, a, p) {
						if(t == 0) return b;
						if((t /= d / 2) == 2) return b + c;
						if(!p) p = d * (.3 * 1.5);
						if(!a || a < Math.abs(c)) {
							a = c;
							var s = p / 4;
						} else var s = p / (2 * Math.PI) * Math.asin(c / a);
						if(t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
						return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
					}
				},
				Back: {
					easeIn: function(t, b, c, d, s) {
						if(s == undefined) s = 1.70158;
						return c * (t /= d) * t * ((s + 1) * t - s) + b;
					},
					easeOut: function(t, b, c, d, s) {
						if(s == undefined) s = 1.70158;
						return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
					},
					easeInOut: function(t, b, c, d, s) {
						if(s == undefined) s = 1.70158;
						if((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
						return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
					}
				},
				Bounce: {
					easeIn: function(t, b, c, d) {
						return c - Tween.Bounce.easeOut(d - t, 0, c, d) + b;
					},
					easeOut: function(t, b, c, d) {
						if((t /= d) < (1 / 2.75)) {
							return c * (7.5625 * t * t) + b;
						} else if(t < (2 / 2.75)) {
							return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
						} else if(t < (2.5 / 2.75)) {
							return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
						} else {
							return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
						}
					},
					easeInOut: function(t, b, c, d) {
						if(t < d / 2) return Tween.Bounce.easeIn(t * 2, 0, c, d) * .5 + b;
						else return Tween.Bounce.easeOut(t * 2 - d, 0, c, d) * .5 + c * .5 + b;
					}
				}
			};
			return Tween;
		},
		/*
			接口函数
			缓动效果
			ele:Object=需要缓动的对象,
			parameter:String=需要改变的属性：x,y,width,height,alpha,
			effect:String=效果名称,
			start:Int=起始值,
			end:Int=结束值,
			speed:Number=运动的总秒数，支持小数
		*/
		animate: function(attribute) {
			if(this.playerType == 'flashplayer') {
				return this.V.animate(attribute);
			}
			var thisTemp = this;
			var animateId = 'animate_' + this.randomString();
			var obj = {
				element: null,
				parameter: 'x',
				static: false,
				effect: 'None.easeIn',
				start: null,
				end: null,
				speed: 0,
				overStop: false,
				pauseStop: false, //暂停播放时缓动是否暂停
				callBack: null
			};
			obj = this.standardization(obj, attribute);
			if(obj['element'] == null || obj['speed'] == 0) {
				return false;
			}
			var w = this.PD.offsetWidth,
				h = this.PD.offsetHeight;
			var effArr = (obj['effect'] + '.').split('.');
			var tweenFun = this.tween()[effArr[0]][effArr[1]];
			var eleCoor = {
				x: 0,
				y: 0
			};
			if(this.isUndefined(tweenFun)) {
				return false;
			}
			//先将该元件从元件数组里删除，让其不再跟随播放器的尺寸改变而改变位置
			var def = this.arrIndexOf(this.elementArr, obj['element'].className);
			if(def > -1) {
				this.elementArr.splice(def, 1);
			}
			//var run = true;
			var css = {};
			//对传递的参数进行转化，x和y转化成left,top
			var pm = this.getElement(obj['element']); //包含x,y,width,height,alpha属性
			var t = 0; //当前时间
			var b = 0; //初始值
			var c = 0; //变化量
			var d = obj['speed'] * 1000; //持续时间
			var timerTween = null;
			var tweenObj = null;
			var start = obj['start'] == null ? '' : obj['start'].toString();
			var end = obj['end'] == null ? '' : obj['end'].toString();
			switch(obj['parameter']) {
				case 'x':
					if(obj['start'] == null) {
						b = pm['x'];
					} else {
						if(start.substring(start.length - 1, start.length) == '%') {
							b = parseInt(start) * w * 0.01;
						} else {
							b = parseInt(start);
						}

					}
					if(obj['end'] == null) {
						c = pm['x'] - b;
					} else {
						if(end.substring(end.length - 1, end.length) == '%') {
							c = parseInt(end) * w * 0.01 - b;
						} else if(end.substring(0, 1) == '-' || end.substring(0, 1) == '+') {
							if(typeof(obj['end']) == 'number') {
								c = parseInt(obj['end']) - b;
							} else {
								c = parseInt(end);
							}

						} else {
							c = parseInt(end) - b;
						}
					}
					break;
				case 'y':
					if(obj['start'] == null) {
						b = pm['y'];
					} else {
						if(start.substring(start.length - 1, start.length) == '%') {
							b = parseInt(start) * h * 0.01;
						} else {
							b = parseInt(start);
						}

					}
					if(obj['end'] == null) {
						c = pm['y'] - b;
					} else {
						if(end.substring(end.length - 1, end.length) == '%') {
							c = parseInt(end) * h * 0.01 - b;
						} else if(end.substring(0, 1) == '-' || end.substring(0, 1) == '+') {
							if(typeof(obj['end']) == 'number') {
								c = parseInt(obj['end']) - b;
							} else {
								c = parseInt(end);
							}
						} else {
							c = parseInt(end) - b;
						}
					}
					break;
				case 'alpha':
					if(obj['start'] == null) {
						b = pm['alpha'] * 100;
					} else {
						if(start.substring(start.length - 1, start.length) == '%') {
							b = parseInt(obj['start']);
						} else {
							b = parseInt(obj['start'] * 100);
						}

					}
					if(obj['end'] == null) {
						c = pm['alpha'] * 100 - b;
					} else {
						if(end.substring(end.length - 1, end.length) == '%') {
							c = parseInt(end) - b;
						} else if(end.substring(0, 1) == '-' || end.substring(0, 1) == '+') {
							if(typeof(obj['end']) == 'number') {
								c = parseInt(obj['end']) * 100 - b;
							} else {
								c = parseInt(obj['end']) * 100;
							}
						} else {
							c = parseInt(obj['end']) * 100 - b;
						}
					}
					break;
			}
			var callBack = function() {
				var index = thisTemp.arrIndexOf(thisTemp.animateElementArray, animateId);
				if(index > -1) {
					thisTemp.animateArray.splice(index, 1);
					thisTemp.animateElementArray.splice(index, 1);
				}
				index = thisTemp.arrIndexOf(thisTemp.animatePauseArray, animateId);
				if(index > -1) {
					thisTemp.animatePauseArray.splice(index, 1);
				}
				if(obj['callBack'] != null && obj['element'] && obj['callBack'] != 'callBack' && obj['callBack'] != 'tweenX' && obj['tweenY'] != 'callBack' && obj['callBack'] != 'tweenAlpha') {
					var cb = eval(obj['callBack']);
					cb(obj['element']);
					obj['callBack'] = null;
				}
			};
			var stopTween = function() {
				if(timerTween != null) {
					if(timerTween.runing) {
						timerTween.stop();
					}
					timerTween = null;
				}
			};
			var tweenX = function() {
				if(t < d) {
					t += 10;
					css = {
						left: Math.ceil(tweenFun(t, b, c, d)) + 'px'
					};
					if(obj['static']) {
						eleCoor = thisTemp.calculationCoor(obj['element']);
						css['top'] = eleCoor['y'] + 'px';
					}
					thisTemp.css(obj['element'], css);

				} else {
					stopTween();
					thisTemp.elementArr.push(obj['element'].className);
					callBack();
				}
			};
			var tweenY = function() {
				if(t < d) {
					t += 10;
					css = {
						top: Math.ceil(tweenFun(t, b, c, d)) + 'px'
					};
					if(obj['static']) {
						eleCoor = thisTemp.calculationCoor(obj['element']);
						css['left'] = eleCoor['x'] + 'px';
					}
					thisTemp.css(obj['element'], css);
				} else {
					stopTween();
					thisTemp.elementArr.push(obj['element'].className);
					callBack();
				}
			};
			var tweenAlpha = function() {
				if(t < d) {
					t += 10;
					eleCoor = thisTemp.calculationCoor(obj['element']);
					var ap = Math.ceil(tweenFun(t, b, c, d)) * 0.01;
					css = {
						filter: 'alpha(opacity:' + ap + ')',
						opacity: ap.toString()
					};
					if(obj['static']) {
						eleCoor = thisTemp.calculationCoor(obj['element']);
						css['top'] = eleCoor['y'] + 'px';
						css['left'] = eleCoor['x'] + 'px';
					}
					thisTemp.css(obj['element'], css);
				} else {
					stopTween();
					thisTemp.elementArr.push(obj['element'].className);
					callBack();
				}
			};
			switch(obj['parameter']) {
				case 'x':
					tweenObj = tweenX;
					break;
				case 'y':
					tweenObj = tweenY;
					break;
				case 'alpha':
					tweenObj = tweenAlpha;
					break;
				default:
					break;
			}
			timerTween = new thisTemp.timer(10, tweenObj);
			if(obj['overStop']) {
				var mouseOver = function() {
					if(timerTween != null && timerTween.runing) {
						timerTween.stop();
					}
				};
				this.addListenerInside('mouseover', mouseOver, obj['element']);
				var mouseOut = function() {
					var start = true;
					if(obj['pauseStop'] && thisTemp.getMetaDate()['paused']) {
						start = false;
					}
					if(timerTween != null && !timerTween.runing && start) {
						timerTween.start();
					}
				};
				this.addListenerInside('mouseout', mouseOut, obj['element']);
			}

			this.animateArray.push(timerTween);
			this.animateElementArray.push(animateId);
			if(obj['pauseStop']) {
				this.animatePauseArray.push(animateId);
			}
			return animateId;
		},
		/*
			接口函数函数
			继续运行animate
		*/
		animateResume: function(id) {
			if(this.playerType == 'flashplayer') {
				this.V.animateResume(this.isUndefined(id) ? '' : id);
				return;
			}
			var arr = [];
			if(id != '' && !this.isUndefined(id) && id != 'pause') {
				arr.push(id);
			} else {
				if(id === 'pause') {
					arr = this.animatePauseArray;
				} else {
					arr = this.animateElementArray;
				}
			}
			for(var i = 0; i < arr.length; i++) {
				var index = this.arrIndexOf(this.animateElementArray, arr[i]);
				if(index > -1) {
					this.animateArray[index].start();
				}
			}

		},
		/*
			接口函数
			暂停运行animate
		*/
		animatePause: function(id) {
			if(this.playerType == 'flashplayer') {
				this.V.animatePause(this.isUndefined(id) ? '' : id);
				return;
			}
			var arr = [];
			if(id != '' && !this.isUndefined(id) && id != 'pause') {
				arr.push(id);
			} else {
				if(id === 'pause') {
					arr = this.animatePauseArray;
				} else {
					arr = this.animateElementArray;
				}
			}
			for(var i = 0; i < arr.length; i++) {
				var index = this.arrIndexOf(this.animateElementArray, arr[i]);
				if(index > -1) {
					this.animateArray[index].stop();
				}
			}
		},
		/*
			内置函数
			根据ID删除数组里对应的内容
		*/
		deleteAnimate: function(id) {
			var index = this.arrIndexOf(this.animateElementArray, id);
			if(index > -1) {
				this.animateArray.splice(index, 1);
				this.animateElementArray.splice(index, 1);
			}
		},
		/*
			内置函数
			删除外部新建的元件
		*/
		deleteElement: function(ele) {
			if(this.playerType == 'flashplayer' && this.V) {
				try {
					this.V.deleteElement(ele);
				} catch(event) {}
				return;
			}
			//先将该元件从元件数组里删除，让其不再跟随播放器的尺寸改变而改变位置
			var def = this.arrIndexOf(this.elementArr, ele.className);
			if(def > -1) {
				this.elementArr.splice(def, 1);
			}
			this.deleteAnimate(ele);
			this.deleteChild(ele);

		},
		/*
			--------------------------------------------------------------
			共用函数部分
			以下函数并非只能在本程序中使用，也可以在页面其它项目中使用
			根据ID获取元素对象
		*/
		getByElement: function(obj, parent) {
			if(this.isUndefined(parent)) {
				parent = document;
			}
			var num = obj.substr(0, 1);
			var res = [];
			if(num != '#') {
				if(num == '.') {
					obj = obj.substr(1, obj.length);
				}
				if(parent.getElementsByClassName) {
					res = parent.getElementsByClassName(obj);
				} else {
					var reg = new RegExp(' ' + obj + ' ', 'i');
					var ele = parent.getElementsByTagName('*');

					for(var i = 0; i < ele.length; i++) {
						if(reg.test(' ' + ele[i].className + ' ')) {
							res.push(ele[i]);
						}
					}
				}

				if(res.length > 0) {
					return res[0];
				} else {
					return res;
				}
			} else {
				if(num == '#') {
					obj = obj.substr(1, obj.length);
				}
				return document.getElementById(obj);
			}
		},
		/*
		 	共用函数
			功能：修改样式或获取指定样式的值，
				elem：ID对象或ID对应的字符，如果多个对象一起设置，则可以使用数组
				attribute：样式名称或对象，如果是对象，则省略掉value值
				value：attribute为样式名称时，定义的样式值
				示例一：
				this.css(ID,'width','100px');
				示例二：
				this.css('id','width','100px');
				示例三：
				this.css([ID1,ID2,ID3],'width','100px');
				示例四：
				this.css(ID,{
					width:'100px',
					height:'100px'
				});
				示例五(获取宽度)：
				var width=this.css(ID,'width');
		*/
		css: function(elem, attribute, value) {
			var i = 0;
			var k = '';
			if(typeof(elem) == 'object') { //对象或数组
				if(!this.isUndefined(typeof(elem.length))) { //说明是数组
					for(i = 0; i < elem.length; i++) {
						var el;
						if(typeof(elem[i]) == 'string') {
							el = this.getByElement(elem[i])
						} else {
							el = elem[i];
						}
						if(typeof(attribute) != 'object') {
							if(!this.isUndefined(value)) {
								el.style[attribute] = value;
							}
						} else {
							for(k in attribute) {
								if(!this.isUndefined(attribute[k])) {
									el.style[k] = attribute[k];
								}
							}
						}
					}
					return;
				}

			}
			if(typeof(elem) == 'string') {
				elem = this.getByElement(elem);
			}

			if(typeof(attribute) != 'object') {
				if(!this.isUndefined(value)) {
					elem.style[attribute] = value;
				} else {
					if(!this.isUndefined(elem.style[attribute])) {
						return elem.style[attribute];
					} else {
						return false;
					}
				}
			} else {
				for(k in attribute) {
					if(!this.isUndefined(attribute[k])) {
						elem.style[k] = attribute[k];
					}
				}
			}

		},
		/*
			共用函数
			判断变量是否存在或值是否为undefined
		*/
		isUndefined: function(value) {
			try {
				if(value == 'undefined' || value == undefined) {
					return true;
				}
			} catch(event) {}
			return false;
		},
		/*
		 	共用函数
			外部监听函数
		*/
		addListener: function(name, funName) {
			if(name && funName) {
				if(this.playerType == 'flashplayer') {
					var ff = ''; //定义用来向flashplayer传递的函数字符
					if(typeof(funName) == 'function') {
						ff = this.getParameterNames(funName);
					}
					this.V.addListener(name, ff);
					return;
				}
				var have = false;
				for(var i = 0; i < this.listenerJsArr.length; i++) {
					var arr = this.listenerJsArr[i];
					if(arr[0] == name && arr[1] == funName) {
						have = true;
						break;
					}
				}
				if(!have) {
					this.listenerJsArr.push([name, funName]);
				}
			}
		},
		/*
			共用函数
			外部删除监听函数
		*/
		removeListener: function(name, funName) {
			if(name && funName) {
				if(this.playerType == 'flashplayer') {
					var ff = ''; //定义用来向flashplayer传递的函数字符
					if(typeof(funName) == 'function') {
						ff = this.getParameterNames(funName);
					}
					this.V.removeListener(name, ff);
					return;
				}
				for(var i = 0; i < this.listenerJsArr.length; i++) {
					var arr = this.listenerJsArr[i];
					if(arr[0] == name && arr[1] == funName) {
						this.listenerJsArr.splice(i, 1);
						break;
					}
				}
			}
		},
		/*
			内部监听函数，调用方式：
			this.addListenerInside('click',function(event){},[ID]);
			d值为空时，则表示监听当前的视频播放器
		*/
		addListenerInside: function(e, f, d, t) {
			if(this.isUndefined(t)) {
				t = false
			}
			var o = this.V;
			if(!this.isUndefined(d)) {
				o = d;
			}
			if(o.addEventListener) {
				try {
					o.addEventListener(e, f, t);
				} catch(event) {}
			} else if(o.attachEvent) {
				try {
					o.attachEvent('on' + e, f);
				} catch(event) {}
			} else {
				o['on' + e] = f;
			}
		},
		/*
			删除内部监听函数，调用方式：
			this.removeListenerInside('click',function(event){}[,ID]);
			d值为空时，则表示监听当前的视频播放器
		*/
		removeListenerInside: function(e, f, d, t) {
			/*if(this.playerType=='flashplayer' && this.getParameterNames(f) && this.isUndefined(d)) {
				return;
			}*/
			if(this.isUndefined(t)) {
				t = false
			}
			var o = this.V;
			if(!this.isUndefined(d)) {
				o = d;
			}
			if(o.removeEventListener) {
				try {
					this.addNum--;
					o.removeEventListener(e, f, t);
				} catch(e) {}
			} else if(o.detachEvent) {
				try {
					o.detachEvent('on' + e, f);
				} catch(e) {}
			} else {
				o['on' + e] = null;
			}
		},
		/*
			共用函数
			统一分配监听，以达到跟as3同样效果
		*/
		sendJS: function(name, val) {
			var list = this.listenerJsArr;
			for(var i = 0; i < list.length; i++) {
				var arr = list[i];
				if(arr[0] == name) {
					if(val) {
						arr[1](val);
					} else {
						arr[1]();
					}
				}
			}
		},
		/*
			共用函数
			获取函数名称，如 function ckplayer(){} var fun=ckplayer，则getParameterNames(fun)=ckplayer
		*/
		getParameterNames: function(fn) {
			if(typeof(fn) !== 'function') {
				return false;
			}
			var COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;
			var code = fn.toString().replace(COMMENTS, '');
			var result = code.slice(code.indexOf(' ') + 1, code.indexOf('('));
			return result === null ? false : result;
		},
		/*
			共用函数
			获取当前本地时间
		*/
		getNowDate: function() {
			var nowDate = new Date();
			var month = nowDate.getMonth() + 1;
			var date = nowDate.getDate();
			var hours = nowDate.getHours();
			var minutes = nowDate.getMinutes();
			var seconds = nowDate.getSeconds();
			var tMonth = '',
				tDate = '',
				tHours = '',
				tMinutes = '',
				tSeconds = '',
				tSeconds = (seconds < 10) ? '0' + seconds : seconds + '',
				tMinutes = (minutes < 10) ? '0' + minutes : minutes + '',
				tHours = (hours < 10) ? '0' + hours : hours + '',
				tDate = (date < 10) ? '0' + date : date + '',
				tMonth = (month < 10) ? '0' + month : month + '';
			return tMonth + '/' + tDate + ' ' + tHours + ':' + tMinutes + ':' + tSeconds;
		},
		/*
			共用函数
			格式化时分秒
			seconds:Int：秒数
			ishours:Boolean：是否显示小时，如果设置成false，则会显示如80:20，表示1小时20分钟20秒
		*/
		formatTime: function(seconds, ishours) {
			var tSeconds = '',
				tMinutes = '',
				tHours = '';
			if(isNaN(seconds)) {
				seconds = 0;
			}
			var s = Math.floor(seconds % 60),
				m = 0,
				h = 0;
			if(ishours) {
				m = Math.floor(seconds / 60) % 60;
				h = Math.floor(seconds / 3600);
			} else {
				m = Math.floor(seconds / 60);
			}
			tSeconds = (s < 10) ? '0' + s : s + '';
			tMinutes = (m > 0) ? ((m < 10) ? '0' + m + ':' : m + ':') : '00:';
			tHours = (h > 0) ? ((h < 10) ? '0' + h + ':' : h + ':') : '';
			if(ishours) {
				return tHours + tMinutes + tSeconds;
			} else {
				return tMinutes + tSeconds;
			}
		},
		/*
			共用函数
			获取一个随机字符
			len：随机字符长度
		*/
		randomString: function(len) {
			len = len || 16;
			var chars = 'abcdefghijklmnopqrstuvwxyz';
			var maxPos = chars.length;　　
			var val = '';
			for(i = 0; i < len; i++) {
				val += chars.charAt(Math.floor(Math.random() * maxPos));
			}
			return 'ch' + val;
		},
		/*
			共用函数
			获取字符串长度,中文算两,英文数字算1
		*/
		getStringLen: function(str) {
			var len = 0;
			for(var i = 0; i < str.length; i++) {
				if(str.charCodeAt(i) > 127 || str.charCodeAt(i) == 94) {
					len += 2;
				} else {
					len++;
				}
			}
			return len;
		},
		/*
			内部函数
			用来为ajax提供支持
		*/
		createXHR: function() {
			if(window.XMLHttpRequest) {
				//IE7+、Firefox、Opera、Chrome 和Safari
				return new XMLHttpRequest();
			} else if(window.ActiveXObject) {
				//IE6 及以下
				try {
					return new ActiveXObject('Microsoft.XMLHTTP');
				} catch(event) {
					try {
						return new ActiveXObject('Msxml2.XMLHTTP');
					} catch(event) {
						this.eject(this.errorList[7]);
					}
				}
			} else {
				this.eject(this.errorList[8]);
			}
		},
		/*
			共用函数
			ajax调用
		*/
		ajax: function(cObj) {
			var thisTemp = this;
			var callback = null;
			var obj = {
				method: 'get', //请求类型
				dataType: 'json', //请求的数据类型
				charset: 'utf-8',
				async: false, //true表示异步，false表示同步
				url: '',
				data: null,
				success: null
			};
			if(typeof(cObj) != 'object') {
				this.eject(this.errorList[9]);
				return;
			}
			obj = this.standardization(obj, cObj);
			if(obj.dataType === 'json' || obj.dataType === 'text' || obj.dataType === 'html') {
				var xhr = this.createXHR();
				callback = function() {
					//判断http的交互是否成功
					if(xhr.status == 200) {
						if(obj.success == null) {
							return;
						}
						if(obj.dataType === 'json') {
							try {
								obj.success(eval('(' + xhr.responseText + ')')); //回调传递参数
							} catch(event) {
								obj.success(null);
							}
						} else {
							obj.success(xhr.responseText); //回调传递参数
						}
					} else {
						thisTemp.eject(thisTemp.errorList[10], 'Ajax.status:' + xhr.status);
					}
				};
				obj.url = obj.url + '?rand=' + this.randomString(6);
				obj.data = this.formatParams(obj.data); //通过params()将名值对转换成字符串
				if(obj.method === 'get' && !this.isUndefined(obj.data)) {
					obj.url += obj.url.indexOf('?') == -1 ? '?' + obj.data : '&' + obj.data;
				}
				if(obj.async === true) { //true表示异步，false表示同步
					xhr.onreadystatechange = function() {
						if(xhr.readyState == 4) { //判断对象的状态是否交互完成
							callback(); //回调
						}
					};
				}
				xhr.open(obj.method, obj.url, obj.async);
				if(obj.method === 'post') {
					xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
					xhr.setRequestHeader('charset', obj['charset']);
					xhr.send(obj.data);
				} else {
					xhr.send(null); //get方式则填null
				}
				if(obj.async === false) { //同步
					callback();
				}

			} else if(obj.dataType === 'jsonp') {
				var oHead = document.getElementsByTagName('head')[0];
				var oScript = document.createElement('script');
				var callbackName = 'callback' + new Date().getTime();
				var params = this.formatParams(obj.data) + '&callback=' + callbackName; //按时间戳拼接字符串
				callback = obj.success;
				//拼接好src
				oScript.src = obj.url.split('?') + '?' + params;
				//插入script标签
				oHead.insertBefore(oScript, oHead.firstChild);
				//jsonp的回调函数
				window[callbackName] = function(json) {
					callback(json);
					oHead.removeChild(oScript);
				};
			}
		},
		/*
			内置函数
			动态加载js
		*/
		loadJs: function(path, success) {
			var oHead = document.getElementsByTagName('HEAD').item(0);
			var oScript = document.createElement('script');
			oScript.type = 'text/javascript';
			oScript.src = this.getNewUrl(path);
			oHead.appendChild(oScript);
			oScript.onload = function() {
				success();
			}
		},
		/*
			共用函数
			排除IE6-9
		*/
		isMsie: function() {
			var browser = navigator.appName
			var b_version = navigator.appVersion
			var version = b_version.split(';');
			var trim_Version = '';
			if(version.length > 1) {
				trim_Version = version[1].replace(/[ ]/g, '');
			}
			if(browser == 'Microsoft Internet Explorer' && (trim_Version == 'MSIE6.0' || trim_Version == 'MSIE7.0' || trim_Version == 'MSIE8.0' || trim_Version == 'MSIE9.0')) {
				return false;
			}
			return true;
		},
		/*
			共用函数
			判断是否安装了flashplayer
		*/
		uploadFlash: function() {
			var swf;
			if(navigator.userAgent.indexOf('MSIE') > 0) {
				try {
					var swf = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
					return true;
				} catch(e) {
					return false;
				}
			}
			//if(navigator.userAgent.indexOf('Firefox') > 0 || navigator.userAgent.indexOf('Chrome') > 0) {
			if(navigator.userAgent.indexOf('Firefox') > 0) {
				swf = navigator.plugins['Shockwave Flash'];
				if(swf) {
					return true
				} else {
					return false;
				}
			}
			return true;
		},
		/*
			共用函数
			检测浏览器是否支持HTML5-Video
		*/
		supportVideo: function() {
			if(!this.isMsie()) {
				return false;
			}
			if(!!document.createElement('video').canPlayType) {
				var vidTest = document.createElement('video');
				var oggTest;
				try {
					oggTest = vidTest.canPlayType('video/ogg; codecs="theora, vorbis"');
				} catch(error) {
					oggTest = false;
				}
				if(!oggTest) {
					var h264Test;
					try {
						h264Test = vidTest.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
					} catch(error) {
						h264Test = false;
					}
					if(!h264Test) {
						return false;
					} else {
						if(h264Test == "probably") {
							return true;
						} else {
							return false;
						}
					}
				} else {
					if(oggTest == "probably") {
						return true;
					} else {
						return false;
					}
				}
			} else {
				return false;
			}
		},
		/*
			共用函数
			获取属性值
		*/
		getDataset: function(ele, z) {
			try {
				return ele.dataset[z];
			} catch(error) {
				try {
					return ele.getAttribute('data-' + z)
				} catch(error) {
					return false;
				}
			}
		},
		/*
			共用函数
			返回flashplayer的对象
		*/
		getObjectById: function(id) {
			var x = null;
			var y = this.getByElement('#' + id);
			var r = 'embed';
			if(y && y.nodeName == 'OBJECT') {
				if(typeof(y.SetVariable) != 'undefined') {
					x = y;
				} else {
					var z = y.getElementsByTagName(r)[0];
					if(z) {
						x = z;
					}
				}
			}
			return x;
		},
		/*
			共用函数
			对象转地址字符串
		*/
		formatParams: function(data) {
			var arr = [];
			for(var i in data) {
				arr.push(encodeURIComponent(i) + '=' + encodeURIComponent(data[i]));
			}
			return arr.join('&');
		},
		/*
			内置函数
			对地址进行冒泡排序
		*/
		arrSort: function(arr) {
			var temp = [];
			for(var i = 0; i < arr.length; i++) {
				for(var j = 0; j < arr.length - i; j++) {
					if(!this.isUndefined(arr[j + 1]) && arr[j][3] < arr[j + 1][3]) {
						temp = arr[j + 1];
						arr[j + 1] = arr[j];
						arr[j] = temp;
					}
				}
			}
			return arr;
		},
		/*
			内置函数
			判断文件后缀
		*/
		getFileExt: function(filepath) {
			if(filepath != '' && !this.isUndefined(filepath)) {
				if(filepath.indexOf('?') > -1) {
					filepath = filepath.split('?')[0];
				}
				var pos = '.' + filepath.replace(/.+\./, '');
				return pos;
			}
			return '';
		},
		/*
			内置函数
			搜索字符串str是否包含key
		*/
		isContains: function(str, key) {
			return str.indexOf(key) > -1;
		},
		/*
			内置函数
			给地址添加随机数
		*/
		getNewUrl: function(url) {
			if(this.isContains(url, '?')) {
				return url += '&' + this.randomString(8) + '=' + this.randomString(8);
			} else {
				return url += '?' + this.randomString(8) + '=' + this.randomString(8);
			}
		},
		/*
			共用函数
			获取clientX和clientY
		*/
		client: function(event) {
			var eve = event || window.event;
			if(this.isUndefined(eve)) {
				eve = {
					clientX: 0,
					clientY: 0
				};
			}
			return {
				x: eve.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft) - this.pdCoor['x'],
				y: eve.clientY + (document.documentElement.scrollTop || document.body.scrollTop) - this.pdCoor['y']
			}
		},
		/*
			内置函数
			获取节点的绝对坐标
		*/
		getCoor: function(obj) {
			var coor = this.getXY(obj);
			return {
				x: coor['x'] - this.pdCoor['x'],
				y: coor['y'] - this.pdCoor['y']
			};
		},
		getXY: function(obj) {
			var parObj = obj;
			var left = obj.offsetLeft;
			var top = obj.offsetTop;
			while(parObj = parObj.offsetParent) {
				left += parObj.offsetLeft;
				top += parObj.offsetTop;
			}
			return {
				x: left,
				y: top
			};
		},
		/*
			内置函数
			删除本对象的所有属性
		*/
		removeChild: function() {
			if(this.playerType == 'html5video') {
				//删除计时器
				var i = 0;
				var timerArr = [this.timerError, this.timerFull, this.timerTime, this.timerBuffer, this.timerClick, this.timerLoading, this.timerCBar, this.timerVCanvas];
				for(i = 0; i < timerArr.length; i++) {
					if(timerArr[i] != null) {
						if(timerArr[i].runing) {
							timerArr[i].stop();
						}
						timerArr[i] = null;
					}
				}
				//删除事件监听
				var ltArr = this.listenerJsArr;
				for(i = 0; i < ltArr.length; i++) {
					this.removeListener(ltArr[i][0], ltArr[i][1]);
				}
			}
			this.playerType == '';
			this.V = null;
			this.deleteChild(this.CB['menu']);
			this.deleteChild(this.PD);
			this.CD.innerHTML = '';
		},
		/*
			内置函数
			画封闭的图形
		*/
		canvasFill: function(name, path) {
			name.beginPath();
			for(var i = 0; i < path.length; i++) {
				var d = path[i];
				if(i > 0) {
					name.lineTo(d[0], d[1]);
				} else {
					name.moveTo(d[0], d[1]);
				}
			}
			name.closePath();
			name.fill();
		},
		/*
			内置函数
			画矩形
		*/
		canvasFillRect: function(name, path) {
			for(var i = 0; i < path.length; i++) {
				var d = path[i];
				name.fillRect(d[0], d[1], d[2], d[3]);
			}
		},
		/*
			共用函数
			删除容器节点
		*/
		deleteChild: function(f) {
			var def = this.arrIndexOf(this.elementArr, f.className);
			if(def > -1) {
				this.elementArr.splice(def, 1);
			}
			var childs = f.childNodes;
			for(var i = childs.length - 1; i >= 0; i--) {
				f.removeChild(childs[i]);
			}

			if(f && f != null && f.parentNode) {
				try {
					if(f.parentNode) {
						f.parentNode.removeChild(f);

					}

				} catch(event) {}
			}
		},
		/*
			内置函数
		 	根据容器的宽高,内部节点的宽高计算出内部节点的宽高及坐标
		*/
		getProportionCoor: function(stageW, stageH, vw, vh) {
			var w = 0,
				h = 0,
				x = 0,
				y = 0;
			if(stageW / stageH < vw / vh) {
				w = stageW;
				h = w * vh / vw;
			} else {
				h = stageH;
				w = h * vw / vh;
			}
			x = (stageW - w) * 0.5;
			y = (stageH - h) * 0.5;
			return {
				width: parseInt(w),
				height: parseInt(h),
				x: parseInt(x),
				y: parseInt(y)
			};
		},
		/*
			共用函数
			将字幕文件内容转换成数组
		*/
		parseSrtSubtitles: function(srt) {
			var subtitles = [];
			var textSubtitles = [];
			var i = 0;
			var arrs = srt.split('\n');
			var arr = [];
			var delHtmlTag = function(str) {
				return str.replace(/<[^>]+>/g, ''); //去掉所有的html标记
			};
			for(i = 0; i < arrs.length; i++) {
				if(arrs[i].replace(/\s/g, '').length > 0) {
					arr.push(arrs[i]);
				} else {
					if(arr.length > 0) {
						textSubtitles.push(arr);
					}
					arr = [];
				}
			}
			for(i = 0; i < textSubtitles.length; ++i) {
				var textSubtitle = textSubtitles[i];
				if(textSubtitle.length >= 2) {
					var sn = textSubtitle[0]; // 字幕的序号
					var startTime = this.toSeconds(this.trim(textSubtitle[1].split(' --> ')[0])); // 字幕的开始时间
					var endTime = this.toSeconds(this.trim(textSubtitle[1].split(' --> ')[1])); // 字幕的结束时间
					var content = [delHtmlTag(textSubtitle[2])]; // 字幕的内容
					// 字幕可能有多行
					if(textSubtitle.length > 2) {
						for(var j = 3; j < textSubtitle.length; j++) {
							content.push(delHtmlTag(textSubtitle[j]));
						}
					}
					// 字幕对象
					var subtitle = {
						sn: sn,
						startTime: startTime,
						endTime: endTime,
						content: content
					};
					subtitles.push(subtitle);
				}
			}
			return subtitles;
		},
		/*
			共用函数
			计时器,该函数模拟as3中的timer原理
			time:计时时间,单位:毫秒
			fun:接受函数
			number:运行次数,不设置则无限运行
		*/
		timer: function(time, fun, number) {
			var thisTemp = this;
			this.time = 10; //运行间隔
			this.fun = null; //监听函数
			this.timeObj = null; //setInterval对象
			this.number = 0; //已运行次数
			this.numberTotal = null; //总至需要次数
			this.runing = false; //当前状态
			this.startFun = function() {
				thisTemp.number++;
				thisTemp.fun();
				if(thisTemp.numberTotal != null && thisTemp.number >= thisTemp.numberTotal) {
					thisTemp.stop();
				}
			};
			this.start = function() {
				if(!thisTemp.runing) {
					thisTemp.runing = true;
					thisTemp.timeObj = window.setInterval(thisTemp.startFun, time);
				}
			};
			this.stop = function() {
				if(thisTemp.runing) {
					thisTemp.runing = false;
					window.clearInterval(thisTemp.timeObj);
					thisTemp.timeObj = null;
				}
			};
			if(time) {
				this.time = time;
			}
			if(fun) {
				this.fun = fun;
			}
			if(number) {
				this.numberTotal = number;
			}
			this.start();
		},
		/*
			共用函数
			将时分秒转换成秒
		*/
		toSeconds: function(t) {
			var s = 0.0;
			if(t) {
				var p = t.split(':');
				for(i = 0; i < p.length; i++) {
					s = s * 60 + parseFloat(p[i].replace(',', '.'));
				}
			}
			return s;
		},
		/*
			共用函数
			将对象Object标准化
		*/
		standardization: function(o, n) { //n替换进o
			var h = {};
			var k;
			for(k in o) {
				h[k] = o[k];
			}
			for(k in n) {
				var type = typeof(h[k]);
				switch(type) {
					case 'number':
						h[k] = parseFloat(n[k]);
						break;
					default:
						h[k] = n[k];
						break;
				}

			}
			return h;
		},
		/*
			共用函数
			搜索数组
		 */
		arrIndexOf: function(arr, key) {
			var re = new RegExp(key, ['']);
			return(arr.toString().replace(re, '┢').replace(/[^,┢]/g, '')).indexOf('┢');
		},
		/*
			共用函数
			去掉空格
		 */
		trim: function(str) {
			return str.replace(/(^\s*)|(\s*$)/g, '');
		},
		/*
			共用函数
			输出内容到控制台
		*/
		log: function(val) {
			try {
				console.log(val);
			} catch(e) {}
		},
		/*
			共用函数
			弹出提示
		*/
		eject: function(er, val) {
			if(!this.vars['debug']) {
				return;
			}
			var errorVal = er[1];
			if(!this.isUndefined(val)) {
				errorVal = errorVal.replace('[error]', val);
			}
			var value = 'error ' + er[0] + ':' + errorVal;
			try {
				this.log(value);
			} catch(e) {}
		}
	};
	window.ckplayer = ckplayer;
})();
/* COMBO: filename = js/plugins/qiniuplayer/qiniuplayer.min.js, type = application/javascript, resp = 200 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojs=e()}}(function(){var e;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){return i(e[a][1][t]||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(2),a=t(o),s=e(5),u=t(s),l=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){this.player_.play()},t}(a["default"]);l.prototype.controlText_="Play Video",u["default"].registerComponent("BigPlayButton",l),exports["default"]=l},{2:2,5:5}],2:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(3),a=t(o),s=e(5),u=t(s),l=e(86),c=t(l),d=e(88),f=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.createEl=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"button",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};t=(0,d.assign)({className:this.buildCSSClass()},t),"button"!==e&&(c["default"].warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=(0,d.assign)({tabIndex:0},t),n=(0,d.assign)({role:"button"},n)),n=(0,d.assign)({type:"button","aria-live":"polite"},n);var r=u["default"].prototype.createEl.call(this,e,t,n);return this.createControlTextEl(r),r},t.prototype.addChild=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=this.constructor.name;return c["default"].warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),u["default"].prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(a["default"]);u["default"].registerComponent("Button",f),exports["default"]=f},{3:3,5:5,86:86,88:88}],3:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(82),d=t(c),f=e(83),p=t(f),h=e(86),y=n(h),m=e(94),g=n(m),v=e(88),_=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.emitTapEvents(),a.enable(),a}return o(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div",n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};n=(0,v.assign)({className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&y["default"].error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=(0,v.assign)({role:"button","aria-live":"polite"},r),this.tabIndex_=n.tabIndex;var i=e.prototype.createEl.call(this,t,n,r);return this.createControlTextEl(i),i},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=l.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.el();if(!e)return this.controlText_||"Need Text";var n=this.localize(e);return this.controlText_=e,this.controlTextEl_.innerHTML=n,t.setAttribute("title",n),this},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this},t.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("tap",this.handleClick),this.off("click",this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){d.on(g["default"],"keydown",p.bind(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleClick(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){d.off(g["default"],"keydown",p.bind(this,this.handleKeyPress))},t}(s["default"]);s["default"].registerComponent("ClickableComponent",_),exports["default"]=_},{5:5,81:81,82:82,83:83,86:86,88:88,94:94}],4:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(2),a=t(o),s=e(5),u=t(s),l=function(e){function t(i,o){n(this,t);var a=r(this,e.call(this,i,o));return a.controlText(o&&o.controlText||a.localize("Close")),a}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(a["default"]);u["default"].registerComponent("CloseButton",l),exports["default"]=l},{2:2,5:5}],5:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var i=e(95),o=n(i),a=e(81),s=t(a),u=e(83),l=t(u),c=e(85),d=t(c),f=e(82),p=t(f),h=e(86),y=n(h),m=e(91),g=n(m),v=e(87),_=n(v),b=function(){function e(t,n,i){if(r(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=(0,_["default"])({},this.options_),n=this.options_=(0,_["default"])(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var o=t&&t.id&&t.id()||"no_player";this.id_=o+"_component_"+d.newGUID()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),s.removeElData(this.el_),this.el_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return y["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=(0,_["default"])(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,n){return s.createEl(e,t,n)},e.prototype.localize=function(e){var t=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages();if(!t||!n)return e;var r=n[t];if(r&&r[e])return r[e];var i=t.split("-")[0],o=n[i];return o&&o[e]?o[e]:e},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=(0,g["default"])(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.children_.length,i=void 0,o=void 0;if("string"==typeof t){o=(0,g["default"])(t),n||(n={}),n===!0&&(y["default"].warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),n={});var a=n.componentClass||o;n.name=o;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(this.children_.splice(r,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),o=o||i.name&&i.name(),o&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children,l=u[r]||null;this.contentEl().insertBefore(i.el(),l)}return i},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,n=this.options_.children;n&&function(){var r=t.options_,i=function(e){var n=e.name,i=e.opts;if(r[n]!==undefined&&(i=r[n]),i!==!1){i===!0&&(i={}),i.playerOptions=t.options_.playerOptions;var o=t.addChild(n,i);o&&(t[n]=o)}},o=void 0,a=e.getComponent("Tech");o=Array.isArray(n)?n:Object.keys(n),o.concat(Object.keys(t.options_).filter(function(e){return!o.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var r=void 0,i=void 0;return"string"==typeof e?(r=e,i=n[r]||t.options_[r]||{}):(r=e.name,i=e),{name:r,opts:i}}).filter(function(t){var n=e.getComponent(t.opts.componentClass||(0,g["default"])(t.name));return n&&!a.isTech(n)}).forEach(i)}()},e.prototype.buildCSSClass=function(){return""},e.prototype.on=function(e,t,n){var r=this;return"string"==typeof e||Array.isArray(e)?p.on(this.el_,e,l.bind(this,t)):function(){var i=e,o=t,a=l.bind(r,n),s=function(){return r.off(i,o,a)};s.guid=a.guid,r.on("dispose",s);var u=function(){return r.off("dispose",s)};u.guid=a.guid,e.nodeName?(p.on(i,o,a),p.on(i,"dispose",u)):"function"==typeof e.on&&(i.on(o,a),i.on("dispose",u))}(),this},e.prototype.off=function(e,t,n){if(!e||"string"==typeof e||Array.isArray(e))p.off(this.el_,e,t);else{var r=e,i=t,o=l.bind(this,n);this.off("dispose",o),e.nodeName?(p.off(r,i,o),p.off(r,"dispose",o)):(r.off(i,o),r.off("dispose",o))}return this},e.prototype.one=function(e,t,n){var r=this,i=arguments;return"string"==typeof e||Array.isArray(e)?p.one(this.el_,e,l.bind(this,t)):function(){var o=e,a=t,s=l.bind(r,n),u=function c(){r.off(o,a,c),s.apply(null,i)};u.guid=s.guid,r.on(o,a,u)}(),this},e.prototype.trigger=function(e,t){return p.trigger(this.el_,e,t),this},e.prototype.ready=function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return s.$(e,t||this.contentEl())},e.prototype.$$=function(e,t){return s.$$(e,t||this.contentEl())},e.prototype.hasClass=function(e){return s.hasElClass(this.el_,e)},e.prototype.addClass=function(e){return s.addElClass(this.el_,e),this},e.prototype.removeClass=function(e){return s.removeElClass(this.el_,e),this},e.prototype.toggleClass=function(e,t){return s.toggleElClass(this.el_,e,t),this},e.prototype.show=function(){return this.removeClass("vjs-hidden"),this},e.prototype.hide=function(){return this.addClass("vjs-hidden"),this},e.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},e.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},e.prototype.getAttribute=function(e){return s.getAttribute(this.el_,e)},e.prototype.setAttribute=function(e,t){return s.setAttribute(this.el_,e,t),this},e.prototype.removeAttribute=function(e){return s.removeAttribute(this.el_,e),this},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},e.prototype.dimension=function(e,t,n){if(t!==undefined)return null!==t&&t===t||(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",n||this.trigger("resize"),this;if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return i!==-1?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+(0,g["default"])(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof o["default"].getComputedStyle){var n=o["default"].getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(0===(t=parseFloat(t))){var r="offset"+(0,g["default"])(e);t=this.el_[r]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.emitTapEvents=function(){var e=0,t=null,n=200,r=void 0;this.on("touchstart",function(n){1===n.touches.length&&(t={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=(new Date).getTime(),r=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)r=!1;else if(t){var n=e.touches[0].pageX-t.pageX,i=e.touches[0].pageY-t.pageY,o=Math.sqrt(n*n+i*i);o>10&&(r=!1)}});var i=function(){r=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",function(i){t=null,r===!0&&(new Date).getTime()-e<n&&(i.preventDefault(),this.trigger("tap"))})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=l.bind(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.prototype.setTimeout=function(e,t){e=l.bind(this,e);var n=o["default"].setTimeout(e,t),r=function(){this.clearTimeout(n)};return r.guid="vjs-timeout-"+n,this.on("dispose",r),n},e.prototype.clearTimeout=function(e){o["default"].clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){e=l.bind(this,e);var n=o["default"].setInterval(e,t),r=function(){this.clearInterval(n)};return r.guid="vjs-interval-"+n,this.on("dispose",r),n},e.prototype.clearInterval=function(e){o["default"].clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.registerComponent=function(t,n){if(t)return t=(0,g["default"])(t),e.components_||(e.components_={}),"Player"===t&&e.components_[t]&&function(){var n=e.components_[t];if(n.players&&Object.keys(n.players).length>0&&Object.keys(n.players).map(function(e){return n.players[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}(),e.components_[t]=n,n},e.getComponent=function(t){if(t)return t=(0,g["default"])(t),e.components_&&e.components_[t]?e.components_[t]:o["default"]&&o["default"].videojs&&o["default"].videojs[t]?(y["default"].warn("The "+t+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),o["default"].videojs[t]):void 0},e.extend=function(t){t=t||{},y["default"].warn("Component.extend({}) has been deprecated,  use videojs.extend(Component, {}) instead");var n=t.init||t.init||this.prototype.init||this.prototype.init||function(){},r=function(){n.apply(this,arguments)};r.prototype=Object.create(this.prototype),r.prototype.constructor=r,r.extend=e.extend;for(var i in t)t.hasOwnProperty(i)&&(r.prototype[i]=t[i]);return r},e}();b.registerComponent("Component",b),exports["default"]=b},{81:81,82:82,83:83,85:85,86:86,87:87,91:91,95:95}],6:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(36),a=t(o),s=e(5),u=t(s),l=e(7),c=t(l),d=function(e){function t(i){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n(this,t),o.tracks=i.audioTracks&&i.audioTracks();var a=r(this,e.call(this,i,o));return a.el_.setAttribute("aria-label","Audio Menu"),a}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],t=this.player_.audioTracks&&this.player_.audioTracks();if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n];e.push(new c["default"](this.player_,{track:r,selectable:!0}))}return e},t}(a["default"]);d.prototype.controlText_="Audio Track",u["default"].registerComponent("AudioTrackButton",d),exports["default"]=d},{36:36,5:5,7:7}],7:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(48),s=n(a),u=e(5),l=n(u),c=e(83),d=t(c),f=function(e){function t(n,o){r(this,t);var a=o.track,s=n.audioTracks();o.label=a.label||a.language||"Unknown",o.selected=a.enabled;var u=i(this,e.call(this,n,o));return u.track=a,s&&function(){var e=d.bind(u,u.handleTracksChange);s.addEventListener("change",e),u.on("dispose",function(){s.removeEventListener("change",e)})}(),u}return o(t,e),t.prototype.handleClick=function(t){var n=this.player_.audioTracks();if(e.prototype.handleClick.call(this,t),n)for(var r=0;r<n.length;r++){var i=n[r];i.enabled=i===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(s["default"]);l["default"].registerComponent("AudioTrackMenuItem",f),exports["default"]=f},{48:48,5:5,83:83}],8:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o);e(12),e(32),e(33),e(35),e(34),e(10),e(18),e(9),e(38),e(40),e(11),e(25),e(27),e(29),e(24),e(6),e(13),e(21);var s=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},t}(a["default"]);s.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},a["default"].registerComponent("ControlBar",s),exports["default"]=s},{10:10,11:11,12:12,13:13,18:18,21:21,24:24,25:25,27:27,29:29,32:32,33:33,34:34,35:35,38:38,40:40,5:5,6:6,9:9}],9:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(2),a=t(o),s=e(5),u=t(s),l=function(e){function t(i,o){n(this,t);var a=r(this,e.call(this,i,o));return a.on(i,"fullscreenchange",a.handleFullscreenChange),a}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(a["default"]);l.prototype.controlText_="Fullscreen",u["default"].registerComponent("FullscreenToggle",l),exports["default"]=l},{2:2,5:5}],10:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.updateShowing(),a.on(a.player(),"durationchange",a.updateShowing),a}return o(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=l.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateShowing=function(e){this.player().duration()===Infinity?this.show():this.hide()},t}(s["default"]);s["default"].registerComponent("LiveDisplay",c),exports["default"]=c},{5:5,81:81}],11:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(2),s=n(a),u=e(5),l=n(u),c=e(81),d=t(c),f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.on(n,"volumechange",a.update),n.tech_&&n.tech_.featuresVolumeControl===!1&&a.addClass("vjs-hidden"),a.on(n,"loadstart",function(){this.update(),n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){var t=this.player_.volume(),n=3;0===t||this.player_.muted()?n=0:t<.33?n=1:t<.67&&(n=2);var r=this.player_.muted()?"Unmute":"Mute";this.controlText()!==r&&this.controlText(r);for(var i=0;i<4;i++)d.removeElClass(this.el_,"vjs-vol-"+i);d.addElClass(this.el_,"vjs-vol-"+n)},t}(s["default"]);f.prototype.controlText_="Mute",l["default"].registerComponent("MuteToggle",f),exports["default"]=f},{2:2,5:5,81:81}],12:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(2),a=t(o),s=e(5),u=t(s),l=function(e){function t(i,o){n(this,t);var a=r(this,e.call(this,i,o));return a.on(i,"play",a.handlePlay),a.on(i,"pause",a.handlePause),a}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handlePlay=function(e){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t}(a["default"]);l.prototype.controlText_="Play",u["default"].registerComponent("PlayToggle",l),exports["default"]=l},{2:2,5:5}],13:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(47),s=n(a),u=e(49),l=n(u),c=e(14),d=n(c),f=e(5),p=n(f),h=e(81),y=t(h),m=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.updateVisibility(),a.updateLabel(),a.on(n,"loadstart",a.updateVisibility),a.on(n,"ratechange",a.updateLabel),a}return o(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=y.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),t.appendChild(this.labelEl_),t},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.createMenu=function(){var e=new l["default"](this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new d["default"](this.player(),{rate:t[n]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>t){r=n[i];break}this.player().playbackRate(r)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(s["default"]);m.prototype.controlText_="Playback Rate",p["default"].registerComponent("PlaybackRateMenuButton",m),exports["default"]=m},{14:14,47:47,49:49,5:5,81:81}],14:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(48),a=t(o),s=e(5),u=t(s),l=function(e){function t(i,o){n(this,t);var a=o.rate,s=parseFloat(a,10);o.label=a,o.selected=1===s;var u=r(this,e.call(this,i,o));return u.label=a,u.rate=s,u.on(i,"ratechange",u.update),u}return i(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(a["default"]);l.prototype.contentElType="button",u["default"].registerComponent("PlaybackRateMenuItem",l),exports["default"]=l},{48:48,5:5}],15:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.partEls_=[],a.on(n,"progress",a.update),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.update=function(e){var t=this.player_.buffered(),n=this.player_.duration(),r=this.player_.bufferedEnd(),i=this.partEls_,o=function(e,t){var n=e/t||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=o(r,n);for(var a=0;a<t.length;a++){var s=t.start(a),u=t.end(a),c=i[a];c||(c=this.el_.appendChild(l.createEl()),i[a]=c),c.style.left=o(s,r),c.style.width=o(u-s,r)}for(var d=i.length;d>t.length;d--)this.el_.removeChild(i[d-1]);i.length=t.length},t}(s["default"]);s["default"].registerComponent("LoadProgressBar",c),exports["default"]=c},{5:5,81:81}],16:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(83),d=t(c),f=e(84),p=n(f),h=e(80),y=n(h),m=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return o.playerOptions&&o.playerOptions.controlBar&&o.playerOptions.controlBar.progressControl&&o.playerOptions.controlBar.progressControl.keepTooltipsInside&&(a.keepTooltipsInside=o.playerOptions.controlBar.progressControl.keepTooltipsInside),a.keepTooltipsInside&&(a.tooltip=l.createEl("div",{className:"vjs-time-tooltip"}),a.el().appendChild(a.tooltip),a.addClass("vjs-keep-tooltips-inside")),a.update(0,0),n.on("ready",function(){a.on(n.controlBar.progressControl.el(),"mousemove",d.throttle(d.bind(a,a.handleMouseMove),25))}),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.handleMouseMove=function(e){var t=this.player_.duration(),n=this.calculateDistance(e)*t,r=e.pageX-l.findElPosition(this.el().parentNode).left;this.update(n,r)},t.prototype.update=function(e,t){var n=(0,p["default"])(e,this.player_.duration());if(this.el().style.left=t+"px",this.el().setAttribute("data-current-time",n),this.keepTooltipsInside){var r=this.clampPosition_(t),i=t-r+1,o=parseFloat((0,y["default"])(this.tooltip,"width")),a=o/2;this.tooltip.innerHTML=n,this.tooltip.style.right="-"+(a-i)+"px"}},t.prototype.calculateDistance=function(e){return l.getPointerPosition(this.el().parentNode,e).x},t.prototype.clampPosition_=function(e){if(!this.keepTooltipsInside)return e;var t=parseFloat((0,y["default"])(this.player().el(),"width")),n=parseFloat((0,y["default"])(this.tooltip,"width")),r=n/2,i=e;return e<r?i=Math.ceil(r):e>t-r&&(i=Math.floor(t-r)),i},t}(s["default"]);s["default"].registerComponent("MouseTimeDisplay",m),exports["default"]=m},{5:5,80:80,81:81,83:83,84:84}],17:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(83),l=t(u),c=e(84),d=n(c),f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.updateDataAttr(),a.on(n,"timeupdate",a.updateDataAttr),n.ready(l.bind(a,a.updateDataAttr)),o.playerOptions&&o.playerOptions.controlBar&&o.playerOptions.controlBar.progressControl&&o.playerOptions.controlBar.progressControl.keepTooltipsInside&&(a.keepTooltipsInside=o.playerOptions.controlBar.progressControl.keepTooltipsInside),a.keepTooltipsInside&&a.addClass("vjs-keep-tooltips-inside"),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,d["default"])(t,this.player_.duration()))},t}(s["default"]);s["default"].registerComponent("PlayProgressBar",f),exports["default"]=f},{5:5,83:83,84:84}],18:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o);e(19),e(16);var s=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t}(a["default"]);s.prototype.options_={children:["seekBar"]},a["default"].registerComponent("ProgressControl",s),exports["default"]=s},{16:16,19:19,5:5}],19:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(57),s=n(a),u=e(5),l=n(u),c=e(83),d=t(c),f=e(84),p=n(f),h=e(80),y=n(h);e(15),e(17),e(20);var m=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.on(n,"timeupdate",a.updateProgress),a.on(n,"ended",a.updateProgress),n.ready(d.bind(a,a.updateProgress)),o.playerOptions&&o.playerOptions.controlBar&&o.playerOptions.controlBar.progressControl&&o.playerOptions.controlBar.progressControl.keepTooltipsInside&&(a.keepTooltipsInside=o.playerOptions.controlBar.progressControl.keepTooltipsInside),a.keepTooltipsInside&&(a.tooltipProgressBar=a.addChild("TooltipProgressBar")),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},t.prototype.updateProgress=function(e){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var t=parseFloat((0,y["default"])(this.player().el(),"width")),n=parseFloat((0,y["default"])(this.tooltipProgressBar.tooltip,"width")),r=this.tooltipProgressBar.el().style;r.maxWidth=Math.floor(t-n/2)+"px",r.minWidth=Math.ceil(n/2)+"px",r.right="-"+n/2+"px"}},t.prototype.updateAriaAttributes=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),e.setAttribute("aria-valuetext",(0,p["default"])(t,this.player_.duration()))},t.prototype.getPercent=function(){var e=this.player_.currentTime()/this.player_.duration();return e>=1?1:e},t.prototype.handleMouseDown=function(t){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t}(s["default"]);m.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},m.prototype.playerEvent="timeupdate",l["default"].registerComponent("SeekBar",m),exports["default"]=m},{15:15,17:17,20:20,5:5,57:57,80:80,83:83,84:84}],20:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(83),l=t(u),c=e(84),d=n(c),f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.updateDataAttr(),a.on(n,"timeupdate",a.updateDataAttr),n.ready(l.bind(a,a.updateDataAttr)),a}return o(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=t.querySelector(".vjs-time-tooltip"),t},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),n=(0,d["default"])(t,this.player_.duration());this.el_.setAttribute("data-current-time",n),this.tooltip.innerHTML=n},t}(s["default"]);s["default"].registerComponent("TooltipProgressBar",f),exports["default"]=f},{5:5,83:83,84:84}],21:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(22),a=t(o),s=e(5),u=t(s),l=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(a["default"]);u["default"].registerComponent("CustomControlSpacer",l),exports["default"]=l},{22:22,5:5}],22:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o),s=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(a["default"]);a["default"].registerComponent("Spacer",s),exports["default"]=s},{5:5}],23:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(31),a=t(o),s=e(5),u=t(s),l=function(e){function t(i,o){n(this,t),o.track={player:i,kind:o.kind,label:o.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},o.selectable=!1;var a=r(this,e.call(this,i,o));return a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+o.kind+" settings dialog"),a}return i(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},t}(a["default"]);u["default"].registerComponent("CaptionSettingsMenuItem",l),exports["default"]=l},{31:31,5:5}],24:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(30),a=t(o),s=e(5),u=t(s),l=e(23),c=t(l),d=function(e){function t(i,o,a){n(this,t);var s=r(this,e.call(this,i,o,a));return s.el_.setAttribute("aria-label","Captions Menu"),s}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(t){var n=2;e.prototype.update.call(this),this.player().tech_&&this.player().tech_.featuresNativeTextTracks&&(n=1),this.items&&this.items.length>n?this.show():this.hide()},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||t.push(new c["default"](this.player_,{kind:this.kind_})),e.prototype.createItems.call(this,t)},t}(a["default"]);d.prototype.kind_="captions",d.prototype.controlText_="Captions",u["default"].registerComponent("CaptionsButton",d),exports["default"]=d},{23:23,30:30,5:5}],25:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(30),a=t(o),s=e(5),u=t(s),l=e(26),c=t(l),d=e(91),f=t(d),p=function(e){function t(i,o,a){n(this,t);var s=r(this,e.call(this,i,o,a));return s.el_.setAttribute("aria-label","Chapters Menu"),s}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize((0,f["default"])(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],o=new c["default"](this.player_,{track:this.track_,cue:i});e.push(o)}return e},t}(a["default"]);p.prototype.kind_="chapters",p.prototype.controlText_="Chapters",u["default"].registerComponent("ChaptersButton",p),exports["default"]=p},{26:26,30:30,5:5,91:91}],26:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(48),s=n(a),u=e(5),l=n(u),c=e(83),d=t(c),f=function(e){function t(n,o){r(this,t);var a=o.track,s=o.cue,u=n.currentTime();o.selectable=!0,o.label=s.text,o.selected=s.startTime<=u&&u<s.endTime;var l=i(this,e.call(this,n,o));return l.track=a,l.cue=s,a.addEventListener("cuechange",d.bind(l,l.update)),l}return o(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(s["default"]);l["default"].registerComponent("ChaptersTrackMenuItem",f),exports["default"]=f},{48:48,5:5,83:83}],27:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(30),s=n(a),u=e(5),l=n(u),c=e(83),d=t(c),f=function(e){function t(n,o,a){r(this,t);var s=i(this,e.call(this,n,o,a));s.el_.setAttribute("aria-label","Descriptions Menu");var u=n.textTracks();return u&&function(){var e=d.bind(s,s.handleTracksChange);u.addEventListener("change",e),s.on("dispose",function(){u.removeEventListener("change",e)})}(),s}return o(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var o=t[r];if(o.kind!==this.kind_&&"showing"===o.mode){n=!0;break}}n?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t}(s["default"]);f.prototype.kind_="descriptions",f.prototype.controlText_="Descriptions",l["default"].registerComponent("DescriptionsButton",f),exports["default"]=f},{30:30,5:5,83:83}],28:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(31),a=t(o),s=e(5),u=t(s),l=function(e){function t(i,o){n(this,t),o.track={player:i,kind:o.kind,label:o.kind+" off","default":!1,mode:"disabled"},o.selectable=!0;var a=r(this,e.call(this,i,o));return a.selected(!0),a}return i(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var o=t[r];if(o.kind===this.track.kind&&"showing"===o.mode){n=!1;break}}this.selected(n)},t}(a["default"]);u["default"].registerComponent("OffTextTrackMenuItem",l),exports["default"]=l},{31:31,5:5}],29:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(30),a=t(o),s=e(5),u=t(s),l=function(e){function t(i,o,a){n(this,t);var s=r(this,e.call(this,i,o,a));return s.el_.setAttribute("aria-label","Subtitles Menu"),s}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t}(a["default"]);l.prototype.kind_="subtitles",l.prototype.controlText_="Subtitles",u["default"].registerComponent("SubtitlesButton",l),exports["default"]=l},{30:30,5:5}],30:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(36),a=t(o),s=e(5),u=t(s),l=e(31),c=t(l),d=e(28),f=t(d),p=function(e){function t(i){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return n(this,t),o.tracks=i.textTracks(),r(this,e.call(this,i,o))}return i(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];e.push(new f["default"](this.player_,{kind:this.kind_}));var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n];r.kind===this.kind_&&e.push(new c["default"](this.player_,{track:r,selectable:!0}))}return e},t}(a["default"]);u["default"].registerComponent("TextTrackButton",p),exports["default"]=p},{28:28,31:31,36:36,5:5}],31:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e(48),u=n(s),l=e(5),c=n(l),d=e(83),f=t(d),p=e(95),h=n(p),y=e(94),m=n(y),g=function(e){function t(n,o){r(this,t);var s=o.track,u=n.textTracks();o.label=s.label||s.language||"Unknown",o.selected=s["default"]||"showing"===s.mode;var l=i(this,e.call(this,n,o));return l.track=s,u&&function(){var e=f.bind(l,l.handleTracksChange);u.addEventListener("change",e),l.on("dispose",function(){u.removeEventListener("change",e)})}(),u&&u.onchange===undefined&&function(){var e=void 0;l.on(["tap","click"],function(){if("object"!==a(h["default"].Event))try{e=new h["default"].Event("change")}catch(err){}e||(e=m["default"].createEvent("Event"),e.initEvent("change",!0,!0)),u.dispatchEvent(e)})}(),l}return o(t,e),t.prototype.handleClick=function(t){var n=this.track.kind,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var i=0;i<r.length;i++){var o=r[i];o.kind===n&&(o===this.track?o.mode="showing":o.mode="disabled")}},t.prototype.handleTracksChange=function(e){this.selected("showing"===this.track.mode)},t}(u["default"]);c["default"].registerComponent("TextTrackMenuItem",g),exports["default"]=g},{48:48,5:5,83:83,94:94,95:95}],32:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(84),d=n(c),f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.on(n,"timeupdate",a.updateContent),a}return o(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=l.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),n=this.localize("Current Time"),r=(0,d["default"])(t,this.player_.duration());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+n+"</span> "+r)},t}(s["default"]);s["default"].registerComponent("CurrentTimeDisplay",f),exports["default"]=f},{5:5,81:81,84:84}],33:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(84),d=n(c),f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.on(n,"durationchange",a.updateContent),a.on(n,"timeupdate",a.updateContent),a.on(n,"loadedmetadata",a.updateContent),a}return o(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=l.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.duration();if(t&&this.duration_!==t){this.duration_=t;var n=this.localize("Duration Time"),r=(0,d["default"])(t);this.contentEl_.innerHTML='<span class="vjs-control-text">'+n+"</span> "+r}},t}(s["default"]);s["default"].registerComponent("DurationDisplay",f),exports["default"]=f},{5:5,81:81,84:84}],34:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(84),d=n(c),f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.on(n,"timeupdate",a.updateContent),a.on(n,"durationchange",a.updateContent),a}return o(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=l.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){if(this.player_.duration()){var t=this.localize("Remaining Time"),n=(0,d["default"])(this.player_.remainingTime());n!==this.formattedTime_&&(this.formattedTime_=n,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> -"+n)}},t}(s["default"]);s["default"].registerComponent("RemainingTimeDisplay",f),exports["default"]=f},{5:5,81:81,84:84}],35:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o),s=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(a["default"]);a["default"].registerComponent("TimeDivider",s),exports["default"]=s},{5:5}],36:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(47),s=n(a),u=e(5),l=n(u),c=e(83),d=t(c),f=function(e){function t(n,o){r(this,t);var a=o.tracks,s=i(this,e.call(this,n,o));if(s.items.length<=1&&s.hide(),!a)return i(s);var u=d.bind(s,s.update);return a.addEventListener("removetrack",u),a.addEventListener("addtrack",u),s.player_.on("dispose",function(){a.removeEventListener("removetrack",u),a.removeEventListener("addtrack",u)}),s}return o(t,e),t}(s["default"]);l["default"].registerComponent("TrackButton",f),exports["default"]=f},{47:47,5:5,83:83}],37:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(57),s=n(a),u=e(5),l=n(u),c=e(83),d=t(c);e(39);var f=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.on(n,"volumechange",a.updateARIAAttributes),n.ready(d.bind(a,a.updateARIAAttributes)),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},t.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t}(s["default"]);f.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},f.prototype.playerEvent="volumechange",l["default"].registerComponent("VolumeBar",f),exports["default"]=f},{39:39,5:5,57:57,83:83}],38:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o);e(37);var s=function(e){function t(i,o){n(this,t);var a=r(this,e.call(this,i,o));return i.tech_&&i.tech_.featuresVolumeControl===!1&&a.addClass("vjs-hidden"),a.on(i,"loadstart",function(){i.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},t}(a["default"]);s.prototype.options_={children:["volumeBar"]},a["default"].registerComponent("VolumeControl",s),exports["default"]=s},{37:37,5:5}],39:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o),s=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(a["default"]);a["default"].registerComponent("VolumeLevel",s),exports["default"]=s},{5:5}],40:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(83),s=n(a),u=e(5),l=t(u),c=e(54),d=t(c),f=e(53),p=t(f),h=e(11),y=t(h),m=e(37),g=t(m),v=function(e){function t(n){function o(){n.tech_&&n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};r(this,t),a.inline===undefined&&(a.inline=!0),a.vertical===undefined&&(a.inline?a.vertical=!1:a.vertical=!0),a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=!!a.vertical;var s=i(this,e.call(this,n,a));return s.on(n,"volumechange",s.volumeUpdate),s.on(n,"loadstart",s.volumeUpdate),o.call(s),s.on(n,"loadstart",o),s.on(s.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),s.on(s.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),s.on(s.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),s.on(s.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),s}return o(t,e),t.prototype.buildCSSClass=function(){var t="";return t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+t},t.prototype.createPopup=function(){var e=new d["default"](this.player_,{contentElType:"div"}),t=new g["default"](this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},t.prototype.handleClick=function(t){y["default"].prototype.handleClick.call(this),e.prototype.handleClick.call(this)},t.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],s.bind(this,this.handleMouseDown))},t.prototype.handleMouseDown=function(e){this.on(["mousemove","touchmove"],s.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},t.prototype.handleMouseUp=function(e){this.off(["mousemove","touchmove"],s.bind(this.volumeBar,this.volumeBar.handleMouseMove))},t}(p["default"]);v.prototype.volumeUpdate=y["default"].prototype.update,v.prototype.controlText_="Mute",l["default"].registerComponent("VolumeMenuButton",v),exports["default"]=v},{11:11,37:37,5:5,53:53,54:54,83:83}],41:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o),s=e(50),u=t(s),l=e(87),c=t(l),d=function(e){function t(i,o){n(this,t);var a=r(this,e.call(this,i,o));return a.on(i,"error",a.open),a}return i(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(u["default"]);d.prototype.options_=(0,c["default"])(u["default"].prototype.options_,{fillAlways:!0,temporary:!1,uncloseable:!0}),a["default"].registerComponent("ErrorDisplay",d),exports["default"]=d},{5:5,50:50,87:87}],42:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}exports.__esModule=!0;var n=e(82),r=t(n),i=function(){};i.prototype.allowedEvents_={},i.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},r.on(this,e,t),this.addEventListener=n},i.prototype.addEventListener=i.prototype.on,i.prototype.off=function(e,t){r.off(this,e,t)},i.prototype.removeEventListener=i.prototype.off,i.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},r.one(this,e,t),this.addEventListener=n},i.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=r.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),r.trigger(this,e)},i.prototype.dispatchEvent=i.prototype.trigger,exports["default"]=i},{82:82}],43:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e(86),i=t(r),o=e(88),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},s=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=function(){e.apply(this,arguments)},r={};(0,o.isObject)(t)?("function"==typeof t.init&&(i["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead."),t.constructor=t.init),t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),a(n,e);for(var s in r)r.hasOwnProperty(s)&&(n.prototype[s]=r[s]);return n};exports["default"]=s},{86:86,88:88}],44:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;for(var n=e(94),r=t(n),i={},o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=o[0],s=void 0,u=0;u<o.length;u++)if(o[u][1]in r["default"]){s=o[u];break}if(s)for(var l=0;l<s.length;l++)i[a[l]]=s[l];exports["default"]=i},{94:94}],45:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o),s=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},t}(a["default"]);a["default"].registerComponent("LoadingSpinner",s),exports["default"]=s},{5:5}],46:[function(e,module,exports){"use strict";function t(e){if(e instanceof t)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:(0,n.isObject)(e)&&("number"==typeof e.code&&(this.code=e.code),(0,n.assign)(this,e)),this.message||(this.message=t.defaultMessages[this.code]||"")}exports.__esModule=!0;var n=e(88);t.prototype.code=0,t.prototype.message="",t.prototype.status=null,t.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],t.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var r=0;r<t.errorTypes.length;r++)t[t.errorTypes[r]]=r,t.prototype[t.errorTypes[r]]=r;exports["default"]=t},{88:88}],47:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(3),s=n(a),u=e(5),l=n(u),c=e(49),d=n(c),f=e(81),p=t(f),h=e(83),y=t(h),m=e(91),g=n(m),v=function(e){function t(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};r(this,t);var a=i(this,e.call(this,n,o));return a.update(),a.enabled_=!0,a.el_.setAttribute("aria-haspopup","true"),a.el_.setAttribute("role","menuitem"),a.on("keydown",a.handleSubmenuKeyPress),a}return o(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createMenu=function(){var e=new d["default"](this.player_);if(this.options_.title){var t=p.createEl("li",{className:"vjs-menu-title",innerHTML:(0,g["default"])(this.options_.title),tabIndex:-1});e.children_.unshift(t),p.insertElFirst(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",y.bind(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault()):38===t.which||40===t.which?this.buttonPressed_||(this.pressButton(),t.preventDefault()):e.prototype.handleKeyPress.call(this,t)},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault())},t.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},t.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,e.prototype.disable.call(this)},t.prototype.enable=function(){return this.enabled_=!0,e.prototype.enable.call(this)},t}(s["default"]);l["default"].registerComponent("MenuButton",v),exports["default"]=v},{3:3,49:49,5:5,81:81,83:83,91:91}],48:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(3),a=t(o),s=e(5),u=t(s),l=e(88),c=function(e){function t(i,o){n(this,t);var a=r(this,e.call(this,i,o));return a.selectable=o.selectable,a.selected(o.selected),a.selectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitem"),a}return i(t,e),t.prototype.createEl=function(t,n,r){return e.prototype.createEl.call(this,"li",(0,l.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},n),r)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},t}(a["default"]);u["default"].registerComponent("MenuItem",c),exports["default"]=c},{3:3,5:5,88:88}],49:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(83),d=t(c),f=e(82),p=t(f),h=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.focusedChild_=-1,a.on("keydown",a.handleKeyPress),a}return o(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",d.bind(this,function(e){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=l.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.setAttribute("role","presentation"),n.appendChild(this.contentEl_),p.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;this.focusedChild_!==undefined&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;this.focusedChild_!==undefined&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(s["default"]);s["default"].registerComponent("Menu",h),exports["default"]=h},{5:5,81:81,82:82,83:83}],50:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(81),s=n(a),u=e(83),l=n(u),c=e(5),d=t(c),f="vjs-modal-dialog",p=27,h=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=s.createEl("div",{className:f+"-content"},{role:"document"}),a.descEl_=s.createEl("p",{className:f+"-description vjs-offscreen",id:a.el().getAttribute("aria-describedby")}),s.textContent(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.buildCSSClass=function(){return f+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===p&&this.closeable()&&this.close()},t.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",l.bind(this,this.handleKeyPress)),e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",l.bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},t.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},t.prototype.fill=function(){return this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),s.insertContent(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t),this},t.prototype.empty=function(){return this.trigger("beforemodalempty"),s.emptyEl(this.contentEl()),this.trigger("modalempty"),this},t.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t}(d["default"]);h.prototype.options_={temporary:!0},d["default"].registerComponent("ModalDialog",h),exports["default"]=h},{5:5,81:81,83:83}],51:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(94),l=n(u),c=e(95),d=n(c),f=e(82),p=t(f),h=e(81),y=t(h),m=e(83),g=t(m),v=e(85),_=t(v),b=e(78),w=t(b),T=e(86),S=n(T),E=e(91),k=n(E),O=e(90),C=e(79),P=e(89),j=t(P),x=e(44),A=n(x),I=e(46),M=n(I),L=e(97),R=n(L),D=e(88),N=e(87),U=n(N),B=e(69),F=n(B),V=e(50),H=n(V),q=e(62),z=n(q),G=e(63),W=n(G),X=e(76),Y=n(X);e(61),e(59),e(55),e(68),e(45),e(1),e(4),e(8),e(41),e(71),e(60);var K=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],$=function(e){function t(n,o,a){if(r(this,t),n.id=n.id||"vjs_video_"+_.newGUID(),o=(0,D.assign)(t.getTagSettings(n),o),o.initChildren=!1,o.createEl=!1,o.reportTouchActivity=!1,!o.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&(o.language=s.getAttribute("lang"))}else for(var u=n;u&&1===u.nodeType;){if(y.getElAttributes(u).hasOwnProperty("lang")){o.language=u.getAttribute("lang");break}u=u.parentNode}var l=i(this,e.call(this,null,o,a));if(!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");l.tag=n,l.tagAttributes=n&&y.getElAttributes(n),l.language(l.options_.language),o.languages?function(){var e={};Object.getOwnPropertyNames(o.languages).forEach(function(t){e[t.toLowerCase()]=o.languages[t]}),l.languages_=e}():l.languages_=t.prototype.options_.languages,l.cache_={},l.poster_=o.poster||"",l.controls_=!!o.controls,n.controls=!1,l.scrubbing_=!1,l.el_=l.createEl();var c=(0,U["default"])(l.options_);return o.plugins&&function(){var e=o.plugins;Object.getOwnPropertyNames(e).forEach(function(t){"function"==typeof this[t]?this[t](e[t]):S["default"].error("Unable to find plugin:",t)},l)}(),l.options_.playerOptions=c,l.initChildren(),l.isAudio("audio"===n.nodeName.toLowerCase()),l.controls()?l.addClass("vjs-controls-enabled"):l.addClass("vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label","audio player"):l.el_.setAttribute("aria-label","video player"),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),w.IS_IOS||l.addClass("vjs-workinghover"),t.players[l.id_]=l,l.userActive(!0),l.reportUserActivity(),l.listenForUserActivity_(),l.on("fullscreenchange",l.handleFullscreenChange_),l.on("stageclick",l.handleStageClick_),l}return o(t,e),t.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var t=this.tag,n=void 0,r=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");n=this.el_=r?t.parentNode:e.prototype.createEl.call(this,"div"),t.removeAttribute("width"),t.removeAttribute("height");var i=y.getElAttributes(t);if(Object.getOwnPropertyNames(i).forEach(function(e){"class"===e?n.className+=" "+i[e]:n.setAttribute(e,i[e])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=n.player=this,this.addClass("vjs-paused"),d["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=j.createStyleElement("vjs-styles-dimensions");var o=y.$(".vjs-styles-defaults"),a=y.$("head");a.insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=t.getElementsByTagName("a"),u=0;u<s.length;u++){var l=s.item(u);y.addElClass(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!r&&t.parentNode.insertBefore(n,t),y.insertElFirst(t,n),this.children_.unshift(t),this.el_=n,n},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,t){var n=e+"_";if(t===undefined)return this[n]||0;if(""===t)this[n]=undefined;else{var r=parseFloat(t);if(isNaN(r))return S["default"].error('Improper value "'+t+'" supplied for for '+e),this;this[n]=r}return this.updateStyleEl_(),this},t.prototype.fluid=function(e){if(e===undefined)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.prototype.aspectRatio=function(e){if(e===undefined)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(d["default"].VIDEOJS_NO_DYNAMIC_STYLE===!0){var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}var r=void 0,i=void 0,o=void 0,a=void 0;o=this.aspectRatio_!==undefined&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),u=s[1]/s[0];r=this.width_!==undefined?this.width_:this.height_!==undefined?this.height_/u:this.videoWidth()||300,i=this.height_!==undefined?this.height_:r*u,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),j.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+r+"px;\n        height: "+i+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*u+"%;\n      }\n    ")},t.prototype.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(z["default"].getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var r=(0,D.assign)({source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[e.toLowerCase()]);this.tag&&(r.tag=this.tag),t&&(this.currentType_=t.type,t.src===this.cache_.src&&this.cache_.currentTime>0&&(r.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src);var i=z["default"].getTech(e);i||(i=s["default"].getComponent(e)),this.tech_=new i(r),this.tech_.ready(g.bind(this,this.handleTechReady_),!0),F["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_),K.forEach(function(e){n.on(n.tech_,e,n["handleTech"+(0,k["default"])(e)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||y.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=F["default"].textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},t.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;var t="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw d["default"].alert(t),new Error(t)},t.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},t.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){(0,S["default"])("deleting tag.poster throws in some browsers",e)}this.play()}},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},t.prototype.hasStarted=function(e){return e!==undefined?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(S["default"].warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_&&this.tech_[e](t)}catch(e){throw(0,S["default"])(e),e}},t.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[e]()}catch(e){throw this.tech_[e]===undefined?(0,S["default"])("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",e):"TypeError"===e.name?((0,S["default"])("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1):(0,S["default"])(e),e}},t.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},t.prototype.pause=function(){return this.techCall_("pause"),this},t.prototype.paused=function(){return this.techGet_("paused")!==!1},t.prototype.scrubbing=function(e){return e!==undefined?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},t.prototype.currentTime=function(e){return e!==undefined?(this.techCall_("setCurrentTime",e),this):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.prototype.duration=function(e){return e===undefined?this.cache_.duration||0:(e=parseFloat(e)||0,e<0&&(e=Infinity),e!==this.cache_.duration&&(this.cache_.duration=e,e===Infinity?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=(0,O.createTimeRange)(0,0)),e},t.prototype.bufferedPercent=function(){return(0,C.bufferedPercent)(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},t.prototype.volume=function(e){var t=void 0;return e!==undefined?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},t.prototype.muted=function(e){return e!==undefined?(this.techCall_("setMuted",e),this):this.techGet_("muted")||!1},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){return e!==undefined?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=A["default"];return this.isFullscreen(!0),e.requestFullscreen?(p.on(l["default"],e.fullscreenchange,g.bind(this,function t(n){this.isFullscreen(l["default"][e.fullscreenElement]),this.isFullscreen()===!1&&p.off(l["default"],e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.exitFullscreen=function(){var e=A["default"];return this.isFullscreen(!1),e.requestFullscreen?l["default"][e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=l["default"].documentElement.style.overflow,p.on(l["default"],"keydown",g.bind(this,this.fullWindowOnEscKey)),l["default"].documentElement.style.overflow="hidden",y.addElClass(l["default"].body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,p.off(l["default"],"keydown",this.fullWindowOnEscKey),l["default"].documentElement.style.overflow=this.docOrigOverflow,y.removeElClass(l["default"].body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var t=void 0,n=0,r=this.options_.techOrder;n<r.length;n++){var i=(0,k["default"])(r[n]),o=z["default"].getTech(i);if(o||(o=s["default"].getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else S["default"].error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.prototype.selectSource=function(e){var t=this,n=this.options_.techOrder.map(k["default"]).map(function(e){return[e,z["default"].getTech(e)||s["default"].getComponent(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(S["default"].error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,t,n){var r=void 0;return e.some(function(e){return t.some(function(t){if(r=n(e,t))return!0})}),r},i=function(e){return function(t,n){return e(n,t)}},o=function(e,n){var r=e[0];if(e[1].canPlaySource(n,t.options_[r.toLowerCase()]))return{source:n,tech:r}};return(this.options_.sourceOrder?r(e,n,i(o)):r(n,e,o))||!1},t.prototype.src=function(e){if(e===undefined)return this.techGet_("src");var t=z["default"].getTech(this.techName_);return t||(t=s["default"].getComponent(this.techName_)),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e,this.options_[this.techName_.toLowerCase()])?this.sourceList_([e]):(this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},t.prototype.sourceList_=function(e){var t=this.selectSource(e);t?(t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source),this.cache_.sources=e):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},t.prototype.load=function(){return this.techCall_("load"),this},t.prototype.reset=function(){return this.loadTech_((0,k["default"])(this.options_.techOrder[0]),null),this.techCall_("reset"),this},t.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},t.prototype.currentSource=function(){var e={},t=this.currentSrc();return t&&(e.src=t),this.cache_.source||e},t.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},t.prototype.currentType=function(){return this.currentType_||""},t.prototype.preload=function(e){return e!==undefined?(this.techCall_("setPreload",e),this.options_.preload=e,this):this.techGet_("preload")},t.prototype.autoplay=function(e){return e!==undefined?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this):this.techGet_("autoplay",e)},t.prototype.loop=function(e){return e!==undefined?(this.techCall_("setLoop",e),this.options_.loop=e,this):this.techGet_("loop")},t.prototype.poster=function(e){return e===undefined?this.poster_:(e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange"),this)},t.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},t.prototype.controls=function(e){return e!==undefined?(e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},t.prototype.usingNativeControls=function(e){return e!==undefined?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},t.prototype.error=function(e){return e===undefined?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),this):(this.error_=new M["default"](e),this.addClass("vjs-error"),S["default"].error("(CODE:"+this.error_.code+" "+M["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},t.prototype.reportUserActivity=function(e){this.userActivity_=!0},t.prototype.userActive=function(e){return e!==undefined?(e=!!e,e!==this.userActive_&&(this.userActive_=e,e?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},t.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,n=void 0,r=g.bind(this,this.reportUserActivity),i=function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())},o=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},a=function(t){r(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",a),this.on("keydown",r),this.on("keyup",r);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},t.prototype.playbackRate=function(e){return e!==undefined?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},t.prototype.isAudio=function(e){return e!==undefined?(this.isAudio_=!!e,this):!!this.isAudio_},t.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new Y["default"],this.videoTracks_)},t.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new W["default"],this.audioTracks_)},t.prototype.textTracks=function(){if(this.tech_)return this.tech_.textTracks()},t.prototype.remoteTextTracks=function(){if(this.tech_)return this.tech_.remoteTextTracks()},t.prototype.remoteTextTrackEls=function(){if(this.tech_)return this.tech_.remoteTextTrackEls()},t.prototype.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},t.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.track,n=t===undefined?arguments[0]:t;if(this.tech_)return this.tech_.removeRemoteTextTrack(n)},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){return e===undefined?this.language_:(this.language_=String(e).toLowerCase(),this)},t.prototype.languages=function(){return(0,U["default"])(t.prototype.options_.languages,this.languages_)},t.prototype.toJSON=function(){var e=(0,U["default"])(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];r=(0,U["default"])(r),r.player=undefined,e.tracks[n]=r}return e},t.prototype.createModal=function(e,t){var n=this;t=t||{},t.content=e||"";var r=new H["default"](this,t);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open()},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=y.getElAttributes(e),r=n["data-setup"];if(y.hasElClass(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=(0,R["default"])(r||"{}"),o=i[0],a=i[1];o&&S["default"].error(o),(0,D.assign)(n,a)}if((0,D.assign)(t,n),e.hasChildNodes())for(var s=e.childNodes,u=0,l=s.length;u<l;u++){var c=s[u],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(y.getElAttributes(c)):"track"===d&&t.tracks.push(y.getElAttributes(c))}return t},t.prototype.flexNotSupported_=function(){var e=l["default"].createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(s["default"]);$.players={};var Q=d["default"].navigator;$.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Q&&(Q.languages&&Q.languages[0]||Q.userLanguage||Q.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){$.prototype[e]=function(){return this.techGet_(e)}}),K.forEach(function(e){$.prototype["handleTech"+(0,k["default"])(e)+"_"]=function(){return this.trigger(e)}}),s["default"].registerComponent("Player",$),exports["default"]=$},{1:1,4:4,41:41,44:44,45:45,46:46,5:5,50:50,55:55,59:59,60:60,61:61,62:62,63:63,68:68,69:69,71:71,76:76,78:78,79:79,8:8,81:81,82:82,83:83,85:85,86:86,87:87,88:88,89:89,90:90,91:91,94:94,95:95,97:97}],52:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;var n=e(51),r=t(n),i=function(e,t){r["default"].prototype[e]=t};exports["default"]=i},{51:51}],53:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(3),a=t(o),s=e(5),u=t(s),l=function(e){function t(i){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n(this,t);var a=r(this,e.call(this,i,o));return a.update(),a}return i(t,e),t.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createPopup=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t}(a["default"]);u["default"].registerComponent("PopupButton",l),exports["default"]=l},{3:3,5:5}],54:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(83),d=t(c),f=e(82),p=t(f),h=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",d.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=l.createEl(t,{className:"vjs-menu-content"});var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),p.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t}(s["default"]);s["default"].registerComponent("Popup",h),exports["default"]=h},{5:5,81:81,82:82,83:83}],55:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(3),s=n(a),u=e(5),l=n(u),c=e(83),d=t(c),f=e(81),p=t(f),h=e(78),y=t(h),m=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.update(),n.on("posterchange",d.bind(a,a.update)),a}return o(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=p.createEl("div",{className:"vjs-poster",tabIndex:-1});return y.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=p.createEl("img"),e.appendChild(this.fallbackImg_)),e},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},t}(s["default"]);l["default"].registerComponent("PosterImage",m),exports["default"]=m},{3:3,5:5,78:78,81:81,83:83}],56:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){t&&(p=t),d["default"].setTimeout(h,e)}exports.__esModule=!0,exports.hasLoaded=exports.autoSetupTimeout=exports.autoSetup=undefined;var i=e(81),o=n(i),a=e(82),s=n(a),u=e(94),l=t(u),c=e(95),d=t(c),f=!1,p=void 0,h=function(){if(o.isReal()){var e=l["default"].getElementsByTagName("video"),t=l["default"].getElementsByTagName("audio"),n=[];if(e&&e.length>0)for(var i=0,a=e.length;i<a;i++)n.push(e[i]);if(t&&t.length>0)for(var s=0,u=t.length;s<u;s++)n.push(t[s]);if(n&&n.length>0)for(var c=0,d=n.length;c<d;c++){var h=n[c];if(!h||!h.getAttribute){r(1);break}if(h.player===undefined){var y=h.getAttribute("data-setup");null!==y&&p(h)}}else f||r(1)}};o.isReal()&&"complete"===l["default"].readyState?f=!0:s.one(d["default"],"load",function(){f=!0});var y=function(){return f};exports.autoSetup=h,exports.autoSetupTimeout=r,exports.hasLoaded=y},{81:81,82:82,94:94,95:95}],57:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(5),s=n(a),u=e(81),l=t(u),c=e(88),d=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.on("mousedown",a.handleMouseDown),a.on("touchstart",a.handleMouseDown),a.on("focus",a.handleFocus),a.on("blur",a.handleBlur),a.on("click",a.handleClick),a.on(n,"controlsvisible",a.update),a.on(n,a.playerEvent,a.update),a}return o(t,e),t.prototype.createEl=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return n.className=n.className+" vjs-slider",n=(0,c.assign)({tabIndex:0},n),r=(0,c.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),l.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;l.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!==e||e<0||e===Infinity)&&(e=0);var n=(100*e).toFixed(2)+"%";this.vertical()?t.el().style.height=n:t.el().style.width=n}}},t.prototype.calculateDistance=function(e){var t=l.getPointerPosition(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){return e===undefined?this.vertical_||!1:(this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},t}(s["default"]);s["default"].registerComponent("Slider",d),exports["default"]=d},{5:5,81:81,88:88}],58:[function(e,module,exports){"use strict";function t(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?!\w+=)/),r=void 0;return n!==-1?r=n+1:0===(n=r=e.lastIndexOf("/")+1)&&(n=r=e.length),t.connection=e.substring(0,n),t.stream=e.substring(r,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t,n){return e.rtmpSourceHandler.canPlayType(t.type)||(e.isStreamingSrc(t.src)?"maybe":"")},e.rtmpSourceHandler.handleSource=function(t,n,r){var i=e.streamToParts(t.src);n.setRtmpConnection(i.connection),n.setRtmpStream(i.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e}exports.__esModule=!0,exports["default"]=t},{}],59:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.charAt(0).toUpperCase()+e.slice(1);E["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function s(e){E[e]=function(){return this.el_.vjs_getProperty(e)}}exports.__esModule=!0;for(var u=e(62),l=n(u),c=e(81),d=t(c),f=e(92),p=t(f),h=e(90),y=e(58),m=n(y),g=e(5),v=n(g),_=e(95),b=n(_),w=e(88),T=b["default"].navigator,S=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return n.source&&a.ready(function(){this.setSource(n.source)},!0),n.startTime&&a.ready(function(){this.load(),this.play(),this.currentTime(n.startTime)},!0),b["default"].videojs=b["default"].videojs||{},b["default"].videojs.Flash=b["default"].videojs.Flash||{},b["default"].videojs.Flash.onReady=t.onReady,b["default"].videojs.Flash.onEvent=t.onEvent,b["default"].videojs.Flash.onError=t.onError,a.on("seeked",function(){this.lastSeekTarget_=undefined}),a}return o(t,e),t.prototype.createEl=function(){var e=this.options_;e.swf||(e.swf="//vjs.zencdn.net/swf/5.1.0/video-js.swf");var n=e.techId,r=(0,w.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),i=(0,w.assign)({wmode:"opaque",bgcolor:"#000000"},e.params),o=(0,w.assign)({id:n,name:n,"class":"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,r,i,o),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return e===undefined?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){var t=this;e=p.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},t.prototype.seeking=function(){return this.lastSeekTarget_!==undefined},t.prototype.setCurrentTime=function(t){var n=this.seekable();n.length&&(t=t>n.start(0)?t:n.start(0),t=t<n.end(n.length-1)?t:n.end(n.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:Infinity},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?(0,h.createTimeRange)():(0,h.createTimeRange)(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?(0,h.createTimeRange)():(0,h.createTimeRange)(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t}(l["default"]),E=S.prototype,k="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),O="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),C=0;C<k.length;C++)s(k[C]),a(k[C]);for(var P=0;P<O.length;P++)s(O[P]);S.isSupported=function(){return S.version()[0]>=10},l["default"].withSourceHandlers(S),S.nativeSourceHandler={},S.nativeSourceHandler.canPlayType=function(e){return e in S.formats?"maybe":""},S.nativeSourceHandler.canHandleSource=function(e,t){function n(e){var t=p.getFileExtension(e);return t?"video/"+t:""}var r=void 0;return r=e.type?e.type.replace(/;.*/,"").toLowerCase():n(e.src),S.nativeSourceHandler.canPlayType(r)},S.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},S.nativeSourceHandler.dispose=function(){},S.registerSourceHandler(S.nativeSourceHandler),S.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},S.onReady=function(e){var t=d.getEl(e),n=t&&t.tech;n&&n.el()&&S.checkReady(n)},S.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){S.checkReady(e)},50))},S.onEvent=function(e,t){var n=d.getEl(e).tech,r=Array.prototype.slice.call(arguments,2);n.setTimeout(function(){n.trigger(t,r)},1)},S.onError=function(e,t){var n=d.getEl(e).tech;if("srcnotfound"===t)return n.error(4);n.error("FLASH: "+t)},S.version=function(){var version="0,0,0";try{version=new b["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{T.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(version=(T.plugins["Shockwave Flash 2.0"]||T.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(err){}}return version.split(",")},S.embed=function(e,t,n,r){var i=S.getEmbedCode(e,t,n,r);return d.createEl("div",{innerHTML:i}).childNodes[0]},S.getEmbedCode=function(e,t,n,r){var i="",o="",a="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){i+=e+"="+t[e]+"&amp;"}),n=(0,w.assign)({movie:e,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){o+='<param name="'+e+'" value="'+n[e]+'" />'}),r=(0,w.assign)({data:e,width:"100%",height:"100%"},r),Object.getOwnPropertyNames(r).forEach(function(e){a+=e+'="'+r[e]+'" '}),'<object type="application/x-shockwave-flash" '+a+">"+o+"</object>"},(0,m["default"])(S),v["default"].registerComponent("Flash",S),l["default"].registerTech("Flash",S),exports["default"]=S},{5:5,58:58,62:62,81:81,88:88,90:90,92:92,95:95}],60:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return e.raw=t,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=r(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),l=e(62),c=n(l),d=e(5),f=n(d),p=e(81),h=t(p),y=e(92),m=t(y),g=e(83),v=t(g),_=e(86),b=n(_),w=e(98),T=n(w),S=e(78),E=t(S),k=e(94),O=n(k),C=e(95),P=n(C),j=e(88),x=e(87),A=n(x),I=e(91),M=n(I),L=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r)),s=n.source,l=!1;if(s&&(a.el_.currentSrc!==s.src||n.tag&&3===n.tag.initNetworkState_)?a.setSource(s):a.handleLateInit_(a.el_),a.el_.hasChildNodes()){for(var c=a.el_.childNodes,d=c.length,f=[];d--;){var p=c[d];"track"===p.nodeName.toLowerCase()&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(p),a.remoteTextTracks().addTrack_(p.track),l||a.el_.hasAttribute("crossorigin")||!m.isCrossOrigin(p.src)||(l=!0)):f.push(p))}for(var h=0;h<f.length;h++)a.el_.removeChild(f[h])}return["audio","video"].forEach(function(e){var t=a.el()[e+"Tracks"],n=a[e+"Tracks"](),r=(0,M["default"])(e);a["featuresNative"+r+"Tracks"]&&t&&t.addEventListener&&(a["handle"+r+"TrackChange_"]=function(e){n.trigger({type:"change",target:n,currentTarget:n,srcElement:n})},a["handle"+r+"TrackAdd_"]=function(e){return n.addTrack(e.track)},a["handle"+r+"TrackRemove_"]=function(e){return n.removeTrack(e.track)},t.addEventListener("change",a["handle"+r+"TrackChange_"]),t.addEventListener("addtrack",a["handle"+r+"TrackAdd_"]),t.addEventListener("removetrack",a["handle"+r+"TrackRemove_"]),a["removeOld"+r+"Tracks_"]=function(e){return a.removeOldTracks_(n,t)},a.on("loadstart",a["removeOld"+r+"Tracks_"]))}),a.featuresNativeTextTracks&&(l&&b["default"].warn((0,T["default"])(u)),a.handleTextTrackChange_=v.bind(a,a.handleTextTrackChange),a.handleTextTrackAdd_=v.bind(a,a.handleTextTrackAdd),a.handleTextTrackRemove_=v.bind(a,a.handleTextTrackRemove),a.proxyNativeTextTracks_()),(E.TOUCH_ENABLED||E.IS_IPHONE||E.IS_NATIVE_ANDROID)&&n.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}return a(t,e),t.prototype.dispose=function(){var n=this;["audio","video","text"].forEach(function(e){var t=(0,M["default"])(e),r=n.el_[e+"Tracks"];r&&r.removeEventListener&&(r.removeEventListener("change",n["handle"+t+"TrackChange_"]),r.removeEventListener("addtrack",n["handle"+t+"TrackAdd_"]),r.removeEventListener("removetrack",n["handle"+t+"TrackRemove_"])),r&&n.off("loadstart",n["removeOld"+t+"Tracks_"])}),t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=O["default"].createElement("video");var r=this.options_.tag&&h.getElAttributes(this.options_.tag),i=(0,A["default"])({},r);E.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete i.controls,h.setElAttributes(e,(0,j.assign)(i,{id:this.options_.techId,"class":"vjs-tech"}))}e.playerId=this.options_.playerId}for(var o=["autoplay","preload","loop","muted"],a=o.length-1;a>=0;a--){var s=o[a],u={};"undefined"!=typeof this.options_[s]&&(u[s]=this.options_[s]),h.setElAttributes(e,u)}return e},t.prototype.handleLateInit_=function(e){var t=this;if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var n=function(){var e=!1,n=function(){e=!0};t.on("loadstart",n);var r=function(){e||this.trigger("loadstart")};return t.on("loadedmetadata",r),t.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),e||this.trigger("loadstart")}),{v:void 0}}();if("object"===(void 0===n?"undefined":s(n)))return n.v}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},t.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},t.prototype.handleTextTrackChange=function(e){var t=this.textTracks();this.textTracks().trigger({type:"change",target:t,currentTarget:t,srcElement:t})},t.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},t.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},t.prototype.removeOldTracks_=function(e,t){var n=[];if(t){for(var r=0;r<e.length;r++){for(var i=e[r],o=!1,a=0;a<t.length;a++)if(t[a]===i){o=!0;break}o||n.push(i)}for(var s=0;s<n.length;s++){var u=n[s];e.removeTrack_(u)}}},t.prototype.removeOldTextTracks_=function(e){var t=this.textTracks(),n=this.el().textTracks;this.removeOldTracks_(t,n)},t.prototype.play=function(){var e=this.el_.play();e!==undefined&&"function"==typeof e.then&&e.then(null,function(e){})},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){(0,b["default"])(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===Infinity&&E.IS_ANDROID&&E.IS_CHROME&&0===this.el_.currentTime){var t=function(){var t=function n(){e.el_.currentTime>0&&(e.el_.duration===Infinity&&e.trigger("durationchange"),e.off("timeupdate",n))};return e.on("timeupdate",t),{v:NaN}}();if("object"===(void 0===t?"undefined":s(t)))return t.v}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0})};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=P["default"].navigator&&P["default"].navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){if(e===undefined)return this.el_.src;this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=O["default"].createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t["default"]&&(n["default"]=t["default"]),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},t.prototype.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},t}(c["default"]);if(h.isReal()){L.TEST_VID=O["default"].createElement("video");var R=O["default"].createElement("track");R.kind="captions",R.srclang="en",R.label="English",L.TEST_VID.appendChild(R)}L.isSupported=function(){try{L.TEST_VID.volume=.5}catch(e){return!1}return!(!L.TEST_VID||!L.TEST_VID.canPlayType)},L.canControlVolume=function(){try{var e=L.TEST_VID.volume;return L.TEST_VID.volume=e/2+.1,e!==L.TEST_VID.volume}catch(e){return!1}},L.canControlPlaybackRate=function(){if(E.IS_ANDROID&&E.IS_CHROME)return!1;try{var e=L.TEST_VID.playbackRate;return L.TEST_VID.playbackRate=e/2+.1,e!==L.TEST_VID.playbackRate}catch(e){return!1}},L.supportsNativeTextTracks=function(){return E.IS_ANY_SAFARI},L.supportsNativeVideoTracks=function(){return!(!L.TEST_VID||!L.TEST_VID.videoTracks)},L.supportsNativeAudioTracks=function(){return!(!L.TEST_VID||!L.TEST_VID.audioTracks)},L.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],L.prototype.featuresVolumeControl=L.canControlVolume(),L.prototype.featuresPlaybackRate=L.canControlPlaybackRate(),L.prototype.movingMediaElementInDOM=!E.IS_IOS,L.prototype.featuresFullscreenResize=!0,L.prototype.featuresProgressEvents=!0,L.prototype.featuresTimeupdateEvents=!0,L.prototype.featuresNativeTextTracks=L.supportsNativeTextTracks(),L.prototype.featuresNativeVideoTracks=L.supportsNativeVideoTracks(),L.prototype.featuresNativeAudioTracks=L.supportsNativeAudioTracks();var D=L.TEST_VID&&L.TEST_VID.constructor.prototype.canPlayType,N=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,U=/^video\/mp4/i;L.patchCanPlayType=function(){E.ANDROID_VERSION>=4&&!E.IS_FIREFOX?L.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&N.test(e)?"maybe":D.call(this,e)}:E.IS_OLD_ANDROID&&(L.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&U.test(e)?"maybe":D.call(this,e)})},L.unpatchCanPlayType=function(){var e=L.TEST_VID.constructor.prototype.canPlayType;return L.TEST_VID.constructor.prototype.canPlayType=D,e},L.patchCanPlayType(),L.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},L.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["paused","currentTime","buffered","volume","muted","poster","preload","autoplay","controls","loop","error","seeking","seekable","ended","defaultMuted","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){L.prototype[e]=function(){return this.el_[e]}}),["volume","muted","src","poster","preload","autoplay","loop","playbackRate"].forEach(function(e){L.prototype["set"+(0,M["default"])(e)]=function(t){this.el_[e]=t}}),["pause","load"].forEach(function(e){L.prototype[e]=function(){return this.el_[e]()}}),c["default"].withSourceHandlers(L),L.nativeSourceHandler={},L.nativeSourceHandler.canPlayType=function(e){try{return L.TEST_VID.canPlayType(e)}catch(e){return""}},L.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return L.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=m.getFileExtension(e.src);return L.nativeSourceHandler.canPlayType("video/"+n)}return""},L.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},L.nativeSourceHandler.dispose=function(){},L.registerSourceHandler(L.nativeSourceHandler),f["default"].registerComponent("Html5",L),c["default"].registerTech("Html5",L),exports["default"]=L},{5:5,62:62,78:78,81:81,83:83,86:86,87:87,88:88,91:91,92:92,94:94,95:95,98:98}],61:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o=e(5),a=t(o),s=e(62),u=t(s),l=e(91),c=t(l),d=function(e){function t(i,o,s){n(this,t);var l=r(this,e.call(this,i,o,s));if(o.playerOptions.sources&&0!==o.playerOptions.sources.length)i.src(o.playerOptions.sources);else for(var d=0,f=o.playerOptions.techOrder;d<f.length;d++){var p=(0,c["default"])(f[d]),h=u["default"].getTech(p);if(p||(h=a["default"].getComponent(p)),h&&h.isSupported()){i.loadTech_(p);break}}return l}return i(t,e),t}(a["default"]);a["default"].registerComponent("MediaLoader",d),exports["default"]=d},{5:5,62:62,91:91}],62:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,r){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{},o=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var a=new g["default"](i);return o.addTrack_(a),a}exports.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=e(5),l=n(u),c=e(66),d=n(c),f=e(65),p=n(f),h=e(87),y=n(h),m=e(72),g=n(m),v=e(70),_=n(v),b=e(76),w=n(b),T=e(63),S=n(T),E=e(83),k=t(E),O=e(86),C=n(O),P=e(90),j=e(79),x=e(46),A=n(x),I=e(95),M=n(I),L=e(94),R=n(L),D=e(88),N=function(t){function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};r(this,n),e.reportTouchActivity=!1;var a=i(this,t.call(this,null,e,o));return a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),a.textTracks_=e.textTracks,a.videoTracks_=e.videoTracks,a.audioTracks_=e.audioTracks,a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){e["native"+t+"Tracks"]===!1&&(a["featuresNative"+t+"Tracks"]=!1)}),e.nativeCaptions===!1&&(a.featuresNativeTextTracks=!1),a.featuresNativeTextTracks||a.emulateTextTracks(),a.autoRemoteTextTracks_=new _["default"],a.initTextTrackListeners(),a.initTrackListeners(),e.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}return o(n,t),n.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},n.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},n.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(k.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},n.prototype.onDurationChange=function(e){this.duration_=this.duration()},n.prototype.buffered=function(){return(0,P.createTimeRange)(0,0)},n.prototype.bufferedPercent=function(){return(0,j.bufferedPercent)(this.buffered(),this.duration_)},n.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},n.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},n.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},n.prototype.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack_(i)}})},n.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.prototype.reset=function(){},n.prototype.error=function(e){return e!==undefined&&(this.error_=new A["default"](e),this.trigger("error")),this.error_},n.prototype.played=function(){return this.hasStarted_?(0,P.createTimeRange)(0,0):(0,P.createTimeRange)()},n.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.prototype.initTextTrackListeners=function(){var e=k.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",k.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},n.prototype.initTrackListeners=function(){var e=this;["video","audio"].forEach(function(t){var n=function(){e.trigger(t+"trackchange")},r=e[t+"Tracks"]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})},n.prototype.addWebVttScript_=function(){var t=this;if(!M["default"].WebVTT&&null!==this.el().parentNode&&this.el().parentNode!==undefined){var n=function(){var n=e(99);if(!t.options_["vtt.js"]&&(0,D.isPlain)(n)&&Object.keys(n).length>0)return Object.keys(n).forEach(function(e){M["default"][e]=n[e]}),t.trigger("vttjsloaded"),{v:void 0};var r=R["default"].createElement("script");r.src=t.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js",r.onload=function(){t.trigger("vttjsloaded")},r.onerror=function(){t.trigger("vttjserror")},t.on("dispose",function(){r.onload=null,r.onerror=null}),M["default"].WebVTT=!0,t.el().parentNode.appendChild(r)}();if("object"===(void 0===n?"undefined":s(n)))return n.v}},n.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks();if(t){this.remoteTextTracks().on("addtrack",function(t){e.textTracks().addTrack_(t.track)}),this.remoteTextTracks().on("removetrack",function(t){e.textTracks().removeTrack_(t.track)}),this.on("ready",this.addWebVttScript_);var n=function(){return e.trigger("texttrackchange")},r=function(){n();for(var e=0;e<t.length;e++){var r=t[e];r.removeEventListener("cuechange",n),"showing"===r.mode&&r.addEventListener("cuechange",n)}};r(),t.addEventListener("change",r),this.on("dispose",function(){t.removeEventListener("change",r)})}},n.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new w["default"],this.videoTracks_},n.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new S["default"],this.audioTracks_},n.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new _["default"],this.textTracks_},n.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new _["default"],this.remoteTextTracks_},n.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new p["default"],this.remoteTextTrackEls_},n.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return a(this,e,t,n)},n.prototype.createRemoteTextTrack=function(e){var t=(0,y["default"])(e,{tech:this});return new d["default"](t)},n.prototype.addRemoteTextTrack=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=arguments[1],n=this.createRemoteTextTrack(e);return t!==!0&&t!==!1&&(C["default"].warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack_(n.track),t!==!0&&this.autoRemoteTextTracks_.addTrack_(n.track),n},n.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e),this.autoRemoteTextTracks_.removeTrack_(e)},n.prototype.setPoster=function(){},n.prototype.canPlayType=function(){return""},n.isTech=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");return n.techs_[e]=t,t},n.getTech=function(e){return n.techs_&&n.techs_[e]?n.techs_[e]:M["default"]&&M["default"].videojs&&M["default"].videojs[e]?(C["default"].warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),M["default"].videojs[e]):void 0},n}(l["default"]);N.prototype.textTracks_,N.prototype.audioTracks_,N.prototype.videoTracks_,N.prototype.featuresVolumeControl=!0,N.prototype.featuresFullscreenResize=!1,N.prototype.featuresPlaybackRate=!1,N.prototype.featuresProgressEvents=!1,N.prototype.featuresTimeupdateEvents=!1,N.prototype.featuresNativeTextTracks=!1,N.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),n===undefined&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n=e.sourceHandlers||[],r=void 0,i=0;i<n.length;i++)if(r=n[i].canPlayType(t))return r;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);return n||(e.nativeSourceHandler?n=e.nativeSourceHandler:C["default"].error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t,this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",e.prototype.firstLoadStartListener_)),this.sourceHandler_=n.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},e.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler(),this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},l["default"].registerComponent("Tech",N),l["default"].registerComponent("MediaTechController",N),N.registerTech("Tech",N),exports["default"]=N},{46:46,5:5,63:63,65:65,66:66,70:70,72:72,76:76,79:79,83:83,86:86,87:87,88:88,90:90,94:94,95:95,99:99}],63:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(74),s=n(a),u=e(78),l=t(u),c=e(94),d=n(c),f=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].enabled=!1)},p=function(e){function t(){var n,o,a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];r(this,t);for(var u=void 0,c=a.length-1;c>=0;c--)if(a[c].enabled){f(a,a[c]);break}if(l.IS_IE8){u=d["default"].createElement("custom");for(var p in s["default"].prototype)"constructor"!==p&&(u[p]=s["default"].prototype[p]);for(var h in t.prototype)"constructor"!==h&&(u[h]=t.prototype[h])}return u=n=i(this,e.call(this,a,u)),u.changing_=!1,o=u,i(n,o)}return o(t,e),t.prototype.addTrack_=function(t){var n=this;t.enabled&&f(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,f(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(s["default"]);exports["default"]=p},{74:74,78:78,94:94}],64:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(73),s=e(75),u=n(s),l=e(87),c=n(l),d=e(78),f=t(d),p=function(e){function t(){var n,o,s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};r(this,t);var u=(0,c["default"])(s,{kind:a.AudioTrackKind[s.kind]||""}),l=n=i(this,e.call(this,u)),d=!1;if(f.IS_IE8)for(var p in t.prototype)"constructor"!==p&&(l[p]=t.prototype[p]);return Object.defineProperty(l,"enabled",{get:function(){return d},set:function(e){"boolean"==typeof e&&e!==d&&(d=e,this.trigger("enabledchange"))}}),u.enabled&&(l.enabled=u.enabled),l.loaded_=!0,o=l,i(n,o)}return o(t,e),t}(u["default"]);exports["default"]=p},{73:73,75:75,78:78,87:87}],65:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var i=e(78),o=n(i),a=e(94),s=t(a),u=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];r(this,e);var n=this;if(o.IS_IE8){n=s["default"].createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}n.trackElements_=[],Object.defineProperty(n,"length",{get:function(){return this.trackElements_.length}});for(var a=0,u=t.length;a<u;a++)n.addTrackElement_(t[a]);if(o.IS_IE8)return n}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}();exports["default"]=u},{78:78,94:94}],66:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(78),s=n(a),u=e(94),l=t(u),c=e(42),d=t(c),f=e(72),p=t(f),h=0,y=2,m=function(e){function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};r(this,t);var o=i(this,e.call(this)),a=void 0,u=o;if(s.IS_IE8){u=l["default"].createElement("custom");for(var c in t.prototype)"constructor"!==c&&(u[c]=t.prototype[c])}var d=new p["default"](n);if(u.kind=d.kind,u.src=d.src,u.srclang=d.language,u.label=d.label,u["default"]=d["default"],Object.defineProperty(u,"readyState",{get:function(){return a}}),Object.defineProperty(u,"track",{get:function(){return d}}),a=h,d.addEventListener("loadeddata",function(){a=y,u.trigger({type:"load",target:u})}),s.IS_IE8){var f;return f=u,i(o,f)}return o}return o(t,e),t}(d["default"]);m.prototype.allowedEvents_={load:"load"},m.NONE=h,m.LOADING=1,m.LOADED=y,m.ERROR=3,exports["default"]=m},{42:42,72:72,78:78,94:94}],67:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var i=e(78),o=n(i),a=e(94),s=t(a),u=function(){function e(t){r(this,e);var n=this;if(o.IS_IE8){n=s["default"].createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}if(e.prototype.setCues_.call(n,t),Object.defineProperty(n,"length",{get:function(){return this.length_}}),o.IS_IE8)return n}return e.prototype.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},e.prototype.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}();exports["default"]=u},{78:78,94:94}],68:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function s(e,t,n){try{e.style[t]=n}catch(e){return}}exports.__esModule=!0;var u=e(5),l=n(u),c=e(83),d=t(c),f=e(95),p=n(f),h="#222",y="#ccc",m={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},g=function(e){function t(n,o,a){r(this,t);var s=i(this,e.call(this,n,o,a));return n.on("loadstart",d.bind(s,s.toggleDisplay)),n.on("texttrackchange",d.bind(s,s.updateDisplay)),n.ready(d.bind(s,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)return void this.hide();n.on("fullscreenchange",d.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);var r={captions:1,subtitles:1},i=this.player_.textTracks(),o=void 0,a=void 0;if(i){for(var s=0;s<i.length;s++){var u=i[s];u["default"]&&("descriptions"!==u.kind||o?u.kind in r&&!a&&(a=u):o=u)}a?a.mode="showing":o&&(o.mode="showing")}})),s}return o(t,e),t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof p["default"].WebVTT&&p["default"].WebVTT.processCues(p["default"],[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();if(this.clearDisplay(),e){for(var t=null,n=null,r=e.length;r--;){var i=e[r];"showing"===i.mode&&("descriptions"===i.kind?t=i:n=i)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))}},t.prototype.updateForTrack=function(e){if("function"==typeof p["default"].WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),n=[],r=0;r<e.activeCues.length;r++)n.push(e.activeCues[r]);p["default"].WebVTT.processCues(p["default"],n,this.el_);for(var i=n.length;i--;){var o=n[i];if(o){var u=o.displayState;if(t.color&&(u.firstChild.style.color=t.color),t.textOpacity&&s(u.firstChild,"color",a(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(u.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&s(u.firstChild,"backgroundColor",a(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?s(u,"backgroundColor",a(t.windowColor,t.windowOpacity)):u.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?u.firstChild.style.textShadow="2px 2px 3px "+h+", 2px 2px 4px "+h+", 2px 2px 5px "+h:"raised"===t.edgeStyle?u.firstChild.style.textShadow="1px 1px "+h+", 2px 2px "+h+", 3px 3px "+h:"depressed"===t.edgeStyle?u.firstChild.style.textShadow="1px 1px "+y+", 0 1px "+y+", -1px -1px "+h+", 0 -1px "+h:"uniform"===t.edgeStyle&&(u.firstChild.style.textShadow="0 0 4px "+h+", 0 0 4px "+h+", 0 0 4px "+h+", 0 0 4px "+h)),t.fontPercent&&1!==t.fontPercent){var l=p["default"].parseFloat(u.style.fontSize);u.style.fontSize=l*t.fontPercent+"px",u.style.height="auto",u.style.top="auto",u.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=m[t.fontFamily])}}}},t}(l["default"]);l["default"].registerComponent("TextTrackDisplay",g),exports["default"]=g},{5:5,83:83,95:95}],69:[function(e,module,exports){"use strict";exports.__esModule=!0;var t=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n,r){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},n=function(e){var n=e.$$("track"),r=Array.prototype.map.call(n,function(e){return e.track});return Array.prototype.map.call(n,function(e){var n=t(e.track);return e.src&&(n.src=e.src),n}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return r.indexOf(e)===-1}).map(t))},r=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()};exports["default"]={textTracksToJson:n,jsonToTextTracks:r,trackToJson_:t}},{}],70:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(74),s=n(a),u=e(83),l=t(u),c=e(78),d=t(c),f=e(94),p=n(f),h=function(e){function t(){var n,o,a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];r(this,t);var u=void 0;if(d.IS_IE8){u=p["default"].createElement("custom");for(var l in s["default"].prototype)"constructor"!==l&&(u[l]=s["default"].prototype[l]);for(var c in t.prototype)"constructor"!==c&&(u[c]=t.prototype[c])}return u=n=i(this,e.call(this,a,u)),o=u,i(n,o)}return o(t,e),t.prototype.addTrack_=function(t){e.prototype.addTrack_.call(this,t),t.addEventListener("modechange",l.bind(this,function(){this.trigger("change")}))},t}(s["default"]);exports["default"]=h},{74:74,78:78,83:83,94:94}],71:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function s(e,t){return a(e.options[e.options.selectedIndex].value,t)}function u(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(a(e.options[r].value,n)===t){e.selectedIndex=r;break}}exports.__esModule=!0;var l=e(95),c=n(l),d=e(5),f=n(d),p=e(81),h=e(83),y=t(h),m=e(88),g=t(m),v=e(86),_=n(v),b="vjs-text-track-settings",w=["#000","Black"],T=["#00F","Blue"],S=["#0FF","Cyan"],E=["#0F0","Green"],k=["#F0F","Magenta"],O=["#F00","Red"],C=["#FFF","White"],P=["#FF0","Yellow"],j=["1","Opaque"],x=["0.5","Semi-Transparent"],A=["0","Transparent"],I={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[w,C,O,E,T,P,k,S]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[j,x,A]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[C,w,O,E,T,P,k,S]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[j,x]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[A,x,j]}};I.windowColor.options=I.backgroundColor.options;var M=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.setDefaults(),a.hide(),a.updateDisplay=y.bind(a,a.updateDisplay),o.persistTextTrackSettings===undefined&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.hide()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),g.each(I,function(e){a.on(a.$(e.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}return o(t,e),t.prototype.createElSelect_=function(e){var t=this,n=I[e],r=n.id.replace("%s",this.id_);return[(0,p.createEl)("label",{className:"vjs-label",textContent:n.label},{"for":r}),(0,p.createEl)("select",{id:r},undefined,n.options.map(function(e){return(0,p.createEl)("option",{textContent:t.localize(e[1]),value:e[0]})}))]},t.prototype.createElFgColor_=function(){var e=(0,p.createEl)("legend",{textContent:this.localize("Text")}),t=this.createElSelect_("color"),n=(0,p.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},undefined,this.createElSelect_("textOpacity"));return(0,p.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},undefined,[e].concat(t,n))},t.prototype.createElBgColor_=function(){var e=(0,p.createEl)("legend",{textContent:this.localize("Background")}),t=this.createElSelect_("backgroundColor"),n=(0,p.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},undefined,this.createElSelect_("backgroundOpacity"));return(0,p.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},undefined,[e].concat(t,n))},t.prototype.createElWinColor_=function(){var e=(0,p.createEl)("legend",{textContent:this.localize("Window")}),t=this.createElSelect_("windowColor"),n=(0,p.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},undefined,this.createElSelect_("windowOpacity"));return(0,p.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},undefined,[e].concat(t,n))},t.prototype.createElColors_=function(){return(0,p.createEl)("div",{className:"vjs-tracksettings-colors"},undefined,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])},t.prototype.createElFont_=function(){var e=(0,p.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},undefined,this.createElSelect_("fontPercent")),t=(0,p.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},undefined,this.createElSelect_("edgeStyle")),n=(0,p.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},undefined,this.createElSelect_("fontFamily"));return(0,p.createEl)("div",{className:"vjs-tracksettings-font"},undefined,[e,t,n])},t.prototype.createElControls_=function(){var e=(0,p.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")}),t=(0,p.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,p.createEl)("div",{className:"vjs-tracksettings-controls"},undefined,[e,t])},t.prototype.createEl=function(){var e=(0,p.createEl)("div",{className:"vjs-tracksettings"},undefined,[this.createElColors_(),this.createElFont_(),this.createElControls_()]),t=(0,p.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"}),n=(0,p.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."}),r=(0,p.createEl)("div",undefined,{role:"document"},[t,n,e]);return(0,p.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":t.id,"aria-describedby":n.id},r)},t.prototype.getValues=function(){var e=this;return g.reduce(I,function(t,n,r){var i=s(e.$(n.selector),n.parser);return i!==undefined&&(t[r]=i),t},{})},t.prototype.setValues=function(e){var t=this;g.each(I,function(n,r){u(t.$(n.selector),e[r],n.parser)})},t.prototype.setDefaults=function(){var e=this;g.each(I,function(t){var n=t.hasOwnProperty("default")?t["default"]:0;e.$(t.selector).selectedIndex=n})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(c["default"].localStorage.getItem(b))}catch(err){_["default"].warn(err)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?c["default"].localStorage.setItem(b,JSON.stringify(e)):c["default"].localStorage.removeItem(b)}catch(err){_["default"].warn(err)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t}(f["default"]);f["default"].registerComponent("TextTrackSettings",M),exports["default"]=M},{5:5,81:81,83:83,86:86,88:88,95:95}],72:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(67),s=n(a),u=e(83),l=t(u),c=e(73),d=e(86),f=n(d),p=e(95),h=n(p),y=e(75),m=n(y),g=e(92),v=e(105),_=n(v),b=e(87),w=n(b),T=e(78),S=t(T),E=function(e,t){var n=new h["default"].WebVTT.Parser(h["default"],h["default"].vttjs,h["default"].WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(h["default"].console&&h["default"].console.groupCollapsed&&h["default"].console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return f["default"].error(e)}),h["default"].console&&h["default"].console.groupEnd&&h["default"].console.groupEnd()),n.flush()},k=function(e,t){var n={uri:e},r=(0,g.isCrossOrigin)(e);r&&(n.cors=r),(0,_["default"])(n,l.bind(this,function(e,n,r){if(e)return f["default"].error(e,n);t.loaded_=!0,"function"!=typeof h["default"].WebVTT?t.tech_&&function(){var e=function(){return E(r,t)};t.tech_.on("vttjsloaded",e),t.tech_.on("vttjserror",function(){f["default"].error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",e)})}():E(r,t)}))},O=function(e){function t(){var n,o,a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(r(this,t),!a.tech)throw new Error("A tech was not provided.");var u=(0,w["default"])(a,{kind:c.TextTrackKind[a.kind]||"subtitles",language:a.language||a.srclang||""}),d=c.TextTrackMode[u.mode]||"disabled",f=u["default"];"metadata"!==u.kind&&"chapters"!==u.kind||(d="hidden");var p=n=i(this,e.call(this,u));if(p.tech_=u.tech,S.IS_IE8)for(var h in t.prototype)"constructor"!==h&&(p[h]=t.prototype[h]);p.cues_=[],p.activeCues_=[];var y=new s["default"](p.cues_),m=new s["default"](p.activeCues_),g=!1,v=l.bind(p,function(){this.activeCues,g&&(this.trigger("cuechange"),g=!1)});return"disabled"!==d&&p.tech_.on("timeupdate",v),Object.defineProperty(p,"default",{get:function(){return f},set:function(){}}),Object.defineProperty(p,"mode",{get:function(){return d},set:function(e){c.TextTrackMode[e]&&(d=e,"showing"===d&&this.tech_.on("timeupdate",v),this.trigger("modechange"))}}),Object.defineProperty(p,"cues",{get:function(){return this.loaded_?y:null},set:function(){}}),Object.defineProperty(p,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return m;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];i.startTime<=e&&i.endTime>=e?t.push(i):i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e&&t.push(i)}if(g=!1,t.length!==this.activeCues_.length)g=!0;else for(var o=0;o<t.length;o++)this.activeCues_.indexOf(t[o])===-1&&(g=!0);return this.activeCues_=t,m.setCues_(this.activeCues_),m},set:function(){}}),u.src?(p.src=u.src,k(u.src,p)):p.loaded_=!0,o=p,i(n,o)}return o(t,e),t.prototype.addCue=function(e){var t=this.tech_.textTracks();if(t)for(var n=0;n<t.length;n++)t[n]!==this&&t[n].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=!1,n=0,r=this.cues_.length;n<r;n++)this.cues_[n]===e&&(this.cues_.splice(n,1),t=!0);t&&this.cues.setCues_(this.cues_)},t}(m["default"]);O.prototype.allowedEvents_={cuechange:"cuechange"},exports["default"]=O},{105:105,67:67,73:73,75:75,78:78,83:83,86:86,87:87,92:92,95:95}],73:[function(e,module,exports){"use strict";exports.__esModule=!0,exports.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},exports.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},exports.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},exports.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},{}],74:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(42),s=n(a),u=e(78),l=t(u),c=e(94),d=n(c),f=function(e){function t(){var n,o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;r(this,t);var s=i(this,e.call(this));if(!a&&(a=s,l.IS_IE8)){a=d["default"].createElement("custom");for(var u in t.prototype)"constructor"!==u&&(a[u]=t.prototype[u])}a.tracks_=[],Object.defineProperty(a,"length",{get:function(){return this.tracks_.length}});for(var c=0;c<o.length;c++)a.addTrack_(o[c]);return n=a,i(s,n)}return o(t,e),t.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack_=function(e){for(var t=void 0,n=0,r=this.length;n<r;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(s["default"]);f.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var p in f.prototype.allowedEvents_)f.prototype["on"+p]=null;exports["default"]=f},{42:42,78:78,94:94}],75:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(78),s=n(a),u=e(94),l=t(u),c=e(85),d=n(c),f=e(42),p=t(f),h=function(e){function t(){var n,o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};r(this,t);var a=i(this,e.call(this)),u=a;if(s.IS_IE8){u=l["default"].createElement("custom");for(var c in t.prototype)"constructor"!==c&&(u[c]=t.prototype[c])}var f={id:o.id||"vjs_track_"+d.newGUID(),kind:o.kind||"",label:o.label||"",language:o.language||""},p=function(e){Object.defineProperty(u,e,{get:function(){return f[e]},set:function(){}})};for(var h in f)p(h);return n=u,i(a,n)}return o(t,e),t}(p["default"]);exports["default"]=h},{42:42,78:78,85:85,94:94}],76:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(74),s=n(a),u=e(78),l=t(u),c=e(94),d=n(c),f=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].selected=!1)},p=function(e){function t(){var n,o,a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];r(this,t);for(var u=void 0,c=a.length-1;c>=0;c--)if(a[c].selected){f(a,a[c]);break}if(l.IS_IE8){u=d["default"].createElement("custom");for(var p in s["default"].prototype)"constructor"!==p&&(u[p]=s["default"].prototype[p]);for(var h in t.prototype)"constructor"!==h&&(u[h]=t.prototype[h])}return u=n=i(this,e.call(this,a,u)),u.changing_=!1,Object.defineProperty(u,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),o=u,i(n,o)}return o(t,e),t.prototype.addTrack_=function(t){var n=this;t.selected&&f(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,f(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(s["default"]);exports["default"]=p},{74:74,78:78,94:94}],77:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var a=e(73),s=e(75),u=n(s),l=e(87),c=n(l),d=e(78),f=t(d),p=function(e){function t(){var n,o,s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};r(this,t);var u=(0,c["default"])(s,{kind:a.VideoTrackKind[s.kind]||""}),l=n=i(this,e.call(this,u)),d=!1;if(f.IS_IE8)for(var p in t.prototype)"constructor"!==p&&(l[p]=t.prototype[p]);return Object.defineProperty(l,"selected",{get:function(){return d},set:function(e){"boolean"==typeof e&&e!==d&&(d=e,this.trigger("selectedchange"))}}),u.selected&&(l.selected=u.selected),o=l,i(n,o)}return o(t,e),t}(u["default"]);exports["default"]=p},{73:73,75:75,78:78,87:87}],78:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}exports.__esModule=!0,exports.BACKGROUND_SIZE_SUPPORTED=exports.TOUCH_ENABLED=exports.IS_ANY_SAFARI=exports.IS_SAFARI=exports.IE_VERSION=exports.IS_IE8=exports.IS_CHROME=exports.IS_EDGE=exports.IS_FIREFOX=exports.IS_NATIVE_ANDROID=exports.IS_OLD_ANDROID=exports.ANDROID_VERSION=exports.IS_ANDROID=exports.IOS_VERSION=exports.IS_IOS=exports.IS_IPOD=exports.IS_IPHONE=exports.IS_IPAD=undefined;var r=e(81),i=n(r),o=e(95),a=t(o),s=a["default"].navigator&&a["default"].navigator.userAgent||"",u=/AppleWebKit\/([\d.]+)/i.exec(s),l=u?parseFloat(u.pop()):null,c=exports.IS_IPAD=/iPad/i.test(s),d=exports.IS_IPHONE=/iPhone/i.test(s)&&!c,f=exports.IS_IPOD=/iPod/i.test(s),p=exports.IS_IOS=d||c||f,h=(exports.IOS_VERSION=function(){var e=s.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),exports.IS_ANDROID=/Android/i.test(s)),y=exports.ANDROID_VERSION=function(){var e=s.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),m=(exports.IS_OLD_ANDROID=h&&/webkit/i.test(s)&&y<2.3,exports.IS_NATIVE_ANDROID=h&&y<5&&l<537,exports.IS_FIREFOX=/Firefox/i.test(s),exports.IS_EDGE=/Edge/i.test(s)),g=exports.IS_CHROME=!m&&/Chrome/i.test(s),v=(exports.IS_IE8=/MSIE\s8\.0/.test(s),exports.IE_VERSION=function(e){return e&&parseFloat(e[1])}(/MSIE\s(\d+)\.\d/.exec(s)),exports.IS_SAFARI=/Safari/i.test(s)&&!g&&!h&&!m);exports.IS_ANY_SAFARI=v||p,exports.TOUCH_ENABLED=i.isReal()&&("ontouchstart"in a["default"]||a["default"].DocumentTouch&&a["default"].document instanceof a["default"].DocumentTouch),exports.BACKGROUND_SIZE_SUPPORTED=i.isReal()&&"backgroundSize"in a["default"].document.createElement("video").style},{81:81,95:95}],79:[function(e,module,exports){"use strict";function t(e,t){var r=0,i=void 0,o=void 0;if(!t)return 0;e&&e.length||(e=(0,n.createTimeRange)(0,0));for(var a=0;a<e.length;a++)i=e.start(a),o=e.end(a),o>t&&(o=t),r+=o-i;return r/t}exports.__esModule=!0,exports.bufferedPercent=t;var n=e(90)},{90:90}],80:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!e||!t)return"";if("function"==typeof i["default"].getComputedStyle){var n=i["default"].getComputedStyle(e);return n?n[t]:""}return e.currentStyle[t]||""}exports.__esModule=!0,exports["default"]=n;var r=e(95),i=t(r)},{95:95}],81:[function(e,module,exports){"use strict";function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return e.raw=t,e}function i(e){return"string"==typeof e&&/\S/.test(e)}function o(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function a(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function s(){return N["default"]===B["default"].document&&"undefined"!=typeof N["default"].createElement}function u(e){return(0,W.isObject)(e)&&1===e.nodeType}function l(e){return function(t,n){if(!i(t))return N["default"][e](null);i(n)&&(n=N["default"].querySelector(n));var r=u(n)?n:N["default"];return r[e]&&r[e](t)}}function c(e){return 0===e.indexOf("#")&&(e=e.slice(1)),N["default"].getElementById(e)}function d(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=arguments[3],i=N["default"].createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];e.indexOf("aria-")!==-1||"role"===e||"type"===e?(q["default"].warn((0,G["default"])(R,e,n)),i.setAttribute(e,n)):"textContent"===e?f(i,n):i[e]=n}),Object.getOwnPropertyNames(n).forEach(function(e){i.setAttribute(e,n[e])}),r&&M(i,r),i}function f(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function p(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function h(e){var t=e[Y];return t||(t=e[Y]=V.newGUID()),X[t]||(X[t]={}),X[t]}function y(e){var t=e[Y];return!!t&&!!Object.getOwnPropertyNames(X[t]).length}function m(e){var t=e[Y];if(t){delete X[t];try{delete e[Y]}catch(e){e.removeAttribute?e.removeAttribute(Y):e[Y]=null}}}function g(e,t){return o(t),e.classList?e.classList.contains(t):a(t).test(e.className)}function v(e,t){return e.classList?e.classList.add(t):g(e,t)||(e.className=(e.className+" "+t).trim()),e}function _(e,t){return e.classList?e.classList.remove(t):(o(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function b(e,t,n){var r=g(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?v(e,t):_(e,t),e}function w(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];null===r||void 0===r||r===!1?e.removeAttribute(n):e.setAttribute(n,r===!0?"":r)})}function T(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var i=n[r].name,o=n[r].value;"boolean"!=typeof e[i]&&",autoplay,controls,loop,muted,default,".indexOf(","+i+",")===-1||(o=null!==o),t[i]=o}return t}function S(e,t){return e.getAttribute(t)}function E(e,t,n){e.setAttribute(t,n)}function k(e,t){e.removeAttribute(t)}function O(){N["default"].body.focus(),N["default"].onselectstart=function(){return!1}}function C(){N["default"].onselectstart=function(){return!0}}function P(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=N["default"].documentElement,r=N["default"].body,i=n.clientLeft||r.clientLeft||0,o=B["default"].pageXOffset||r.scrollLeft,a=t.left+o-i,s=n.clientTop||r.clientTop||0,u=B["default"].pageYOffset||r.scrollTop,l=t.top+u-s;return{left:Math.round(a),top:Math.round(l)}}function j(e,t){var n={},r=P(e),i=e.offsetWidth,o=e.offsetHeight,a=r.top,s=r.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(a-u+o)/o)),n.x=Math.max(0,Math.min(1,(l-s)/i)),n}function x(e){return(0,W.isObject)(e)&&3===e.nodeType}function A(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function I(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),u(e)||x(e)?e:"string"==typeof e&&/\S/.test(e)?N["default"].createTextNode(e):void 0}).filter(function(e){return e})}function M(e,t){return I(t).forEach(function(t){return e.appendChild(t)}),e}function L(e,t){return M(A(e),t)}exports.__esModule=!0,exports.$$=exports.$=undefined;var R=r(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);exports.isReal=s,exports.isEl=u,exports.getEl=c,exports.createEl=d,exports.textContent=f,exports.insertElFirst=p,exports.getElData=h,exports.hasElData=y,exports.removeElData=m,exports.hasElClass=g,exports.addElClass=v,exports.removeElClass=_,exports.toggleElClass=b,exports.setElAttributes=w,exports.getElAttributes=T,exports.getAttribute=S,exports.setAttribute=E,exports.removeAttribute=k,exports.blockTextSelection=O,exports.unblockTextSelection=C,exports.findElPosition=P,exports.getPointerPosition=j,exports.isTextNode=x,exports.emptyEl=A,exports.normalizeContent=I,exports.appendContent=M,exports.insertContent=L;var D=e(94),N=n(D),U=e(95),B=n(U),F=e(85),V=t(F),H=e(86),q=n(H),z=e(98),G=n(z),W=e(88),X={},Y="vdata"+(new Date).getTime();exports.$=l("querySelector"),exports.$$=l("querySelectorAll")},{85:85,86:86,88:88,94:94,95:95,98:98}],82:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){var n=d.getElData(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&d.removeElData(e)}function i(e,t,n,r){n.forEach(function(n){e(t,n,r)})}function o(e){function t(){return!0}function n(){return!1}return e&&e.isPropagationStopped||function(){var r=e||g["default"].event;e={};for(var i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&r.preventDefault||(e[i]=r[i]));if(e.target||(e.target=e.srcElement||_["default"]),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&e.clientX!==undefined){var o=_["default"].documentElement,a=_["default"].body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&e.button!==undefined&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}(),e}function a(e,t,n){if(Array.isArray(t))return i(a,e,t,n);var r=d.getElData(e);r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=p.newGUID()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=o(t);var i=r.handlers[t.type];if(i)for(var a=i.slice(0),s=0,u=a.length;s<u&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,n)}catch(e){y["default"].error(e)}}}),1===r.handlers[t].length&&(e.addEventListener?e.addEventListener(t,r.dispatcher,!1):e.attachEvent&&e.attachEvent("on"+t,r.dispatcher))}function s(e,t,n){if(d.hasElData(e)){var o=d.getElData(e);if(o.handlers){if(Array.isArray(t))return i(s,e,t,n);var a=function(t){o.handlers[t]=[],r(e,t)};if(t){var u=o.handlers[t];if(u){if(!n)return void a(t);if(n.guid)for(var l=0;l<u.length;l++)u[l].guid===n.guid&&u.splice(l--,1);r(e,t)}}else for(var c in o.handlers)a(c)}}}function u(e,t,n){var r=d.hasElData(e)?d.getElData(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=o(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&t.bubbles===!0)u.call(null,i,t,n);else if(!i&&!t.defaultPrevented){var a=d.getElData(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function l(e,t,n){if(Array.isArray(t))return i(l,e,t,n);var r=function o(){s(e,t,o),n.apply(this,arguments)};r.guid=n.guid=n.guid||p.newGUID(),a(e,t,r)}exports.__esModule=!0,exports.fixEvent=o,exports.on=a,exports.off=s,exports.trigger=u,exports.one=l;var c=e(81),d=n(c),f=e(85),p=n(f),h=e(86),y=t(h),m=e(95),g=t(m),v=e(94),_=t(v)},{81:81,85:85,86:86,94:94,95:95}],83:[function(e,module,exports){"use strict";exports.__esModule=!0,exports.throttle=exports.bind=undefined;var t=e(85);exports.bind=function(e,n,r){n.guid||(n.guid=(0,t.newGUID)());var i=function(){return n.apply(e,arguments)};return i.guid=r?r+"_"+n.guid:n.guid,i},exports.throttle=function(e,t){var n=Date.now();return function(){var r=Date.now();r-n>=t&&(e.apply(undefined,arguments),n=r)}}},{85:85}],84:[function(e,module,exports){"use strict";function t(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e;e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===Infinity)&&(i=r=n="-"),i=i>0||a>0?i+":":"",r=((i||o>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,i+r+n}exports.__esModule=!0,exports["default"]=t},{}],85:[function(e,module,exports){"use strict";function t(){return n++}exports.__esModule=!0,exports.newGUID=t;var n=1},{}],86:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.logByType=undefined;var n=e(95),r=t(n),i=e(78),o=e(88),a=void 0,s=exports.logByType=function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!!i.IE_VERSION&&i.IE_VERSION<11;"log"!==e&&t.unshift(e.toUpperCase()+":"),a.history.push(t),t.unshift("VIDEOJS:");var s=r["default"].console&&r["default"].console[e];s&&(n&&(t=t.map(function(e){if((0,o.isObject)(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(x){return String(e)}return String(e)}).join(" ")),s.apply?s[Array.isArray(t)?"apply":"call"](r["default"].console,t):s(t))};a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s("log",t)},a.history=[],a.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s("error",t)},a.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s("warn",t)},exports["default"]=a},{78:78,88:88,95:95}],87:[function(e,module,exports){"use strict";function t(){for(var e={},r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.forEach(function(r){r&&(0,n.each)(r,function(r,i){if(!(0,n.isPlain)(r))return void(e[i]=r);(0,n.isPlain)(e[i])||(e[i]={}),e[i]=t(e[i],r)})}),e}exports.__esModule=!0,exports["default"]=t;var n=e(88)},{88:88}],88:[function(e,module,exports){"use strict";function t(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function n(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return Object.keys(e).reduce(function(n,r){return t(n,e[r],r)},n)}function r(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[e].concat(r)):(r.forEach(function(n){n&&t(n,function(t,n){e[n]=t})}),e)}function i(e){return!!e&&"object"===(void 0===e?"undefined":a(e))}function o(e){return i(e)&&"[object Object]"===s.call(e)&&e.constructor===Object}exports.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.each=t,exports.reduce=n,exports.assign=r,exports.isObject=i,exports.isPlain=o;var s=Object.prototype.toString},{}],89:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.setTextContent=exports.createStyleElement=undefined;var n=e(94),r=t(n);exports.createStyleElement=function(e){var t=r["default"].createElement("style");return t.className=e,t},exports.setTextContent=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}},{94:94}],90:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,n){if(t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+n+").")}function r(e,t,r,i){return i===undefined&&(s["default"].warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),i=0),n(e,i,r.length-1),r[i][t]}function i(e){return e===undefined||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:r.bind(null,"start",0,e),end:r.bind(null,"end",1,e)}}function o(e,t){return Array.isArray(e)?i(e):e===undefined||t===undefined?i():i([[e,t]])}exports.__esModule=!0,exports.createTimeRange=undefined,exports.createTimeRanges=o;var a=e(86),s=t(a);exports.createTimeRange=o},{86:86}],91:[function(e,module,exports){"use strict";function t(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}exports.__esModule=!0,exports["default"]=t},{}],92:[function(e,module,exports){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.isCrossOrigin=exports.getFileExtension=exports.getAbsoluteURL=exports.parseUrl=undefined;var n=e(94),r=t(n),i=e(95),o=t(i),a=exports.parseUrl=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=r["default"].createElement("a");n.href=e;var i=""===n.host&&"file:"!==n.protocol,o=void 0;i&&(o=r["default"].createElement("div"),o.innerHTML='<a href="'+e+'"></a>',n=o.firstChild,o.setAttribute("style","display:none; position:absolute;"),r["default"].body.appendChild(o));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),i&&r["default"].body.removeChild(o),a};exports.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=r["default"].createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},exports.getFileExtension=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""},exports.isCrossOrigin=function(e){var t=o["default"].location,n=a(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host}},{94:94,95:95}],93:[function(t,module,exports){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){var r=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),i.getPlayers()[e])return t&&U["default"].warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&i.getPlayers()[e].ready(n),i.getPlayers()[e];r=F.getEl(e)}else r=e;if(!r||!r.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(r.player||w["default"].players[r.playerId])return r.player||w["default"].players[r.playerId];t=t||{},i.hooks("beforesetup").forEach(function(e){var n=e(r,(0,k["default"])(t));if(!(0,G.isObject)(n)||Array.isArray(n))return void U["default"].error("please return an object in beforesetup hooks");t=(0,k["default"])(t,n)});var o=y["default"].getComponent("Player"),a=new o(r,t,n);return i.hooks("setup").forEach(function(e){return e(a)}),a}exports.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=t(95),s=r(a),u=t(94),l=r(u),c=t(56),d=n(c),f=t(89),p=n(f),h=t(5),y=r(h),m=t(42),g=r(m),v=t(82),_=n(v),b=t(51),w=r(b),T=t(52),S=r(T),E=t(87),k=r(E),O=t(83),C=n(O),P=t(72),j=r(P),x=t(64),A=r(x),I=t(77),M=r(I),L=t(90),R=t(84),D=r(R),N=t(86),U=r(N),B=t(81),F=n(B),V=t(78),H=n(V),q=t(92),z=n(q),G=t(88),W=t(80),X=r(W),Y=t(43),K=r(Y),$=t(105),Q=r($),J=t(62),Z=r(J);if("undefined"==typeof HTMLVideoElement&&F.isReal()&&(l["default"].createElement("video"),l["default"].createElement("audio"),l["default"].createElement("track")),i.hooks_={},i.hooks=function(e,t){return i.hooks_[e]=i.hooks_[e]||[],t&&(i.hooks_[e]=i.hooks_[e].concat(t)),i.hooks_[e]},i.hook=function(e,t){i.hooks(e,t)},i.removeHook=function(e,t){var n=i.hooks(e).indexOf(t);return!(n<=-1||(i.hooks_[e]=i.hooks_[e].slice(),i.hooks_[e].splice(n,1),0))},s["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0&&F.isReal()){var ee=F.$(".vjs-styles-defaults");if(!ee){ee=p.createStyleElement("vjs-styles-defaults");var te=F.$("head");te&&te.insertBefore(ee,te.firstChild),p.setTextContent(ee,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}d.autoSetupTimeout(1,i),i.VERSION="5.16.0",i.options=w["default"].prototype.options_,i.getPlayers=function(){return w["default"].players},i.players=w["default"].players,i.getComponent=y["default"].getComponent,i.registerComponent=function(e,t){Z["default"].isTech(t)&&U["default"].warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),y["default"].registerComponent.call(y["default"],e,t)},i.getTech=Z["default"].getTech,i.registerTech=Z["default"].registerTech,i.browser=H,i.TOUCH_ENABLED=H.TOUCH_ENABLED,i.extend=K["default"],i.mergeOptions=k["default"],i.bind=C.bind,i.plugin=S["default"],i.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),i.options.languages=(0,k["default"])(i.options.languages,(n={},n[e]=t,n)),i.options.languages[e]},i.log=U["default"],i.createTimeRange=i.createTimeRanges=L.createTimeRanges,i.formatTime=D["default"],i.parseUrl=z.parseUrl,i.isCrossOrigin=z.isCrossOrigin,i.EventTarget=g["default"],i.on=_.on,i.one=_.one,i.off=_.off,i.trigger=_.trigger,i.xhr=Q["default"],i.TextTrack=j["default"],i.AudioTrack=A["default"],i.VideoTrack=M["default"],i.isEl=F.isEl,i.isTextNode=F.isTextNode,i.createEl=F.createEl,i.hasClass=F.hasElClass,i.addClass=F.addElClass,i.removeClass=F.removeElClass,i.toggleClass=F.toggleElClass,i.setAttributes=F.setElAttributes,i.getAttributes=F.getElAttributes,i.emptyEl=F.emptyEl,i.appendContent=F.appendContent,i.insertContent=F.insertContent,i.computedStyle=X["default"],"function"==typeof e&&e.amd?e("videojs",[],function(){return i}):"object"===(void 0===exports?"undefined":o(exports))&&"object"===(void 0===module?"undefined":o(module))&&(module.exports=i),exports["default"]=i},{105:105,42:42,43:43,5:5,51:51,52:52,56:56,62:62,64:64,72:72,77:77,78:78,80:80,81:81,82:82,83:83,84:84,86:86,87:87,88:88,89:89,90:90,92:92,94:94,95:95}],94:[function(e,module,exports){(function(t){var n=void 0!==t?t:"undefined"!=typeof window?window:{},r=e(96);if("undefined"!=typeof document)module.exports=document;else{var i=n["__GLOBAL_DOCUMENT_CACHE@4"];i||(i=n["__GLOBAL_DOCUMENT_CACHE@4"]=r),module.exports=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{96:96}],95:[function(e,module,exports){(function(e){"undefined"!=typeof window?module.exports=window:void 0!==e?module.exports=e:"undefined"!=typeof self?module.exports=self:module.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(e,module,exports){},{}],97:[function(e,module,exports){function t(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(err){r=err}return[r,n]}module.exports=t},{}],98:[function(e,module,exports){function t(e){return e.replace(/\n\r?\s*/g,"")}module.exports=function(e){for(var n="",r=0;r<arguments.length;r++)n+=t(e[r])+(arguments[r+1]||"");return n}},{}],99:[function(e,module,exports){module.exports={WebVTT:e(100).WebVTT,VTTCue:e(101).VTTCue,VTTRegion:e(103).VTTRegion}},{100:100,101:101,103:103}],100:[function(e,module,exports){!function(e){function t(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function n(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function r(){this.values=h(null)}function i(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);if(2===a.length){var s=a[0],u=a[1];t(s,u)}}}function o(e,o,a){function s(){var r=n(e);if(null===r)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+c);return e=e.replace(/^[^\sa-zA-Z-]+/,""),r}function u(e,t){var n=new r;i(e,function(e,t){switch(e){case"region":for(var r=a.length-1;r>=0;r--)if(a[r].id===t){n.set(e,a[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function l(){e=e.replace(/^\s+/,"")}var c=e;if(l(),o.startTime=s(),l(),"-->"!==e.substr(0,3))throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+c);e=e.substr(3),l(),o.endTime=s(),l(),u(e,o)}function a(e,t){function r(){function e(e){return t=t.substr(e.length),e}if(!t)return null;var n=t.match(/^([^<]*)(<[^>]+>?)?/);return e(n[1]?n[1]:n[2])}function i(e){return y[e]}function o(e){for(;h=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(h[0],i);return e}function a(e,t){return!v[t.localName]||v[t.localName]===e.localName}function s(t,n){var r=m[t];if(!r)return null;var i=e.document.createElement(r);i.localName=r;var o=g[t];return o&&n&&(i[o]=n.trim()),i}for(var u,l=e.document.createElement("div"),c=l,d=[];null!==(u=r());)if("<"!==u[0])c.appendChild(e.document.createTextNode(o(u)));else{if("/"===u[1]){d.length&&d[d.length-1]===u.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var f,p=n(u.substr(1,u.length-2));if(p){f=e.document.createProcessingInstruction("timestamp",p),c.appendChild(f);continue}var h=u.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(f=s(h[1],h[3])))continue;if(!a(c,f))continue;h[2]&&(f.className=h[2].substr(1).replace("."," ")),d.push(h[1]),c.appendChild(f),c=f}return l}function s(e){function t(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function n(e){if(!e||!e.length)return null;var r=e.pop(),i=r.textContent||r.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):i}return"ruby"===r.tagName?n(e):r.childNodes?(t(e,r),n(e)):void 0}var r,i=[],o="";if(!e||!e.childNodes)return"ltr";for(t(i,e);o=n(i);)for(var a=0;a<o.length;a++){r=o.charCodeAt(a);for(var s=0;s<_.length;s++)if(_[s]===r)return"rtl"}return"ltr"}function u(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return++r*-1}function l(){}function c(e,t,n){var r=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";r&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),l.call(this),this.cue=t,this.cueDiv=a(e,t.text);var u={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};r||(u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",u.unicodeBidi="plaintext"),this.applyStyles(u,this.cueDiv),this.div=e.document.createElement("div"),u={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},r||(u.direction=s(this.cueDiv),u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(u),this.div.appendChild(this.cueDiv);var c=0;switch(t.positionAlign){case"start":c=t.position;break;case"middle":c=t.position-t.size/2;break;case"end":c=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(c,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(c,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function d(e){var t,n,r,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=t!==undefined?t:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function f(e,t,n,r){function i(e,t){for(var i,o=new d(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);a>u&&(i=new d(e),a=u),e=new d(o)}return i||o}var o=new d(t),a=t.cue,s=u(a),l=[];if(a.snapToLines){var c;switch(a.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width"}var f=o.lineHeight,p=f*Math.round(s),h=n[c]+f,y=l[0];Math.abs(p)>h&&(p=p<0?-1:1,p*=Math.ceil(h/f)*f),s<0&&(p+=""===a.vertical?n.height:n.width,l=l.reverse()),o.move(y,p)}else{var m=o.lineHeight/n.height*100;switch(a.lineAlign){case"middle":s-=m/2;break;case"end":s-=m}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}l=["+y","-x","+x","-y"],o=new d(t)}var g=i(o,l);t.move(g.toCSSCompatValues(n))}function p(){}var h=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();t.prototype=h(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},r.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var y={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},g={v:"title",lang:"lang"},v={rt:"ruby"},_=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];l.prototype.applyStyles=function(e,t){t=t||this.div;for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},l.prototype.formatStyle=function(e,t){return 0===e?0:e+t},c.prototype=h(l.prototype),c.prototype.constructor=c,d.prototype.move=function(e,t){switch(t=t!==undefined?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},d.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},d.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},d.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},d.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},d.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},d.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e,{left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},p.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},p.convertCueToDOMTree=function(e,t){return e&&t?a(e,t):null},p.processCues=function(e,t,n){function r(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),r(t)){var o=[],a=d.getSimpleBoxPosition(i),s=Math.round(.05*a.height*100)/100,u={font:s+"px sans-serif"};!function(){for(var n,r,s=0;s<t.length;s++)r=t[s],n=new c(e,r,u),i.appendChild(n.div),f(e,n,a,o),r.displayState=n.div,o.push(d.getSimpleBoxPosition(n))}()}else for(var l=0;l<t.length;l++)i.appendChild(t[l].displayState)},p.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},p.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof t))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function n(){for(var e=u.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,u.buffer=e.substr(t),n}function a(e){var t=new r;if(i(e,function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var i=n.split(",");if(2!==i.length)break;var o=new r;if(o.percent("x",i[0]),o.percent("y",i[1]),!o.has("x")||!o.has("y"))break;t.set(e+"X",o.get("x")),t.set(e+"Y",o.get("y"));break;case"scroll":t.alt(e,n,["up"])}},/=/,/\s/),t.has("id")){var n=new(u.vttjs.VTTRegion||u.window.VTTRegion);n.width=t.get("width",100),n.lines=t.get("lines",3),n.regionAnchorX=t.get("regionanchorX",0),n.regionAnchorY=t.get("regionanchorY",100),n.viewportAnchorX=t.get("viewportanchorX",0),n.viewportAnchorY=t.get("viewportanchorY",100),n.scroll=t.get("scroll",""),u.onregion&&u.onregion(n),u.regionList.push({id:t.get("id"),region:n})}}function s(e){i(e,function(e,t){switch(e){case"Region":a(t)}},/:/)}var u=this;e&&(u.buffer+=u.decoder.decode(e,{stream:!0}));try{var l;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;l=n();var c=l.match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new t(t.Errors.BadSignature);u.state="HEADER"}for(var d=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(d?d=!1:l=n(),u.state){case"HEADER":/:/.test(l)?s(l):l||(u.state="ID");continue;case"NOTE":l||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){u.state="NOTE";break}if(!l)continue;if(u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,""),u.state="CUE",l.indexOf("-->")===-1){u.cue.id=l;continue}case"CUE":try{o(l,u.cue,u.regionList)}catch(e){u.reportOrThrowError(e),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var f=l.indexOf("-->")!==-1;if(!l||f&&(d=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=l;continue;case"BADCUE":l||(u.state="ID");continue}}}catch(e){u.reportOrThrowError(e),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new t(t.Errors.BadSignature)}catch(e){e.reportOrThrowError(e)}return e.onflush&&e.onflush(),this}},e.WebVTT=p}(this,this.vttjs)},{}],101:[function(e,module,exports){void 0!==module&&module.exports&&(this.VTTCue=this.VTTCue||e(102).VTTCue),function(e){e.VTTCue.prototype.toJSON=function(){var e={},t=this;return Object.keys(this).forEach(function(n){"getCueAsHTML"!==n&&"hasBeenReset"!==n&&"displayState"!==n&&(e[n]=t[n])}),e},e.VTTCue.create=function(t){if(!t.hasOwnProperty("startTime")||!t.hasOwnProperty("endTime")||!t.hasOwnProperty("text"))throw new Error("You must at least have start time, end time, and text.");var n=new e.VTTCue(t.startTime,t.endTime,t.text);for(var r in t)n.hasOwnProperty(r)&&(n[r]=t[r]);return n},e.VTTCue.fromJSON=function(e){return this.create(JSON.parse(e))}}(this)},{102:102}],102:[function(e,module,exports){!function(e,t){function n(e){return"string"==typeof e&&!!s[e.toLowerCase()]&&e.toLowerCase()}function r(e){return"string"==typeof e&&!!u[e.toLowerCase()]&&e.toLowerCase()}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function o(e,t,o){var s=this,u=/MSIE\s8\.0/.test(navigator.userAgent),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=e,p=t,h=o,y=null,m="",g=!0,v="auto",_="start",b=50,w="middle",T=50,S="middle";if(Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return y},set:function(e){y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return m},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&e!==a)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return _},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return S},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),s.displayState=undefined,u)return s}var a="auto",s={"":!0,lr:!0,rl:!0},u={start:!0,middle:!0,end:!0,left:!0,right:!0};o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.VTTCue=e.VTTCue||o,t.VTTCue=o}(this,this.vttjs||{})},{}],103:[function(e,module,exports){void 0!==module&&module.exports&&(this.VTTRegion=e(104).VTTRegion),function(e){e.VTTRegion.create=function(t){var n=new e.VTTRegion;for(var r in t)n.hasOwnProperty(r)&&(n[r]=t[r]);return n},e.VTTRegion.fromJSON=function(e){return this.create(JSON.parse(e))}}(this)},{104:104}],104:[function(e,module,exports){!function(e,t){function n(e){return"string"==typeof e&&!!o[e.toLowerCase()]&&e.toLowerCase()}function r(e){return"number"==typeof e&&e>=0&&e<=100}function i(){var e=100,t=3,i=0,o=100,a=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");u=t}}})}var o={"":!0,up:!0};e.VTTRegion=e.VTTRegion||i,t.VTTRegion=i}(this,this.vttjs||{})},{}],105:[function(e,module,exports){"use strict";function t(e,t){for(var n=0;n<e.length;n++)t(e[n])}function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function r(e,t,n){var r=e;return l(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=d(t,{uri:e}),r.callback=n,r}function i(e,t,n){return t=r(e,t,n),o(t)}function o(e){function t(){4===f.readyState&&s()}function r(){var e=undefined;if(e=f.response?f.response:f.responseText||a(f),w)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(y),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,l(e,d)}function s(){if(!h){var t;clearTimeout(y),t=e.useXDR&&f.status===undefined?200:1223===f.status?204:f.status;var n=d,i=null;return 0!==t?(n={body:r(),statusCode:t,method:g,headers:{},url:m,rawRequest:f},f.getAllResponseHeaders&&(n.headers=c(f.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),l(i,n,n.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var u=!1,l=function(t,n,r){u||(u=!0,e.callback(t,n,r))},d={body:undefined,headers:{},statusCode:0,method:g,url:m,rawRequest:f},f=e.xhr||null;f||(f=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var p,h,y,m=f.url=e.uri||e.url,g=f.method=e.method||"GET",v=e.body||e.data||null,_=f.headers=e.headers||{},b=!!e.sync,w=!1;if("json"in e&&(w=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),v=JSON.stringify(e.json))),f.onreadystatechange=t,f.onload=s,f.onerror=o,f.onprogress=function(){},f.ontimeout=o,f.open(g,m,!b,e.username,e.password),b||(f.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(y=setTimeout(function(){h=!0,f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)},e.timeout)),f.setRequestHeader)for(p in _)_.hasOwnProperty(p)&&f.setRequestHeader(p,_[p]);else if(e.headers&&!n(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(v),f}function a(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function s(){}var u=e(95),l=e(106),c=e(109),d=e(110);module.exports=i,i.XMLHttpRequest=u.XMLHttpRequest||s,i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:u.XDomainRequest,t(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,n,i){return n=r(t,n,i),n.method=e.toUpperCase(),o(n)}})},{106:106,109:109,110:110,95:95}],106:[function(e,module,exports){function t(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}module.exports=t;var n=Object.prototype.toString},{}],107:[function(e,module,exports){function t(e,t,s){if(!o(t))throw new TypeError("iterator must be a function");arguments.length<3&&(s=this),"[object Array]"===a.call(e)?n(e,t,s):"string"==typeof e?r(e,t,s):i(e,t,s)}function n(e,t,n){for(var r=0,i=e.length;r<i;r++)s.call(e,r)&&t.call(n,e[r],r,e)}function r(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e.charAt(r),r,e)}function i(e,t,n){for(var r in e)s.call(e,r)&&t.call(n,e[r],r,e)}var o=e(106);module.exports=t;var a=Object.prototype.toString,s=Object.prototype.hasOwnProperty},{106:106}],108:[function(e,module,exports){function t(e){return e.replace(/^\s*|\s*$/g,"")}exports=module.exports=t,exports.left=function(e){return e.replace(/^\s*/,"")},exports.right=function(e){return e.replace(/\s*$/,"")}},{}],109:[function(e,module,exports){var t=e(108),n=e(107),r=function(e){return"[object Array]"===Object.prototype.toString.call(e)};module.exports=function(e){if(!e)return{};var i={};return n(t(e).split("\n"),function(e){var n=e.indexOf(":"),o=t(e.slice(0,n)).toLowerCase(),a=t(e.slice(n+1));"undefined"==typeof i[o]?i[o]=a:r(i[o])?i[o].push(a):i[o]=[i[o],a]}),i}},{107:107,108:108}],110:[function(e,module,exports){function t(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e}module.exports=t;var n=Object.prototype.hasOwnProperty},{}]},{},[93])(93)}),function(e){"use strict";function t(e){switch(typeof e){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===e?"null":"object"}}function n(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function r(e){return"function"==typeof e}function i(e){if(null===e||e===j)throw TypeError();return Object(e)}function o(e){return e>>0}function a(e){return e>>>0}function s(t){function n(e){Object.defineProperty(t,e,{get:function(){return t._getter(e)},set:function(n){t._setter(e,n)},enumerable:!0,configurable:!1})}if(!("TYPED_ARRAY_POLYFILL_NO_ARRAY_ACCESSORS"in e)){if(t.length>x)throw RangeError("Array too large for polyfill");var r;for(r=0;r<t.length;r+=1)n(r)}}function u(e,t){var n=32-t;return e<<n>>n}function l(e,t){var n=32-t;return e<<n>>>n}function c(e){return[255&e]}function d(e){return u(e[0],8)}function f(e){return[255&e]}function p(e){return l(e[0],8)}function h(e){return e=U(Number(e)),[e<0?0:e>255?255:255&e]}function y(e){return[255&e,e>>8&255]}function m(e){return u(e[1]<<8|e[0],16)}function g(e){return[255&e,e>>8&255]}function v(e){return l(e[1]<<8|e[0],16)}function _(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function b(e){return u(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function w(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function T(e){return l(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function S(e,t,n){function r(e){var t=M(e),n=e-t;return n<.5?t:n>.5?t+1:t%2?t+1:t}var i,o,a,s=(1<<t-1)-1;if(e!==e)o=(1<<t)-1,a=N(2,n-1),i=0;else if(e===Infinity||e===-Infinity)o=(1<<t)-1,a=0,i=e<0?1:0;else if(0===e)o=0,a=0,i=1/e==-Infinity?1:0;else if(i=e<0,(e=I(e))>=N(2,1-s)){o=D(M(L(e)/A),1023);var u=e/N(2,o);u<1&&(o-=1,u*=2),u>=2&&(o+=1,u/=2);var l=N(2,n);a=r(u*l)-l,o+=s,a/l>=1&&(o+=1,a=0),o>2*s&&(o=(1<<t)-1,a=0)}else o=0,a=r(e/N(2,1-s-n));var c,d=[];for(c=n;c;c-=1)d.push(a%2?1:0),a=M(a/2);for(c=t;c;c-=1)d.push(o%2?1:0),o=M(o/2);d.push(i?1:0),d.reverse();for(var f=d.join(""),p=[];f.length;)p.unshift(parseInt(f.substring(0,8),2)),f=f.substring(8);return p}function E(e,t,n){var r,i,o,a,s,u,l,c,d=[];for(r=0;r<e.length;++r)for(o=e[r],i=8;i;i-=1)d.push(o%2?1:0),o>>=1;return d.reverse(),a=d.join(""),s=(1<<t-1)-1,u=parseInt(a.substring(0,1),2)?-1:1,l=parseInt(a.substring(1,1+t),2),c=parseInt(a.substring(1+t),2),l===(1<<t)-1?0!==c?NaN:u*Infinity:l>0?u*N(2,l-s)*(1+c/N(2,n)):0!==c?u*N(2,-(s-1))*(c/N(2,n)):u<0?-0:0}function k(e){return E(e,11,52)}function O(e){return S(e,11,52)}function C(e){return E(e,8,23)}function P(e){return S(e,8,23)}var j=void 0,x=1e5,A=Math.LN2,I=Math.abs,M=Math.floor,L=Math.log,R=Math.max,D=Math.min,N=Math.pow,U=Math.round;!function(){var e=Object.defineProperty,t=!function(){try{return Object.defineProperty({},"x",{})}catch(_){return!1}}();e&&!t||(Object.defineProperty=function(t,n,r){if(e)try{return e(t,n,r)}catch(_){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(t,n,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(t,n,r.set),"value"in r&&(t[n]=r.value),t})}(),function(){function u(e){if((e=o(e))<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"_bytes",{value:Array(e)});for(var t=0;t<e;t+=1)this._bytes[t]=0}function l(){if(!arguments.length||"object"!=typeof arguments[0])return function(e){if((e=o(e))<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:e}),Object.defineProperty(this,"byteLength",{value:e*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new u(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&arguments[0]instanceof l)return function(e){if(this.constructor!==e.constructor)throw TypeError();var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new u(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var n=0;n<this.length;n+=1)this._setter(n,e._getter(n))}.apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&!(arguments[0]instanceof l)&&!(arguments[0]instanceof u||"ArrayBuffer"===n(arguments[0])))return function(e){var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new u(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var n=0;n<this.length;n+=1){var r=e[n];this._setter(n,Number(r))}}.apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&(arguments[0]instanceof u||"ArrayBuffer"===n(arguments[0])))return function(e,t,n){if((t=a(t))>e.byteLength)throw RangeError("byteOffset out of range");if(t%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(n===j){var r=e.byteLength-t;if(r%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");n=r/this.BYTES_PER_ELEMENT}else n=a(n),r=n*this.BYTES_PER_ELEMENT;if(t+r>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:r}),Object.defineProperty(this,"byteOffset",{value:t}),Object.defineProperty(this,"length",{value:n})}.apply(this,arguments);throw TypeError()}function S(e,t,n){var r=function(){Object.defineProperty(this,"constructor",{value:r}),l.apply(this,arguments),s(this)};"__proto__"in r?r.__proto__=l:(r.from=l.from,r.of=l.of),r.BYTES_PER_ELEMENT=e;var i=function(){};return i.prototype=E,r.prototype=new i,Object.defineProperty(r.prototype,"BYTES_PER_ELEMENT",{value:e}),Object.defineProperty(r.prototype,"_pack",{value:t}),Object.defineProperty(r.prototype,"_unpack",{value:n}),r}e.ArrayBuffer=e.ArrayBuffer||u,Object.defineProperty(l,"from",{value:function(e){return new this(e)}}),Object.defineProperty(l,"of",{value:function(){return new this(arguments)}});var E={};l.prototype=E,Object.defineProperty(l.prototype,"_getter",{value:function(e){if(arguments.length<1)throw SyntaxError("Not enough arguments");if((e=a(e))>=this.length)return j;var t,n,r=[];for(t=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,n+=1)r.push(this.buffer._bytes[n]);return this._unpack(r)}}),Object.defineProperty(l.prototype,"get",{value:l.prototype._getter}),Object.defineProperty(l.prototype,"_setter",{value:function(e,t){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(!((e=a(e))>=this.length)){var n,r,i=this._pack(t);for(n=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,r+=1)this.buffer._bytes[r]=i[n]}}}),Object.defineProperty(l.prototype,"constructor",{value:l}),Object.defineProperty(l.prototype,"copyWithin",{value:function(e,t){var n=arguments[2],r=i(this),s=r.length,u=a(s);u=R(u,0);var l,c=o(e);l=c<0?R(u+c,0):D(c,u);var d,f=o(t);d=f<0?R(u+f,0):D(f,u);var p;p=n===j?u:o(n);var h;h=p<0?R(u+p,0):D(p,u);var y,m=D(h-d,u-l);for(d<l&&l<d+m?(y=-1,d=d+m-1,l=l+m-1):y=1;m>0;)r._setter(l,r._getter(d)),d+=y,l+=y,m-=1;return r}}),Object.defineProperty(l.prototype,"every",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(!r(e))throw TypeError();for(var i=arguments[1],o=0;o<n;o++)if(!e.call(i,t._getter(o),o,t))return!1;return!0}}),Object.defineProperty(l.prototype,"fill",{value:function(e){var t=arguments[1],n=arguments[2],r=i(this),s=r.length,u=a(s);u=R(u,0);var l,c=o(t);l=c<0?R(u+c,0):D(c,u);var d;d=n===j?u:o(n);var f;for(f=d<0?R(u+d,0):D(d,u);l<f;)r._setter(l,e),l+=1;return r}}),Object.defineProperty(l.prototype,"filter",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(!r(e))throw TypeError();for(var i=[],o=arguments[1],s=0;s<n;s++){var u=t._getter(s);e.call(o,u,s,t)&&i.push(u)}return new this.constructor(i)}}),Object.defineProperty(l.prototype,"find",{value:function(e){var t=i(this),n=t.length,o=a(n);if(!r(e))throw TypeError();for(var s=arguments.length>1?arguments[1]:j,u=0;u<o;){var l=t._getter(u),c=e.call(s,l,u,t);if(Boolean(c))return l;++u}return j}}),Object.defineProperty(l.prototype,"findIndex",{value:function(e){var t=i(this),n=t.length,o=a(n);if(!r(e))throw TypeError();for(var s=arguments.length>1?arguments[1]:j,u=0;u<o;){var l=t._getter(u),c=e.call(s,l,u,t);if(Boolean(c))return u;++u}return-1}}),Object.defineProperty(l.prototype,"forEach",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(!r(e))throw TypeError();for(var i=arguments[1],o=0;o<n;o++)e.call(i,t._getter(o),o,t)}}),Object.defineProperty(l.prototype,"indexOf",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*M(I(r)))),r>=n)return-1;for(var i=r>=0?r:R(n-I(r),0);i<n;i++)if(t._getter(i)===e)return i;return-1}}),Object.defineProperty(l.prototype,"join",{value:function(e){if(this===j||null===this)throw TypeError();for(var t=Object(this),n=a(t.length),r=Array(n),i=0;i<n;++i)r[i]=t._getter(i);return r.join(e===j?",":e)}}),Object.defineProperty(l.prototype,"lastIndexOf",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*M(I(r))));for(var i=r>=0?D(r,n-1):n-I(r);i>=0;i--)if(t._getter(i)===e)return i;return-1}}),Object.defineProperty(l.prototype,"map",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(!r(e))throw TypeError();var i=[];i.length=n;for(var o=arguments[1],s=0;s<n;s++)i[s]=e.call(o,t._getter(s),s,t);return new this.constructor(i)}}),Object.defineProperty(l.prototype,"reduce",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(!r(e))throw TypeError();if(0===n&&1===arguments.length)throw TypeError();var i,o=0;for(i=arguments.length>=2?arguments[1]:t._getter(o++);o<n;)i=e.call(j,i,t._getter(o),o,t),o++;return i}}),Object.defineProperty(l.prototype,"reduceRight",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(!r(e))throw TypeError();if(0===n&&1===arguments.length)throw TypeError();var i,o=n-1;for(i=arguments.length>=2?arguments[1]:t._getter(o--);o>=0;)i=e.call(j,i,t._getter(o),o,t),o--;return i}}),Object.defineProperty(l.prototype,"reverse",{value:function(){if(this===j||null===this)throw TypeError();for(var e=Object(this),t=a(e.length),n=M(t/2),r=0,i=t-1;r<n;++r,--i){var o=e._getter(r);e._setter(r,e._getter(i)),e._setter(i,o)}return e}}),Object.defineProperty(l.prototype,"set",{value:function(e,t){if(arguments.length<1)throw SyntaxError("Not enough arguments");var n,r,i,o,s,u,l,c,d,f;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(n=arguments[0],(i=a(arguments[1]))+n.length>this.length)throw RangeError("Offset plus length of array is out of range");if(c=this.byteOffset+i*this.BYTES_PER_ELEMENT,d=n.length*this.BYTES_PER_ELEMENT,n.buffer===this.buffer){for(f=[],s=0,u=n.byteOffset;s<d;s+=1,u+=1)f[s]=n.buffer._bytes[u];for(s=0,l=c;s<d;s+=1,l+=1)this.buffer._bytes[l]=f[s]}else for(s=0,u=n.byteOffset,l=c;s<d;s+=1,u+=1,l+=1)this.buffer._bytes[l]=n.buffer._bytes[u]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw TypeError("Unexpected argument type(s)");if(r=arguments[0],o=a(r.length),(i=a(arguments[1]))+o>this.length)throw RangeError("Offset plus length of array is out of range");for(s=0;s<o;s+=1)u=r[s],this._setter(i+s,Number(u))}}}),Object.defineProperty(l.prototype,"slice",{value:function(e,t){for(var n=i(this),r=n.length,s=a(r),u=o(e),l=u<0?R(s+u,0):D(u,s),c=t===j?s:o(t),d=c<0?R(s+c,0):D(c,s),f=d-l,p=n.constructor,h=new p(f),y=0;l<d;){var m=n._getter(l);h._setter(y,m),++l,++y}return h}}),Object.defineProperty(l.prototype,"some",{value:function(e){if(this===j||null===this)throw TypeError();var t=Object(this),n=a(t.length);if(!r(e))throw TypeError();for(var i=arguments[1],o=0;o<n;o++)if(e.call(i,t._getter(o),o,t))return!0;return!1}}),Object.defineProperty(l.prototype,"sort",{value:function(e){if(this===j||null===this)throw TypeError();for(var t=Object(this),n=a(t.length),r=Array(n),i=0;i<n;++i)r[i]=t._getter(i);for(e?r.sort(e):r.sort(),i=0;i<n;++i)t._setter(i,r[i]);return t}}),Object.defineProperty(l.prototype,"subarray",{value:function(e,t){function n(e,t,n){return e<t?t:e>n?n:e}e=o(e),t=o(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length),t=n(t,0,this.length);var r=t-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)}});var x=S(1,c,d),A=S(1,f,p),L=S(1,h,p),N=S(2,y,m),U=S(2,g,v),B=S(4,_,b),F=S(4,w,T),V=S(4,P,C),H=S(8,O,k);e.Int8Array=e.Int8Array||x,e.Uint8Array=e.Uint8Array||A,e.Uint8ClampedArray=e.Uint8ClampedArray||L,e.Int16Array=e.Int16Array||N,e.Uint16Array=e.Uint16Array||U,e.Int32Array=e.Int32Array||B,e.Uint32Array=e.Uint32Array||F,e.Float32Array=e.Float32Array||V,e.Float64Array=e.Float64Array||H}(),function(){function t(e,t){return r(e.get)?e.get(t):e[t]}function i(e,t,r){if(!(e instanceof ArrayBuffer||"ArrayBuffer"===n(e)))throw TypeError();if((t=a(t))>e.byteLength)throw RangeError("byteOffset out of range");if(r=r===j?e.byteLength-t:a(r),t+r>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:r}),Object.defineProperty(this,"byteOffset",{value:t})}function o(e){return function(n,r){if((n=a(n))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");n+=this.byteOffset;for(var i=new Uint8Array(this.buffer,n,e.BYTES_PER_ELEMENT),o=[],s=0;s<e.BYTES_PER_ELEMENT;s+=1)o.push(t(i,s));return Boolean(r)===Boolean(u)&&o.reverse(),t(new e(new Uint8Array(o).buffer),0)}}function s(e){return function(n,r,i){if((n=a(n))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var o,s,l=new e([r]),c=new Uint8Array(l.buffer),d=[];for(o=0;o<e.BYTES_PER_ELEMENT;o+=1)d.push(t(c,o));Boolean(i)===Boolean(u)&&d.reverse(),s=new Uint8Array(this.buffer,n,e.BYTES_PER_ELEMENT),s.set(d)}}var u=function(){var e=new Uint16Array([4660]);return 18===t(new Uint8Array(e.buffer),0)}();Object.defineProperty(i.prototype,"getUint8",{value:o(Uint8Array)}),Object.defineProperty(i.prototype,"getInt8",{value:o(Int8Array)}),Object.defineProperty(i.prototype,"getUint16",{value:o(Uint16Array)}),Object.defineProperty(i.prototype,"getInt16",{value:o(Int16Array)}),Object.defineProperty(i.prototype,"getUint32",{value:o(Uint32Array)}),Object.defineProperty(i.prototype,"getInt32",{value:o(Int32Array)}),Object.defineProperty(i.prototype,"getFloat32",{value:o(Float32Array)}),Object.defineProperty(i.prototype,"getFloat64",{value:o(Float64Array)}),Object.defineProperty(i.prototype,"setUint8",{value:s(Uint8Array)}),Object.defineProperty(i.prototype,"setInt8",{value:s(Int8Array)}),Object.defineProperty(i.prototype,"setUint16",{value:s(Uint16Array)}),Object.defineProperty(i.prototype,"setInt16",{value:s(Int16Array)}),Object.defineProperty(i.prototype,"setUint32",{value:s(Uint32Array)}),Object.defineProperty(i.prototype,"setInt32",{value:s(Int32Array)}),Object.defineProperty(i.prototype,"setFloat32",{value:s(Float32Array)}),Object.defineProperty(i.prototype,"setFloat64",{value:s(Float64Array)}),e.DataView=e.DataView||i}()}(self),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsContribAds=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(require,module,exports){"use strict";var e=function(e){if(!e.ads.cancelPlayTimeout){if(videojs.browser.IS_IOS&&videojs.browser.IS_IPHONE&&!e.el_.hasAttribute("playsinline")){var t=e.currentWidth?e.currentWidth():e.width(),n=e.currentHeight?e.currentHeight():e.height(),r=document.createElement("div");r.style.width=t+"px",r.style.height=n+"px",r.style.background="black",e.el_.parentNode.insertBefore(r,e.el_),e.el_.style.display="none",e.one(["adstart","adplaying","adtimeout","adserror","adscanceled","adskip","playing"],function(){e.el_.style.display="block",r.remove()}),e.on("fullscreenchange",function(){r&&e.hasClass("vjs-fullscreen")&&(e.el_.style.display="block",r.remove())})}e.ads.cancelPlayTimeout=window.setTimeout(function(){e.ads.cancelPlayTimeout=null,e.paused()||e.pause(),e.ads.cancelledPlay=!0},1)}};module.exports=e},{}],2:[function(require,module,exports){"use strict";var e=function(e){e.ads.contentSrc=e.currentSrc();var t=function(){if("ad-playback"!==e.ads.state){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t)}};e.on("loadstart",t),window.setTimeout(t,1)};module.exports=e},{}],3:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,r=(t(n),function(e,t,n){n.isImmediatePropagationStopped=function(){return!0},n.cancelBubble=!0,n.isPropagationStopped=function(){return!0},e.trigger({type:t+n.type,state:e.ads.state,originalEvent:n})}),i=function(e){if("playing"===e.type&&"preroll?"===this.ads.state)r(this,"ad",e);else if("playing"!==e.type||"ad-playback"!==this.ads.state||this.ads.videoElementRecycled())if("playing"===e.type&&"ads-ready?"===this.ads.state)r(this,"ad",e);else{if("playing"===e.type&&"ad-playback"===this.ads.state&&this.ads.videoElementRecycled())return void r(this,"adcontent",e);if("ad-playback"===this.ads.state)(this.ads.videoElementRecycled()||this.ads.stitchedAds())&&r(this,"ad",e);else if("content-playback"===this.ads.state&&"ended"===e.type)r(this,"content",e);else if("content-resuming"===this.ads.state){if(this.ads.snapshot&&this.currentSrc()!==this.ads.snapshot.currentSrc){if("loadstart"===e.type)return;return r(this,"content",e)}if(this.ads.snapshot&&this.ads.snapshot.ended){if("pause"===e.type||"ended"===e.type)return;return r(this,"content",e)}"playing"!==e.type&&r(this,"content",e)}}else r(this,"ad",e)};module.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,r=t(n),i={};i.getPlayerSnapshot=function(e){var t=void 0;t=r["default"].browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),i=e.remoteTextTracks?e.remoteTextTracks():[],o=[],a={ended:e.ended(),currentSrc:e.currentSrc(),src:e.src(),currentTime:t,type:e.currentType()};n&&(a.nativePoster=n.poster,a.style=n.getAttribute("style"));for(var s=i.length;s>0;s--){var u=i[s];o.push({track:u,mode:u.mode}),u.mode="disabled"}return a.suppressedTracks=o,a},i.restorePlayerSnapshot=function(e,t,n){if(e.ads.disableNextSnapshotRestore===!0)return void(e.ads.disableNextSnapshotRestore=!1);var i=e.$(".vjs-tech"),o=100,a=t.suppressedTracks,s=void 0,u=function(){for(var e=a.length;e>0;e--)s=a[e],s.track.mode=s.mode},l=function(){var n=void 0;r["default"].browser.IS_IOS&&e.ads.isLive(e)?t.currentTime<0&&(n=e.seekable().length>0?e.seekable().end(0)+t.currentTime:e.currentTime(),e.currentTime(n)):t.ended?(e.currentTime(0),e.trigger("timeupdate")):e.currentTime(t.currentTime),t.ended||e.play()},c=function d(){if(e.off("contentcanplay",d),e.ads.tryToResumeTimeout_&&(e.clearTimeout(e.ads.tryToResumeTimeout_),e.ads.tryToResumeTimeout_=null),i=e.el().querySelector(".vjs-tech"),i.readyState>1)return l();if(i.seekable===undefined)return l();if(i.seekable.length>0)return l();if(o--)window.setTimeout(d,10);else try{l()}catch(e){r["default"].log.warn("Failed to resume the content after an advertisement",e)}};t.nativePoster&&(i.poster=t.nativePoster),"style"in t&&i.setAttribute("style",t.style||""),e.ads.videoElementRecycled()?(e.one("contentloadedmetadata",u),e.src({src:t.currentSrc,type:t.type}),e.load(),e.one("contentcanplay",c),e.ads.tryToResumeTimeout_=e.setTimeout(c,n.resumePeriod)):e.ended()&&t.ended||(u(),e.play())},module.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,r=t(n),i=require("./redispatch.js"),o=t(i),a=require("./snapshot.js"),s=t(a),u=require("./contentupdate.js"),l=t(u),c=require("./cancelContentPlay.js"),d=t(c),f=r["default"].getComponent("Html5").Events,p=function(e){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},h={timeout:5e3,prerollTimeout:100,postrollTimeout:100,debug:!1,stitchedAds:!1,resumePeriod:500},y=function(e){var t=this,n=r["default"].mergeOptions(h,e),i=f.concat(["firstplay","loadedalldata","playing"]);t.on(i,o["default"]),t.on(["pause","ended"],function(){"content-resuming"===t.ads.state&&t.ads.snapshot&&t.ads.snapshot.ended&&t.addClass("vjs-has-started")}),t.on(["addurationchange","adcanplay"],function(){t.currentSrc()!==t.ads.snapshot.currentSrc&&t.play()}),t.on("nopreroll",function(){t.ads.nopreroll_=!0}),t.on("nopostroll",function(){t.ads.nopostroll_=!0}),t.on(["ads-ad-started","playing"],function(){t.removeClass("vjs-ad-loading")}),t.ads={state:"content-set",disableNextSnapshotRestore:!1,VERSION:"4.0.0",startLinearAdMode:function(){"preroll?"!==t.ads.state&&"content-playback"!==t.ads.state&&"postroll?"!==t.ads.state||t.trigger("adstart")},endLinearAdMode:function(){"ad-playback"===t.ads.state&&(t.trigger("adend"),t.removeClass("vjs-ad-loading"))},skipLinearAdMode:function(){"ad-playback"!==t.ads.state&&t.trigger("adskip")},stitchedAds:function(e){return e!==undefined&&(this._stitchedAds=!!e),this._stitchedAds},videoElementRecycled:function(){var e=void 0,n=void 0;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");return e=t.src()!==this.snapshot.src,n=t.currentSrc()!==this.snapshot.currentSrc,e||n},isLive:function(e){return e.duration()===Infinity||"8"===r["default"].browser.IOS_VERSION&&0===e.duration()},shouldPlayContentBehindAd:function(e){return!r["default"].browser.IS_IOS&&!r["default"].browser.IS_ANDROID&&e.duration()===Infinity}},t.ads.stitchedAds(n.stitchedAds),(0,l["default"])(t);var a={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?",(0,d["default"])(t),p(t)},adserror:function(){this.state="content-playback"},adskip:function(){this.state="content-playback"}}},"ads-ready":{events:{play:function(){this.state="preroll?",(0,d["default"])(t)},adskip:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"preroll?":{enter:function(){t.ads.nopreroll_?(t.trigger("readyforpreroll"),window.setTimeout(function(){t.trigger("nopreroll")},1)):(t.addClass("vjs-ad-loading"),t.ads.adTimeoutTimeout=window.setTimeout(function(){t.trigger("adtimeout")},n.prerollTimeout),t.trigger("readyforpreroll"))},leave:function(){window.clearTimeout(t.ads.adTimeoutTimeout)},events:{play:function(){(0,d["default"])(t)},adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"},nopreroll:function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){t.addClass("vjs-ad-loading"),t.ads.adTimeoutTimeout=window.setTimeout(function(){t.trigger("adtimeout")},n.timeout)},leave:function(){window.clearTimeout(t.ads.adTimeoutTimeout),t.removeClass("vjs-ad-loading")},events:{play:function(){(0,d["default"])(t)},adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="preroll?"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ad-playback":{enter:function(){t.ads.shouldPlayContentBehindAd(t)||(this.snapshot=s["default"].getPlayerSnapshot(t)),t.ads.shouldPlayContentBehindAd(t)&&(this.preAdVolume_=t.volume(),t.volume(0)),t.addClass("vjs-ad-playing"),p(t),t.ads.cancelPlayTimeout&&window.setTimeout(function(){window.clearTimeout(t.ads.cancelPlayTimeout),t.ads.cancelPlayTimeout=null},1)},leave:function(){t.removeClass("vjs-ad-playing"),t.ads.shouldPlayContentBehindAd(t)||s["default"].restorePlayerSnapshot(t,this.snapshot,n),t.ads.shouldPlayContentBehindAd(t)&&t.volume(this.preAdVolume_)},events:{adend:function(){this.state="content-resuming"},adserror:function(){this.state="content-resuming",t.trigger("adend")}}},"content-resuming":{enter:function(){this.snapshot&&this.snapshot.ended&&(window.clearTimeout(t.ads._fireEndedTimeout),t.ads._fireEndedTimeout=window.setTimeout(function(){t.trigger("ended")},1e3))},leave:function(){window.clearTimeout(t.ads._fireEndedTimeout)},events:{contentupdate:function(){this.state="content-set"},contenttimeupdate:function(){this.state="content-playback"},contentresumed:function(){this.state="content-playback"},playing:function(){this.state="content-playback"},ended:function(){this.state="content-playback"}}},"postroll?":{enter:function(){this.snapshot=s["default"].getPlayerSnapshot(t),t.ads.nopostroll_?window.setTimeout(function(){t.ads.state="content-resuming",t.trigger("ended")},1):(t.addClass("vjs-ad-loading"),t.ads.adTimeoutTimeout=window.setTimeout(function(){t.trigger("adtimeout")},n.postrollTimeout))},leave:function(){window.clearTimeout(t.ads.adTimeoutTimeout),t.removeClass("vjs-ad-loading")},events:{adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-resuming",window.setTimeout(function(){t.trigger("ended")},1)},adtimeout:function(){this.state="content-resuming",window.setTimeout(function(){t.trigger("ended")},1)},adserror:function(){this.state="content-resuming",window.setTimeout(function(){t.trigger("ended")},1)},contentupdate:function(){this.state="ads-ready?"}}},"content-playback":{enter:function(){t.ads.cancelPlayTimeout&&(window.clearTimeout(t.ads.cancelPlayTimeout),t.ads.cancelPlayTimeout=null),t.ads.cancelledPlay&&(t.ads.cancelledPlay=!1,t.paused()&&t.play())},events:{adsready:function(){t.trigger("readyforpreroll")},adstart:function(){this.state="ad-playback"},contentupdate:function(){t.paused()?this.state="content-set":this.state="ads-ready?",this.snapshot&&this.snapshot.ended&&(this.snapshot=null)},contentended:function(){t.ads.snapshot&&t.ads.snapshot.ended||(this.state="postroll?")},play:function(){t.currentSrc()!==t.ads.contentSrc&&(0,d["default"])(t)}}}},u=function(e){var i=t.ads.state,o=a[i].events;if(o){var s=o[e.type];s&&s.apply(t.ads)}if(i!==t.ads.state){var u=i,l=t.ads.state;t.ads.triggerevent=e.type,a[u].leave&&a[u].leave.apply(t.ads),a[l].enter&&a[l].enter.apply(t.ads),n.debug&&r["default"].log("ads",t.ads.triggerevent+" triggered: "+u+" -> "+l)}};t.on(f.concat(["adtimeout","contentupdate","contenttimeupdate","contentplaying","contentended","contentresumed","adstart","adend","adskip","adsready","adserror","adscanceled","nopreroll"]),u),t.paused()||u({type:"play"})};r["default"].plugin("ads",y)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cancelContentPlay.js":1,"./contentupdate.js":2,"./redispatch.js":3,"./snapshot.js":4}]},{},[5])(5)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsContribHls=e()}}(function(){var e;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){return i(e[a][1][t]||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){var n=[],r=!0,i=!1,o=undefined;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(err){i=!0,o=err}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=require("global/window"),r=e(n),i=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},o=function(e,n){var o=arguments.length<=2||arguments[2]===undefined?0:arguments[2];if(e.segments)for(var a=o,s=undefined,u=0;u<e.segments.length;u++){var l=e.segments[u];if(s||(s=i(n,a+l.duration/2)),s){if("cueIn"in l){s.endTime=a,s.adEndTime=a,a+=l.duration,s=null;continue}if(a<s.endTime){a+=l.duration;continue}s.endTime+=l.duration}else if("cueOut"in l&&(s=new r["default"].VTTCue(a,a+l.duration,l.cueOut),s.adStartTime=a,s.adEndTime=a+parseFloat(l.cueOut),n.addCue(s)),"cueOutCont"in l){var c=undefined,d=undefined,f=l.cueOutCont.split("/").map(parseFloat),p=t(f,2);c=p[0],d=p[1],s=new r["default"].VTTCue(a,a+l.duration,""),s.adStartTime=a-c,s.adEndTime=s.adStartTime+d,n.addCue(s)}a+=l.duration}};exports["default"]={updateAdCues:o,findAdCue:i},module.exports=exports["default"]},{"global/window":25}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t){return e.start(t)+"-"+e.end(t)},t=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},n=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},r=function(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n];ArrayBuffer.isView(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r}),t},i={hexDump:function(e){for(var r=Array.prototype.slice.call(e),i=16,o="",a=undefined,s=undefined,u=0;u<r.length/i;u++)a=r.slice(u*i,u*i+i).map(t).join(""),s=r.slice(u*i,u*i+i).map(n).join(""),o+=a+" "+s+"\n";return o},tagDump:function(e){return i.hexDump(e.bytes)},textRanges:function(t){var n="",r=undefined;for(r=0;r<t.length;r++)n+=e(t,r)+" ";return n},createTransferableMessage:r};exports["default"]=i,module.exports=exports["default"]},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={GOAL_BUFFER_LENGTH:12},module.exports=exports["default"]},{}],4:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("global/window"),n=e(t),r=require("aes-decrypter"),i=require("./bin-utils"),o=function(e){e.onmessage=function(e){var t=e.data,o=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),a=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),s=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new r.Decrypter(o,a,s,function(e,r){n["default"].postMessage((0,i.createTransferableMessage)({source:t.source,decrypted:r}),[r.buffer])})}};exports["default"]=function(e){return new o(e)},module.exports=exports["default"]},{"./bin-utils":2,"aes-decrypter":21,"global/window":25}],5:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a=require("./playlist-loader"),s=t(a),u=require("./segment-loader"),l=t(u),c=require("./ranges"),d=t(c),f="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,p=t(f),h=require("./ad-cue-tags"),y=t(h),m=require("./sync-controller"),g=t(m),v=require("videojs-contrib-media-sources/es5/codec-utils"),_=require("webworkify"),b=t(_),w=require("./decrypter-worker"),T=t(w),S=3e5,E=undefined,k=function(e,t){if(typeof e!=typeof t)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var n in e)if(e[n]!==t[n])return!0;return!1},O=function(e){var t={codecCount:0,videoCodec:null,videoObjectTypeIndicator:null,audioProfile:null},n=undefined;return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,n=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(e),n&&(t.videoCodec=n[2],t.videoObjectTypeIndicator=n[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},C=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return(0,v.translateLegacyCodecs)([e])[0]})};exports.mapLegacyAvcCodecs_=C;var P=function(e,t){var n="mp2t",r={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},i=[],o=undefined,a=null;if(!t)return[];t.segments&&t.segments.length&&t.segments[0].map&&(n="mp4"),o=t.attributes||{},o.CODECS&&function(){var e=O(o.CODECS);Object.keys(e).forEach(function(t){r[t]=e[t]||r[t]})}(),e.mediaGroups.AUDIO&&(i=e.mediaGroups.AUDIO[o.AUDIO]);for(var s in i){if(a&&!!i[s].uri!=!!a.uri)return["video/"+n+'; codecs="'+r.videoCodec+r.videoObjectTypeIndicator+", mp4a.40."+r.audioProfile+'"',"audio/"+n+'; codecs="mp4a.40.'+r.audioProfile+'"'];a=i[s]}return a&&a.uri?["video/"+n+'; codecs="'+r.videoCodec+r.videoObjectTypeIndicator+'"',"audio/"+n+'; codecs="mp4a.40.'+r.audioProfile+'"']:["video/"+n+'; codecs="'+r.videoCodec+r.videoObjectTypeIndicator+", mp4a.40."+r.audioProfile+'"']};exports.mimeTypesForPlaylist_=P;var j=function(e){function t(e){var r=this;n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=e.url,a=e.withCredentials,u=e.mode,c=e.tech,d=e.bandwidth,f=e.externHls,h=e.useCueTags;if(!i)throw new Error("A non-empty playlist URL is required");E=f,this.withCredentials=a,this.tech_=c,this.hls_=c.hls,this.mode_=u,this.useCueTags_=h,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.audioTracks_=[],this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.audioGroups_={},this.mediaSource=new p["default"].MediaSource({mode:u}),this.audioinfo_=null,this.mediaSource.on("audioinfo",this.handleAudioinfoUpdate_.bind(this)),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this)),this.seekable_=p["default"].createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new g["default"],this.decrypter_=(0,b["default"])(T["default"]);var y={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},setCurrentTime:function(e){return r.tech_.setCurrentTime(e)},hasPlayed:function(){return r.hasPlayed_()},bandwidth:d,syncController:this.syncController_,decrypter:this.decrypter_,loaderType:"main"};this.masterPlaylistLoader_=new s["default"](i,this.hls_,this.withCredentials),this.setupMasterPlaylistLoaderListeners_(),this.audioPlaylistLoader_=null,this.mainSegmentLoader_=new l["default"](y),y.loaderType="audio",this.audioSegmentLoader_=new l["default"](y),this.decrypter_.onmessage=function(e){"main"===e.data.source?r.mainSegmentLoader_.handleDecrypted_(e.data):"audio"===e.data.source&&r.audiosegmentloader_.handleDecrypted_(e.data)},this.setupSegmentLoaderListeners_(),this.masterPlaylistLoader_.start()}return r(t,e),i(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*e.masterPlaylistLoader_.targetDuration*1e3;e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),e.fillAudioTracks_(),e.setupAudio();try{e.setupSourceBuffers_()}catch(e){return p["default"].log.warn("Failed to create SourceBuffers",e),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("audioupdate"),e.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t)return e.initialMedia_=e.selectPlaylist(),void e.masterPlaylistLoader_.media(e.initialMedia_);e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),t.endList||function(){var t=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};e.duration()!==Infinity?function(){var n=function r(){e.duration()===Infinity?t():e.tech_.one("durationchange",r)};e.tech_.one("durationchange",n)}():t()}()}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*e.masterPlaylistLoader_.targetDuration*1e3,r=undefined,i=undefined;e.masterPlaylistLoader_.isLowestEnabledRendition_()?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),r=e.activeAudioGroup(),i=r.filter(function(e){return e.enabled})[0],i||(e.setupAudio(),e.trigger("audioupdate")),e.tech_.trigger({type:"mediachange",bubbles:!0})})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("progress",function(){e.masterPlaylistLoader_.media(e.selectPlaylist()),e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("error",function(){p["default"].log.warn("Problem encountered with the current alternate audio track. Switching back to default."),e.audioSegmentLoader_.abort(),e.audioPlaylistLoader_=null,e.setupAudio()})}},{key:"handleAudioinfoUpdate_",value:function(e){if(E.supportsAudioInfoChange_()||!this.audioInfo_||!k(this.audioInfo_,e.info))return void(this.audioInfo_=e.info);var t="had different audio properties (channels, sample rate, etc.) or changed in some other way.  This behavior is currently unsupported in Firefox 48 and below due to an issue: \n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1247138\n\n",n=this.activeAudioGroup().map(function(e){return e.enabled}).indexOf(!0),r=this.activeAudioGroup()[n],i=this.activeAudioGroup().filter(function(e){return e.properties_&&e.properties_["default"]})[0];this.audioPlaylistLoader_?(t="The audio track '"+r.label+"' that we tried to switch to "+t+" Unfortunately this means we will have to return you to the main track '"+i.label+"'. Sorry!",i.enabled=!0,this.activeAudioGroup().splice(n,1),this.trigger("audioupdate")):(t="The rendition that we tried to switch to "+t+"Unfortunately that means we will have to blacklist the current playlist and switch to another. Sorry!",this.blacklistCurrentPlaylist()),p["default"].log.warn(t),this.setupAudio()}},{key:"mediaRequests_",value:function(){return this.audioSegmentLoader_.mediaRequests+this.mainSegmentLoader_.mediaRequests}},{key:"mediaTransferDuration_",value:function(){return this.audioSegmentLoader_.mediaTransferDuration+this.mainSegmentLoader_.mediaTransferDuration}},{key:"mediaBytesTransferred_",value:function(){return this.audioSegmentLoader_.mediaBytesTransferred+this.mainSegmentLoader_.mediaBytesTransferred}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"fillAudioTracks_",value:function(){var e=this.master(),t=e.mediaGroups||{};t&&t.AUDIO&&0!==Object.keys(t.AUDIO).length&&"html5"===this.mode_||(t.AUDIO={main:{"default":{"default":!0}}});for(var n in t.AUDIO){this.audioGroups_[n]||(this.audioGroups_[n]=[]);for(var r in t.AUDIO[n]){var i=t.AUDIO[n][r],o=new p["default"].AudioTrack({id:r,kind:i["default"]?"main":"alternative",enabled:!1,language:i.language,label:r});o.properties_=i,this.audioGroups_[n].push(o)}}(this.activeAudioGroup().filter(function(e){return e.properties_["default"]})[0]||this.activeAudioGroup()[0]).enabled=!0}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load()}},{key:"activeAudioGroup",value:function(){var e=this.masterPlaylistLoader_.media(),t=undefined;return e.attributes&&e.attributes.AUDIO&&(t=this.audioGroups_[e.attributes.AUDIO]),t||this.audioGroups_.main}},{key:"setupAudio",value:function(){var e=this,t=this.activeAudioGroup(),n=t.filter(function(e){return e.enabled})[0];if(n||(n=t.filter(function(e){return e.properties_["default"]})[0]||t[0],n.enabled=!0),this.audioPlaylistLoader_&&(this.audioPlaylistLoader_.dispose(),this.audioPlaylistLoader_=null),this.audioSegmentLoader_.pause(),!n.properties_.resolvedUri)return void this.mainSegmentLoader_.resetEverything();this.audioSegmentLoader_.resetEverything(),this.audioPlaylistLoader_=new s["default"](n.properties_.resolvedUri,this.hls_,this.withCredentials),this.audioPlaylistLoader_.start(),this.audioPlaylistLoader_.on("loadedmetadata",function(){var t=e.audioPlaylistLoader_.media();e.audioSegmentLoader_.playlist(t,e.requestOptions_),(!e.tech_.paused()||t.endList&&"none"!==e.tech_.preload())&&e.audioSegmentLoader_.load(),t.endList||e.audioPlaylistLoader_.trigger("firstplay")}),this.audioPlaylistLoader_.on("loadedplaylist",function(){var t=undefined;if(e.audioPlaylistLoader_&&(t=e.audioPlaylistLoader_.media()),!t)return void e.audioPlaylistLoader_.media(e.audioPlaylistLoader_.playlists.master.playlists[0]);e.audioSegmentLoader_.playlist(t,e.requestOptions_)}),this.audioPlaylistLoader_.on("error",function(){p["default"].log.warn("Problem encountered loading the alternate audio track. Switching back to default."),e.audioSegmentLoader_.abort(),e.setupAudio()})}},{key:"fastQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader(),this.audiosegmentloader_&&this.audioSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay())return this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load(),this.tech_.duration()===Infinity&&this.tech_.currentTime()<this.tech_.seekable().start(0)?this.tech_.setCurrentTime(this.tech_.seekable().start(0)):void 0}},{key:"setupFirstPlay",value:function(){var e=undefined,t=this.masterPlaylistLoader_.media();return!(!t||this.tech_.paused()||this.hasPlayed_()||(t.endList||(this.trigger("firstplay"),e=this.seekable(),e.length&&this.tech_.setCurrentTime(e.end(0))),this.hasPlayed_=function(){return!0},this.load(),0))}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return p["default"].log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}this.tech_.autoplay()&&this.tech_.play(),this.trigger("sourceopen")}},{key:"blacklistCurrentPlaylist",value:function(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],t=undefined,n=undefined;return(t=e.playlist||this.masterPlaylistLoader_.media())?(t.excludeUntil=Date.now()+S,(n=this.selectPlaylist())?(p["default"].log.warn("Problem encountered with the current HLS playlist. Switching to another playlist."),this.masterPlaylistLoader_.media(n)):(p["default"].log.warn("Problem encountered with the current HLS playlist. No suitable alternatives found."),this.error=e,this.mediaSource.endOfStream("network"))):(this.error=e,this.mediaSource.endOfStream("network"))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=d["default"].findRange(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.audioPlaylistLoader_&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),void(this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load()))):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:E.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=undefined,t=undefined,n=undefined;if(this.masterPlaylistLoader_&&(e=this.masterPlaylistLoader_.media())&&(t=E.Playlist.seekable(e),0!==t.length&&(!this.audioPlaylistLoader_||(n=E.Playlist.seekable(this.audioPlaylistLoader_.media()),0!==n.length))))return n?void(this.seekable_=p["default"].createTimeRanges([[n.start(0)>t.start(0)?n.start(0):t.start(0),n.end(0)<t.end(0)?n.end(0):t.end(0)]])):void(this.seekable_=t)}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,n=E.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),i=function o(){e.mediaSource.duration=n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",o)};r.length>0&&(n=Math.max(n,r.end(r.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",i):i())}},{key:"dispose",value:function(){this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.audioPlaylistLoader_&&this.audioPlaylistLoader_.dispose(),this.audioSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e=this.masterPlaylistLoader_.media(),t=undefined;if(e&&"open"===this.mediaSource.readyState){if(t=P(this.masterPlaylistLoader_.master,e),t.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(t[0]),t[1]&&this.audioSegmentLoader_.mimeType(t[1]),this.excludeIncompatibleVariants_(e)}}},{key:"excludeIncompatibleVariants_",value:function(e){var t=this.masterPlaylistLoader_.master,n=2,r=null,i=undefined;e.attributes&&e.attributes.CODECS&&(i=O(e.attributes.CODECS),r=i.videoCodec,n=i.codecCount),t.playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};if(e.attributes&&e.attributes.CODECS){var i=e.attributes.CODECS;t=O(i),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+C(i)+'"')&&(e.excludeUntil=Infinity)}t.codecCount!==n&&(e.excludeUntil=Infinity),t.videoCodec!==r&&(e.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),y["default"].updateAdCues(e,this.cueTagsTrack_,t)}}]),t}(p["default"].EventTarget);exports.MasterPlaylistController=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ad-cue-tags":1,"./decrypter-worker":4,"./playlist-loader":7,"./ranges":9,"./segment-loader":13,"./sync-controller":16,"videojs-contrib-media-sources/es5/codec-utils":60,webworkify:70}],6:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=require("./ranges"),o=t(i),a="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,s=t(a),u=["seeking","seeked","pause","playing","error"],l=function(){function e(t){var r=this;n(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,t.debug&&(this.logger_=s["default"].log.bind(s["default"],"playback-watcher ->")),this.logger_("initialize");var i=function(){return r.waiting_()},o=function(){return r.cancelTimer_()};this.tech_.on("waiting",i),this.tech_.on(u,o),this.monitorCurrentTime_(),this.dispose=function(){r.logger_("dispose"),r.tech_.off("waiting",i),r.tech_.off(u,o),r.checkCurrentTimeTimeout_&&clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}return r(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"waiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(!this.tech_.seeking()&&null===this.timer_){if(this.fellOutOfLiveWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),void this.tech_.trigger("liveresync")}var r=this.tech_.buffered(),i=o["default"].findNextRange(r,t);if(this.videoUnderflow_(i,r,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),void this.tech_.trigger("videounderflow");if(i.length>0){var a=i.start(0)-t;this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t)}}}},{key:"fellOutOfLiveWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0))}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var r=this.gapFromVideoUnderflow_(t,n);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=o["default"].findNextRange(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+o["default"].TIME_FUDGE_FACTOR))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=o["default"].findGaps(e),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(t-i<4&&t-i>2)return{start:i,end:a}}return null}},{key:"logger_",value:function(){}}]),e}();exports["default"]=l,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ranges":9}],7:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./resolve-url"),r=t(n),i="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,o=require("./playlist.js"),a=require("./stream"),s=t(a),u=require("m3u8-parser"),l=t(u),c=require("global/window"),d=t(c),f=function(e,t,n){var r=t.slice(),o=undefined,a=undefined;for(n=n||0,o=Math.min(e.length,t.length+n),a=n;a<o;a++)r[a-n]=(0,i.mergeOptions)(e[a],r[a-n]);return r},p=function(e,t){for(var n=!1,o=(0,i.mergeOptions)(e,{}),a=e.playlists.length,s=undefined,u=undefined,l=undefined;a--;)if(s=o.playlists[a],s.uri===t.uri){if(s.segments&&t.segments&&s.segments.length===t.segments.length&&s.mediaSequence===t.mediaSequence)continue;for(o.playlists[a]=(0,i.mergeOptions)(s,t),o.playlists[t.uri]=o.playlists[a],s.segments&&(o.playlists[a].segments=f(s.segments,t.segments,t.mediaSequence-s.mediaSequence)),l=0,o.playlists[a].segments&&(l=o.playlists[a].segments.length);l--;)u=o.playlists[a].segments[l],u.resolvedUri||(u.resolvedUri=(0,r["default"])(s.resolvedUri,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=(0,r["default"])(s.resolvedUri,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=(0,r["default"])(s.resolvedUri,u.map.uri));n=!0}return n?o:null},h=function y(e,t,n){var i=this,a=this,s=undefined,u=undefined,c=undefined,f=undefined,h=undefined;if(y.prototype.constructor.call(this),this.hls_=t,!e)throw new Error("A non-empty playlist URL is required");f=function(e,t,n){a.setBandwidth(c||e),c=null,n&&(a.state=n),a.error={playlist:a.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2},a.trigger("error")},h=function(e,t){var n=undefined,r=undefined,i=undefined;a.setBandwidth(c||e),c=null,a.state="HAVE_METADATA",n=new l["default"].Parser,n.push(e.responseText),n.end(),n.manifest.uri=t,i=p(a.master,n.manifest),r=1e3*(n.manifest.targetDuration||10),a.targetDuration=n.manifest.targetDuration,i?(a.master=i,a.media_=a.master.playlists[n.manifest.uri]):r/=2,a.media().endList||(d["default"].clearTimeout(u),u=d["default"].setTimeout(function(){a.trigger("mediaupdatetimeout")},r)),a.trigger("loadedplaylist")},a.state="HAVE_NOTHING",s=this.dispose,a.dispose=function(){a.stopRequest(),d["default"].clearTimeout(u),s.call(this)},a.stopRequest=function(){if(c){var e=c;c=null,e.onreadystatechange=null,e.abort()}},a.enabledPlaylists_=function(){return a.master.playlists.filter(o.isEnabled).length},a.isLowestEnabledRendition_=function(){var e=a.media();if(!e||!e.attributes)return!1;var t=a.media().attributes.BANDWIDTH||0;return!(a.master.playlists.filter(function(e){if(!(0,o.isEnabled)(e))return!1;var n=0;return e&&e.attributes&&(n=e.attributes.BANDWIDTH),n<=t}).length>1)},a.media=function(e){var t=a.state,i=undefined;if(!e)return a.media_;if("HAVE_NOTHING"===a.state)throw new Error("Cannot switch media playlist from "+a.state);if("string"==typeof e){if(!a.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=a.master.playlists[e]}if(i=!a.media_||e.uri!==a.media_.uri,a.master.playlists[e.uri].endList)return c&&(c.onreadystatechange=null,c.abort(),c=null),a.state="HAVE_METADATA",a.media_=e,void(i&&(a.trigger("mediachanging"),a.trigger("mediachange")));if(i){if(a.state="SWITCHING_MEDIA",c){if((0,r["default"])(a.master.uri,e.uri)===c.url)return;c.onreadystatechange=null,c.abort(),c=null}this.media_&&this.trigger("mediachanging"),c=this.hls_.xhr({uri:(0,r["default"])(a.master.uri,e.uri),withCredentials:n},function(n,r){if(c){if(n)return f(c,e.uri,t);h(r,e.uri),"HAVE_MASTER"===t?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}},a.setBandwidth=function(e){a.bandwidth=e.bandwidth},a.on("mediaupdatetimeout",function(){"HAVE_METADATA"===a.state&&(a.state="HAVE_CURRENT_METADATA",c=this.hls_.xhr({uri:(0,r["default"])(a.master.uri,a.media().uri),withCredentials:n},function(e,t){if(c)return e?f(c,a.media().uri):void h(c,a.media().uri)}))}),a.on("firstplay",function(){var e=a.media();e&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0})}),a.pause=function(){a.stopRequest(),d["default"].clearTimeout(u)},a.load=function(){a.started?a.media().endList?a.trigger("loadedplaylist"):a.trigger("mediaupdatetimeout"):a.start()},a.start=function(){a.started=!0,c=i.hls_.xhr({uri:e,withCredentials:n},function(t,n){var i=undefined,o=undefined,s=undefined;if(c){if(c=null,t)return a.error={status:n.status,message:"HLS playlist request error at URL: "+e,responseText:n.responseText,code:2},a.trigger("error");if(i=new l["default"].Parser,i.push(n.responseText),i.end(),a.state="HAVE_MASTER",i.manifest.uri=e,i.manifest.playlists){for(a.master=i.manifest,s=a.master.playlists.length;s--;)o=a.master.playlists[s],a.master.playlists[o.uri]=o,o.resolvedUri=(0,r["default"])(a.master.uri,o.uri);for(var u in a.master.mediaGroups.AUDIO)for(var f in a.master.mediaGroups.AUDIO[u]){var p=a.master.mediaGroups.AUDIO[u][f];p.uri&&(p.resolvedUri=(0,r["default"])(a.master.uri,p.uri))}return a.trigger("loadedplaylist"),void(c||a.media(i.manifest.playlists[0]))}return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:d["default"].location.href,playlists:[{uri:e}]},a.master.playlists[e]=a.master.playlists[0],a.master.playlists[0].resolvedUri=e,h(n,e),a.trigger("loadedmetadata")}})}};h.prototype=new s["default"],exports["default"]=h,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist.js":8,"./resolve-url":12,"./stream":15,"global/window":25,"m3u8-parser":26}],8:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,r=require("global/window"),i=t(r),o={UNSAFE_LIVE_SEGMENTS:3},a=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if("undefined"!=typeof i.start)return{result:i.start,precise:!0};if("undefined"!=typeof i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=e.segments[r],"undefined"!=typeof i.end)return{result:n+i.end,precise:!0};if(n+=i.duration,"undefined"!=typeof i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}},s=function(e,t){for(var n=0,r=undefined,i=t-e.mediaSequence;i<e.segments.length;i++){if(r=e.segments[i],"undefined"!=typeof r.start)return{result:r.start-n,precise:!0};if(n+=r.duration,"undefined"!=typeof r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}},u=function(e,t,n){var r=undefined,i=undefined;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(r=a(e,t),r.precise?r.result:(i=s(e,t),i.precise?i.result:r.result+n))},l=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return i["default"].Infinity}return u(e,t,n)};exports.duration=l;var c=function(e,t,n){var r=0;if(t>n){var i=[n,t];t=i[0],n=i[1]}if(t<0){for(var o=t;o<Math.min(0,n);o++)r+=e.targetDuration;t=0}for(var o=t;o<n;o++)r+=e.segments[o].duration;return r};exports.sumDurations=c;var d=function(e){if(!e||!e.segments)return[null,null];for(var t=e.syncInfo||null,n=null,r=0,i=e.segments.length;r<i;r++){var o=e.segments[r];if("undefined"!=typeof o.start){n={mediaSequence:e.mediaSequence+r,time:o.start};break}}return{expiredSync:t,segmentSync:n}},f=function(e,t,n){if(t&&n){var r=t.mediaSequence-e.mediaSequence,i=n.mediaSequence-e.mediaSequence,o=undefined,a=undefined;return Math.abs(r)>Math.abs(i)?(o=i,a=-n.time):(o=r,a=t.time),Math.abs(a+c(e,o,0))}if(t){var o=t.mediaSequence-e.mediaSequence;return t.time+c(e,o,0)}if(n){var o=n.mediaSequence-e.mediaSequence;return n.time-c(e,o,0)}},p=function(e){if(!e||!e.segments)return(0,n.createTimeRange)();if(e.endList)return(0,n.createTimeRange)(0,l(e));var t=d(e),r=t.expiredSync,i=t.segmentSync;if(!r&&!i)return(0,n.createTimeRange)();var a=f(e,r,i),s=a,c=Math.max(0,e.segments.length-o.UNSAFE_LIVE_SEGMENTS),p=u(e,e.mediaSequence+c,a);return(0,n.createTimeRange)(s,p)};exports.seekable=p;var h=function(e){return e-Math.floor(e)==0},y=function(e,t){if(h(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,r=1;r<=n;r++){var i=Math.pow(10,r),o=t*i;if(h(o)||r===n)return(o+e)/i}},m=y.bind(null,1),g=y.bind(null,-1),v=function(e,t,n,r){var i=undefined,o=undefined,a=e.segments.length,s=t-r;if(s<0){if(n>0)for(i=n-1;i>=0;i--)if(o=e.segments[i],(s+=g(o.duration))>0)return{mediaIndex:i,startTime:r-c(e,n,i)};return{mediaIndex:0,startTime:t}}if(n<0){for(i=n;i<0;i++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(i=n;i<a;i++)if(o=e.segments[i],(s-=m(o.duration))<0)return{mediaIndex:i,startTime:r+c(e,n,i)};return{mediaIndex:a-1,startTime:t}};exports.getMediaInfoForTime_=v;var _=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()};exports.isBlacklisted=_;var b=function(e){var t=_(e);return!e.disabled&&!t};exports.isEnabled=b,o.duration=l,o.seekable=p,o.getMediaInfoForTime_=v,o.isEnabled=b,o.isBlacklisted=_,exports["default"]=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":25}],9:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(e,t){var n=[],r=!0,i=!1,o=undefined;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(err){i=!0,o=err}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,i=t(r),o=1/30,a=function(e,t){var r=n(t,2),i=r[0],o=r[1];return Math.min(Math.max(i,e),o)},s=function(e,t){var n=[],r=undefined;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return i["default"].createTimeRanges(n)},u=function(e,t){return s(e,function(e,n){return e-o<=t&&n+o>=t})},l=function(e,t){return s(e,function(e){return e-o>=t})},c=function(e){if(e.length<2)return i["default"].createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),o=e.start(n);t.push([r,o])}return i["default"].createTimeRanges(t)},d=function(e,t){var n=undefined,r=undefined,i=undefined,o=[],a=[],s=function(e){return e[0]<=i&&e[1]>=i};if(e)for(n=0;n<e.length;n++)r=e.start(n),i=e.end(n),a.push([r,i]);if(t)for(n=0;n<t.length;n++)r=t.start(n),i=t.end(n),a.some(s)||o.push(i);return 1!==o.length?null:o[0]},f=function(e,t){var n=null,r=null,o=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return i["default"].createTimeRange();for(var u=e.length;u--;)a.push({time:e.start(u),type:"start"}),a.push({time:e.end(u),type:"end"});for(u=t.length;u--;)a.push({time:t.start(u),type:"start"}),a.push({time:t.end(u),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),u=0;u<a.length;u++)"start"===a[u].type?2==++o&&(n=a[u].time):"end"===a[u].type&&1==--o&&(r=a[u].time),null!==n&&null!==r&&(s.push([n,r]),n=null,r=null);return i["default"].createTimeRanges(s)},p=function(e,t,n,r){for(var i=t.end(0)-t.start(0),o=e.end(0)-e.start(0),a=i-o,s=f(e,r),u=f(t,r),l=0,c=0,d=s.length;d--;)l+=s.end(d)-s.start(d),s.start(d)===n&&(l+=a);for(d=u.length;d--;)c+=u.end(d)-u.start(d);return Math.max(l,c)/i*100},h=function(e,t,n,r){var o=e+t,s=i["default"].createTimeRanges([[e,o]]),u=i["default"].createTimeRanges([[a(e,[n,o]),o]]);if(u.start(0)===u.end(0))return 0;var l=p(u,s,n,r);return isNaN(l)||l===Infinity||l===-Infinity?0:l};exports["default"]={findRange:u,findNextRange:l,findGaps:c,findSoleUncommonTimeRangesEnd:d,getSegmentBufferedPercent:h,TIME_FUDGE_FACTOR:o},module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,r=t(n),i={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},o=function s(e,t){var n=0,o=0,a=r["default"].mergeOptions(i,t),u=function(){o&&e.currentTime(o)},l=function(t){null!==t&&t!==undefined&&(o=e.duration()!==Infinity&&e.currentTime()||0,e.one("loadedmetadata",u),e.src(t),e.play())},c=function(){if(!(Date.now()-n<1e3*a.errorInterval))return a.getSource&&"function"==typeof a.getSource?(n=Date.now(),a.getSource.call(e,l)):void r["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},d=function p(){e.off("loadedmetadata",u),e.off("error",c),e.off("dispose",p)},f=function(t){d(),s(e,t)};e.on("error",c),e.on("dispose",d),e.reloadSourceOnError=f},a=function(e){o(this,e)};exports["default"]=a,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(require,module,exports){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./playlist.js"),n=function(e,n,r,i){var o=e.master.playlists[n],a=(0,t.isBlacklisted)(o),s=(0,t.isEnabled)(o);return void 0===i?s:(i?delete o.disabled:o.disabled=!0,i===s||a||r(),i)},r=function o(t,r,i){e(this,o);var a=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(r.attributes){var s=r.attributes;if(s.RESOLUTION){var u=s.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=s.BANDWIDTH}this.id=i,this.enabled=n.bind(this,t.playlists,r.uri,a)},i=function(e){var n=e.playlists;e.representations=function(){return n.master.playlists.filter(function(e){return!(0,t.isBlacklisted)(e)}).map(function(t,n){return new r(e,t,t.uri)})}};exports["default"]=i,module.exports=exports["default"]},{"./playlist.js":8}],12:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("url-toolkit"),n=e(t),r=require("global/window"),i=e(r),o=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=n["default"].buildAbsoluteURL(i["default"].location.href,e)),n["default"].buildAbsoluteURL(e,t))};exports["default"]=o,module.exports=exports["default"]},{"global/window":25,"url-toolkit":57}],13:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a=require("./playlist"),s="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,u=t(s),l=require("./source-updater"),c=t(l),d=require("./config"),f=t(d),p=require("global/window"),h=t(p),y=require("./bin-utils"),m=500,g="console",v=function(){h["default"].logit&&h["default"][g].log.apply(h["default"][g],arguments)},_=function(e,t,n){if(!e)return!1;var r=e.segments,i=n===r.length;return e.endList&&"open"===t.readyState&&i},b=function(e){var t=(undefined,undefined);return t=e.offset+e.length-1,"bytes="+e.offset+"-"+t},w=function(e){var t={};return"byterange"in e&&(t.Range=b(e.byterange)),t},T=function(e){var t=e.byterange||{length:Infinity,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},S=function(e){function t(e){var r=this;n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=undefined;if(!e)throw new TypeError("Initialization options are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");i=u["default"].mergeOptions(u["default"].options.hls,e),this.state="INIT",this.bandwidth=i.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=i.hasPlayed,this.currentTime_=i.currentTime,this.seekable_=i.seekable,this.seeking_=i.seeking,this.setCurrentTime_=i.setCurrentTime,this.mediaSource_=i.mediaSource,this.hls_=i.hls,this.loaderType_=i.loaderType,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.xhr_=null,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.segmentLoadRepeatTimeMap=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=i.decrypter,this.syncController_=i.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",function(){return r.trigger("syncinfoupdate")}),this.fetchAtBuffer_=!1}return r(t,e),i(t,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){if("WAITING"!==this.state)return void(this.pendingSegment_&&(this.pendingSegment_=null));this.abort_(),this.paused()||(this.state="READY",this.monitorBuffer_())}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.mimeType_)return this.init_();!this.sourceUpdater_||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"playlist",value:function(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(e){var n=this.playlist_,r=this.pendingSegment_;if(this.playlist_=e,this.xhrOptions_=t,this.segmentLoadRepeatTimeMap={},this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.trigger("syncinfoupdate")),this.mimeType_&&"INIT"===this.state&&!this.paused())return this.init_();if(!n||n.uri!==e.uri)return void(null!==this.mediaIndex&&this.resyncLoader());var i=e.mediaSequence-n.mediaSequence;v("mediaSequenceDiff",i),null!==this.mediaIndex&&(this.mediaIndex-=i),r&&(r.mediaIndex-=i,r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(h["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e){this.mimeType_||(this.mimeType_=e,this.playlist_&&"INIT"===this.state&&!this.paused()&&this.init_())}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&h["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=h["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&h["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=h["default"].setTimeout(this.monitorBufferTick_.bind(this),m)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(this.currentTimeline_===-1)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"checkBuffer_",value:function(e,t,n,r,i,o){var s=0,u=undefined;e.length&&(s=e.end(e.length-1));var l=Math.max(0,s-i);if(!t.segments.length)return null;if(v("cB_","mediaIndex:",n,"hasPlayed:",r,"currentTime:",i,"syncPoint:",o,"fetchAtBuffer:",this.fetchAtBuffer_),v("cB_ 2","bufferedTime:",l),l>=f["default"].GOAL_BUFFER_LENGTH)return null;if(!r&&l>=1)return null;if(null===o)return n=this.getSyncSegmentCandidate_(t),v("getSync",n),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){v("++",n+1);var c=t.segments[n];return u=c&&c.end?c.end:s,this.generateSegmentInfo_(t,n+1,u,!1)}if(this.fetchAtBuffer_){var d=(0,a.getMediaInfoForTime_)(t,s,o.segmentIndex,o.time);n=d.mediaIndex,u=d.startTime}else{var d=(0,a.getMediaInfoForTime_)(t,i,o.segmentIndex,o.time);n=d.mediaIndex,u=d.startTime}return v("gMIFT",n,"sos",u),this.generateSegmentInfo_(t,n,u,!1)}},{key:"generateSegmentInfo_",value:function(e,t,n,r){if(t<0||t>=e.segments.length)return null;var i=e.segments[t];return{uri:i.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abort_",value:function(){this.xhr_&&this.xhr_.abort(),this.pendingSegment_=null}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new c["default"](this.mediaSource_,this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.mediaSource_.duration,this.currentTimeline_));var e=this.checkBuffer_(this.sourceUpdater_.buffered(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e){if(_(this.playlist_,this.mediaSource_,e.mediaIndex))return void this.mediaSource_.endOfStream();(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.currentTimeline_=e.timeline,this.loadSegment_(e))}}}},{key:"trimBuffer_",value:function(e){var t=this.seekable_(),n=this.currentTime_();return undefined,t.length&&t.start(0)>0&&t.start(0)<n?t.start(0):n-60}},{key:"loadSegment_",value:function(e){var t=this,n=undefined,r=undefined,i=undefined,o=undefined,a=0;if(a=this.trimBuffer_(e),a>0&&this.sourceUpdater_.remove(0,a),n=e.segment,n.key){var s=u["default"].mergeOptions(this.xhrOptions_,{uri:n.key.resolvedUri,responseType:"arraybuffer"});r=this.hls_.xhr(s,this.handleResponse_.bind(this))}if(n.map&&!this.initSegments_[T(n.map)]){var l=u["default"].mergeOptions(this.xhrOptions_,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:w(n.map)});i=this.hls_.xhr(l,this.handleResponse_.bind(this))}this.pendingSegment_=e;var c=e.resolvedUri||e.uri,d={timeout:this.xhrOptions_.timeout*Math.pow(2,this.segmentLoadRepeatTimeMap[c]||0)},f=u["default"].mergeOptions(this.xhrOptions_,d,{uri:e.uri,responseType:"arraybuffer",headers:w(n)});o=this.hls_.xhr(f,this.handleResponse_.bind(this)),o.addEventListener("progress",function(e){t.trigger(e)}),this.segmentLoadRepeatTimeMap[c]=(this.segmentLoadRepeatTimeMap[c]||0)+1,this.xhr_={keyXhr:r,initSegmentXhr:i,segmentXhr:o,abort:function(){this.segmentXhr&&(this.segmentXhr.onreadystatechange=null,this.segmentXhr.abort(),this.segmentXhr=null),this.initSegmentXhr&&(this.initSegmentXhr.onreadystatechange=null,this.initSegmentXhr.abort(),this.initSegmentXhr=null),this.keyXhr&&(this.keyXhr.onreadystatechange=null,this.keyXhr.abort(),this.keyXhr=null)}},this.state="WAITING"}},{key:"handleResponse_",value:function(e,t){var n=undefined,r=undefined,i=undefined;if(this.xhr_&&(t===this.xhr_.segmentXhr||t===this.xhr_.keyXhr||t===this.xhr_.initSegmentXhr)){if(n=this.pendingSegment_,r=n.segment,t.timedout)return this.abort_(),this.bandwidth=1,this.roundTrip=NaN,this.state="READY",this.trigger("progress");if(this.xhr_.segmentXhr&&this.xhr_.segmentXhr.url&&delete this.segmentLoadRepeatTimeMap[this.xhr_.segmentXhr.url],!t.aborted&&e){var o=this.xhr_.keyXhr;return this.abort_(),this.error({status:t.status,message:t===o?"HLS key request error at URL: "+r.key.uri:"HLS segment request error at URL: "+n.uri,code:2,xhr:t}),this.state="READY",this.pause(),this.trigger("error")}if(!t.response)return void this.abort_();if(t===this.xhr_.segmentXhr&&(this.xhr_.segmentXhr=null,n.startOfAppend=Date.now(),this.roundTrip=t.roundTripTime,this.bandwidth=t.bandwidth,this.mediaBytesTransferred+=t.bytesReceived||0,this.mediaRequests+=1,this.mediaTransferDuration+=t.roundTripTime||0,r.key?n.encryptedBytes=new Uint8Array(t.response):n.bytes=new Uint8Array(t.response)),t===this.xhr_.keyXhr){if(this.xhr_.keyXhr=null,16!==t.response.byteLength)return this.abort_(),this.error({status:t.status,message:"Invalid HLS key at URL: "+r.key.uri,code:2,xhr:t}),this.state="READY",this.pause(),this.trigger("error");i=new DataView(t.response),r.key.bytes=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),r.key.iv=r.key.iv||new Uint32Array([0,0,0,n.mediaIndex+n.playlist.mediaSequence])}t===this.xhr_.initSegmentXhr&&(this.xhr_.initSegmentXhr=null,r.map.bytes=new Uint8Array(t.response),this.initSegments_[T(r.map)]=r.map),this.xhr_.segmentXhr||this.xhr_.keyXhr||this.xhr_.initSegmentXhr||(this.xhr_=null,this.processResponse_())}}},{key:"resetEverything",value:function(){this.resetLoader(),this.remove(0,Infinity)}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null}},{key:"remove",value:function(e,t){this.sourceUpdater_&&this.sourceUpdater_.remove(e,t)}},{key:"processResponse_",value:function(){if(!this.pendingSegment_)return void(this.state="READY");this.state="DECRYPTING";var e=this.pendingSegment_,t=e.segment;t.key?this.decrypter_.postMessage((0,y.createTransferableMessage)({source:this.loaderType_,encrypted:e.encryptedBytes,key:t.key.bytes,iv:t.key.iv}),[e.encryptedBytes.buffer,t.key.bytes.buffer]):this.handleSegment_()}},{key:"handleDecrypted_",value:function(e){var t=this.pendingSegment_,n=e.decrypted;t&&(t.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength)),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(!this.pendingSegment_)return void(this.state="READY");this.state="APPENDING";var t=this.pendingSegment_,n=t.segment;if(this.syncController_.probeSegmentInfo(t),t.isSyncRequest)return this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&this.sourceUpdater_.timestampOffset(t.timestampOffset),n.map&&function(){var t=T(n.map);if(!e.activeInitSegmentId_||e.activeInitSegmentId_!==t){var r=e.initSegments_[t];e.sourceUpdater_.appendBuffer(r.bytes,function(){e.activeInitSegmentId_=t})}}(),t.byteLength=t.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.pendingSegment_=null,this.recordThroughput_(e),this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,v("handleUpdateEnd_",this.mediaIndex),_(e.playlist,this.mediaSource_,this.mediaIndex+1)&&this.mediaSource_.endOfStream(),this.state="READY",this.trigger("progress"),this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.startOfAppend+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}}]),t}(u["default"].EventTarget);exports["default"]=S,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./playlist":8,"./source-updater":14,"global/window":25}],14:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,o=t(i),a=function(){function e(t,r){var i=this;n(this,e);var o=function(){i.sourceBuffer_=t.addSourceBuffer(r),i.onUpdateendCallback_=function(){var e=i.pendingCallback_;i.pendingCallback_=null,e&&e(),i.runCallback_()},i.sourceBuffer_.addEventListener("updateend",i.onUpdateendCallback_),i.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,"closed"===t.readyState?t.addEventListener("sourceopen",o):o()}return r(e,[{key:"abort",value:function(e){var t=this;this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:o["default"].createTimeRanges()}},{key:"duration",value:function(e){var t=this;this.queueCallback_(function(){t.sourceBuffer_.duration=e})}},{key:"remove",value:function(e,t){var n=this;this.queueCallback_(function(){n.sourceBuffer_.remove(e,t)})}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=undefined;this.sourceBuffer_&&!this.sourceBuffer_.updating&&this.callbacks_.length&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),e}();exports["default"]=a,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(require,module,exports){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(){function n(){e(this,n),this.listeners={}}return t(n,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=undefined;return!!this.listeners[e]&&(n=this.listeners[e].indexOf(t),this.listeners[e].splice(n,1),n>-1)}},{key:"trigger",value:function(e){var t=undefined,n=undefined,r=undefined,i=undefined;if(t=this.listeners[e])if(2===arguments.length)for(r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),r=t.length,n=0;n<r;++n)t[n].apply(this,i)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),n}();exports["default"]=n,module.exports=exports["default"]},{}],16:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a=require("mux.js/lib/mp4/probe"),s=t(a),u=require("mux.js/lib/tools/ts-inspector.js"),l=require("./playlist"),c="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,d=t(c),f="console",p=function(){window.logit&&window[f].log.apply(window[f],arguments)},h=[{name:"VOD",run:function(e,t,n,r){return n!==Infinity?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(e,t,n,r){return e.datetimeToDisplayTime&&t.dateTimeObject?{time:t.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(e,t,n,r){for(var i=t.segments,o=i.length-1;o>=0;o--){var a=i[o];if(a.timeline===r&&"undefined"!=typeof a.start)return{time:a.start,segmentIndex:o}}return null}},{name:"Discontinuity",run:function(e,t,n,r){if(t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var o=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1;if(e.discontinuities[a]){var s={time:e.discontinuities[a].time,segmentIndex:o};return s}}return null}},{name:"Playlist",run:function(e,t,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}];exports.syncPointStrategies=h;var y=function(e){function t(){n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.inspectCache_=undefined,this.timelines=[],this.discontinuities=[],this.datetimeToDisplayTime=null}return r(t,e),i(t,[{key:"getSyncPoint",value:function(e,t,n){for(var r=0;r<h.length;r++){var i=h[r],o=i.run(this,e,t,n);if(o)return p("syncPoint found via <"+i.name+">:",o),o}return null}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence,r=n-1;r>=0;r--){var i=e.segments[r];if("undefined"!=typeof i.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:i.start},p("playlist sync:",t.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.dateTimeObject){var t=e.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,n=undefined;(n=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,n)&&this.saveDiscontinuitySyncInfo_(e)}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=s["default"].timescale(t.map.bytes),r=s["default"].startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=r),{start:r,end:r+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=(0,u.inspect)(e.bytes,this.inspectCache_),n=undefined,r=undefined;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,r=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,r=t.audio[1].dtsTime),{start:n,end:r}):null}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)p("tsO:",e.timestampOffset),r={time:e.timestampOffset,mapping:e.timestampOffset-t.start},this.timelines[e.timeline]=r,n.start=e.timestampOffset,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return this.trigger("syncinfoupdate"),!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],o=t.discontinuitySequence+r+1,a=i-e.mediaIndex;a>0&&(!this.discontinuities[o]||this.discontinuities[o].accuracy>a)&&(this.discontinuities[o]={time:n.end+(0,l.sumDurations)(t,e.mediaIndex+1,i),accuracy:a})}}}]),t}(d["default"].EventTarget);exports["default"]=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist":8,"mux.js/lib/mp4/probe":48,"mux.js/lib/tools/ts-inspector.js":50}],17:[function(require,module,exports){(function(e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,n=function(){return function e(n,r){if(n=(0,t.mergeOptions)({timeout:45e3},n),e.beforeRequest&&"function"==typeof e.beforeRequest){var i=e.beforeRequest(n);i&&(n=i)}var o=(0,t.xhr)(n,function(e,t){!e&&o.response&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=o.response.byteLength||o.response.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),e||o.timedout?o.timedout=o.timedout||"ETIMEDOUT"===e.code:o.timedout=!1,e||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(o&&(o.response||o.responseText)))),r(e,o)});return o.requestTime=Date.now(),o}};exports["default"]=n,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(require,module,exports){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4],o=undefined,a=undefined,s=undefined,u=[],l=[],c=undefined,d=undefined,f=undefined,p=undefined,h=undefined,y=undefined;for(o=0;o<256;o++)l[(u[o]=o<<1^283*(o>>7))^o]=o;for(a=s=0;!r[a];a^=c||1,s=l[s]||1)for(p=s^s<<1^s<<2^s<<3^s<<4,p=p>>8^255&p^99,r[a]=p,i[p]=a,f=u[d=u[c=u[a]]],y=16843009*f^65537*d^257*c^16843008*a,h=257*u[p]^16843008*p,o=0;o<4;o++)t[o][a]=h=h<<24^h>>>8,n[o][p]=y=y<<24^y>>>8;for(o=0;o<5;o++)t[o]=t[o].slice(0),n[o]=n[o].slice(0);return e},r=null,i=function(){function i(t){e(this,i),r||(r=n()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];var o=undefined,a=undefined,s=undefined,u=undefined,l=undefined,c=this._tables[0][4],d=this._tables[1],f=t.length,p=1;if(4!==f&&6!==f&&8!==f)throw new Error("Invalid aes key size");for(u=t.slice(0),l=[],this._key=[u,l],o=f;o<4*f+28;o++)s=u[o-1],(o%f==0||8===f&&o%f==4)&&(s=c[s>>>24]<<24^c[s>>16&255]<<16^c[s>>8&255]<<8^c[255&s],o%f==0&&(s=s<<8^s>>>24^p<<24,p=p<<1^283*(p>>7))),u[o]=u[o-f]^s;for(a=0;o;a++,o--)s=u[3&a?o:o-4],l[a]=o<=4||a<4?s:d[0][c[s>>>24]]^d[1][c[s>>16&255]]^d[2][c[s>>8&255]]^d[3][c[255&s]]}return t(i,[{key:"decrypt",value:function(e,t,n,r,i,o){var a=this._key[1],s=e^a[0],u=r^a[1],l=n^a[2],c=t^a[3],d=undefined,f=undefined,p=undefined,h=a.length/4-2,y=undefined,m=4,g=this._tables[1],v=g[0],_=g[1],b=g[2],w=g[3],T=g[4];for(y=0;y<h;y++)d=v[s>>>24]^_[u>>16&255]^b[l>>8&255]^w[255&c]^a[m],f=v[u>>>24]^_[l>>16&255]^b[c>>8&255]^w[255&s]^a[m+1],p=v[l>>>24]^_[c>>16&255]^b[s>>8&255]^w[255&u]^a[m+2],c=v[c>>>24]^_[s>>16&255]^b[u>>8&255]^w[255&l]^a[m+3],m+=4,s=d,u=f,l=p;for(y=0;y<4;y++)i[(3&-y)+o]=T[s>>>24]<<24^T[u>>16&255]<<16^T[l>>8&255]<<8^T[255&c]^a[m++],d=s,s=u,u=l,l=c,c=d}}]),i}();exports["default"]=i,module.exports=exports["default"]},{}],19:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},o=require("./stream"),a=e(o),s=function(e){function o(){t(this,o),i(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,a["default"]),this.jobs=[],this.delay=1,this.timeout_=null}return n(o,e),r(o,[{key:"processJob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),o}(a["default"]);exports["default"]=s,module.exports=exports["default"]},{"./stream":22}],20:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=require("./aes"),i=e(r),o=require("./async-stream"),a=e(o),s=require("pkcs7"),u=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},l=function(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),o=new i["default"](Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),l=undefined,c=undefined,d=undefined,f=undefined,p=undefined,h=undefined,y=undefined,m=undefined,g=undefined;for(l=n[0],c=n[1],d=n[2],f=n[3],g=0;g<r.length;g+=4)p=u(r[g]),h=u(r[g+1]),y=u(r[g+2]),m=u(r[g+3]),o.decrypt(p,h,y,m,s,g),s[g]=u(s[g]^l),s[g+1]=u(s[g+1]^c),s[g+2]=u(s[g+2]^d),s[g+3]=u(s[g+3]^f),l=p,c=h,d=y,f=m;return a};exports.decrypt=l;var c=function(){function e(n,r,i,o){t(this,e);var l=e.STEP,c=new Int32Array(n.buffer),d=new Uint8Array(n.byteLength),f=0;for(this.asyncStream_=new a["default"],this.asyncStream_.push(this.decryptChunk_(c.subarray(f,f+l),r,i,d)),f=l;f<c.length;f+=l)i=new Uint32Array([u(c[f-4]),u(c[f-3]),u(c[f-2]),u(c[f-1])]),this.asyncStream_.push(this.decryptChunk_(c.subarray(f,f+l),r,i,d));this.asyncStream_.push(function(){o(null,(0,s.unpad)(d))})}return n(e,[{key:"decryptChunk_",value:function(e,t,n,r){return function(){var i=l(e,t,n);r.set(i,e.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),e}();exports.Decrypter=c,exports["default"]={Decrypter:c,decrypt:l}},{"./aes":18,"./async-stream":19,pkcs7:55}],21:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./decrypter"),n=require("./async-stream"),r=e(n);exports["default"]={decrypt:t.decrypt,Decrypter:t.Decrypter,AsyncStream:r["default"]},module.exports=exports["default"]},{"./async-stream":19,"./decrypter":20}],22:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{dup:15}],23:[function(require,module,exports){},{}],24:[function(require,module,exports){(function(e){var t=void 0!==e?e:"undefined"!=typeof window?window:{},n=require("min-document");if("undefined"!=typeof document)module.exports=document;else{var r=t["__GLOBAL_DOCUMENT_CACHE@4"];r||(r=t["__GLOBAL_DOCUMENT_CACHE@4"]=n),module.exports=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":23}],25:[function(require,module,exports){(function(e){"undefined"!=typeof window?module.exports=window:void 0!==e?module.exports=e:"undefined"!=typeof self?module.exports=self:module.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}var t=require("./line-stream"),n=e(t),r=require("./parse-stream"),i=e(r),o=require("./parser"),a=e(o);module.exports={LineStream:n["default"],ParseStream:i["default"],Parser:a["default"]}},{"./line-stream":27,"./parse-stream":28,"./parser":29}],27:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=require("./stream"),a=e(o),s=function(e){function o(){t(this,o);var e=n(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.buffer="",e}return r(o,e),i(o,[{key:"push",value:function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}]),o}(a["default"]);exports["default"]=s},{"./stream":30}],28:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=undefined;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(err){i=!0,o=err}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=require("./stream"),s=e(a),u=function(){var e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},l=function(e){for(var t=e.split(u()),n={},r=t.length,i=void 0;r--;)""!==t[r]&&(i=/([^=]*)=(.*)/.exec(t[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),n[i[0]]=i[1]);return n},c=function(e){function a(){return t(this,a),n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this))}return r(a,e),o(a,[{key:"push",value:function(e){var t=void 0,n=void 0;if(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==e.length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});if(0!==e.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:e.slice(1)});if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var r=l(t[1]);if(r.URI&&(n.uri=r.URI),r.BYTERANGE){var o=r.BYTERANGE.split("@"),a=i(o,2),s=a[0],u=a[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),u&&(n.byterange.offset=parseInt(u,10))}}return void this.trigger("data",n)}if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=l(t[1]),n.attributes.RESOLUTION){var c=n.attributes.RESOLUTION.split("x"),d={};c[0]&&(d.width=parseInt(c[0],10)),c[1]&&(d.height=parseInt(c[1],10)),n.attributes.RESOLUTION=d}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}return void this.trigger("data",n)}if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=l(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))return void this.trigger("data",{type:"tag",tagType:"endlist"});if(t=/^#EXT-X-DISCONTINUITY/.exec(e))return void this.trigger("data",{type:"tag",tagType:"discontinuity"});if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=l(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}]),a}(s["default"]);exports["default"]=c},{"./stream":30}],29:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=require("./stream"),s=e(a),u=require("./line-stream"),l=e(u),c=require("./parse-stream"),d=e(c),f=function(e){function a(){t(this,a);var e=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));e.lineStream=new l["default"],e.parseStream=new d["default"],e.lineStream.pipe(e.parseStream);var r=e,o=[],s={},u=void 0,c=void 0,f=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(e){var t=void 0,n=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(s.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){return e.attributes?"NONE"===e.attributes.METHOD?void(c=null):e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void("undefined"!=typeof e.attributes.IV&&(c.iv=e.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){if(!isFinite(e.number))return void this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});this.manifest.mediaSequence=e.number},"discontinuity-sequence":function(){if(!isFinite(e.number))return void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});this.manifest.discontinuitySequence=e.number,h=e.number},"playlist-type":function(){if(!/VOD|EVENT/.test(e.playlistType))return void this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});this.manifest.playlistType=e.playlistType},map:function(){u={},e.uri&&(u.uri=e.uri),e.byterange&&(u.byterange=e.byterange)},"stream-inf":function(){if(this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||p,!e.attributes)return void this.trigger("warn",{message:"ignoring empty stream-inf attributes"});s.attributes||(s.attributes={}),i(s.attributes,e.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],n={"default":/yes/i.test(e.attributes.DEFAULT)},n["default"]?n.autoselect=!0:n.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(n.language=e.attributes.LANGUAGE),e.attributes.URI&&(n.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(n.instreamId=e.attributes["INSTREAM-ID"]),t[e.attributes.NAME]=n},discontinuity:function(){h+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function(){if(!isFinite(e.duration)||e.duration<0)return void this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});this.manifest.targetDuration=e.duration},totalduration:function(){if(!isFinite(e.duration)||e.duration<0)return void this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration});this.manifest.totalDuration=e.duration},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}})[e.tagType]||f).call(r)},uri:function(){s.uri=e.uri,o.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),c&&(s.key=c),s.timeline=h,u&&(s.map=u),s={}},comment:function(){}})[e.type].call(r)}),e}return r(a,e),o(a,[{key:"push",value:function(e){this.lineStream.push(e)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),a}(s["default"]);exports["default"]=f},{"./line-stream":27,"./parse-stream":28,"./stream":30}],30:[function(require,module,exports){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(){function n(){e(this,n),this.listeners={}}return t(n,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1}},{key:"trigger",value:function(e){var t=this.listeners[e],n=void 0,r=void 0,i=void 0;if(t)if(2===arguments.length)for(r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),r=t.length,n=0;n<r;++n)t[n].apply(this,i)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),n}();exports["default"]=n},{}],31:[function(require,module,exports){"use strict";var e,t=require("../utils/stream.js");e=function(){var t=new Uint8Array,n=0;e.prototype.init.call(this),this.setTimestamp=function(e){n=e},this.parseId3TagSize=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},this.parseAdtsSize=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},this.push=function(e){var r,i,o,a,s=0,u=0;for(t.length?(a=t.length,t=new Uint8Array(e.byteLength+a),t.set(t.subarray(0,a)),t.set(e,a)):t=e;t.length-u>=3;)if(t[u]!=="I".charCodeAt(0)||t[u+1]!=="D".charCodeAt(0)||t[u+2]!=="3".charCodeAt(0))if(t[u]&!0&&240==(240&t[u+1])){if(t.length-u<7)break;if((s=this.parseAdtsSize(t,u))>t.length)break;o={type:"audio",data:t.subarray(u,u+s),pts:n,dts:n},this.trigger("data",o),u+=s}else u++;else{if(t.length-u<10)break;if((s=this.parseId3TagSize(t,u))>t.length)break;i={type:"timed-metadata",data:t.subarray(u,u+s)},this.trigger("data",i),u+=s}r=t.length-u,t=r>0?t.subarray(u):new Uint8Array}},e.prototype=new t,module.exports=e},{"../utils/stream.js":53}],32:[function(require,module,exports){"use strict";var e=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],t=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},n=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},r=function(e,t,r){return unescape(n(e,t,r))},i=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},o=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},a=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":e[t]&!0&&240==(240&e[t+1])?"audio":null},s=function(t){for(var n=0;n+5<t.length;){if(255===t[n]&&240==(246&t[n+1]))return e[(60&t[n+2])>>>2];n++}return null},u=function(e){var n,i,o;n=10,64&e[5]&&(n+=4,n+=t(e.subarray(10,14)));do{if((i=t(e.subarray(n+4,n+8)))<1)return null;if("PRIV"===String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3])){o=e.subarray(n+10,n+i+10);for(var a=0;a<o.byteLength;a++)if(0===o[a]){var s=r(o,0,a);if("com.apple.streaming.transportStreamTimestamp"===s){var u=o.subarray(a+1),l=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;return l*=4,l+=3&u[7]}break}}n+=10,n+=i}while(n<e.byteLength);return null};module.exports={parseId3TagSize:i,parseAdtsSize:o,parseType:a,parseSampleRate:s,parseAacTimestamp:u}},{}],33:[function(require,module,exports){"use strict";var e,t=require("../utils/stream.js"),n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];e=function(){var t;e.prototype.init.call(this),this.push=function(e){var r,i,o,a,s,u,l=0,c=0;if("audio"===e.type)for(t?(a=t,t=new Uint8Array(a.byteLength+e.data.byteLength),t.set(a),t.set(e.data,a.byteLength)):t=e.data;l+5<t.length;)if(255===t[l]&&240==(246&t[l+1])){if(i=2*(1&~t[l+1]),r=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,s=1024*(1+(3&t[l+6])),u=9e4*s/n[(60&t[l+2])>>>2],o=l+r,t.byteLength<o)return;if(this.trigger("data",{pts:e.pts+c*u,dts:e.dts+c*u,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:n[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+i,o)}),t.byteLength===o)return void(t=undefined);c++,t=t.subarray(o)}else l++},this.flush=function(){this.trigger("done")}},e.prototype=new t,module.exports=e},{"../utils/stream.js":53}],34:[function(require,module,exports){"use strict";var e,t,n,r=require("../utils/stream.js"),i=require("../utils/exp-golomb.js");t=function(){var e,n,r=0;t.prototype.init.call(this),this.push=function(t){var i;for(n?(i=new Uint8Array(n.byteLength+t.data.byteLength),i.set(n),i.set(t.data,n.byteLength),n=i):n=t.data;r<n.byteLength-3;r++)if(1===n[r+2]){e=r+5;break}for(;e<n.byteLength;)switch(n[e]){case 0:if(0!==n[e-1]){e+=2;break}if(0!==n[e-2]){e++;break}r+3!==e-2&&this.trigger("data",n.subarray(r+3,e-2));do{e++}while(1!==n[e]&&e<n.length);r=e-2,e+=3;break;case 1:if(0!==n[e-1]||0!==n[e-2]){e+=3;break}this.trigger("data",n.subarray(r+3,e-2)),r=e-2,e+=3;break;default:e+=3}n=n.subarray(r),e-=r,r=0},this.flush=function(){n&&n.byteLength>3&&this.trigger("data",n.subarray(r+3)),n=null,r=0,this.trigger("done")}},t.prototype=new r,n={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},e=function(){var r,o,a,s,u,l,c,d=new t;e.prototype.init.call(this),r=this,this.push=function(e){"video"===e.type&&(o=e.trackId,a=e.pts,s=e.dts,d.push(e))},d.on("data",function(e){var t={trackId:o,pts:a,dts:s,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=u(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=u(e.subarray(1)),t.config=l(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}r.trigger("data",t)}),d.on("done",function(){r.trigger("done")}),this.flush=function(){d.flush()},c=function(e,t){var n,r,i=8,o=8;for(n=0;n<e;n++)0!==o&&(r=t.readExpGolomb(),o=(i+r+256)%256),i=0===o?i:o},u=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},l=function(e){var t,r,o,a,s,u,l,d,f,p,h,y,m,g=0,v=0,_=0,b=0,w=1;if(t=new i(e),r=t.readUnsignedByte(),a=t.readUnsignedByte(),o=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),n[r]&&(s=t.readUnsignedExpGolomb(),3===s&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==s?8:12,m=0;m<h;m++)t.readBoolean()&&(m<6?c(16,t):c(64,t));if(t.skipUnsignedExpGolomb(),0===(u=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===u)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),m=0;m<l;m++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),d=t.readUnsignedExpGolomb(),f=t.readUnsignedExpGolomb(),p=t.readBits(1),0===p&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(w=y[0]/y[1])}return{profileIdc:r,levelIdc:o,profileCompatibility:a,width:Math.ceil((16*(d+1)-2*g-2*v)*w),height:(2-p)*(f+1)*16-2*_-2*b}}},e.prototype=new r,module.exports={H264Stream:e,NalByteStream:t}},{"../utils/exp-golomb.js":52,"../utils/stream.js":53}],35:[function(require,module,exports){var e=[33,16,5,32,164,27],t=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],n=function(e){for(var t=[];e--;)t.push(0);return t},r=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=new Uint8Array(e[n].reduce(function(e,t){return e.concat(t)},[])),t},{})},i={96e3:[e,[227,64],n(154),[56]],88200:[e,[231],n(170),[56]],64e3:[e,[248,192],n(240),[56]],48e3:[e,[255,192],n(268),[55,148,128],n(54),[112]],44100:[e,[255,192],n(268),[55,163,128],n(84),[112]],32e3:[e,[255,192],n(268),[55,234],n(226),[112]],24e3:[e,[255,192],n(268),[55,255,128],n(268),[111,112],n(126),[224]],16e3:[e,[255,192],n(268),[55,255,128],n(268),[111,255],n(269),[223,108],n(195),[1,192]],12e3:[t,n(268),[3,127,248],n(268),[6,255,240],n(268),[13,255,224],n(268),[27,253,128],n(259),[56]],11025:[t,n(268),[3,127,248],n(268),[6,255,240],n(268),[13,255,224],n(268),[27,255,192],n(268),[55,175,128],n(108),[112]],8e3:[t,n(268),[3,121,16],n(47),[7]]};module.exports=r(i)},{}],36:[function(require,module,exports){"use strict";var e=require("../utils/stream.js"),t=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,t.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};t.prototype=new e,t.prototype.flush=function(e){var t,n,r,i,o={tags:{},captions:[],metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&++this.processedTracks<this.numberOfTracks)return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?i=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(i=this.audioTrack.timelineStartInfo.pts),o.tags.videoTags=this.videoTags,o.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)n=this.pendingCaptions[r],n.startTime=n.startPts-i,n.startTime/=9e4,n.endTime=n.endPts-i,n.endTime/=9e4,o.captions.push(n);for(r=0;r<this.pendingMetadata.length;r++)t=this.pendingMetadata[r],t.cueTime=t.pts-i,t.cueTime/=9e4,o.metadata.push(t);o.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",o),this.trigger("done")}},module.exports=t},{"../utils/stream.js":53}],37:[function(require,module,exports){"use strict";var e;e=function(t,n){var r,i=0,o=16384,a=function(e,t){var n,r=e.position+t;r<e.bytes.byteLength||(n=new Uint8Array(2*r),n.set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},s=e.widthBytes||new Uint8Array("width".length),u=e.heightBytes||new Uint8Array("height".length),l=e.videocodecidBytes||new Uint8Array("videocodecid".length);if(!e.widthBytes){for(r=0;r<"width".length;r++)s[r]="width".charCodeAt(r);for(r=0;r<"height".length;r++)u[r]="height".charCodeAt(r);for(r=0;r<"videocodecid".length;r++)l[r]="videocodecid".charCodeAt(r);e.widthBytes=s,e.heightBytes=u,e.videocodecidBytes=l}switch(this.keyFrame=!1,t){case e.VIDEO_TAG:this.length=16,o*=6;break;case e.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case e.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(o),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=n,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var r,i=t||0;n=n||e.byteLength,r=i+n,a(this,n),this.bytes.set(e.subarray(i,r),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(i>0)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===i+4?this.length-=4:i>0&&(t=i+4,n=this.length-t,this.position=i,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),i=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(s,this.position),this.position+=5;else if("height"===e)this.bytes.set(u,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var t,r;switch(this.bytes[0]){case e.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||n?16:32),this.bytes[12]=n?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case e.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=n?0:1;break;case e.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return r=this.length-11,this.bytes[1]=(16711680&r)>>>16,this.bytes[2]=(65280&r)>>>8,this.bytes[3]=(255&r)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=e.frameTime(this.bytes),this}},e.AUDIO_TAG=8,e.VIDEO_TAG=9,e.METADATA_TAG=18,e.isAudioFrame=function(t){return e.AUDIO_TAG===t[0]},e.isVideoFrame=function(t){return e.VIDEO_TAG===t[0]},e.isMetaData=function(t){return e.METADATA_TAG===t[0]},e.isKeyFrame=function(t){return e.isVideoFrame(t)?23===t[11]:!!e.isAudioFrame(t)||!!e.isMetaData(t)},e.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},module.exports=e},{}],38:[function(require,module,exports){module.exports={tag:require("./flv-tag"),Transmuxer:require("./transmuxer")}},{"./flv-tag":37,"./transmuxer":39}],39:[function(require,module,exports){"use strict";var e,t,n,r,i,o,a=require("../utils/stream.js"),s=require("./flv-tag.js"),u=require("../m2ts/m2ts.js"),l=require("../codecs/adts.js"),c=require("../codecs/h264").H264Stream,d=require("./coalesce-stream.js");r=function(e,t){"number"==typeof t.pts&&(e.timelineStartInfo.pts===undefined?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(e.timelineStartInfo.dts===undefined?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},i=function(e,t){var n=new s(s.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},o=function(e,t){var n,r=new s(s.VIDEO_TAG,!0);for(r.dts=t,r.pts=t,r.writeByte(1),r.writeByte(e.profileIdc),r.writeByte(e.profileCompatibility),r.writeByte(e.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(e.sps[0].length),r.writeBytes(e.sps[0]),r.writeByte(e.pps.length),n=0;n<e.pps.length;++n)r.writeShort(e.pps[n].length),r.writeBytes(e.pps[n]);return r},n=function(e){var t,i=[];n.prototype.init.call(this),this.push=function(t){r(e,t),e&&e.channelcount===undefined&&(e.audioobjecttype=t.audioobjecttype,e.channelcount=t.channelcount,e.samplerate=t.samplerate,e.samplingfrequencyindex=t.samplingfrequencyindex,e.samplesize=t.samplesize,e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),i.push(t)},this.flush=function(){var n,r,o,a=[];if(0===i.length)return void this.trigger("done","AudioSegmentStream");for(o=-Infinity;i.length;)n=i.shift(),(e.extraData!==t||n.pts-o>=1e3)&&(r=new s(s.METADATA_TAG),r.pts=n.pts,r.dts=n.dts,r.writeMetaDataDouble("audiocodecid",10),r.writeMetaDataBoolean("stereo",2===e.channelcount),r.writeMetaDataDouble("audiosamplerate",e.samplerate),r.writeMetaDataDouble("audiosamplesize",16),a.push(r),t=e.extraData,r=new s(s.AUDIO_TAG,!0),r.pts=n.pts,r.dts=n.dts,r.view.setUint16(r.position,e.extraData),r.position+=2,r.length=Math.max(r.length,r.position),a.push(r),o=n.pts),r=new s(s.AUDIO_TAG),r.pts=n.pts,r.dts=n.dts,r.writeBytes(n.data),a.push(r);t=null,this.trigger("data",{track:e,tags:a}),this.trigger("done","AudioSegmentStream")}},n.prototype=new a,t=function(e){var n,a,u=[];t.prototype.init.call(this),this.finishFrame=function(t,r){r&&(n&&e&&e.newMetadata&&(r.keyFrame||0===t.length)&&(t.push(i(n,r.dts)),t.push(o(e,r.dts)),e.newMetadata=!1),r.endNalUnit(),t.push(r),a=null)},this.push=function(t){r(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),u.push(t)},this.flush=function(){for(var t,r=[];u.length&&"access_unit_delimiter_rbsp"!==u[0].nalUnitType;)u.shift();if(0===u.length)return void this.trigger("done","VideoSegmentStream");for(;u.length;)t=u.shift(),"seq_parameter_set_rbsp"===t.nalUnitType?(e.newMetadata=!0,n=t.config,e.width=n.width,e.height=n.height,e.sps=[t.data],e.profileIdc=n.profileIdc,e.levelIdc=n.levelIdc,e.profileCompatibility=n.profileCompatibility,a.endNalUnit()):"pic_parameter_set_rbsp"===t.nalUnitType?(e.newMetadata=!0,e.pps=[t.data],a.endNalUnit()):"access_unit_delimiter_rbsp"===t.nalUnitType?(a&&this.finishFrame(r,a),a=new s(s.VIDEO_TAG),a.pts=t.pts,a.dts=t.dts):("slice_layer_without_partitioning_rbsp_idr"===t.nalUnitType&&(a.keyFrame=!0),a.endNalUnit()),a.startNalUnit(),a.writeBytes(t.data);a&&this.finishFrame(r,a),this.trigger("data",{track:e,tags:r}),this.trigger("done","VideoSegmentStream")}},t.prototype=new a,e=function(r){var i,o,a,f,p,h,y,m,g,v,_,b,w=this;e.prototype.init.call(this),r=r||{},this.metadataStream=new u.MetadataStream,r.metadataStream=this.metadataStream,i=new u.TransportPacketStream,o=new u.TransportParseStream,a=new u.ElementaryStream,f=new u.TimestampRolloverStream("video"),p=new u.TimestampRolloverStream("audio"),h=new u.TimestampRolloverStream("timed-metadata"),y=new l,m=new c,b=new d(r),i.pipe(o).pipe(a),a.pipe(f).pipe(m),a.pipe(p).pipe(y),a.pipe(h).pipe(this.metadataStream).pipe(b),_=new u.CaptionStream,m.pipe(_).pipe(b),a.on("data",function(e){var r,i,o;if("metadata"===e.type){for(r=e.tracks.length;r--;)"video"===e.tracks[r].type?i=e.tracks[r]:"audio"===e.tracks[r].type&&(o=e.tracks[r]);i&&!g&&(b.numberOfTracks++,g=new t(i),m.pipe(g).pipe(b)),o&&!v&&(b.numberOfTracks++,v=new n(o),y.pipe(v).pipe(b))}}),this.push=function(e){i.push(e)},this.flush=function(){i.flush()},b.on("data",function(e){w.trigger("data",e)}),b.on("done",function(){w.trigger("done")}),this.getFlvHeader=function(e,t,n){var r,i,o,a=new Uint8Array(9),u=new DataView(a.buffer);return e=e||0,t=t===undefined||t,n=n===undefined||n,u.setUint8(0,70),u.setUint8(1,76),u.setUint8(2,86),u.setUint8(3,1),u.setUint8(4,(t?4:0)|(n?1:0)),u.setUint32(5,a.byteLength),e<=0?(i=new Uint8Array(a.byteLength+4),i.set(a),i.set([0,0,0,0],a.byteLength),i):(r=new s(s.METADATA_TAG),r.pts=r.dts=0,r.writeMetaDataDouble("duration",e),o=r.finalize().length,i=new Uint8Array(a.byteLength+o),i.set(a),i.set(u.byteLength,o),i)}},e.prototype=new a,module.exports=e},{"../codecs/adts.js":33,"../codecs/h264":34,"../m2ts/m2ts.js":41,"../utils/stream.js":53,"./coalesce-stream.js":36,"./flv-tag.js":37}],40:[function(require,module,exports){"use strict";var e=4,t=128,n=require("../utils/stream"),r=function(n){for(var r=0,i={payloadType:-1,payloadSize:0},o=0,a=0;r<n.byteLength&&n[r]!==t;){for(;255===n[r];)o+=255,r++;for(o+=n[r++];255===n[r];)a+=255,r++;if(a+=n[r++],!i.payload&&o===e){i.payloadType=o,i.payloadSize=a,i.payload=n.subarray(r,r+a);break}r+=a,o=0,a=0}return i},i=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},o=function(e,t){var n,r,i,o,a=[];if(!(64&t[0]))return a;for(r=31&t[0],n=0;n<r;n++)i=3*n,o={type:3&t[i+2],pts:e},4&t[i+2]&&(o.ccData=t[i+3]<<8|t[i+4],a.push(o));return a},a=function(){a.prototype.init.call(this),this.captionPackets_=[],this.field1_=new w,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};a.prototype=new n,a.prototype.push=function(t){var n,a;"sei_rbsp"===t.nalUnitType&&(n=r(t.escapedRBSP),n.payloadType===e&&(a=i(n))&&(this.captionPackets_=this.captionPackets_.concat(o(t.pts,a))))},a.prototype.flush=function(){if(!this.captionPackets_.length)return void this.field1_.flush();this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,this.field1_.flush()};var s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},u=function(e){return null===e?"":(e=s[e]||e,String.fromCharCode(e))},l=0,c=5152,d=5167,f=5157,p=5158,h=5159,y=5165,m=5153,g=5164,v=5166,_=14,b=function(){for(var e=[],t=_+1;t--;)e.push("");return e},w=function(){w.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=b(),this.nonDisplayed_=b(),this.lastControlCode_=null,this.push=function(e){if(0===e.type){var t,n,r,i;if((t=32639&e.ccData)===this.lastControlCode_)return void(this.lastControlCode_=null);switch(this.lastControlCode_=4096==(61440&t)?t:null,t){case l:break;case c:this.mode_="popOn";break;case d:this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;break;case f:this.topRow_=_-1,this.mode_="rollUp";break;case p:this.topRow_=_-2,this.mode_="rollUp";break;case h:this.topRow_=_-3,this.mode_="rollUp";break;case y:this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;break;case m:"popOn"===this.mode_?this.nonDisplayed_[_]=this.nonDisplayed_[_].slice(0,-1):this.displayed_[_]=this.displayed_[_].slice(0,-1);break;case g:this.flushDisplayed(e.pts),this.displayed_=b();break;case v:this.nonDisplayed_=b();break;default:if(r=t>>>8,i=255&t,r>=16&&r<=23&&i>=64&&i<=127&&(16!==r||i<96)&&(r=32,i=null),(17===r||25===r)&&i>=48&&i<=63&&(r=9834,i=""),16==(240&r))return;0===r&&(r=null),0===i&&(i=null),this[this.mode_](e.pts,r,i)}}}};w.prototype=new n,w.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).filter(function(e){return e.length}).join("\n");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t})},w.prototype.popOn=function(e,t,n){var r=this.nonDisplayed_[_];r+=u(t),r+=u(n),this.nonDisplayed_[_]=r},w.prototype.rollUp=function(e,t,n){var r=this.displayed_[_];""===r&&(this.flushDisplayed(e),this.startPts_=e),r+=u(t),r+=u(n),this.displayed_[_]=r},w.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;e<_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[_]=""},module.exports={CaptionStream:a,Cea608Stream:w}},{"../utils/stream":53}],41:[function(require,module,exports){"use strict";var e,t,n,r=require("../utils/stream.js"),i=require("./caption-stream"),o=require("./stream-types"),a=require("./timestamp-rollover-stream").TimestampRolloverStream,s=require("./stream-types.js"),u=188,l=71;e=function(){var t=new Uint8Array(u),n=0;e.prototype.init.call(this),this.push=function(e){var r,i=0,o=u;for(n?(r=new Uint8Array(e.byteLength+n),r.set(t.subarray(0,n)),r.set(e,n),n=0):r=e;o<r.byteLength;)r[i]!==l||r[o]!==l?(i++,o++):(this.trigger("data",r.subarray(i,o)),i+=u,o+=u);i<r.byteLength&&(t.set(r.subarray(i),0),n=r.byteLength-i)},this.flush=function(){n===u&&t[0]===l&&(this.trigger("data",t),n=0),this.trigger("done")}},e.prototype=new r,t=function(){var e,n,r,i;t.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=undefined,e=function(e,t){var i=0;t.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===t.type?n(e.subarray(i),t):r(e.subarray(i),t)},n=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},r=function(e,t){var n,r,o,a;if(1&e[5]){for(i.programMapTable={},n=(15&e[1])<<8|e[2],r=3+n-4,o=(15&e[10])<<8|e[11],a=12+o;a<r;)i.programMapTable[(31&e[a+1])<<8|e[a+2]]=e[a],a+=5+((15&e[a+3])<<8|e[a+4]);for(t.programMapTable=i.programMapTable;i.packetsWaitingForPmt.length;)i.processPes_.apply(i,i.packetsWaitingForPmt.shift())}},this.push=function(t){var n={},r=4;n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid?(n.type="pat",e(t.subarray(r),n),this.trigger("data",n)):n.pid===this.pmtPid?(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n)):this.programMapTable===undefined?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.streamType=this.programMapTable[n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},t.prototype=new r,t.STREAM_TYPES={h264:27,adts:15},n=function(){var e=this,t={data:[],size:0},r={data:[],size:0},i={data:[],size:0},a=function(e,t){var n;t.dataAlignmentIndicator=0!=(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},u=function(t,n){var r,i=new Uint8Array(t.size),o={type:n},s=0;if(t.data.length){for(o.trackId=t.data[0].pid;t.data.length;)r=t.data.shift(),i.set(r.data,s),s+=r.data.byteLength;a(i,o),t.size=0,e.trigger("data",o)}};n.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,a;switch(n.streamType){case o.H264_STREAM_TYPE:case s.H264_STREAM_TYPE:e=t,a="video";break;case o.ADTS_STREAM_TYPE:e=r,a="audio";break;case o.METADATA_STREAM_TYPE:e=i,a="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&u(e,a),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var t,r,i={type:"metadata",tracks:[]},o=n.programMapTable;for(t in o)o.hasOwnProperty(t)&&(r={timelineStartInfo:{baseMediaDecodeTime:0}},r.id=+t,o[t]===s.H264_STREAM_TYPE?(r.codec="avc",r.type="video"):o[t]===s.ADTS_STREAM_TYPE&&(r.codec="adts",r.type="audio"),i.tracks.push(r));e.trigger("data",i)}})[n.type]()},this.flush=function(){u(t,"video"),u(r,"audio"),u(i,"timed-metadata"),this.trigger("done")}},n.prototype=new r;var c={PAT_PID:0,MP2T_PACKET_LENGTH:u,TransportPacketStream:e,TransportParseStream:t,ElementaryStream:n,TimestampRolloverStream:a,CaptionStream:i.CaptionStream,Cea608Stream:i.Cea608Stream,MetadataStream:require("./metadata-stream")};for(var d in o)o.hasOwnProperty(d)&&(c[d]=o[d]);module.exports=c},{"../utils/stream.js":53,"./caption-stream":40,"./metadata-stream":42,"./stream-types":44,"./stream-types.js":44,"./timestamp-rollover-stream":45}],42:[function(require,module,exports){"use strict";var e,t=require("../utils/stream"),n=require("./stream-types"),r=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},i=function(e,t,n){return decodeURIComponent(r(e,t,n))},o=function(e,t,n){return unescape(r(e,t,n))},a=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},s={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=i(e.data,1,t),e.value=i(e.data,t+1,e.data.length-1);break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=i(e.data,1,t),e.url=i(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=o(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};e=function(t){var r,i={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},o=0,u=[],l=0;if(e.prototype.init.call(this),this.dispatchType=n.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(r=0;r<i.descriptor.length;r++)this.dispatchType+=("00"+i.descriptor[r].toString(16)).slice(-2);this.push=function(e){var t,n,r,c,d,f;if("timed-metadata"===e.type){if(e.dataAlignmentIndicator&&(l=0,u.length=0),0===u.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))return void(i.debug&&console.log("Skipping unrecognized metadata packet"));if(u.push(e),l+=e.data.byteLength,1===u.length&&(o=a(e.data.subarray(6,10)),o+=10),!(l<o)){for(t={data:new Uint8Array(o),frames:[],pts:u[0].pts,dts:u[0].dts},d=0;d<o;)t.data.set(u[0].data.subarray(0,o-d),d),d+=u[0].data.byteLength,l-=u[0].data.byteLength,u.shift();n=10,64&t.data[5]&&(n+=4,n+=a(t.data.subarray(10,14)),o-=a(t.data.subarray(16,20)));do{if((r=a(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(f=String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),c={id:f,data:t.data.subarray(n+10,n+r+10)},c.key=c.id,s[c.id]&&(s[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner)){var p=c.data,h=(1&p[3])<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;h*=4,h+=3&p[7],c.timeStamp=h,t.pts===undefined&&t.dts===undefined&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c)}t.frames.push(c),n+=10,n+=r}while(n<o);this.trigger("data",t)}}}},e.prototype=new t,module.exports=e},{"../utils/stream":53,"./stream-types":44}],43:[function(require,module,exports){"use strict";var e=require("./stream-types.js"),t=function(e){var t=31&e[1];return t<<=8,t|=e[2]},n=function(e){return!!(64&e[1])},r=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},i=function(e,n){var r=t(e);return 0===r?"pat":r===n?"pmt":n?"pes":null},o=function(e){var t=n(e),i=4+r(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},a=function(e){var t={},i=n(e),o=4+r(e);if(i&&(o+=e[o]+1),1&e[o+5]){var a,s,u;a=(15&e[o+1])<<8|e[o+2],s=3+a-4,u=(15&e[o+10])<<8|e[o+11];for(var l=12+u;l<s;){var c=o+l;t[(31&e[c+1])<<8|e[c+2]]=e[c],l+=5+((15&e[c+3])<<8|e[c+4])}return t}},s=function(n,r){switch(r[t(n)]){case e.H264_STREAM_TYPE:return"video";case e.ADTS_STREAM_TYPE:return"audio";case e.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},u=function(e){if(!n(e))return null;var t,i=4+r(e),o={};return t=e[i+7],192&t&&(o.pts=(14&e[i+9])<<27|(255&e[i+10])<<20|(254&e[i+11])<<12|(255&e[i+12])<<5|(254&e[i+13])>>>3,o.pts*=4,o.pts+=(6&e[i+13])>>>1,o.dts=o.pts,64&t&&(o.dts=(14&e[i+14])<<27|(255&e[i+15])<<20|(254&e[i+16])<<12|(255&e[i+17])<<5|(254&e[i+18])>>>3,o.dts*=4,o.dts+=(6&e[i+18])>>>1)),o},l=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},c=function(e){for(var t,n=4+r(e),i=e.subarray(n),o=0,a=0,s=!1;a<i.byteLength-3;a++)if(1===i[a+2]){o=a+5;break}for(;o<i.byteLength;)switch(i[o]){case 0:if(0!==i[o-1]){o+=2;break}if(0!==i[o-2]){o++;break}a+3!==o-2&&"slice_layer_without_partitioning_rbsp_idr"===(t=l(31&i[a+3]))&&(s=!0);do{o++}while(1!==i[o]&&o<i.length);a=o-2,o+=3;break;case 1:if(0!==i[o-1]||0!==i[o-2]){o+=3;break}t=l(31&i[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(s=!0),a=o-2,o+=3;break;default:o+=3}return i=i.subarray(a),o-=a,a=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===(t=l(31&i[a+3]))&&(s=!0),s};module.exports={parseType:i,parsePat:o,parsePmt:a,parsePayloadUnitStartIndicator:n,parsePesType:s,parsePesTime:u,videoPacketContainsKeyFrame:c}},{"./stream-types.js":44}],44:[function(require,module,exports){"use strict";module.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],45:[function(require,module,exports){"use strict";var e=require("../utils/stream"),t=8589934592,n=4294967296,r=function(e,r){var i=1;for(e>r&&(i=-1);Math.abs(r-e)>n;)e+=i*t;return e},i=function(e){var t,n;i.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(n===undefined&&(n=e.dts),e.dts=r(e.dts,n),e.pts=r(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")}};i.prototype=new e,module.exports={TimestampRolloverStream:i,handleRollover:r}},{"../utils/stream":53}],46:[function(require,module,exports){module.exports={generator:require("./mp4-generator"),Transmuxer:require("./transmuxer").Transmuxer,AudioSegmentStream:require("./transmuxer").AudioSegmentStream,VideoSegmentStream:require("./transmuxer").VideoSegmentStream}},{"./mp4-generator":47,"./transmuxer":49}],47:[function(require,module,exports){"use strict";var e,t,n,r,i,o,a,s,u,l,c,d,f,p,h,y,m,g,v,_,b,w,T,S,E,k,O,C,P,j,x,A,I,M,L,R,D=Math.pow(2,32)-1;!function(){var e;if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),C=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:O,audio:C},A=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0]),I=new Uint8Array([0,0,0,0,0,0,0,0]),M=I,L=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=I,j=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(e){var t,n,r,i=[],o=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)o+=i[t].byteLength;for(n=new Uint8Array(o+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength),r.setUint32(0,n.byteLength),n.set(e,4),t=0,o=8;t<i.length;t++)n.set(i[t],o),o+=i[t].byteLength;return n},t=function(){return e(T.dinf,e(T.dref,A))},n=function(t){return e(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},r=function(){return e(T.ftyp,S,E,S,k)},y=function(t){return e(T.hdlr,P[t])},i=function(t){return e(T.mdat,t)},h=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(n[12]=t.samplerate>>>24&255,n[13]=t.samplerate>>>16&255,n[14]=t.samplerate>>>8&255,n[15]=255&t.samplerate),e(T.mdhd,n)},p=function(t){return e(T.mdia,h(t),y(t.type),a(t))},o=function(t){return e(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},a=function(n){return e(T.minf,"video"===n.type?e(T.vmhd,j):e(T.smhd,x),t(),g(n))},s=function(t,n){for(var r=[],i=n.length;i--;)r[i]=_(n[i]);return e.apply(null,[T.moof,o(t)].concat(r))},u=function(t){for(var n=t.length,r=[];n--;)r[n]=d(t[n]);return e.apply(null,[T.moov,c(4294967295)].concat(r).concat(l(t)))},l=function(t){for(var n=t.length,r=[];n--;)r[n]=b(t[n]);return e.apply(null,[T.mvex].concat(r))},c=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(T.mvhd,n)},m=function(t){var n,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e(T.sdtp,o)},g=function(t){return e(T.stbl,v(t),e(T.stts,R),e(T.stsc,M),e(T.stsz,L),e(T.stco,I))},function(){var t,r;v=function(n){return e(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?t(n):r(n))},t=function(t){var n,r=t.sps||[],i=t.pps||[],o=[],a=[];for(n=0;n<r.length;n++)o.push((65280&r[n].byteLength)>>>8),o.push(255&r[n].byteLength),o=o.concat(Array.prototype.slice.call(r[n]));for(n=0;n<i.length;n++)a.push((65280&i[n].byteLength)>>>8),a.push(255&i[n].byteLength),a=a.concat(Array.prototype.slice.call(i[n]));return e(T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(T.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length]).concat(o).concat([i.length]).concat(a))),e(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},r=function(t){return e(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),n(t))}}(),f=function(t){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return e(T.tkhd,n)},_=function(t){var n,r,i,o,a,s,u;return n=e(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/(D+1)),u=Math.floor(t.baseMediaDecodeTime%(D+1)),r=e(T.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),a=92,"audio"===t.type?(i=w(t,a),e(T.traf,n,r,i)):(o=m(t),i=w(t,o.length+a),e(T.traf,n,r,i,o))},d=function(t){return t.duration=t.duration||4294967295,e(T.trak,f(t),p(t))},b=function(t){var n=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(n[n.length-1]=0),e(T.trex,n)},function(){var t,n,r;r=function(e,t){var n=0,r=0,i=0,o=0;return e.length&&(e[0].duration!==undefined&&(n=1),e[0].size!==undefined&&(r=2),e[0].flags!==undefined&&(i=4),e[0].compositionTimeOffset!==undefined&&(o=8)),[0,0,n|r|i|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},n=function(t,n){var i,o,a,s;for(o=t.samples||[],n+=20+16*o.length,i=r(o,n),s=0;s<o.length;s++)a=o[s],i=i.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return e(T.trun,new Uint8Array(i))},t=function(t,n){var i,o,a,s;for(o=t.samples||[],n+=20+8*o.length,i=r(o,n),s=0;s<o.length;s++)a=o[s],i=i.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return e(T.trun,new Uint8Array(i))},w=function(e,r){return"audio"===e.type?t(e,r):n(e,r)}}(),module.exports={ftyp:r,mdat:i,moof:s,moov:u,initSegment:function(e){var t,n=r(),i=u(e);return t=new Uint8Array(n.byteLength+i.byteLength),t.set(n),t.set(i,n.byteLength),t}}},{}],48:[function(require,module,exports){"use strict";var e,t,n,r;e=function(n,r){var i,o,a,s,u,l=[];if(!r.length)return null;for(i=0;i<n.byteLength;)o=n[i]<<24,o|=n[i+1]<<16,o|=n[i+2]<<8,o|=n[i+3],a=t(n.subarray(i+4,i+8)),s=o>1?i+o:n.byteLength,a===r[0]&&(1===r.length?l.push(n.subarray(i+8,s)):(u=e(n.subarray(i+8,s),r.slice(1)),u.length&&(l=l.concat(u)))),i=s;return l},t=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},n=function(t){var n={};return e(t,["moov","trak"]).reduce(function(t,n){var r,version,i,o,a;return(r=e(n,["tkhd"])[0])?(version=r[0],i=0===version?12:20,o=r[i]<<24|r[i+1]<<16|r[i+2]<<8|r[i+3],(a=e(n,["mdia","mdhd"])[0])?(version=a[0],i=0===version?12:20,t[o]=a[i]<<24|a[i+1]<<16|a[i+2]<<8|a[i+3],t):null):null},n)},r=function(t,n){var r,i,o;return r=e(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return e(n,["tfhd"]).map(function(r){var i,o,a;return i=r[4]<<24|r[5]<<16|r[6]<<8|r[7],o=t[i]||9e4,a=e(n,["tfdt"]).map(function(e){var version,t;return version=e[0],t=e[4]<<24|e[5]<<16|e[6]<<8|e[7],1===version&&(t*=Math.pow(2,32),t+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t})[0],(a=a||Infinity)/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},module.exports={parseType:t,timescale:n,startTime:r}},{}],49:[function(require,module,exports){"use strict";var e,t,n,r,i,o,a,s,u,l,c,d=require("../utils/stream.js"),f=require("./mp4-generator.js"),p=require("../m2ts/m2ts.js"),h=require("../codecs/adts.js"),y=require("../codecs/h264").H264Stream,m=require("../aac"),g=require("../data/silence"),v=require("../utils/clock"),_=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],b=["width","height","profileIdc","levelIdc","profileCompatibility"],w=9e4;i=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},o=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},l=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},c=function(e){var t,n,r=0;for(t=0;t<e.length;t++)n=e[t],r+=n.data.byteLength;return r},t=function(e){var n=[],r=0,i=0,o=0,l=Infinity;t.prototype.init.call(this),this.push=function(t){a(e,t),e&&_.forEach(function(n){e[n]=t[n]}),n.push(t)},this.setEarliestDts=function(t){i=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){l=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var t,i,o,a;if(0===n.length)return void this.trigger("done","AudioSegmentStream");t=this.trimAdtsFramesByEarliestDts_(n),e.baseMediaDecodeTime=u(e),this.prefixWithSilence_(e,t),e.samples=this.generateSampleTable_(t),o=f.mdat(this.concatenateFrameData_(t)),n=[],i=f.moof(r,[e]),a=new Uint8Array(i.byteLength+o.byteLength),r++,a.set(i),a.set(o,i.byteLength),s(e),this.trigger("data",{track:e,boxes:a}),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var n,r,i,a=0,s=0,u=0,c=0;if(t.length&&(n=v.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),o&&l&&o<n&&(s=n-l,a=Math.ceil(w/(e.samplerate/1024)),u=Math.floor(s/a),c=u*a),!(u<1||c>w/2))){for(r=g[e.samplerate],r||(r=t[0].data),i=0;i<u;i++)t.splice(i,0,{data:r});e.baseMediaDecodeTime-=Math.floor(v.videoTsToAudioTs(c,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=i?t:(e.minSegmentDts=Infinity,t.filter(function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},this.concatenateFrameData_=function(e){var t,n,r=0,i=new Uint8Array(c(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}},t.prototype=new d,e=function(t){var n,r,o=0,c=[];e.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){a(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],b.forEach(function(e){t[e]=n[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),c.push(e)},this.flush=function(){for(var e,n,r,i,s,l;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0===c.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");e=this.groupNalsIntoFrames_(c),r=this.groupFramesIntoGops_(e),r[0][0].keyFrame||(n=this.getGopForFusion_(c[0],t),n?(r.unshift(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.pts=n.pts,r.dts=n.dts,r.duration+=n.duration):r=this.extendFirstKeyFrame_(r)),a(t,r),t.samples=this.generateSampleTable_(r),s=f.mdat(this.concatenateNalData_(r)),this.gopCache_.unshift({gop:r.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],t.baseMediaDecodeTime=u(t),this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),i=f.moof(o,[t]),l=new Uint8Array(i.byteLength+s.byteLength),o++,l.set(i),l.set(s,i.byteLength),this.trigger("data",{track:t,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){s(t),n=undefined,r=undefined},this.getGopForFusion_=function(e){var n,r,i,o,a,s=Infinity;for(a=0;a<this.gopCache_.length;a++)o=this.gopCache_[a],i=o.gop,t.pps&&l(t.pps[0],o.pps[0])&&t.sps&&l(t.sps[0],o.sps[0])&&(i.dts<t.timelineStartInfo.dts||(n=e.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||s>n)&&(r=o,s=n));return r?r.gop:null},this.extendFirstKeyFrame_=function(e){var t;return e[0][0].keyFrame||(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,n,r=[],i=[];for(r.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),r=[n],r.byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i},this.groupFramesIntoGops_=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),r=[n],r.nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},this.generateSampleTable_=function(e,t){var n,r,o,a,s,u=t||0,l=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)s=a[r],o=i(),o.dataOffset=u,o.compositionTimeOffset=s.pts-s.dts,o.duration=s.duration,o.size=4*s.length,o.size+=s.byteLength,s.keyFrame&&(o.flags.dependsOn=2),u+=o.size,l.push(o);return l},this.concatenateNalData_=function(e){var t,n,r,i,o,a,s=0,u=e.byteLength,l=e.nalCount,c=u+4*l,d=new Uint8Array(c),f=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(o=i[n],r=0;r<o.length;r++)a=o[r],f.setUint32(s,a.data.byteLength),s+=4,d.set(a.data,s),s+=a.data.byteLength;return d}},e.prototype=new d,a=function(e,t){"number"==typeof t.pts&&(e.timelineStartInfo.pts===undefined&&(e.timelineStartInfo.pts=t.pts),e.minSegmentPts===undefined?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),e.maxSegmentPts===undefined?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(e.timelineStartInfo.dts===undefined&&(e.timelineStartInfo.dts=t.dts),e.minSegmentDts===undefined?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.maxSegmentDts===undefined?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},s=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},u=function(e){var t,n,r=e.minSegmentDts-e.timelineStartInfo.dts;return t=e.timelineStartInfo.baseMediaDecodeTime,t+=r,t=Math.max(0,t),"audio"===e.type&&(n=e.samplerate/w,t*=n,t=Math.floor(t)),t},r=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,r.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}},r.prototype=new d,r.prototype.flush=function(e){var t,n,r,i,o=0,a={captions:[],metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,b.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,_.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,r=f.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(r.byteLength),a.initSegment.set(r),a.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)a.data.set(this.pendingBoxes[i],o),o+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)t=this.pendingCaptions[i],t.startTime=t.startPts-s,t.startTime/=9e4,t.endTime=t.endPts-s,t.endTime/=9e4,a.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)n=this.pendingMetadata[i],n.cueTime=n.pts-s,n.cueTime/=9e4,a.metadata.push(n);a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},n=function(i){var a,u,l=this,c=!0;n.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new p.MetadataStream,e.aacStream=new m,e.audioTimestampRolloverStream=new p.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new p.TimestampRolloverStream("timed-metadata"),e.adtsStream=new h,e.coalesceStream=new r(i,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(n){"timed-metadata"!==n.type||e.audioSegmentStream||(u=u||{timelineStartInfo:{baseMediaDecodeTime:l.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new t(u),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};this.transmuxPipeline_=n,n.type="ts",n.metadataStream=new p.MetadataStream,n.packetStream=new p.TransportPacketStream,n.parseStream=new p.TransportParseStream,n.elementaryStream=new p.ElementaryStream,n.videoTimestampRolloverStream=new p.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new p.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new p.TimestampRolloverStream("timed-metadata"),n.adtsStream=new h,n.h264Stream=new y,n.captionStream=new p.CaptionStream,n.coalesceStream=new r(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(r){var i;if("metadata"===r.type){for(i=r.tracks.length;i--;)a||"video"!==r.tracks[i].type?u||"audio"!==r.tracks[i].type||(u=r.tracks[i],u.timelineStartInfo.baseMediaDecodeTime=l.baseMediaDecodeTime):(a=r.tracks[i],a.timelineStartInfo.baseMediaDecodeTime=l.baseMediaDecodeTime);a&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new e(a),n.videoSegmentStream.on("timelineStartInfo",function(e){u&&(u.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){u&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),u&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new t(u),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e,u&&(u.timelineStartInfo.dts=undefined,u.timelineStartInfo.pts=undefined,s(u),u.timelineStartInfo.baseMediaDecodeTime=e),a&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),a.timelineStartInfo.dts=undefined,a.timelineStartInfo.pts=undefined,s(a),a.timelineStartInfo.baseMediaDecodeTime=e)},this.setAudioAppendStart=function(e){u&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.push=function(e){if(c){var t=o(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),c=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){c=!0,this.transmuxPipeline_.headOfPipeline.flush()}},n.prototype=new d,module.exports={Transmuxer:n,VideoSegmentStream:e,AudioSegmentStream:t,AUDIO_PROPERTIES:_,VIDEO_PROPERTIES:b}},{"../aac":31,"../codecs/adts.js":33,"../codecs/h264":34,"../data/silence":35,"../m2ts/m2ts.js":41,"../utils/clock":51,"../utils/stream.js":53,"./mp4-generator.js":47}],50:[function(require,module,exports){"use strict";var e=require("../m2ts/stream-types.js"),t=require("../m2ts/timestamp-rollover-stream.js").handleRollover,n={};n.ts=require("../m2ts/probe.js"),n.aac=require("../aac/probe.js");var r=9e4,i=188,o=71,a=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},s=function(e,t){for(var r,a=0,s=i;s<e.byteLength;)if(e[a]!==o||e[s]!==o)a++,s++;else{switch(r=e.subarray(a,s),n.ts.parseType(r,t.pid)){case"pat":t.pid||(t.pid=n.ts.parsePat(r));break;case"pmt":t.table||(t.table=n.ts.parsePmt(r))}if(t.pid&&t.table)return;a+=i,s+=i}},u=function(e,t,r){for(var a,s,u,l,c=0,d=i,f=!1;d<e.byteLength;)if(e[c]!==o||e[d]!==o)c++,d++;else{switch(a=e.subarray(c,d),n.ts.parseType(a,t.pid)){case"pes":s=n.ts.parsePesType(a,t.table),u=n.ts.parsePayloadUnitStartIndicator(a),"audio"===s&&u&&(l=n.ts.parsePesTime(a),l.type="audio",r.audio.push(l),f=!0)}if(f)break;c+=i,d+=i}for(d=e.byteLength,c=d-i,f=!1;c>=0;)if(e[c]!==o||e[d]!==o)c--,d--;else{switch(a=e.subarray(c,d),n.ts.parseType(a,t.pid)){case"pes":s=n.ts.parsePesType(a,t.table),u=n.ts.parsePayloadUnitStartIndicator(a),"audio"===s&&u&&(l=n.ts.parsePesTime(a),l.type="audio",r.audio.push(l),f=!0)}if(f)break;c-=i,d-=i}},l=function(e,t,r){for(var a,s,u,l,c,d,f,p=0,h=i,y=!1,m={data:[],size:0};h<e.byteLength;)if(e[p]!==o||e[h]!==o)p++,h++;else{switch(a=e.subarray(p,h),n.ts.parseType(a,t.pid)){case"pes":if(s=n.ts.parsePesType(a,t.table),u=n.ts.parsePayloadUnitStartIndicator(a),"video"===s&&(u&&!y&&(l=n.ts.parsePesTime(a),l.type="video",r.video.push(l),y=!0),!r.firstKeyFrame)){if(u&&0!==m.size){for(c=new Uint8Array(m.size),d=0;m.data.length;)f=m.data.shift(),c.set(f,d),d+=f.byteLength;n.ts.videoPacketContainsKeyFrame(c)&&(r.firstKeyFrame=n.ts.parsePesTime(c),r.firstKeyFrame.type="video"),m.size=0}m.data.push(a),m.size+=a.byteLength}}if(y&&r.firstKeyFrame)break;p+=i,h+=i}for(h=e.byteLength,p=h-i,y=!1;p>=0;)if(e[p]!==o||e[h]!==o)p--,h--;else{switch(a=e.subarray(p,h),n.ts.parseType(a,t.pid)){case"pes":s=n.ts.parsePesType(a,t.table),u=n.ts.parsePayloadUnitStartIndicator(a),"video"===s&&u&&(l=n.ts.parsePesTime(a),l.type="video",r.video.push(l),y=!0)}if(y)break;p-=i,h-=i}},c=function(e,n){if(e.audio&&e.audio.length){var i=n;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=t(e.dts,i),e.pts=t(e.pts,i),e.dtsTime=e.dts/r,e.ptsTime=e.pts/r})}if(e.video&&e.video.length){var o=n;if(void 0===o&&(o=e.video[0].dts),e.video.forEach(function(e){e.dts=t(e.dts,o),e.pts=t(e.pts,o),e.dtsTime=e.dts/r,e.ptsTime=e.pts/r}),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=t(a.dts,o),a.pts=t(a.pts,o),a.dtsTime=a.dts/r,a.ptsTime=a.dts/r}}},d=function(e){for(var t,i=!1,o=0,a=null,s=null,u=0,l=0;e.length-l>=3;){switch(n.aac.parseType(e,l)){case"timed-metadata":if(e.length-l<10){i=!0;break}if((u=n.aac.parseId3TagSize(e,l))>e.length){i=!0;break}null===s&&(t=e.subarray(l,l+u),s=n.aac.parseAacTimestamp(t)),l+=u;break;case"audio":if(e.length-l<7){i=!0;break}if((u=n.aac.parseAdtsSize(e,l))>e.length){i=!0;break}null===a&&(t=e.subarray(l,l+u),a=n.aac.parseSampleRate(t)),o++,l+=u;break;default:l++}if(i)return null}if(null===a||null===s)return null;var c=r/a;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*o*c,pts:s+1024*o*c}]}},f=function(t){var n={pid:null,table:null},r={};s(t,n);for(var i in n.table)if(n.table.hasOwnProperty(i)){var o=n.table[i];switch(o){case e.H264_STREAM_TYPE:r.video=[],l(t,n,r),0===r.video.length&&delete r.video;break;case e.ADTS_STREAM_TYPE:r.audio=[],u(t,n,r),0===r.audio.length&&delete r.audio}}return r},p=function(e,t){var n;return(n=a(e)?d(e):f(e))&&(n.audio||n.video)?(c(n,t),n):null};module.exports={inspect:p}},{"../aac/probe.js":32,"../m2ts/probe.js":43,"../m2ts/stream-types.js":44,"../m2ts/timestamp-rollover-stream.js":45}],51:[function(require,module,exports){var e,t,n,r,i,o,a=9e4;e=function(e){return e*a},t=function(e,t){return e*t},n=function(e){return e/a},r=function(e,t){return e/t},i=function(t,n){return e(r(t,n))},o=function(e,r){return t(n(e),r)},module.exports={secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:n,audioTsToSeconds:r,audioTsToVideoTs:i,videoTsToAudioTs:o}},{}],52:[function(require,module,exports){"use strict";var e;e=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,o=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");o.set(e.subarray(i,i+a)),n=new DataView(o.buffer).getUint32(0),r=8*a,t-=a},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,i=Math.floor(e/8),e-=8*i,t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),o=n>>>32-i;return r-=i,r>0?n<<=i:t>0&&this.loadWord(),i=e-i,i>0?o<<i|this.readBits(i):o},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},module.exports=e},{}],53:[function(require,module,exports){"use strict";var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,o;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(o=[],r=arguments.length,r=1;r<arguments.length;++r)o.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,o)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},module.exports=e},{}],54:[function(require,module,exports){"use strict";var e;module.exports=function(t){var n=e[t.byteLength%16||0],r=new Uint8Array(t.byteLength+n.length);return r.set(t),r.set(n,t.byteLength),r},e=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],55:[function(require,module,exports){"use strict";exports.pad=require("./pad.js"),exports.unpad=require("./unpad.js")},{"./pad.js":54,"./unpad.js":56}],56:[function(require,module,exports){"use strict";module.exports=function(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}},{}],57:[function(require,module,exports){!function(t){var n=/^([^#]*)(.*)$/,r=/^([^\?]*)(.*)$/,i=/^(([a-z]+:\/\/)?[^:\/]+(?::[0-9]+)?)?(\/?.*)$/i,o={buildAbsoluteURL:function(e,t){if(t=t.trim(),/^[a-z]+:/i.test(t))return t;var a=null,s=null,u=n.exec(t);u&&(s=u[2],t=u[1]);var l=r.exec(t);l&&(a=l[2],t=l[1]);var c=n.exec(e);c&&(e=c[1]);var d=r.exec(e);d&&(e=d[1]);var f=i.exec(e);if(!f)throw new Error("Error trying to parse base URL.");var p=f[2]||"",h=f[1]||"",y=f[3];0!==y.indexOf("/")&&""!==h&&(y="/"+y);var m=null;return m=/^\/\//.test(t)?p+o.buildAbsolutePath("",t.substring(2)):/^\//.test(t)?h+"/"+o.buildAbsolutePath("",t.substring(1)):o.buildAbsolutePath(h+y,t),a&&(m+=a),s&&(m+=s),m},buildAbsolutePath:function(e,t){for(var n,r,i=t,o="",a=e.replace(/[^\/]*$/,i.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;(r=a.indexOf("/../",s))>-1;s=r+n)n=/^\/(?:\.\.\/)*/.exec(a.slice(r))[0].length,o=(o+a.substring(s,r)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/");return o+a.substr(s)}};"object"==typeof exports&&"object"==typeof module?module.exports=o:"function"==typeof e&&e.amd?e([],function(){return o}):"object"==typeof exports?exports.URLToolkit=o:t.URLToolkit=o}(this)},{}],58:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("global/window"),r=t(n),i="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,o=t(i),a=function(e){Object.defineProperties(e.frame,{id:{get:function(){return o["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return o["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return o["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},s=function(e){return undefined,isNaN(e)||Math.abs(e)===Infinity?Number.MAX_VALUE:e},u=function(e,t,n){var i=r["default"].WebKitDataCue||r["default"].VTTCue;if(t&&t.forEach(function(e){this.inbandTextTrack_.addCue(new i(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n){var o=s(e.mediaSource_.duration);if(n.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var n=new i(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,a(n),this.metadataTrack_.addCue(n)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var u=e.metadataTrack_.cues,l=[],c=0;c<u.length;c++)l.push(u[c]);l.sort(function(e,t){return e.startTime-t.startTime});for(var d=0;d<l.length-1;d++)l[d].endTime!==l[d+1].startTime&&(l[d].endTime=l[d+1].startTime);l[l.length-1].endTime=o}}};exports["default"]={addTextTrackData:u,durationOfVideo:s},module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":25}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t,n){for(var r=e.remoteTextTracks()||[],i=0;i<r.length;i++){var o=r[i];o.kind===t&&o.label===n&&e.removeRemoteTextTrack(o)}};exports.removeExistingTrack=e;var t=function(t){e(t,"captions","cc1"),e(t,"metadata","Timed Metadata")};exports.cleanupTextTracks=t},{}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return/mp4a\.\d+.\d+/i.test(e)},t=function(e){return/avc1\.[\da-f]+/i.test(e)},n=function(e){var t={type:"",parameters:{}},n=e.trim().split(";");return t.type=n.shift().trim(),n.forEach(function(e){var n=e.trim().split("=");if(n.length>1){var r=n[0].replace(/"/g,"").trim(),i=n[1].replace(/"/g,"").trim();t.parameters[r]=i}}),t},r=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})};exports["default"]={isAudioCodec:e,parseContentType:n,isVideoCodec:t,translateLegacyCodecs:r},module.exports=exports["default"]},{}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./cleanup-text-tracks"),t=function(t,n,r){var i=n.player_;r.captions&&r.captions.length&&!t.inbandTextTrack_&&((0,e.removeExistingTrack)(i,"captions","cc1"),t.inbandTextTrack_=i.addRemoteTextTrack({kind:"captions",label:"cc1"},!1).track),r.metadata&&r.metadata.length&&!t.metadataTrack_&&((0,e.removeExistingTrack)(i,"metadata","Timed Metadata",!0),t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=r.metadata.dispatchType)};exports["default"]=t,module.exports=exports["default"]},{"./cleanup-text-tracks":59}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={TIME_BETWEEN_CHUNKS:4,BYTES_PER_CHUNK:4096};exports["default"]=e,module.exports=exports["default"]},{}],63:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a=require("global/document"),s=t(a),u="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,l=t(u),c=require("./flash-source-buffer"),d=t(c),f=require("./flash-constants"),p=t(f),h=require("./codec-utils"),y=require("./cleanup-text-tracks"),m=function(e){function t(){var e=this;n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=s["default"].getElementById(t.swfId),e.player_=(0,l["default"])(e.swfObj.parentNode),e.tech_=e.swfObj.tech,e.readyState="open",e.tech_.on("seeking",function(){for(var t=e.sourceBuffers.length;t--;)e.sourceBuffers[t].abort()}),e.tech_.hls&&e.tech_.hls.on("dispose",function(){(0,y.cleanupTextTracks)(e.player_)}),e.swfObj&&e.swfObj.vjs_load()})}return r(t,e),i(t,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(e){var t=(0,h.parseContentType)(e),n=undefined;if("video/mp2t"!==t.type)throw new Error("NotSupportedError (Video.js)");return n=new d["default"](this),this.sourceBuffers.push(n),n}},{key:"endOfStream",value:function(e){"network"===e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),t}(l["default"].EventTarget);exports["default"]=m;try{Object.defineProperty(m.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(e){var t=undefined,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",e),e<n)for(t=0;t<this.sourceBuffers.length;t++)this.sourceBuffers[t].remove(e,n);return e}})}catch(e){m.prototype.duration=NaN}for(var g in p["default"])m[g]=p["default"][g];module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cleanup-text-tracks":59,"./codec-utils":60,"./flash-constants":62,"./flash-source-buffer":64,"global/document":24}],64:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a=require("global/window"),s=t(a),u="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,l=t(u),c=require("mux.js/lib/flv"),d=t(c),f=require("./remove-cues-from-track"),p=t(f),h=require("./create-text-tracks-if-necessary"),y=t(h),m=require("./add-text-track-data"),g=require("./flash-constants"),v=t(g),_=function(e){s["default"].setTimeout(e,v["default"].TIME_BETWEEN_CHUNKS)},b=function(e,t){("number"!=typeof t||t<0)&&(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n},w=function(e){function t(e){var r=this;n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=undefined;this.chunkSize_=v["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=e,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new d["default"].Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),i=s["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader()))),this.mediaSource_.swfObj.vjs_appendBuffer(i),this.one("updateend",function(){r.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.segmentParser_=new d["default"].Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN)}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return l["default"].createTimeRange();var e=this.mediaSource_.swfObj.vjs_getProperty("buffered");return e&&e.length&&(e[0][0]=b(e[0][0],3),e[0][1]=b(e[0][1],3)),l["default"].createTimeRanges(e)}}),this.mediaSource_.player_.on("seeked",function(){(0,p["default"])(0,Infinity,r.metadataTrack_),(0,p["default"])(0,Infinity,r.inbandTextTrack_)})}return r(t,e),i(t,[{key:"appendBuffer",value:function(e){var t=this,n=undefined,r=524288,i=0;if(this.updating)throw n=new Error("SourceBuffer.append() cannot be called while an update is in progress"),n.name="InvalidStateError",n.code=11,n;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),function o(){t.segmentParser_.push(e.subarray(i,i+r)),i+=r,_(i<e.byteLength?o:t.segmentParser_.flush.bind(t.segmentParser_))}()}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(e,t){(0,p["default"])(e,t,this.metadataTrack_),(0,p["default"])(e,t,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(e){var t=this;(0,y["default"])(this,this.mediaSource_,e),(0,m.addTextTrackData)(this,e.captions,e.metadata),_(function(){var n=t.convertTagsToData_(e);0===t.buffer_.length&&_(t.processBuffer_.bind(t)),n&&(t.buffer_.push(n),t.bufferSize_+=n.byteLength)})}},{key:"processBuffer_",value:function(){var e=v["default"].BYTES_PER_CHUNK;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));var t=this.buffer_[0].subarray(0,e);t.byteLength<e||this.buffer_[0].byteLength===e?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(e),this.bufferSize_-=t.byteLength;for(var n="",r=t.byteLength,i=0;i<r;i++)n+=String.fromCharCode(t[i]);var o=s["default"].btoa(n);this.mediaSource_.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+o+"</string></arguments></invoke>"),0!==this.bufferSize_?_(this.processBuffer_.bind(this)):(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(e){var t=0,n=this.mediaSource_.tech_,r=0,i=undefined,o=[],a=[],s=e.tags.videoTags,u=e.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(s.length||u.length)){var l=s[0]||{pts:Infinity},c=u[0]||{pts:Infinity};this.basePtsOffset_=Math.min(c.pts,l.pts)}n.buffered().length&&(r=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(r=Math.max(r,n.currentTime()-this.timestampOffset)),r*=1e3,r+=this.basePtsOffset_;for(var d=0;d<u.length;d++)u[d].pts>=r&&o.push(u[d]);for(var f=0;f<s.length;){var p=s[f];if(p.pts>=r)a.push(p);else if(p.keyFrame){for(var h=f+1,y=!1;h<s.length;){var m=s[h];if(m.pts>=r)break;if(m.keyFrame){y=!0;break}h++}if(y)f=h;else for(;f<h;)a.push(s[f]),f++;continue}f++}var g=this.getOrderedTags_(a,o);if(0!==g.length){for(var d=0;d<g.length;d++)t+=g[d].bytes.byteLength;i=new Uint8Array(t);for(var d=0,v=0;d<g.length;d++)i.set(g[d].bytes,v),v+=g[d].bytes.byteLength;return i}}},{key:"getOrderedTags_",value:function(e,t){for(var n=undefined,r=[];e.length||t.length;)n=e.length?t.length&&t[0].dts<e[0].dts?t.shift():e.shift():t.shift(),r.push(n.finalize());return r}}]),t}(l["default"].EventTarget);exports["default"]=w,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":58,"./create-text-tracks-if-necessary":61,"./flash-constants":62,"./remove-cues-from-track":66,"global/window":25,"mux.js/lib/flv":38}],65:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a=require("global/window"),s=t(a),u=require("global/document"),l=t(u),c="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,d=t(c),f=require("./virtual-source-buffer"),p=t(f),h=require("./add-text-track-data"),y=require("./codec-utils"),m=require("./cleanup-text-tracks"),g=function(e){function t(){var e=this;n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var r=undefined;this.nativeMediaSource_=new s["default"].MediaSource;for(r in this.nativeMediaSource_)r in t.prototype||"function"!=typeof this.nativeMediaSource_[r]||(this[r]=this.nativeMediaSource_[r].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return this.duration_===Infinity?this.duration_:this.nativeMediaSource_.duration},set:function(e){if(this.duration_=e,e!==Infinity)return void(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===Infinity?d["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){e.activeSourceBuffers_.length=0;for(var t=!1,n=!0,r=0;r<e.player_.audioTracks().length;r++){var i=e.player_.audioTracks()[r];if(i.enabled&&"main"!==i.kind){t=!0,n=!1;break}}e.sourceBuffers.forEach(function(r){if(r.appendAudioInitSegment_=!0,r.videoCodec_&&r.audioCodec_)r.audioDisabled_=t;else if(r.videoCodec_&&!r.audioCodec_)r.audioDisabled_=!0,n=!1;else if(!r.videoCodec_&&r.audioCodec_&&(r.audioDisabled_=n,n))return;e.activeSourceBuffers_.push(r)})},this.onPlayerMediachange_=function(){e.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},this),this.on("sourceopen",function(t){var n=l["default"].querySelector('[src="'+e.url_+'"]');n&&(e.player_=(0,d["default"])(n.parentNode),e.player_.audioTracks&&e.player_.audioTracks()&&(e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)),e.player_.on("mediachange",e.onPlayerMediachange_))}),this.on("sourceended",function(t){for(var n=(0,h.durationOfVideo)(e.duration),r=0;r<e.sourceBuffers.length;r++){var i=e.sourceBuffers[r],o=i.metadataTrack_&&i.metadataTrack_.cues;o&&o.length&&(o[o.length-1].endTime=n)}}),this.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&((0,m.cleanupTextTracks)(this.player_),this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_))})}return r(t,e),i(t,[{key:"addSeekableRange_",value:function(e,t){var n=undefined;if(this.duration!==Infinity)throw n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),n.name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=undefined,n=(0,y.parseContentType)(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var r=[];n.parameters&&n.parameters.codecs&&(r=n.parameters.codecs.split(","),r=(0,y.translateLegacyCodecs)(r),r=r.filter(function(e){return(0,y.isAudioCodec)(e)||(0,y.isVideoCodec)(e)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),t=new p["default"](this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),t}(d["default"].EventTarget);exports["default"]=g,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":58,"./cleanup-text-tracks":59,"./codec-utils":60,"./virtual-source-buffer":69,"global/document":24,"global/window":25}],66:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t,n){var r=undefined,i=undefined;if(n&&n.cues)for(r=n.cues.length;r--;)i=n.cues[r],i.startTime<=t&&i.endTime>=e&&n.removeCue(i)};exports["default"]=e,module.exports=exports["default"]},{}],67:[function(require,module,exports){"use strict";function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=require("global/window"),i=e(r),o=require("mux.js/lib/mp4"),a=e(o),s=function(e){e.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,i["default"].postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){i["default"].postMessage({action:"caption",data:e})}),e.on("done",function(e){i["default"].postMessage({action:"done"})})},u=function(){function e(n){t(this,e),this.options=n||{},this.init()}return n(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new a["default"].Transmuxer(this.options),s(this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}}]),e}(),l=function(e){e.onmessage=function(e){if("init"===e.data.action&&e.data.options)return void(this.messageHandlers=new u(e.data.options));this.messageHandlers||(this.messageHandlers=new u),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data)}};exports["default"]=function(e){return new l(e)},module.exports=exports["default"]},{"global/window":25,"mux.js/lib/mp4":46}],68:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("global/window"),r=t(n),i=require("./flash-media-source"),o=t(i),a=require("./html-media-source"),s=t(a),u="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,l=t(u),c=0,d={mode:"auto"};l["default"].mediaSources={};var f=function(e,t){var n=l["default"].mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},p=function(){return!!r["default"].MediaSource&&!!r["default"].MediaSource.isTypeSupported&&r["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},h=function(e){var t=l["default"].mergeOptions(d,e);return this.MediaSource={open:f,supportsNativeMediaSources:p},"html5"===t.mode||"auto"===t.mode&&p()?new s["default"]:new o["default"]};exports.MediaSource=h,h.open=f,h.supportsNativeMediaSources=p;var y={createObjectURL:function(e){var t=undefined;return e instanceof s["default"]?(t=r["default"].URL.createObjectURL(e.nativeMediaSource_),e.url_=t,t):e instanceof o["default"]?(t="blob:vjs-media-source/"+c,c++,l["default"].mediaSources[t]=e,t):(t=r["default"].URL.createObjectURL(e),e.url_=t,t)}};exports.URL=y,l["default"].MediaSource=h,l["default"].URL=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":63,"./html-media-source":65,"global/window":25}],69:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,s=t(a),u=require("./create-text-tracks-if-necessary"),l=t(u),c=require("./remove-cues-from-track"),d=t(c),f=require("./add-text-track-data"),p=require("webworkify"),h=t(p),y=require("./transmuxer-worker"),m=t(y),g=require("./codec-utils"),v=function(e){function t(e,r){var i=this;n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,s["default"].EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=e,this.codecs_=r,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0;var a={remux:!1};this.codecs_.forEach(function(e){(0,g.isAudioCodec)(e)?i.audioCodec_=e:(0,g.isVideoCodec)(e)&&(i.videoCodec_=e)}),this.transmuxer_=(0,h["default"])(m["default"]),this.transmuxer_.postMessage({action:"init",options:a}),this.transmuxer_.onmessage=function(e){return"data"===e.data.action?i.data_(e):"done"===e.data.action?i.done_(e):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var e=null,t=null,n=0,r=[],i=[];if(!this.videoBuffer_&&!this.audioBuffer_)return s["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return s["default"].createTimeRange();for(var o=this.videoBuffer_.buffered,a=this.audioBuffer_.buffered,u=o.length;u--;)r.push({time:o.start(u),type:"start"}),r.push({time:o.end(u),type:"end"});for(u=a.length;u--;)r.push({time:a.start(u),type:"start"}),r.push({time:a.end(u),type:"end"});for(r.sort(function(e,t){return e.time-t.time}),u=0;u<r.length;u++)"start"===r[u].type?2==++n&&(e=r[u].time):"end"===r[u].type&&1==--n&&(t=r[u].time),null!==e&&null!==t&&(i.push([e,t]),e=null,t=null);return s["default"].createTimeRanges(i)}})}return r(t,e),i(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),(0,l["default"])(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach(function(n){if(e[n+"Codec_"]&&!e[n+"Buffer_"]){var r=null;e.mediaSource_[n+"Buffer_"]?r=e.mediaSource_[n+"Buffer_"]:(r=e.mediaSource_.nativeMediaSource_.addSourceBuffer(n+'/mp4;codecs="'+e[n+"Codec_"]+'"'),e.mediaSource_[n+"Buffer_"]=r),e[n+"Buffer_"]=r,["update","updatestart","updateend"].forEach(function(i){r.addEventListener(i,function(){if("audio"!==n||!e.audioDisabled_)return t.every(function(t){return!("audio"!==t||!e.audioDisabled_)||n===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating})?e.trigger(i):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(e,t){this.videoBuffer_&&this.videoBuffer_.remove(e,t),this.audioBuffer_&&this.audioBuffer_.remove(e,t),(0,d["default"])(e,t,this.metadataTrack_),(0,d["default"])(e,t,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,r=t.data,i=t.initSegment;return e[n].segments.push(r),e[n].bytes+=r.byteLength,e[n].initSegment=i,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1),this.videoBuffer_&&(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),(0,f.addTextTrackData)(this,e.captions,e.metadata)),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,r=undefined;if(e.bytes){r=new Uint8Array(e.bytes),e.segments.forEach(function(e){r.set(e,n),n+=e.byteLength});try{t.appendBuffer(r)}catch(error){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR"})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(s["default"].EventTarget);exports["default"]=v,module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":58,"./codec-utils":60,"./create-text-tracks-if-necessary":61,"./remove-cues-from-track":66,"./transmuxer-worker":67,webworkify:70}],70:[function(require,module,exports){var e=arguments[3],t=arguments[4],n=arguments[5],r=JSON.stringify;module.exports=function(i){for(var o,a=Object.keys(n),s=0,u=a.length;s<u;s++){var l=a[s];if(n[l].exports===i){o=l;break}}if(!o){o=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},s=0,u=a.length;s<u;s++){var l=a[s];c[l]=l}t[o]=[Function(["require","module","exports"],"("+i+")(self)"),c]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[o]=o,t[d]=[Function(["require"],"require("+r(o)+")(self)"),f];var p="("+e+")({"+Object.keys(t).map(function(e){return r(e)+":["+t[e][0]+","+r(t[e][1])+"]"}).join(",")+"},{},["+r(d)+"])",h=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(h.createObjectURL(new Blob([p],{type:"text/javascript"})))}},{}],71:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(s!==undefined){if("value"in s)return s.value;var u=s.get;return u===undefined?undefined:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return undefined;e=l,t=o,n=a,r=!0,s=l=undefined}},a=require("global/document"),s=t(a),u=require("./playlist-loader"),l=t(u),c=require("./playlist"),d=t(c),f=require("./xhr"),p=t(f),h=require("aes-decrypter"),y=require("./bin-utils"),m=t(y),g=require("videojs-contrib-media-sources"),v=require("m3u8-parser"),_=t(v),b="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,w=t(b),T=require("./master-playlist-controller"),S=require("./config"),E=t(S),k=require("./rendition-mixin"),O=t(k),C=require("global/window"),P=t(C),j=require("./playback-watcher"),x=t(j),A=require("./reload-source-on-error"),I=t(A),M={PlaylistLoader:l["default"],Playlist:d["default"],Decrypter:h.Decrypter,AsyncStream:h.AsyncStream,decrypt:h.decrypt,utils:m["default"],xhr:(0,p["default"])()};Object.defineProperty(M,"GOAL_BUFFER_LENGTH",{get:function(){return w["default"].log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),E["default"].GOAL_BUFFER_LENGTH},set:function(e){if(w["default"].log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<=0)return void w["default"].log.warn("value passed to Hls.GOAL_BUFFER_LENGTH must be a number and greater than 0");E["default"].GOAL_BUFFER_LENGTH=e}});var L=function(e,t){var n=undefined;return e?(n=P["default"].getComputedStyle(e),n?n[t]:""):""},R=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.uri){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},D=function(e,t){t.representations().forEach(function(t){e.addQualityLevel(t)}),R(e,t.playlists)};M.STANDARD_PLAYLIST_SELECTOR=function(){var e=(undefined,this.playlists.master.playlists.slice()),t=[],n=undefined,r=undefined,i=undefined,o=undefined,a=undefined,s=undefined,u=undefined,l=undefined;for(e.sort(M.comparePlaylistBandwidth),e=e.filter(d["default"].isEnabled),n=e.length;n--;)r=e[n],r.attributes&&r.attributes.BANDWIDTH&&1.2*r.attributes.BANDWIDTH<this.systemBandwidth&&(t.push(r),i||(i=r));for(n=t.length,t.sort(M.comparePlaylistResolution),r=null,u=parseInt(L(this.tech_.el(),"width"),10),l=parseInt(L(this.tech_.el(),"height"),10);n--;)if(r=t[n],r.attributes&&r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&r.attributes.RESOLUTION.height){var c=r.attributes.RESOLUTION;if(c.width===u&&c.height===l){o=null,s=r;break}if(c.width<u&&c.height<l)break;(!o||c.width<a.width&&c.height<a.height)&&(o=r,a=o.attributes.RESOLUTION)}return o||s||i||e[0]},M.canPlaySource=function(){return w["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},M.supportsNativeHls=function(){var e=s["default"].createElement("video");return!!w["default"].getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),M.isSupported=function(){return w["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var N=P["default"].navigator&&P["default"].navigator.userAgent||"";M.supportsAudioInfoChange_=function(){if(w["default"].browser.IS_FIREFOX){var e=/Firefox\/([\d.]+)/i.exec(N);return parseInt(e[1],10)>=49}return!0};var U=w["default"].getComponent("Component"),B=function(e){function t(e,r,i){var a=this;if(n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,r),r.options_&&r.options_.playerId){var u=(0,w["default"])(r.options_.playerId);u.hasOwnProperty("hls")||Object.defineProperty(u,"hls",{get:function(){return w["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead."),a}})}if(w["default"].options.hls.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.tech_=r,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.options_=w["default"].mergeOptions(w["default"].options.hls||{},i.hls),this.setOptions_(),this.on(s["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=s["default"].fullscreenElement||s["default"].webkitFullscreenElement||s["default"].mozFullScreenElement||s["default"].msFullscreenElement;t&&t.contains(a.tech_.el())&&a.masterPlaylistController_.fastQualityChange_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_)return void(this.ignoreNextSeekingEvent_=!1);this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.audioTrackChange_=function(){a.masterPlaylistController_.setupAudio()},this.on(this.tech_,"play",this.play)}return r(t,e),i(t,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),["withCredentials","bandwidth"].forEach(function(t){"undefined"!=typeof e.source_[t]&&(e.options_[t]=e.source_[t])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(e){var t=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=M,this.masterPlaylistController_=new T.MasterPlaylistController(this.options_),this.playbackWatcher_=new x["default"](w["default"].mergeOptions(this.options_,{seekable:function(){return t.seekable()}})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):M.STANDARD_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=undefined;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){w["default"].log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return t.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return t.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return t.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return t.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return t.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("sourceopen",function(){t.tech_.audioTracks().addEventListener("change",t.audioTrackChange_)}),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,O["default"])(t)}),this.masterPlaylistController_.on("audioupdate",function(){t.tech_.clearTracks("audio"),t.masterPlaylistController_.activeAudioGroup().forEach(function(e){t.tech_.audioTracks().addTrack(e)})}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return t.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(w["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=w["default"].players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){D(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){R(e.qualityLevels_,e.playlists)}))}},{key:"activeAudioGroup_",value:function(){return this.masterPlaylistController_.activeAudioGroup()}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_.audioTracks().removeEventListener("change",this.audioTrackChange_),o(Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(U),F=function V(e){return{canHandleSource:function(t){return(!w["default"].options.hls||!w["default"].options.hls.mode||w["default"].options.hls.mode===e)&&V.canPlayType(t.type)},handleSource:function(t,n,r){"flash"===e&&n.setTimeout(function(){n.trigger("loadstart")},1);var i=w["default"].mergeOptions(r,{hls:{mode:e}});return n.hls=new B(t,n,i),n.hls.xhr=(0,p["default"])(),w["default"].Hls.xhr.beforeRequest&&(n.hls.xhr.beforeRequest=w["default"].Hls.xhr.beforeRequest),n.hls.src(t.src),n.hls},canPlayType:function(e){return V.canPlayType(e)?"maybe":""}}};M.comparePlaylistBandwidth=function(e,t){var n=undefined,r=undefined;return e.attributes&&e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||P["default"].Number.MAX_VALUE,t.attributes&&t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||P["default"].Number.MAX_VALUE,n-r},M.comparePlaylistResolution=function(e,t){var n=undefined,r=undefined;return e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||P["default"].Number.MAX_VALUE,t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||P["default"].Number.MAX_VALUE,n===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},F.canPlayType=function(e){if(w["default"].browser.IE_VERSION&&w["default"].browser.IE_VERSION<=10)return!1;var t=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;return!(!w["default"].options.hls.overrideNative&&M.supportsNativeHls)&&t.test(e)},"undefined"!=typeof w["default"].MediaSource&&"undefined"!=typeof w["default"].URL||(w["default"].MediaSource=g.MediaSource,w["default"].URL=g.URL),w["default"].getTech("Flash"),g.MediaSource.supportsNativeMediaSources()&&w["default"].getTech("Html5").registerSourceHandler(F("html5"),0),P["default"].Uint8Array,w["default"].HlsHandler=B,w["default"].HlsSourceHandler=F,w["default"].Hls=M,w["default"].use||w["default"].registerComponent("Hls",M),w["default"].m3u8=_["default"],w["default"].options.hls=w["default"].options.hls||{},w["default"].registerPlugin?w["default"].registerPlugin("reloadSourceOnError",I["default"]):w["default"].plugin("reloadSourceOnError",I["default"]),module.exports={Hls:M,HlsHandler:B,HlsSourceHandler:F}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":6,"./playlist":8,"./playlist-loader":7,"./reload-source-on-error":10,"./rendition-mixin":11,"./xhr":17,"aes-decrypter":21,"global/document":24,"global/window":25,"m3u8-parser":26,"videojs-contrib-media-sources":68}]},{},[71])(71)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsContribQualityLevels=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var o="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,a=t(o),s=require("global/document"),u=t(s),l=require("./quality-level.js"),c=t(l),d=function(e){function t(){var i;n(this,t);var o=r(this,e.call(this)),s=o;if(a["default"].browser.IS_IE8){s=u["default"].createElement("custom");for(var l in t.prototype)"constructor"!==l&&(s[l]=t.prototype[l])}return s.levels_=[],s.selectedIndex_=-1,Object.defineProperty(s,"selectedIndex",{get:function(){return s.selectedIndex_}}),Object.defineProperty(s,"length",{get:function(){return s.levels_.length}}),i=s,r(o,i)}return i(t,e),t.prototype.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var n=this.levels_.length;return t=new c["default"](e),""+n in this||Object.defineProperty(this,n,{get:function(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},t.prototype.removeQualityLevel=function(e){for(var t=null,n=0,r=this.length;n<r;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},t.prototype.getQualityLevelById=function(e){for(var t=0,n=this.length;t<n;t++){var r=this[t];if(r.id===e)return r}return null},t.prototype.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},t}(a["default"].EventTarget);d.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(var f in d.prototype.allowedEvents_)d.prototype["on"+f]=null;exports["default"]=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./quality-level.js":2,"global/document":4}],2:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var r="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,i=t(r),o=require("global/document"),a=t(o),s=function u(e){n(this,u);var t=this;if(i["default"].browser.IS_IE8){t=a["default"].createElement("custom");for(var r in u.prototype)"constructor"!==r&&(t[r]=u.prototype[r])}return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:function(){return t.enabled_()},set:function(e){t.enabled_(e)}}),t};exports["default"]=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/document":4}],3:[function(require,module,exports){},{}],4:[function(require,module,exports){(function(e){var t=void 0!==e?e:"undefined"!=typeof window?window:{},n=require("min-document");if("undefined"!=typeof document)module.exports=document;else{var r=t["__GLOBAL_DOCUMENT_CACHE@4"];r||(r=t["__GLOBAL_DOCUMENT_CACHE@4"]=n),module.exports=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":3}],5:[function(require,module,exports){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;var n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,r=t(n),i=require("./quality-level-list.js"),o=t(i),a=r["default"].registerPlugin||r["default"].plugin,s=function(e,t){var n=e.qualityLevels,r=new o["default"],i=function a(){r.dispose(),e.qualityLevels=n,e.off("dispose",a)};return e.on("dispose",i),e.qualityLevels=function(){return r},e.qualityLevels.VERSION="2.0.3",r},u=function(e){return s(this,r["default"].mergeOptions({},e))};a("qualityLevels",u),u.VERSION="2.0.3",exports["default"]=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./quality-level-list.js":1}]},{},[5])(5)}),function(){"use strict";var e=null;e="undefined"==typeof window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){function n(e,t,n,r){return a={label:n,sources:t},"function"==typeof r?r(e,t,n):"flash"===e.techName_.toLowerCase()?t&&0!==t.length?e.src(t[0].src):e.src(""):e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}}))}function r(e,n){var r=n.sources;return r=(r||[]).map(function(e){var r=1==e.tags.length&&e.tags[0]||"",i=r.match(/hls|mp4/g),o=i?i[0]:"",a=r.match(/\d+/g),s=a?a[0]:0,u=a?a[1]:0,l=r.toLowerCase().match(/\d+(k|m)/g),c=0;return l&&(c=parseInt(l[0].replace(/k|m/g,"")),c*=l[0].indexOf("k")>-1?1e3:1e6),t.mergeOptions({},e,{url:e.src,format:o||("application/x-mpegurl"===(e.type||"").toLowerCase()?"hls":"mp4"),label:n.label,video:{codec:"",frame_rate:0,bit_rate:c,width:s,height:u},audio:{codec:""}})}),n.sources=r,n}var i,o={},a={},s={},u=t.getComponent("MenuItem"),l=t.extend(u,{constructor:function(e,t,n,r){this.onClickListener=n,this.label=r,u.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),r=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),r||this.player_.bigPlayButton.hide(),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var i="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(i="timeupdate"),n(this.player_,this.src,this.options_.label,e).one(i,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_(),r||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),c=t.getComponent("MenuButton"),d=t.extend(c,{constructor:function(e,n,r,i){if(this.sources=n.sources,this.label=i,this.label.innerHTML=n.initialySelectedLabel,c.call(this,e,n,r),this.controlText("Quality"),r.dynamicLabel)this.el().appendChild(i);else{var o=document.createElement("span");t.addClass(o,"vjs-resolution-button-staticlabel"),this.el().appendChild(o)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},n=function(t){e.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})};for(var r in t)t.hasOwnProperty(r)&&(e.push(new l(this.player_,{label:r,src:t[r],initialySelected:r===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},n,this.label)),s[r]=e[e.length-1]);return e}});i=function(e){function i(e,t){return e.res&&t.res?+t.res-+e.res:0}function u(e){var t={label:{},res:{},type:{}};return e.map(function(e){l(t,"label",e),l(t,"res",e),l(t,"type",e),c(t,"label",e),c(t,"res",e),c(t,"type",e)}),t}function l(e,t,n){null==e[t][n[t]]&&(e[t][n[t]]=[])}function c(e,t,n){e[t][n[t]].push(n)}function f(e,t){var n=p["default"],r="";return"high"===n?(n=t[0].res,r=t[0].label):"low"!==n&&null!=n&&e.res[n]?e.res[n]&&(r=e.res[n][0].label):(n=t[t.length-1].res,r=t[t.length-1].label),{res:n,label:r,sources:e.res[n]}}var p=t.mergeOptions(o,e),h=this,y=document.createElement("span"),m={};t.addClass(y,"vjs-resolution-button-label"),h.updateSrc=function(e){if(!e)return h.src();h.controlBar.resolutionSwitcher&&(h.controlBar.resolutionSwitcher.dispose(),delete h.controlBar.resolutionSwitcher),e=e.sort(i),m=u(e);var r=f(m,e),o=new d(h,{sources:m,initialySelectedLabel:r.label,initialySelectedRes:r.res,customSourcePicker:p.customSourcePicker},p,y);return t.addClass(o.el(),"vjs-resolution-button"),h.controlBar.resolutionSwitcher=h.controlBar.el_.insertBefore(o.el_,h.controlBar.getChild("fullscreenToggle").el_),h.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)},n(h,r.sources,r.label)},h.currentResolution=function(e,t){return null==e?r(h,a):(null!=s[e]&&s[e].onClick(t),h)},h.getGroupedSrc=function(){return m},h.ready(function(){h.options_.sources.length>1&&h.updateSrc(h.options_.sources)})},t.plugin("videoJsResolutionSwitcher",i)}(window,e)}(),function(e,t){"function"==typeof define&&define.amd?define([],t.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(e,t){"use strict";e.videojs_hotkeys={version:"0.2.15"};var n=function(n){function r(e){return 32===e.which||179===e.which}function i(e){return 37===e.which||177===e.which}function o(e){return 39===e.which||176===e.which}function a(e){return 38===e.which}function s(e){return 40===e.which}function u(e){return 77===e.which}function l(e){return 70===e.which}var c=this,d=c.el(),f=document,p={volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,playPauseKey:r,rewindKey:i,forwardKey:o,volumeUpKey:a,volumeDownKey:s,muteKey:u,fullscreenKey:l,customKeys:{}},h=1,y=2,m=3,g=4,v=5,_=6,b=7,w=t.mergeOptions||t.util.mergeOptions;n=w(p,n||{});var T=n.volumeStep,S=n.seekStep,E=n.enableMute,k=n.enableVolumeScroll,O=n.enableFullscreen,C=n.enableNumbers,P=n.enableJogStyle,j=n.alwaysCaptureHotkeys;d.hasAttribute("tabIndex")||d.setAttribute("tabIndex","-1"),d.style.outline="none",!j&&c.autoplay()||c.one("play",function(){d.focus()}),c.on("userinactive",function(){var e=function(){clearTimeout(t)},t=setTimeout(function(){c.off("useractive",e),f.activeElement.parentElement==d.querySelector(".vjs-control-bar")&&d.focus()},10);c.one("useractive",e)}),c.on("play",function(){var e=d.querySelector(".iframeblocker");e&&""===e.style.display&&(e.style.display="block",e.style.bottom="39px")});var x=function(e){var t,r=e.which,i=e.preventDefault;if(c.controls()){var o=f.activeElement;if(j||o==d||o==d.querySelector(".vjs-tech")||o==d.querySelector(".vjs-control-bar")||o==d.querySelector(".iframeblocker"))switch(M(e,c)){case h:i(),j&&e.stopPropagation(),c.paused()?c.play():c.pause();break;case y:i(),t=c.currentTime()-S,c.currentTime()<=S&&(t=0),c.currentTime(t);break;case m:i(),c.currentTime(c.currentTime()+S);break;case v:i(),P?(t=c.currentTime()-1,c.currentTime()<=1&&(t=0),c.currentTime(t)):c.volume(c.volume()-T);break;case g:i(),P?c.currentTime(c.currentTime()+1):c.volume(c.volume()+T);break;case _:E&&c.muted(!c.muted());break;case b:O&&(c.isFullscreen()?c.exitFullscreen():c.requestFullscreen());break;default:if((r>47&&r<59||r>95&&r<106)&&C){var a=48;r>95&&(a=96);var s=r-a;i(),c.currentTime(c.duration()*s*.1)}for(var u in n.customKeys){var l=n.customKeys[u];l&&l.key&&l.handler&&l.key(e)&&(i(),l.handler(c,n))}}}},A=function(e){if(c.controls()){var t=e.relatedTarget||e.toElement||f.activeElement;t!=d&&t!=d.querySelector(".vjs-tech")&&t!=d.querySelector(".iframeblocker")||O&&(c.isFullscreen()?c.exitFullscreen():c.requestFullscreen())}},I=function(t){if(c.controls()){var n=t.relatedTarget||t.toElement||f.activeElement;if((j||n==d||n==d.querySelector(".vjs-tech")||n==d.querySelector(".iframeblocker")||n==d.querySelector(".vjs-control-bar"))&&k){t=e.event||t;var r=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));t.preventDefault(),1==r?c.volume(c.volume()+T):r==-1&&c.volume(c.volume()-T)}}},M=function(e,t){return n.playPauseKey(e,t)?h:n.rewindKey(e,t)?y:n.forwardKey(e,t)?m:n.volumeUpKey(e,t)?g:n.volumeDownKey(e,t)?v:n.muteKey(e,t)?_:n.fullscreenKey(e,t)?b:void 0};return c.on("keydown",x),c.on("dblclick",A),c.on("mousewheel",I),c.on("DOMMouseScroll",I),this};t.plugin("hotkeys",n)}),function(e,t){"use strict";var n="",r="?",i="function",o="undefined",a="object",s="string",u="model",l="name",c="type",d="vendor",f="version",p="architecture",h="console",y="mobile",m="tablet",g="smarttv",v="wearable",_={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:t},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(){for(var e,n,r,s,u,l,c,d=0,f=arguments;d<f.length&&!l;){var p=f[d],h=f[d+1];if(typeof e===o){e={};for(s in h)h.hasOwnProperty(s)&&(u=h[s],typeof u===a?e[u[0]]=t:e[u]=t)}for(n=r=0;n<p.length&&!l;)if(l=p[n++].exec(this.getUA()))for(s=0;s<h.length;s++)c=l[++r],u=h[s],typeof u===a&&u.length>0?2==u.length?typeof u[1]==i?e[u[0]]=u[1].call(this,c):e[u[0]]=u[1]:3==u.length?typeof u[1]!==i||u[1].exec&&u[1].test?e[u[0]]=c?c.replace(u[1],u[2]):t:e[u[0]]=c?u[1].call(this,c,u[2]):t:4==u.length&&(e[u[0]]=c?u[3].call(this,c.replace(u[1],u[2])):t):e[u]=c||t;d+=2}return e},str:function(e,n){for(var i in n)if(typeof n[i]===a&&n[i].length>0){for(var o=0;o<n[i].length;o++)if(_.has(n[i][o],e))return i===r?t:i}else if(_.has(n[i],e))return i===r?t:i;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},T={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,f],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[l,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[l,f],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],f],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],f],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[l,f],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],f],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],f],[/;fbav\/([\w\.]+);/i],[f,[l,"Facebook"]],[/fxios\/([\w\.-]+)/i],[f,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[f,b.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,_.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",_.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[p,_.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[u,d,[c,m]],[/applecoremedia\/[\w\.]+ \((ipad)/],[u,[d,"Apple"],[c,m]],[/(apple\s{0,1}tv)/i],[[u,"Apple TV"],[d,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,u,[c,m]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[u,[d,"Amazon"],[c,m]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[u,b.str,w.device.amazon.model],[d,"Amazon"],[c,y]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[u,d,[c,y]],[/\((ip[honed|\s\w*]+);/i],[u,[d,"Apple"],[c,y]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,u,[c,y]],[/\(bb10;\s(\w+)/i],[u,[d,"BlackBerry"],[c,y]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[u,[d,"Asus"],[c,m]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[u,"Xperia Tablet"],[c,m]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[d,"Sony"],[u,"Xperia Phone"],[c,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,u,[c,h]],[/android.+;\s(shield)\sbuild/i],[u,[d,"Nvidia"],[c,h]],[/(playstation\s[34portablevi]+)/i],[u,[d,"Sony"],[c,h]],[/(sprint\s(\w+))/i],[[d,b.str,w.device.sprint.vendor],[u,b.str,w.device.sprint.model],[c,y]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[d,u,[c,m]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[d,[u,/_/g," "],[c,y]],[/(nexus\s9)/i],[u,[d,"HTC"],[c,m]],[/(nexus\s6p)/i],[u,[d,"Huawei"],[c,y]],[/(microsoft);\s(lumia[\s\w]+)/i],[d,u,[c,y]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[u,[d,"Microsoft"],[c,h]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,"Microsoft"],[c,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[u,[d,"Motorola"],[c,y]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[u,[d,"Motorola"],[c,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,_.trim],[u,_.trim],[c,g]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,"Samsung"],[c,g]],[/\(dtv[\);].+(aquos)/i],[u,[d,"Sharp"],[c,g]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],u,[c,m]],[/smart-tv.+(samsung)/i],[d,[c,g],u],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[d,"Samsung"],u,[c,y]],[/sie-(\w+)*/i],[u,[d,"Siemens"],[c,y]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[d,"Nokia"],u,[c,y]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[u,[d,"Acer"],[c,m]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],u,[c,m]],[/(lg) netcast\.tv/i],[d,u,[c,g]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[u,[d,"LG"],[c,y]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[u,[d,"Lenovo"],[c,m]],[/linux;.+((jolla));/i],[d,u,[c,y]],[/((pebble))app\/[\d\.]+\s/i],[d,u,[c,v]],[/android.+;\s(glass)\s\d/i],[u,[d,"Google"],[c,v]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[u,/_/g," "],[d,"Xiaomi"],[c,y]],[/android.+a000(1)\s+build/i],[u,[d,"OnePlus"],[c,y]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,_.lowerize],d,u]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,f],[/rv\:([\w\.]+).*(gecko)/i],[f,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[f,b.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[f,b.str,w.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[l,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[l,"Symbian"],f],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[l,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[l,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[l,f],[/(haiku)\s(\w+)/i],[l,f],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[l,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[l,f]]},S=function(t,r){if(!(this instanceof S))return new S(t,r).getResult();var i=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:n),o=r?_.extend(T,r):T;return this.getBrowser=function(){var e=b.rgx.apply(this,o.browser);return e.major=_.major(e.version),e},this.getCPU=function(){return b.rgx.apply(this,o.cpu)},this.getDevice=function(){return b.rgx.apply(this,o.device)},this.getEngine=function(){return b.rgx.apply(this,o.engine)},this.getOS=function(){return b.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};S.VERSION="0.7.12",S.BROWSER={NAME:l,MAJOR:"major",VERSION:f},S.CPU={ARCHITECTURE:p},S.DEVICE={MODEL:u,VENDOR:d,TYPE:c,CONSOLE:h,MOBILE:y,SMARTTV:g,TABLET:m,WEARABLE:v,EMBEDDED:"embedded"},S.ENGINE={NAME:l,VERSION:f},S.OS={NAME:l,VERSION:f},typeof exports!==o?(typeof module!==o&&module.exports&&(exports=module.exports=S),exports.UAParser=S):typeof define===i&&define.amd?define(function(){return S}):e.UAParser=S;var E=e.jQuery||e.Zepto;if(typeof E!==o){var k=new S;E.ua=k.getResult(),E.ua.get=function(){return k.getUA()},E.ua.set=function(e){k.setUA(e);var t=k.getResult();for(var n in t)E.ua[n]=t[n]}}}("object"==typeof window?window:this),function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,o,a){for(var s,u,l,c=0,d=[];c<r.length;c++)u=r[c],i[u]&&d.push(i[u][0]),i[u]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);for(n&&n(r,o,a);d.length;)d.shift()();if(a)for(c=0;c<a.length;c++)l=t(t.s=a[c]);return l};var r={},i={1:0};t.e=function(e){function n(){a.onerror=a.onload=null,clearTimeout(s);var t=i[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),i[e]=undefined)}if(0===i[e])return Promise.resolve();if(i[e])return i[e][2];var r=new Promise(function(t,n){i[e]=[t,n]});i[e][2]=r;var o=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,t.nc&&a.setAttribute("nonce",t.nc),a.src=t.p+"js/"+e+"-"+{0:"c8429162b55f5b5a9627"}[e]+".js";var s=setTimeout(n,12e4);return a.onerror=a.onload=n,o.appendChild(a),r},t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.oe=function(e){throw console.error(e),e},t(t.s=6)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),a=n(2);!function(){function e(e,t){return e.__proto__=t,e}function t(e,t){for(var n in t)e[n]=t[n];return e}for(var n=0,r=["webkit","moz"],i=0;i<r.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[r[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[i]+"CancelAnimationFrame"]||window[r[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-n)),i=window.setTimeout(function(){e(t+r)},r);return n=t+r,i},window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})),Object.setPrototypeOf||(Object.setPrototypeOf={__proto__:[]}instanceof Array?e:t)}();var s=function(){function e(){r(this,e)}return e.detectIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)},e.detectIOS=function(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},e.checkFlashPlayerPlugin=function(){var e=!1;try{e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){e=i(navigator.mimeTypes[!0])}return e},e.checkSupportLocalStorage=function(){try{var e="test_"+Date.now();return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},e.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(window.location.href);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},e.trim=function(){return(arguments.length>0&&arguments[0]!==undefined?arguments[0]:"").replace(/(^\s+)|(\s+$)/g,"")},e.parseHTTPHeaders=function(t){var n={};return e.trim(t).split("\n").map(function(t){var r=t.indexOf(":");if(r===-1)return void(n[t]=undefined);var i=e.trim(t.substr(0,r)).toLowerCase(),o=e.trim(t.substr(r+1));"undefined"==typeof n[i]?n[i]=o:"string"==typeof n[i]?n[i]=[n[i],o]:n[i].push(o)}),n},e.isMp4ContentType=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",t=e.toLowerCase();return a.MP4_CONTENT_TYPES.reduce(function(e,n){return e===!0||e===t||n===t})},e.isHlsContentType=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",t=e.toLowerCase();return a.HLS_CONTENT_TYPES.reduce(function(e,n){return e===!0||e===t||n===t})},e.mergeVideoOptions=function(t){var n={};if(!t)return n;for(var r in t)switch(r){case"hub":case"vid":case"url":case"mode":case"width":case"height":case"autoplay":case"preload":case"loop":case"controls":case"nativeControlsForTouch":case"dynamicMediaSource":case"poster":case"file":case"marquee":case"imageAds":case"videoAds":case"stretching":case"protection":case"sourceOrder":case"language":case"uKey":n[r]=t[r];break;case"type":"hls"===String(t[r]).toLowerCase()||"m3u8"===String(t[r]).toLowerCase()||e.isHlsContentType(String(t[r]).toLowerCase())?n.type="application/x-mpegURL":"mp4"===String(t[r]).toLowerCase()||e.isMp4ContentType(String(t[r]).toLowerCase())?n.type="video/mp4":(0,o.getLogger)().error("Unsupported video type: "+t[r]);break;case"engineOrder":n.techOrder=t[r];break;default:(0,o.getLogger)().error("Unsupported video option: "+r+" with value: "+t[r])}return n},e.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},e.on=function(e,t,n){e&&(window.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n))},e.off=function(e,t,n){e&&(window.addEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n))},e.windowDimension=function(){var e=document.documentElement,t=document.getElementsByTagName("body")[0];return{width:window.innerWidth||e.clientWidth||t.clientWidth,height:window.innerHeight||e.clientHeight||t.clientHeight}},e.elementDimension=function(t){var n=e.windowDimension();return t?{width:t.offsetWidth||n.width,height:t.offsetHeight||n.height}:n},e.isContentTypeMatch=function(e,t){return t=(t||"").toLowerCase(),"string"==typeof e?e.toLowerCase().indexOf(t)>-1:e.reduce(function(e,n){return e===!0||e.toLowerCase().indexOf(t)>-1||n.toLowerCase().indexOf(t)>-1})},e.isFullscreen=function(){return window.innerHeight===screen.height},e.isMobileDevice=function(){return videojs.browser.IS_IOS||videojs.browser.IS_ANDROID},e.parseUserAgent=function(e){var t=new UAParser;return e&&t.setUA(e),t.getResult()},e.generateGUID=function(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isPlainObject=function(t){return!(!t||e.isArray(t))&&"object"===(void 0===t?"undefined":i(t))},e.isString=function(e){return"string"==typeof e},e}();t["default"]=s},function(e,t,n){"use strict";function r(e){var t=videojs.log.error.bind(null,o),n=videojs.log.warn.bind(null,o),r=videojs.log.bind(null,o);switch(e){case"error":n=r=a;break;case"warn":r=a;break;case"log":case"debug":case"all":break;default:r=a}return{debug:r,log:r,error:t,warn:n}}function i(){return r(arguments.length>0&&arguments[0]!==undefined?arguments[0]:"warn")}Object.defineProperty(t,"__esModule",{value:!0}),t.getLogger=i;var o=" [APP] ",a=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JEDI_VIDEO=0,t.VANCE_VIDEO=1,t.DEFAULT_VIDEO=2,t.EXTERNAL_VIDEO=3,t.VANCE_SINGLE_VIDEO=4,t.ERROR_NOT_VINFO=800001,t.ERROR_H265_NOT_SUPPORT=800002,t.PROMPT_PARAMS_ERROR="需要更多的参数才能开始播放视频",t.PROMPT_NO_AVAILABLE_FLASH='需要安装flash才能继续播放该视频，<a href="https://get.adobe.com/cn/flashplayer/" target="_blank">立即安装</a>',t.PROMPT_NO_SUPPORTED_VIDEO_FORMAT="视频格式不支持，请使用正确的播放链接并确定网络通畅",t.PROMPT_FETCH_VIDEO_INFO_ERROR="获取视频信息失败，请使用正确的链接并确定网络畅通！",t.PROMPT_H265_NOT_SUPPORT="浏览器不支持播放h.265编码的视频文件",t.NOTIFY_SWITCH_RESOLUTION_TIMEOUT="网速不给力？请切换至较低的分辨率，或者尝试刷新浏览器。",t.MP4_CONTENT_TYPES=["application/mp4","audio/mp4","video/mp4","video/m4v"],t.HLS_CONTENT_TYPES=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){r(this,e)}return e.createElement=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments[2],r=arguments[3],i=videojs.createEl(e,{},t,r);return n&&n.appendChild(i),i},e.addClass=function(e,t){if(e)return videojs.addClass(e,t)},e.removeClass=function(e,t){if(e)return videojs.removeClass(e,t)},e.toggleClass=function(e,t){return videojs.toggleClass(e,t)},e.hasClass=function(e,t){return videojs.hasClass(e,t)},e.removeNode=function(e){if(e)if(e.remove)e.remove();else{var t=e.parentNode;t.removeChild(e)}},e.removeNodes=function(t){if(t&&!(t.length<=0))for(var n=0,r=t.length;n<r;n+=1)e.removeNode(t[n])},e}();t["default"]=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEOS_REQUEST_END_POINT="//jedi.qiniuapi.com",t.DEFAULT_VIDEOS_HOST_SITE="//player.qiniucc.com",t.VANCE_STATS_REPORT_END_POINT="//lightsaber.qiniuapi.com",t.JEDI_STATS_REPORT_END_POINT="//lightsaber.jedi.qiniuapi.com"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){T["default"].isFunction(e)&&e.call(t)}function a(e,t){if(t){var n=document.getElementById(e);if(n)switch(t){case"letterbox":b["default"].addClass(n,"video-size-letterbox");break;case"panscan":b["default"].addClass(n,"video-size-panscan");break;case"fitwindow":b["default"].addClass(n,"video-size-fitwindow");break;case"none":b["default"].addClass(n,"video-size-none");break;default:C.error("Unsupported video fit option: "+t)}}}function s(e,t){e&&t&&(j.players_=j.players_||{},j.players_[e]=t)}function u(e){return!(!e||!e.videoAds)&&e.videoAds.filter(function(e){return e.position&&"op"===e.position.toLowerCase().trim()}).length>0}function l(e){var t=0,n=null;e.on("waiting",function(){var t=e.currentTime();if(e.duration()-t<.2){n&&window.clearTimeout(n);var r=e.currentSrc();n=window.setTimeout(function(){r===e.currentSrc()&&e.currentTime()-t<.2&&(e.paused(),e.trigger("ended")),window.clearTimeout(n)},1500)}}),e.on("timeupdate",function(){t=.1*e.duration(),e.currentTime()>e.duration()+t&&(e.paused(),e.trigger("ended"))})}function c(e,t){e.on("play",function(){return setTimeout(function(){var n=t+"_"+e.techName_.toLowerCase()+"_api";document.getElementById(n).style.cssText=null},0)})}function d(e,t,n){var r=setTimeout(function(){e.notify(v.NOTIFY_SWITCH_RESOLUTION_TIMEOUT,"forever")},12e4);"flash"===n?e.one("progress",function(){e.hideNotification(),e.removeClass("vjs-switching"),clearTimeout(r)}):e.one("playing",function(){e.hideNotification(),e.removeClass("vjs-switching"),clearTimeout(r)})}function f(e){return(e.channels||[]).map(function(e){return{id:e.id,label:e.label,bitrate:e.video.bit_rate,info:e}})}function p(e,t){var n={};if(e.dynamicMediaSource&&e.dynamicMediaSource.length>1)n.videoJsResolutionSwitcher={"default":"high",dynamicLabel:!0,customSourcePicker:function(e,n,r){return e.addClass("vjs-switching"),"flash"===e.techName_.toLowerCase()?(d(e,t,"flash"),n&&0!==n.length?e.src(n[0].src):e.src("")):(d(e,t,"html5"),e.src(n.map(function(e){return{src:e.src,type:e.type,res:e.res}})))}};else if(e.dynamicMediaSource&&1===e.dynamicMediaSource.length){var r=e.dynamicMediaSource[0];delete e.dynamicMediaSource,e.file=r.src,e.type=r.type,r.channels?n.resolutionSwitcher={dynamicLabel:!1,levels:f(r)}:e.mode=v.VANCE_SINGLE_VIDEO}return n}function h(e,t){var n=p(e,t),r={plugins:videojs.mergeOptions({imageAds:e.imageAds,errorMask:undefined,notification:undefined},n)},i={hls:e.protection?{}:{withCredentials:!1}};return videojs.mergeOptions({},e,i,r)}function y(e,t){return document.getElementById(e)&&(b["default"].addClass("video-js"),b["default"].addClass("vjs-default-skin"),b["default"].addClass("vjs-big-play-centered")),videojs(e,t.videoOptions,function(){var n=this;T["default"].isMobileDevice()&&n.addClass("vjs-mobile"),t.videoOptions.dynamicMediaSource?n.updateSrc(t.videoOptions.dynamicMediaSource):t.videoOptions.file&&n.src({src:t.videoOptions.file,type:t.videoOptions.type?t.videoOptions.type:""}),t.videoOptions.marquee&&(u(t.videoOptions)?(n.on("adstart",function(){var e=document.querySelectorAll(".jedi-marquee");e&&e.length>0&&(b["default"].hasClass(e[0],"playing-com")||b["default"].addClass(e[0],"playing-com"))}),n.on("adend",function(){n.marquee&&n.marquee(t.videoOptions.marquee,e);var r=document.querySelectorAll(".jedi-marquee");r&&r.length>0&&b["default"].hasClass(r[0],"playing-com")&&b["default"].removeClass(r[0],"playing-com")})):n.marquee(t.videoOptions.marquee,e)),n.QiniuAds({inventory:t.videoOptions.videoAds}),n.on("play",function(){n.posterImage&&(n.posterImage.hide(),n.bigPlayButton.hide())}),T["default"].isMobileDevice()&&(n.on("pause",function(){n.bigPlayButton.show()}),n.on("play",function(){n.bigPlayButton.hide()})),n.on("resolutionchange",function(){C.debug("Source changed to: ",n.src())})})}function m(e){var t=e.currentTime,n=!1;e.disableSeek=function(t){return n=void 0===t||!!t,e},e.currentTime=function(){return t.apply(e,n?undefined:arguments)}}Object.defineProperty(t,"__esModule",{value:!0});var g=n(2),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(g),_=n(3),b=r(_),w=n(0),T=r(w),S=n(13),E=r(S),k=n(15),O=n(1);n(29),n(24),n(25),n(26),n(27),n(28),n(23),n(16),n(17),n(19),n(18),n(20),n(22),n(21);var C=(0,O.getLogger)(),P=["m3u8","hls","mp4"],j=function(){function e(t){var n=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},u=arguments[2];i(this,e),this.video=t,this.videoOptions=T["default"].mergeVideoOptions(r),this.guid_=T["default"].generateGUID(),this.videoOptions&&(this.videoOptions=h(this.videoOptions,t)),this.videoOptions.mode===v.VANCE_SINGLE_VIDEO&&(this.stat=r.dynamicMediaSource[0].stat),this.videoPlayer=y(t,this),this.videoPlayer.ready(function(){var e=document.getElementById(t),r=e.offsetWidth;r<414?b["default"].addClass(e,"vjs-sm"):r>960&&b["default"].addClass(e,"vjs-lg"),n.videoPlayer.hotkeys({volumeStep:.1,seekStep:5,enableVolumeScroll:!1}),(0,k.setupPlaybackRestore)(n)}),m(this.videoPlayer),a(t,this.videoOptions.stretching),s(t,this),o(u,this),videojs.browser.IS_IOS&&l(this.videoPlayer),videojs.browser.IS_ANDROID&&c(this.videoPlayer,this.video)}return e.prototype.ready=function(e){return this.videoPlayer.ready(function(){o(e)}),this},e.prototype.play=function(e){return this.videoPlayer.play(),o(e,this),this},e.prototype.pause=function(e){return this.videoPlayer.pause(),o(e,this),this},e.prototype.isPaused=function(){return this.videoPlayer.paused()},e.prototype.end=function(e){return this.videoPlayer.reset(),o(e,this),this},e.prototype.isEnded=function(){return this.videoPlayer.ended()},e.prototype.disableSeek=function(e,t){return 0===arguments.length?(this.videoPlayer.disableSeek(),this):(1===arguments.length&&arguments[0]instanceof Function&&(t=e,e=!0),this.videoPlayer.disableSeek(e),o(t,this),this)},e.prototype.currentTime=function(e,t){return 0===arguments.length?this.videoPlayer.currentTime():(this.videoPlayer.currentTime(e),o(t,this),this)},e.players=function(){return e.players_},e.dispose=function(e){var t=videojs(e);t&&t.dispose()},e.prototype.dispose=function(e){return this.videoPlayer.dispose(),o(e,this),this},e.disposeAll=function(){var e=videojs.players;for(var t in e)e.hasOwnProperty(t)&&videojs(t).dispose()},e.prototype.aspectRatio=function(e,t){return 0===arguments.length?this.videoPlayer.aspectRatio():(this.videoPlayer.aspectRatio(e),o(t,this),this)},e.prototype.currentStats=function(){var e={},t=void 0;switch(this.videoOptions.mode){case v.JEDI_VIDEO:case v.VANCE_VIDEO:t=this.videoPlayer.currentResolution(),e=t.sources[0];break;case v.VANCE_SINGLE_VIDEO:e=this.stat;case v.DEFAULT_VIDEO:case v.EXTERNAL_VIDEO:e.url=this.videoPlayer.options_.file,e.type=this.videoPlayer.options_.type}e=videojs.mergeOptions({url:"",format:"",label:"",duration:this.duration(),video:{codec:"",frame_rate:0,bit_rate:0,width:0,height:0},audio:{codec:""}},e);var n=e.url.match(/\:\/\/.*\//g);return e.domain=n?n[0].split("/")[2]:"",e},e.prototype.state=function(){return this.videoPlayer.readyState()},e.prototype.duration=function(e,t){return 0===arguments.length?Math.round(this.videoPlayer.duration()):(this.videoPlayer.duration(e),o(t,this),this)},e.prototype.isMuted=function(){return this.videoPlayer.muted()},e.prototype.mute=function(e,t){return 0===arguments.length?this.videoPlayer.muted(!0):this.videoPlayer.muted(e),o(t,this),this},e.prototype.volume=function(e,t){return 0===arguments.length?this.videoPlayer.volume():(this.videoPlayer.volume(e),o(t,this),this)},e.prototype.width=function(e,t){return 0===arguments.length?this.videoPlayer.width():(this.videoPlayer.width(e),o(t,this),this.trigger("resize"),this)},e.prototype.videoWidth=function(){return this.videoPlayer.videoWidth()},e.prototype.height=function(e,t){return 0===arguments.length?this.videoPlayer.height():(this.videoPlayer.height(e),o(t,this),this.trigger("resize"),this)},e.prototype.videoHeight=function(){return this.videoPlayer.videoHeight()},e.prototype.resize=function(e,t,n){return this.videoPlayer.width(e),this.videoPlayer.height(t),this.trigger("resize"),o(n,this),this},e.prototype.isFullscreen=function(){return this.videoPlayer.isFullscreen()},e.prototype.fullscreen=function(e,t){return 0==arguments.length?this.videoPlayer.requestFullscreen():e?this.videoPlayer.requestFullscreen():this.videoPlayer.exitFullscreen(),o(t,this),this},e.prototype.resolutions=function(){return this.videoPlayer.getGroupedSrc()},e.prototype.currentResolution=function(e,t){return 0===arguments.length?this.videoPlayer.currentResolution():(this.videoPlayer.currentResolution(e),o(t),this)},e.prototype.updateSources=function(e,t){return this.videoPlayer.updateSrc(e),o(t,this),this},e.prototype.videoAds=function(e,t){return 0===arguments.length?this.videoOptions.videoAds:(e&&(this.videoOptions.videoAds=e),o(t,this),this)},e.prototype.imageAds=function(e,t){return 0===arguments.length?this.videoOptions.imageAds:(e&&(this.videoOptions.imageAds=e),o(t,this),this)},e.prototype.marquee=function(e,t){return 0===arguments.length?this.videoOptions.marquee:(e&&(this.videoOptions.marquee=e),o(t,this),this)},e.prototype.hasControls=function(){return this.videoPlayer.controls()},e.prototype.controls=function(e,t){return 0===arguments.length?this.videoPlayer.controls(!0):this.videoPlayer.controls(e),o(t,this),this},e.prototype.showPlayButton=function(e,t){var n=this.videoPlayer.bigPlayButton;return 0===arguments.length?n&&n.show():n&&(e?n.show():this.videoPlayer.bigPlayButton.hide()),o(t,this),this},e.prototype.autoHlsCurrentSrc=function(){return this.currentSrc().indexOf("q00000001")<0?"":this.videoPlayer.tech_.hls.playlists.media().resolvedUri},e.prototype.engine=function(){return this.videoPlayer.techName_},e.prototype.on=function(e,t){var n=E["default"].normalizeEvent(e);return E["default"].eventAvailable(n)?(this.videoPlayer.on(n,t),this):void C.error("Unsupported event: "+e)},e.prototype.one=function(e,t){var n=E["default"].normalizeEvent(e);return E["default"].eventAvailable(n)?(this.videoPlayer.one(n,t),this):void C.error("Unsupported event: "+e)},e.prototype.off=function(e,t){var n=E["default"].normalizeEvent(e);return E["default"].eventAvailable(n)?(this.videoPlayer.off(n,t),this):void C.error("Unsupported event: "+e)},e.prototype.trigger=function(e,t,n){var r=E["default"].normalizeEvent(e);return this.videoPlayer.trigger(r,t),o(n,this),this},e.on=function(e,t,n){var r=E["default"].normalizeEvent(t);if(!E["default"].eventAvailable(r))return void C.error("Unsupported event: "+t);videojs.on(e,r,n)},e.one=function(e,t,n){var r=E["default"].normalizeEvent(t);if(!E["default"].eventAvailable(r))return void C.error("Unsupported event: "+t);videojs.one(e,r,n)},e.off=function(e,t,n){var r=E["default"].normalizeEvent(t);if(!E["default"].eventAvailable(r))return void C.error("Unsupported event: "+t);videojs.off(e,r,n)},e.trigger=function(e,t,n){var r=E["default"].normalizeEvent(t);videojs.trigger(e,r),o(n,this)},e.prototype.isAutoplay=function(){return this.videoPlayer.autoplay()},e.prototype.autoplay=function(e,t){return 0===arguments.length?this.videoPlayer.autoplay(!0):(this.videoPlayer.autoplay(e),o(t,this),this)},e.prototype.buffered=function(){return this.videoPlayer.buffered()},e.prototype.bufferedPercent=function(){return this.videoPlayer.bufferedPercent()},e.prototype.canPlayType=function(e){if(!e)return!1;var t=String(e).toLowerCase();return P.includes(t)},e.prototype.currentSrc=function(){return this.videoPlayer.currentSrc()},e.prototype.currentType=function(){return this.videoPlayer.currentType()},e.prototype.src=function(e,t){if(e)return this.videoPlayer.src(e),o(t,this),this},e.prototype.error=function(e,t){return 0===arguments.length?this.videoPlayer.error():(this.videoPlayer.error(e),o(t,this),this)},e.prototype.load=function(){return this.videoPlayer.load(),this},e.prototype.isLoop=function(){return this.videoPlayer.loop()},e.prototype.loop=function(e,t){return 0===arguments.length?this.videoPlayer.loop(!0):this.videoPlayer.loop(e),o(t,this),this},e.prototype.networkState=function(){return this.videoPlayer.networkState()},e.prototype.playRate=function(e,t){return 0===arguments.length?this.videoPlayer.playbackRate():(this.videoPlayer.playbackRate(e),o(t,this),this)},e.prototype.poster=function(e,t){return 0===arguments.length?this.videoPlayer.poster():(this.videoPlayer.poster(e),o(t,this),this)},e.prototype.preload=function(e,t){return 0===arguments.length?this.videoPlayer.preload():(this.videoPlayer.preload(e),o(t,this),this)},e.prototype.remainingTime=function(){return this.videoPlayer.remainingTime()},e.prototype.isScrubbing=function(){return this.videoPlayer.scrubbing()},e.prototype.scrubbing=function(e,t){return 0===arguments.length?this.videoPlayer.scrolling(!0):this.videoPlayer.scrubbing(e),o(t,this),this},e.prototype.isWaiting=function(){return this.state()<3||2===this.networkState()},e.prototype.getGUID=function(){return this.guid_},e}();t["default"]=j},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t={};if(!e)return t;delete e.autoplay,e.url?e.mode=y.VANCE_VIDEO:e.hub&&e.vid?e.mode=y.JEDI_VIDEO:e.qv?e.mode=y.DEFAULT_VIDEO:e.file||x.error(y.PROMPT_PARAMS_ERROR),t=videojs.mergeOptions(j,t);for(var n in e)if(e.hasOwnProperty(n))switch(n){case"qv":break;default:t[n]=e[n]}return t}function a(e,t){var n=document.getElementById(e);if(n){var r=_["default"].createElement("div",{"class":"video-damage-note"},null);r.innerHTML=t,n.parentNode.insertBefore(r,n),n.parentNode.removeChild(n)}}function s(e){var t=e.engineOrder[0];return!(!g["default"].detectIE()&&"flash"!==t||g["default"].checkFlashPlayerPlugin())}function u(e){e&&/qiniucc.com$/g.test(window.location.host)&&(document.title=e)}function l(e){var t=e.autoplay;return g["default"].isMobileDevice()&&(t=!1),t}function c(e,t){if(e){var n=document.getElementById(e);t&&_["default"].addClass(n,"vjs-autoplay")}}function d(e,t,n){if(n.poster)return n.poster;var r=g["default"].getParameterByName("qv3");return w["default"].generateVideoPoster(e,r)}function f(){return"com"===g["default"].getParameterByName("preview").toLowerCase()?(x.debug("video is ad"),!0):(x.debug("video is not ad"),!1)}function p(e,t,n,r){setTimeout(function(){n&&(e.isPlayerReady_=!0),Object.setPrototypeOf(e,e.fenixPlayer),n&&e.readyFnQueue_&&e.readyFnQueue_.length>0&&e.readyFnQueue_.forEach(function(t){t.call(e)},e),t&&e.fenixPlayer.ready(function(){"flash"===e.fenixPlayer.videoPlayer.techName_.toLowerCase()?e.fenixPlayer.videoPlayer.tech_.setAutoplay(!0):e.fenixPlayer.play()}),g["default"].isFunction(r)&&r.call(e)},0)}Object.defineProperty(t,"__esModule",{value:!0});var h=n(2),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(h),m=n(0),g=r(m),v=n(3),_=r(v),b=n(11),w=r(b),T=n(10),S=r(T),E=n(9),k=r(E),O=n(5),C=r(O);n(8);var P=n(1),j={engineOrder:["html5","flash"],autoplay:!1,preload:"auto",loop:!1,stretching:"letterbox",controls:!0,sourceOrder:!1,language:"zh-CN"},x=(0,P.getLogger)(),A=function(){function e(t){var n=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},h=arguments[2];i(this,e),this.isPlayerReady_=!1,this.readyFnQueue_=[];var m=f(),g=l(r);switch(this.playerOptions=o(r),c(t,g),this.playerOptions.mode){case y.DEFAULT_VIDEO:case y.JEDI_VIDEO:w["default"].fetchVideoInfo(r.hub,r.vid,r.qv,m,function(e,i){if(e)return x.error(e),void a(t,y.PROMPT_FETCH_VIDEO_INFO_ERROR);if(x.debug(i),u(i.name),i.protection&&(n.playerOptions.engineOrder=["flash"],n.playerOptions.protection=i.protection),s(n.playerOptions))return a(t,y.PROMPT_NO_AVAILABLE_FLASH),void x.error("you need to install flash to continue");var o=w["default"].buildVideoSource(i),l=i.player&&i.player.marquee||undefined,c=i.player&&i.player.video_ads||undefined,f=i.player&&i.player.image_ads||undefined;g&&f&&(f=f.filter(function(e){return"op"!==e.position})),n.playerOptions.dynamicMediaSource=o,n.playerOptions.marquee=l,n.playerOptions.videoAds=c,n.playerOptions.imageAds=f,n.playerOptions.poster=d(i,g,r),n.fenixPlayer=new C["default"](t,n.playerOptions),new k["default"](n.fenixPlayer,{hub:r.hub,key:r.vid,uid:i.uid}).vInit(),p(n,g,!0,h)});break;case y.VANCE_VIDEO:w["default"].fetchVanceVideoInfo(r.url,function(e,i){x.debug(i);var o=[],s=!1;if(e)return x.error(e),void a(t,y.PROMPT_FETCH_VIDEO_INFO_ERROR);if(i.type&&"hlsmp4".indexOf(i.type)>-1)n.playerOptions.file=r.url,n.playerOptions.type=i.type,n.playerOptions.mode=y.EXTERNAL_VIDEO;else{s=!0;try{o=w["default"].buildVanceVideoSource(i)}catch(d){if(d.code===y.ERROR_H265_NOT_SUPPORT)return x.error(y.PROMPT_H265_NOT_SUPPORT,i),void a(t,y.PROMPT_H265_NOT_SUPPORT)}if(!(o.length>0))return x.error(y.PROMPT_NO_SUPPORTED_VIDEO_FORMAT,i),void a(t,y.PROMPT_NO_SUPPORTED_VIDEO_FORMAT);n.playerOptions.dynamicMediaSource=o,n.playerOptions.poster=w["default"].generateVancePoster(r.url,o),u(o[0].name)}n.fenixPlayer=new C["default"](t,n.playerOptions),s&&new S["default"](n.fenixPlayer,o[0].stat).vOpen(),p(n,g,!0,h)});break;default:if(s(this.playerOptions))return a(t,y.PROMPT_NO_AVAILABLE_FLASH),void x.error("you need to install flash to continue");this.fenixPlayer=new C["default"](t,this.playerOptions),p(this,g,!1,h)}}return e.prototype.ready=function(e){return this.isPlayerReady_?g["default"].isFunction(e)&&e.call(this):this.readyFnQueue_.push(e),this},e}();t["default"]=A,Object.setPrototypeOf(A,C["default"]),window.QiniuPlayer=A},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=arguments[4];return t?s.indexOf(t)===-1?void a.error("Unknown topic "+t+" specified, no request will be sent.."):void videojs.xhr.post(e+t,{useXDR:!0,headers:n,body:JSON.stringify(r)},function(e,n){return e?(a.error("error on posting "+t),a.error(e),i?i(e):e):i?i(null,n):n}):void a.error("No topic specified, no request will be sent.")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=(0,o.getLogger)(),s=["vopen","vinit","vstart","vplaying","vseek","vpause","vresume","vchange","vlag","vdownload","vclose","vend"],u={"X-TOKEN":"A94B881E5C7749A48231F9C0","X-Data-Version":"0.5"},l={"X-TOKEN":"A94B881E5C7749A48231F9C0","X-Data-Version":"0.3"},c=function(){function e(){r(this,e)}return e.reportOpen=function(e,t){a.debug("Reporting video player opening state"),i(e,"vopen",u,t)},e.reportInit=function(e,t){a.debug("Reporting video player initlize state"),i(e,"vinit",u,t)},e.reportJediInit=function(e,t){a.debug("Reporting jedi video player initlize state"),i(e,"vinit",l,t)},e.reportStart=function(e,t,n){a.debug("Reporting video player start state"),i(e,"vstart",u,t,n)},e.reportPlaying=function(e,t){a.debug("Reporting video playing state."),i(e,"vplaying",u,t)},e.reportJediPlaying=function(e,t){a.debug("Reporting jedi video player playing state"),i(e,"vplaying",l,t)},e.reportClose=function(e,t,n){a.debug("Reporting video player end playing state"),i(e,"vclose",u,t,n)},e.reportJediEnd=function(e,t,n){a.debug("Reporting jedi video player end playing event"),i(e,"vend",l,t,n)},e.reportSeek=function(e,t){a.debug("Reporting video seeking event."),i(e,"vseek",u,t)},e.reportPause=function(e,t){a.debug("Reporting player pause event."),i(e,"vpause",u,t)},e.reportResume=function(e,t){a.debug("Reporting player resume event."),i(e,"vresume",u,t)},e.reportChange=function(e,t){a.debug("Reporting player change stream event."),i(e,"vchange",u,t)},e.reportWaiting=function(e,t){a.debug("Reporting player waiting event."),i(e,"vlag",u,t)},e.reportDownload=function(){},e}();t["default"]=c},function(e,t,n){"use strict";var r=n(2);window.QiniuPlayerVersion="0.3.7.1",function(){window.location.href.indexOf("qiniucc")>0?videojs.options.flash.swf="./sdk/latest/qiniu-vance.swf?v="+window.QiniuPlayerVersion||Date.now():videojs.options.flash.swf="http://player.qiniucc.com/sdk/latest/qiniu-vance.swf?v="+window.QiniuPlayerVersion||Date.now(),r.MP4_CONTENT_TYPES.map(function(e){return videojs.getComponent("Flash").formats[e]="MP4"}),r.HLS_CONTENT_TYPES.map(function(e){return videojs.getComponent("Flash").formats[e]="HLS"}),videojs.addLanguage("zh-CN",{Play:"播放","Play Video":"播放视频",Pause:"暂停",Quality:"清晰度","Current Time":"当前时间","Duration Time":"时长","Remaining Time":"剩余时间","Stream Type":"媒体流类型",LIVE:"直播",Loaded:"加载完毕",Progress:"进度",Fullscreen:"全屏","Non-Fullscreen":"退出全屏",Mute:"静音",Unmute:"取消静音","Playback Rate":"播放码率",Subtitles:"字幕","subtitles off":"字幕关闭",Captions:"内嵌字幕","captions off":"内嵌字幕关闭",Chapters:"节目段落","You aborted the media playback":"视频播放被终止","A network error caused the media download to fail part-way.":"网络错误导致视频下载中途失败。","The media could not be loaded, either because the server or network failed or because the format is not supported.":"视频因格式不支持或者服务器或网络的问题无法加载。","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"由于视频文件损坏或是该视频使用了你的浏览器不支持的功能，播放终止。","No compatible source was found for this media.":"无法找到此视频兼容的源。","The media is encrypted and we do not have the keys to decrypt it.":"视频已加密，无法解密。"})}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.hub=e.hub||"unknown",e.key=e.key||"unknown"}function o(){return(new Date).getTimezoneOffset()/60}function a(e){var t={};if(!e)return y.warn("empty stream tags."),t;var n=e.split(",");return n.length<3?(y.error("Invalid stream tag format."),t):(t.format=n[0],t.resolution=n[1],t.bit_rate=n[2],t)}function s(){return navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1||"undefined"!=typeof navigator.wxuserAgent?"wechat":"host: "+(window.location!==window.parent.location?document.referrer:document.location.href)}function u(e){var t=0;if(!e||0===e.length)return t;for(var n=0,r=e.length;n<r;n+=1){var i=e[n];i.duration&&(t+=i.duration)}return t}function l(e){var t=0;if(!e||0===e.length)return t;for(var n=0,r=e.length;n<r;n+=1)t+=e[n];return t}function c(e){var t=0;return e?t=e.indexOf("q00010001")>=0?0:e.indexOf("q00010001")>=0?1:e.indexOf("q00010001")>=0?2:0:t}Object.defineProperty(t,"__esModule",{value:!0});var d=n(7),f=function(e){return e&&e.__esModule?e:{"default":e}}(d),p=n(1),h=n(4),y=(0,p.getLogger)(),m=h.JEDI_STATS_REPORT_END_POINT+"/v1/topic/",g=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},o=arguments[2];if(r(this,e),!t)throw new Error("No player instance provided.");i(n),this.statsOptions=n,this.videosContainer={},this.resetVideoStats(),this.isPaused=!1,this.isWaited=!1,this.uid=n.uid,this.vPlayer=t,this.now=Date.now(),this.startTime=Date.now(),this.hasSentEnd=!1,this.bindEventListeners(),o&&o.call(this)}return e.prototype.vInit=function(){y.debug("Reporting video player initlize state");var e=1e3*this.getNow()*1e3,t={when:e,client:this.getClientInfo(),resource:this.getResourceInfo()};f["default"].reportJediInit(m,t)},e.prototype.vPlaying=function(){y.debug("Reporting video playing state.");var e={client:this.getClientInfo(),resource:this.getResourceInfo(),errors:this.getPlayerErrors(),pauses:this.getPausesInfo(),drags:this.getDragInfo(),changes:this.getStreamChangeInfo()};f["default"].reportJediPlaying(m,e)},e.prototype.vEnd=function(){var e=this;y.debug("Reporting video player end playing state");var t=1e3*this.getNow()*1e3,n={when:t,client:this.getClientInfo(),resource:this.getResourceInfo(),duration_stay:this.getStayDuration(),duration_watch:this.getWatchDuration()};f["default"].reportJediEnd(m,n,function(){e.hasSentEnd=!0,e.resetVideoStats()})},e.prototype.resetVideoStats=function(){this.drags=this.drags||[],this.changes=this.changes||[],this.pauses=this.pauses||[],this.errors=this.errors||[],this.waits=this.waits||[],this.lastStreamInfo=null,this.lastWait=null},e.prototype.isVideoAds=function(){if(!this.vPlayer.videoOptions||!this.vPlayer.videoOptions.videoAds)return!1;for(var e=this.vPlayer.videoOptions.videoAds,t=this.vPlayer.currentSrc(),n=0,r=e.length;n<r;n+=1)if(e[n].video_url===t)return!0;return!1},e.prototype.bindEventListeners=function(){var e=this;this.vPlayer&&(this.vPlayer.on("loadeddata",function(){e.isVideoAds()||(e.lastStreamInfo=e.getStreamInfo())}),this.vPlayer.on("play",function(){if(!e.isVideoAds()&&0!==e.pauses.length&&e.isPaused){e.isPaused=!1;var t=e.pauses[e.pauses.length-1],n=e.getNow();t.duration=n-t.when}}),this.vPlayer.on("pause",function(){e.isVideoAds()||(e.isPaused=!0,e.pauses.push({when:e.getNow(),offset:e.vPlayer.currentTime(),duration:undefined}))}),this.vPlayer.on("resolutionchange",function(){e.isVideoAds()||e.changes.push({when:e.getNow(),offset:e.vPlayer.currentTime(),from_stream:e.lastStreamInfo,to_stream:e.getStreamInfo()})}),this.vPlayer.on("seeking",function(){e.isVideoAds()||e.drags.push({when:e.getNow(),offset_start:e.vPlayer.currentTime(),offset_end:undefined,drag_wait:undefined})}),this.vPlayer.on("seeked",function(){if(!e.isVideoAds()&&0!==e.drags.length){var t=e.drags[e.drags.length-1];t.offset_end=e.vPlayer.currentTime(),t.drag_wait=e.getNow()-t.when}}),this.vPlayer.on("waiting",function(){e.isVideoAds()||(e.isWaited=!0,e.lastWait=e.getNow())}),this.vPlayer.on("progress",function(){if(!e.isVideoAds()&&e.isWaited){var t=e.getNow();e.waits.push(t-e.lastWait),e.isWaited=!1}}),this.vPlayer.on("error",function(){e.isVideoAds()||e.errors.push(e.vPlayer.error())}),this.vPlayer.on("ended",function(){e.isVideoAds()||e.vEnd()}),this.vPlayer.on("dispose",function(){e.isVideoAds()||e.vEnd()}),window.onbeforeunload=function(){e.isVideoAds()||e.vEnd()})},e.prototype.getStreamInfo=function(){var e={format:"",resolution:"",bit_rate:"",width:this.vPlayer.videoWidth(),height:this.vPlayer.videoHeight()},t=this.vPlayer.currentResolution().sources,n=this.vPlayer.currentSrc(),r=t.filter(function(e){return e.src===n});if(0===r.length)return y.debug("no stream found @ getStreamInfo()"),e;var i=r[0].tags;if(!i)return e;if(0===i.length)return e;if(1===i.length){var o=a(i[0]);return e.format=o.format,e.resolution=o.resolution,e.bit_rate=o.bit_rate,e}if(3===i.length){var s=void 0;try{var u=this.vPlayer.autoHlsCurrentSrc();s=c(u)}catch(c){y.error("cannot get auto HLS current stream."),s=0}var l=a(i[s]);return e.format=l.format,e.resolution=l.resolution,e.bit_rate=l.bit_rate,e}y.warn("Invalid media stream tags: ",JSON.stringify(i))},e.prototype.getNow=function(){return Date.now()},e.prototype.getStayDuration=function(){return this.getNow()-this.now},e.prototype.getWatchDuration=function(){return this.getStayDuration()-u(this.pauses)-l(this.waits)-this.startTime+this.now},e.prototype.getPlayerErrors=function(){return this.errors},e.prototype.getPausesInfo=function(){return this.pauses},e.prototype.getDragInfo=function(){return this.drags},e.prototype.getClientInfo=function(){return{zone:o(),ip:"",ua:window.navigator.userAgent,player:{family:this.vPlayer.engine(),version:this.vPlayer.version},refer:s()}},e.prototype.getResourceInfo=function(){return{hub:this.statsOptions.hub,key:this.statsOptions.key,domain:this.getVideoDomain(),duration:Math.round(1e3*this.vPlayer.duration()),owner:String(this.uid)}},e.prototype.getVideoDomain=function(){var e=this.vPlayer.currentSrc();return function(e){if(e){var t=document.createElement("a");return t.href=e,t.host}}(e)},e}();t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return(new Date).getTimezoneOffset()/60}function a(e){var t=d["default"].parseUserAgent();switch(e){case"device":return{family:t.device.type,version:t.device.model};case"os":return{family:t.os.name,version:t.os.version};case"app":return{family:t.browser.name,version:t.browser.version};default:return{}}}function s(){return navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1||"undefined"!=typeof navigator.wxuserAgent?"wechat":"host: "+(window.location!==window.parent.location?document.referrer:document.location.href)}function u(e){var t=0;if(!e||0===e.length)return t;for(var n=0,r=e.length;n<r;n+=1){var i=e[n];i.duration&&(t+=i.duration)}return t}function l(e){var t=0;if(0===e.length)return t;for(var n=0,r=e.length;n<r;n+=1)t+=e[n].wait||0;return t}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),d=r(c),f=n(7),p=r(f),h=n(4),y=h.VANCE_STATS_REPORT_END_POINT+"/v2/event/",m=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments[2];if(i(this,e),!t)throw new Error("No player instance provided.");this.prevStreamInfo=this.currentStreamInfo=n,this.videosContainer={},this.resetVideoStats(),this.isPaused=!1,this.isWaiting=!1,this.vPlayer=t,this.now=Date.now(),this.startTime=Date.now(),this.hasSentEnd=!1,this.hasSentStart=!1,this.bindEventListeners(),r&&r.call(this)}return e.prototype.vOpen=function(){var e={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo(),error:this.getPlayerErrors()};p["default"].reportOpen(y,e)},e.prototype.vInit=function(){var e={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo()};p["default"].reportInit(y,e)},e.prototype.vStart=function(){var e=this;if(!this.hasSentStart){var t=this.getNow();this.startTime=t;var n={session:this.vPlayer.getGUID(),when:t,client:this.getClientInfo(),resource:this.getCurrentResourceInfo()};p["default"].reportStart(y,n,function(){e.hasSentStart=!0})}},e.prototype.vPlaying=function(){var e={session:this.vPlayer.getGUID(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo(),errors:this.getPlayerErrors(),pauses:this.getPausesInfo(),drags:this.getDragInfo(),changes:this.getStreamChangeInfo()};p["default"].reportPlaying(y,e)},e.prototype.vClose=function(){var e=this;if(!this.hasSentEnd){var t={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo(),duration_stay:this.getStayDuration(),duration_watch:this.getWatchDuration(),offset:this.playerCurrentTimeInMS()};p["default"].reportClose(y,t,function(){e.hasSentEnd=!0,e.resetVideoStats()})}},e.prototype.vSeek=function(){var e=this.drags[this.drags.length-1]||{when:this.getNow(),offset_end:this.playerCurrentTimeInMS(),wait:0},t={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo(),error:this.getPlayerErrors(),offset_start:e.offset_start,offset_end:e.offset_end,wait:e.wait||0};p["default"].reportSeek(y,t)},e.prototype.vPause=function(){var e={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo(),error:this.getPlayerErrors(),offset:this.playerCurrentTimeInMS()};p["default"].reportPause(y,e)},e.prototype.vResume=function(){var e={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo(),error:this.getPlayerErrors(),offset:this.playerCurrentTimeInMS(),duration:this.getLastPauseDuration(),wait:0};p["default"].reportResume(y,e)},e.prototype.vChange=function(){var e={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),error:this.getPlayerErrors(),offset:this.playerCurrentTimeInMS(),resource_from:this.getPrevResourceInfo(),resource_to:this.getCurrentResourceInfo(),adapt:this.isAdapt()?1:0,wait:0};p["default"].reportChange(y,e)},e.prototype.getPrevResourceInfo=function(){return this.prevStreamInfo},e.prototype.getCurrentResourceInfo=function(){return this.currentStreamInfo},e.prototype.isAdapt=function(){var e=this.getCurrentResourceInfo();return!!e&&e.isAdapt},e.prototype.vWaiting=function(){var e={session:this.vPlayer.getGUID(),when:this.getNow(),client:this.getClientInfo(),resource:this.getCurrentResourceInfo(),error:this.getPlayerErrors(),offset:this.playerCurrentTimeInMS(),wait:this.getLastWaitDuration()};p["default"].reportWaiting(y,e)},e.prototype.vDownload=function(){},e.prototype.resetVideoStats=function(){this.drags=this.drags||[],this.changes=this.changes||[],this.pauses=this.pauses||[],this.errors=this.errors||[],this.waits=this.waits||[],this.lastWait=null},e.prototype.isVideoAds=function(){if(!this.vPlayer.videoOptions||!this.vPlayer.videoOptions.videoAds)return!1;for(var e=this.vPlayer.videoOptions.videoAds,t=this.vPlayer.currentSrc(),n=0,r=e.length;n<r;n+=1)if(e[n].video_url===t)return!0;return!1},e.prototype.bindEventListeners=function(){var e=this;this.vPlayer&&(this.vPlayer.on("loadeddata",function(){e.isVideoAds()||e.vStart()}),this.vPlayer.on("loadedmetadata",function(){e.updateStreamInfo()}),this.vPlayer.on("play",function(){if(!e.isVideoAds()&&0!==e.pauses.length&&e.isPaused){var t=e.pauses[e.pauses.length-1],n=e.getNow();t.duration=n-t.when,e.isPaused&&(e.vResume(),e.isPaused=!1)}}),this.vPlayer.on("pause",function(){e.isVideoAds()||(e.isPaused=!0,e.pauses.push({when:e.getNow(),offset:e.playerCurrentTimeInMS(),duration:undefined}),e.vPause())}),this.vPlayer.on("seeking",function(){e.isVideoAds()||e.drags.push({when:e.getNow(),offset_start:e.playerCurrentTimeInMS(),offset_end:undefined,drag_wait:undefined})}),this.vPlayer.on("seeked",function(){if(!e.isVideoAds()&&0!==e.drags.length){var t=e.drags[e.drags.length-1];t.offset_end=e.playerCurrentTimeInMS(),t.drag_wait=e.getNow()-t.when,e.vSeek()}}),this.vPlayer.on("waiting",function(){e.isVideoAds()||(e.isWaiting=!0,e.lastWait=e.getNow(),e.waits.push({when:e.getNow(),offset:e.playerCurrentTimeInMS(),wait:undefined,end:undefined}))}),this.vPlayer.on("play",function(){if(!e.isVideoAds()&&e.isWaiting&&0!==e.waits.length){var t=e.waits[e.waits.length-1],n=e.getNow();t.wait=n-t.when,t.end=n,e.isWaiting&&(e.vWaiting(),e.isWaiting=!1)}}),this.vPlayer.on("error",function(){e.isVideoAds()||e.errors.push(e.vPlayer.error())}),this.vPlayer.on("ended",function(){e.isVideoAds()||e.vClose()}),this.vPlayer.on("dispose",function(){e.isVideoAds()||e.vClose()}),this.vPlayer.on("resolutionchange",function(){e.updateStreamInfo(),e.vChange()}),this.vPlayer.on("mediachange",function(){e.updateStreamInfo(),e.vChange()}),window.onload=function(){e.vOpen()},window.onbeforeunload=function(){e.isVideoAds()||e.vClose()})},e.prototype.updateStreamInfo=function(){var e=this.vPlayer.currentStats();this.prevStreamInfo=this.currentStreamInfo,this.currentStreamInfo=e},e.prototype.getLastWaitDuration=function(){if(0!==this.waits.length)return this.waits[this.waits.length-1].wait},e.prototype.getLastPauseDuration=function(){return!this.pauses||this.pauses.length<=0?0:this.pauses[this.pauses.length-1].duration},e.prototype.playerCurrentTimeInMS=function(){return Math.round(1e3*this.vPlayer.currentTime())},e.prototype.getNow=function(){return Date.now()},e.prototype.getStayDuration=function(){return this.getNow()-this.now},e.prototype.getWatchDuration=function(){return this.getStayDuration()-u(this.pauses)-l(this.waits)-this.startTime+this.now},e.prototype.getPlayerErrors=function(){var e=this.errors;if(e){if(d["default"].isPlainObject(e))return e;if(d["default"].isString(e))return{message:e}}return{}},e.prototype.getPausesInfo=function(){return this.pauses},e.prototype.getDragInfo=function(){return this.drags},e.prototype.getClientInfo=function(){return{zone:o(),ip:"",device:a("device"),os:a("os"),app:a("app"),player:{family:this.vPlayer.engine(),version:this.vPlayer.version||window.QiniuPlayerVersion},refer:s()}},e.prototype.getVideoDomain=function(){var e=this.vPlayer.currentSrc();return function(e){if(e){var t=document.createElement("a");return t.href=e,t.host}}(e)},e}();t["default"]=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),a=n(2),s=n(1),u=void 0;u=n(4);var l={name:"Qiniu 7th anniversary",tags:"tags",desc:"desc1",size:123,ctime:1472020825101,mtime:1472020825101,status:"normal",avinfo:{duration:"10.10.10",format:"mp4",video:{bitrate:12345,width:123,height:456,framerate:1500,codec:"h264"},audio:{bitrate:1234,quality:321,samplingrate:123,codec:"aac"}},transcoding:[{id:"transconf1",transset_name:"MP4",transconf_name:"超清",url:u.DEFAULT_VIDEOS_HOST_SITE+"/qiniu-cloud-default-1280x720.mp4",format:"mp4",status:"normal"},{id:"transconf2",transset_name:"HLS",transconf_name:"超清",url:u.DEFAULT_VIDEOS_HOST_SITE+"/qiniu-cloud-default-1280x720.m3u8",format:"hls",status:"normal"},{id:"transconf3",transset_name:"MP4",transconf_name:"高清",url:u.DEFAULT_VIDEOS_HOST_SITE+"/qiniu-cloud-default-720x480.mp4",format:"mp4",status:"normal"},{id:"transconf4",transset_name:"HLS",transconf_name:"高清",url:u.DEFAULT_VIDEOS_HOST_SITE+"/qiniu-cloud-default-720x480.m3u8",format:"hls",status:"normal"},{id:"transconf5",transset_name:"MP4",transconf_name:"标清",url:u.DEFAULT_VIDEOS_HOST_SITE+"/qiniu-cloud-default-480x320.mp4",format:"mp4",status:"normal"},{id:"transconf6",transset_name:"HLS",transconf_name:"标清",url:u.DEFAULT_VIDEOS_HOST_SITE+"/qiniu-cloud-default-480x320.m3u8",format:"hls",status:"normal"}],thumbnails:{urls:"http://assets.qiniu.com/v2/qiniu-620x205.png",active:0}},c=(0,s.getLogger)(),d=function(){function e(){r(this,e)}return e.fetchVanceVideoInfo=function(e,t){var n=videojs.xhr,r=!1,i=void 0,s=function(e){var n=e.contentType;if(!n&&e.getAllResponseHeaders&&(n=o["default"].parseHTTPHeaders(e.getAllResponseHeaders())["content-type"],n=(n||"").split(/;|\s/)[0]),n){var s=!n||o["default"].isContentTypeMatch(n,"application/json"),u=!n||o["default"].isHlsContentType(n),l=!n||o["default"].isMp4ContentType(n);if(s)i();else if(!r){if(r=!0,e.abort(),e=null,u||l)return t(null,{type:u?"hls":"mp4"});var c=new Error("cancel request, not video info");return c.code=a.ERROR_NOT_VINFO,t(c,null)}}};n({method:"GET",uri:e,useXDR:!0,json:!0,beforeSend:function(e){8===videojs.browser.IE_VERSION||9===videojs.browser.IE_VERSION?(i=e.onprogress,e.onprogress=function(){s(e)}):(i=e.onreadystatechange,e.onreadystatechange=function(){s(e)})}},function(e,n){if(!r)return e?t(e,null):t(null,"string"==typeof n.body?JSON.parse(n.body):n.body,n)})},e.buildVanceVideoSource=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.transcoding||{},n=Object.keys(t).map(function(e){return t[e]}),r=n.filter(function(e){var t=(e.format||"").toLowerCase();return"libx264"===(e.preset.sets[0].video_codec||"").toLowerCase()&&"hls"===t}),i=!1,o=[];if(r.map(function(e){return i=i||e.preset.sets.length>1}),i)o=r.filter(function(e){return e.preset.sets.length>1}),o.splice(1);else if(o=r.concat(n.filter(function(e){var t=(e.format||"").toLowerCase();return"libx264"===(e.preset.sets[0].video_codec||"").toLowerCase()&&"mp4"===t&&1===e.preset.sets.length})),0===o.length){var s=!1;if(n.map(function(e){var t=(e.format||"").toLowerCase(),n=(e.preset.sets[0].video_codec||"").toLowerCase();s=s||"libx265"===n&&("mp4"===t||"hls"===t)}),s){var u=new Error("h.265 not support yet");throw u.code=a.ERROR_H265_NOT_SUPPORT,u}}return o.map(function(e){var t=e.url.split("?")[0],n={src:e.url,type:"mp4"===e.format?"video/mp4":"application/x-mpegURL",label:"自动",name:e.key,poster:t+"?vframe/jpg/offset/5"},r=function(e,t){var n=t.stream_id,r=(t.resolution||"").toLowerCase(),o=parseInt(r.split("x")[0]||"0"),a=parseInt(r.split("x")[1]||"0");if(!(n=!n&&a>0?a+"p":n)){var s=parseInt(t.video_bit_rate);n=s<7e5?"流畅":s<15e5?"标清":s<3e6?"高清":s<1e7?"超清":s>=1e7?"4K":e.preset.title||""}return{id:t.stream_id||t.name,format:e.format,label:n,video:{codec:t.video_codec,frame_rate:parseInt(t.frame_rate||"0"),bit_rate:parseInt(t.video_bit_rate||"0"),width:o,height:a},audio:{codec:t.audio_codec},isAdapt:i}};return e.preset.sets.length>1?(n.channels=e.preset.sets.map(function(t){return r(e,t)}).sort(function(e,t){return e.video.bit_rate-t.video.bit_rate}),n.stat=n.channels[0],n.res=Number.MAX_SAFE_INTEGER):(n.stat=r(e,e.preset.sets[0]),n.res=n.stat.video.bit_rate),n}).sort(function(e,t){return parseInt(e.res||"0")-parseInt(t.res||"0")}).sort(function(e,t){return{"video/mp4":0,"application/x-mpegURL":1}[e.type]-{"video/mp4":0,"application/x-mpegURL":1}[t.type]})},e.generateVancePoster=function(e,t){return t.length?t[0].poster:e+"?vframe/jpg/offset/5"},e.fetchVideoInfo=function(e,t,n,r,i){if(n)return i(null,l);var o=r?"":"?include_player=true",a=u.VIDEOS_REQUEST_END_POINT+"/v1/hubs/"+e+"/videos/"+t+o;videojs.xhr.get(a,{useXDR:!0},function(e,t){return e?(c.error(e),i(e)):"string"==typeof t.body?i(null,JSON.parse(t.body)):i(null,t.body)})},e.sortByFormat=function(e){if(!e)return void c.debug("No input array, return.");e.sort(function(e,t){var n=e.format.toLowerCase(),r=t.format.toLowerCase();return n<r?-1:n>r?1:0}),c.debug(e)},e.generateResForOrder=function(e){if(!e)return void c.debug("no label provided to generate res, return.");switch(e){case"自动":return 4e3;case"超高清":case"超清":return 1080;case"高清":return 720;case"标清":return 480;case"手机":case"流畅":return 320;default:return c.error("Unknown resolution: "+e),0}},e.buildVideoSource=function(t){var n=[],r=t.transcoding;c.debug("Parsing video transconfig...");for(var i={},o=0,a=r.length;o<a;o+=1){var s=i[r[o].transconf_name];s?(s.push(r[o]),c.debug("sorting videos array..."),e.sortByFormat(s)):i[r[o].transconf_name]=[r[o]]}for(var u in i)for(var l=0,d=i[u].length;l<d;l+=1)if(!i[u][l]||"failed"!==i[u][l].status){var f={type:"mp4"===i[u][l].format.toLowerCase()?"video/mp4":"application/x-mpegURL",src:i[u][l].url,label:i[u][l].transconf_name,res:e.generateResForOrder(i[u][l].transconf_name),tags:i[u][l].stream_tags};n.push(f)}return c.debug("result of video sources array:"),c.debug(n),n},e.generateVideoPoster=function(e,t){if(t)return"https://player.qiniucc.com/qiniu-620x205.png";var n="",r=e.thumbnails;return r&&r.urls&&(n=r.urls[0]),n||""},e}();t["default"]=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_DELTAS=undefined;var i=n(0),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),a=n(1),s=(0,a.getLogger)(),u={linear:function(e){return e},quadrantic:function(e){return Math.pow(e,2)},circle:function(e){return 1-Math.sin(Math.acos(e))},bounce:function(e){for(var t=0,n=1;1;t+=n,n/=2)if(e>=(7-4*t)/11)return-Math.pow((11-6*t-11*e)/4,2)+Math.pow(n,2)},elastic:function(e,t){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)},easeIn:function(e,t){return t(1*e)/1},easeOut:function(e,t){return 1-t(1-e)},easeInOut:function(e,t){return e<.5?t(2*e)/2:(2-t(2*(1-e)))/2}},l=t.ALL_DELTAS=Object.keys(u),c=function(){function e(){r(this,e)}return e.deltaFunc=function(e){return e?l.includes(e)?u[e]:(s.warn("Invalid type "+e+", return linear as default."),u.linear):u.linear},e.moveRight=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;return e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.display="block",t.style.top=r+"px"},teardown:function(){t.style.display="none"},step:function(e){t.style.left=n*e+"px"}},i)},e.moveLeft=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.display="block",t.style.top=r+"px"},teardown:function(){t.style.display="none"},step:function(e){t.style.right=n*e+"px"}},i)},e.moveDown=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.display="block",t.style.left=n+"px"},teardown:function(){t.style.display="none"},step:function(e){t.style.top=r*e+"px"}},i)},e.moveUp=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.left=n+"px",t.style.display="block"},teardown:function(){t.style.display="none"},step:function(e){t.style.bottom=r*e+"px"}},i)},e.moveUpLeft=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.display="block"},teardown:function(){t.style.display="none"},step:function(e){t.style.right=n*e+"px",t.style.bottom=r*e+"px"}},i)},e.moveUpRight=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.display="block"},teardown:function(){t.style.display="none"},step:function(e){t.style.left=n*e+"px",t.style.bottom=r*e+"px"}},i)},e.moveDownLeft=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.display="block"},teardown:function(){t.style.display="none"},step:function(e){t.style.right=n*e+"px",t.style.top=r*e+"px"}},i)},e.moveDownRight=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:u.linear;e.animateForTimes({delay:10,duration:1e3*i.duration,delta:o,setup:function(){t.style.display="block"},teardown:function(){t.style.display="none"},step:function(e){t.style.left=n*e+"px",t.style.top=r*e+"px"}},i)},e.animateForTimes=function(t,n){var r=void 0;return r=n.loop===-1?setInterval(function(){e.animate(t)},1e3*n.duration*2):setInterval(function(){n.loop-=1,n.loop<=0&&setTimeout(function(){clearInterval(r)},0),e.animate(t)},1e3*n.duration*2)},e.animate=function(e){var t=Date.now();o["default"].isFunction(e.setup)&&e.setup();var n=setInterval(function(){var r=Date.now()-t,i=r/e.duration;i>1&&(i=1);var a=e.delta(i);e.step(a),1==i&&(clearInterval(n),o["default"].isFunction(e.teardown)&&e.teardown())},e.delay||10)},e}();t["default"]=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){r(this,e)}return e.eventAvailable=function(e){return!!e},e.normalizeEvent=function(e){return e?String(e).trim().toLowerCase():""},e}();t["default"]=i},,function(e,t,n){"use strict";function r(e){if(l)return void 0===e?parseFloat(localStorage.getItem("p_v")||"1"):void localStorage.setItem("p_v",e)}function i(e){if(l)return void 0===e?!!parseInt(localStorage.getItem("p_muted")||"0"):void localStorage.setItem("p_muted",e?1:0)}function o(e){e.volume(r()),e.mute(i()),e.on("volumechange",function(){return r(e.volume())}),e.on("volumechange",function(){return i(e.isMuted())})}Object.defineProperty(t,"__esModule",{value:!0}),t.setupPlaybackRestore=o;var a=n(0),s=function(e){return e&&e.__esModule?e:{"default":e}}(a),u=n(2),l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t["default"]=e}(u),s["default"].checkSupportLocalStorage())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){this.player=e,this.ctx=null,this.canvas=null,this.iconImage=null,this.mode="normal",s["default"].detectIE()&&s["default"].detectIE()<9&&(this.mode="ie8")}function o(e,t,n){if(!e.waitingForConnection){e.waitingForConnection=!0;var r=e.currentTime()||n||0,i=e.options_.dynamicMediaSource,o=e.options_.file,a=e.options_.type,s=e.currentResolution().label,u=setInterval(function(){e.loadingSpinner.show(),t.destory(),i?e.error(null).pause().updateSrc(i).currentResolution(s).load().currentTime(r).play():e.error(null).pause().src({src:o,type:a}).load().currentTime(r).play()},5e3);e.one("playing",function(){clearInterval(u),e.waitingForConnection=!1})}}var a=n(0),s=r(a),u=n(3),l=r(u),c={note:"抱歉，加载视频失败"};i.prototype.init=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.options=videojs.mergeOptions(c,e),this.iconImage=new Image,this.iconImage.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgIDxwYXRoIGZpbGw9IiNGRkI0M0YiIGQ9Ik0xMC4yODU3MTQzLDAgQzQuNjI4NTcxNDMsMCAwLDQuNjI4NTcxNDMgMCwxMC4yODU3MTQzIEMwLDE1Ljk0Mjg1NzEgNC42Mjg1NzE0MywyMC41NzE0Mjg2IDEwLjI4NTcxNDMsMjAuNTcxNDI4NiBDMTUuOTQyODU3MSwyMC41NzE0Mjg2IDIwLjU3MTQyODYsMTUuOTQyODU3MSAyMC41NzE0Mjg2LDEwLjI4NTcxNDMgQzIwLjU3MTQyODYsNC42Mjg1NzE0MyAxNS45NDI4NTcxLDAgMTAuMjg1NzE0MywwIEwxMC4yODU3MTQzLDAgWiBNMTEuMzE0Mjg1NywxNS40Mjg1NzE0IEw5LjI1NzE0Mjg2LDE1LjQyODU3MTQgTDkuMjU3MTQyODYsMTMuMzcxNDI4NiBMMTEuMzE0Mjg1NywxMy4zNzE0Mjg2IEwxMS4zMTQyODU3LDE1LjQyODU3MTQgTDExLjMxNDI4NTcsMTUuNDI4NTcxNCBaIE0xMS4zMTQyODU3LDExLjMxNDI4NTcgTDkuMjU3MTQyODYsMTEuMzE0Mjg1NyBMOS4yNTcxNDI4Niw1LjE0Mjg1NzE0IEwxMS4zMTQyODU3LDUuMTQyODU3MTQgTDExLjMxNDI4NTcsMTEuMzE0Mjg1NyBMMTEuMzE0Mjg1NywxMS4zMTQyODU3IFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjI4NTcxNCwgMTAuMjg1NzE0KSBzY2FsZSgxLCAtMSkgdHJhbnNsYXRlKC0xMC4yODU3MTQsIC0xMC4yODU3MTQpICI+PC9wYXRoPjwvc3ZnPg==","ie8"===this.mode?this.initOnIe8():this.initNormally()},i.prototype.initOnIe8=function(){this.canvas=l["default"].createElement("div",{"class":"vjs-error-mask-ie8"},this.player.el()),l["default"].createElement("div",{"class":"vjs-error-note-ie8"},this.canvas).innerHTML="<i class='vjs-error-note-icon'>&nbsp;</i>"+this.options.note,this.resize()},i.prototype.initNormally=function(){this.canvas=l["default"].createElement("canvas",{},this.player.el()),this.ctx=this.canvas.getContext("2d"),this.drawTimer=null,this.resize()},i.prototype.redraw=function(){if(this.ctx&&this.ctx.canvas){var e=this.ctx.canvas.width,t=this.ctx.canvas.height,n=this.ctx.createImageData(e,t),r=n.data,i=e*t,o=0,a=0,s=0;for(this.ctx.clearRect(0,0,e,t);o<i;o++)s=4*o,a=Math.floor(2*Math.random())&&Math.round(63*Math.random()),r[s]=r[s+1]=r[s+2]=a,r[s+3]=255;this.ctx.putImageData(n,0,0),this.ctx.textAlign="center",this.ctx.font="18px Arial",this.ctx.fillStyle="#ffffff";var u=this.ctx.measureText(this.options.note).width;this.ctx.fillText(this.options.note,(e+11)/2,.45*t),this.ctx.drawImage(this.iconImage,(e-u)/2-24,.45*t-17)}},i.prototype.drawCanvas=function(){var e=function(){};this.drawTimer=setInterval(function(){this.redraw(),requestAnimationFrame(e)}.bind(this),100)},i.prototype.clearDrawing=function(){clearInterval(this.drawTimer)},i.prototype.resize=function(){var e=this.player.el(),t=function(e){return parseInt((e+"").split("px")[0])};this.canvas&&window.getComputedStyle&&(this.canvas.setAttribute("width",t(window.getComputedStyle(e).width)),this.canvas.setAttribute("height",t(window.getComputedStyle(e).height)))},i.prototype.show=function(){"ie8"===this.mode?this.showOnIE8():this.showNormally()},i.prototype.showOnIE8=function(){this.player.addClass("vjs-error-ie8"),this.display()},i.prototype.showNormally=function(){this.drawTimer&&clearInterval(this.drawTimer),this.display(),this.drawCanvas()},i.prototype.display=function(){this.canvas&&(this.canvas.style.display="block")},i.prototype.destory=function(){this.drawTimer&&clearInterval(this.drawTimer),this.canvas&&this.player.el().removeChild(this.canvas),this.canvas=null,this.ctx=null,this.drawTimer=null};var d=function(){var e=this,t=new i(e),n=0;e.on("ready",function(){t.init()}),e.on("timeupdate",function(){n=e.currentTime()||n}),e.on("error",function(){function r(){e.loadingSpinner.hide(),e.controls(!1),e.isFullscreen()?(e.exitFullscreen(),e.one("fullscreenchange",function(){t.show()})):t.show()}var i=e.error();2===i.code?o(e,t,n):4===i.code&&videojs.browser.IS_ANDROID?o(e,t,n):e.paused()?r():(e.pause(),e.one("pause",function(){r()}))}),s["default"].on(window,"resize",function(){t.resize()}),e.on("dispose",function(){t.destory()})};videojs.plugin("errorMask",d)},function(e,t,n){"use strict";var r=n(3),i=function(e){return e&&e.__esModule?e:{"default":e}}(r),o={startAds:[],pauseAds:[],endAds:[],maxHeight:"100%",maxWidth:"50%",width:undefined},a={normalizeAdsOptions:function(e){var t={};return"[object Array]"!==Object.prototype.toString.call(e)?(t.startAds=[],t.pauseAds=[],t.endAds=[],t):(e=e||[],t.startAds=e.filter(function(e){return"string"==typeof e.position&&"op"===e.position.replace(/^\s*|\s*$/g,"").toLowerCase()}),t.pauseAds=e.filter(function(e){return"string"==typeof e.position&&"pause"===e.position.replace(/^\s*|\s*$/g,"").toLowerCase()}),t.endAds=e.filter(function(e){return"string"==typeof e.position&&"ed"===e.position.replace(/^\s*|\s*$/g,"").toLowerCase()}),t)},validateWidthOrHeight:function(e){var t=/^\d+(\.\d+){0,1}(%|rem|em|ex|px|pt|pc|in|cm|mm)$/g;return!("string"!=typeof e||!t.test(e))}},s=function(e){var t=this,n=a.normalizeAdsOptions(e),r=videojs.mergeOptions(o,n),s=!1,u=!1,l=null,c=null;r.width=a.validateWidthOrHeight(r.width)?r.width:o.width,r.maxHeight=a.validateWidthOrHeight(r.maxHeight)?r.maxHeight:o.maxHeight,r.maxWidth=a.validateWidthOrHeight(r.maxWidth)?r.maxWidth:o.maxWidth;var d={disablePauseAd:function(e){var e=void 0===e?876e5:e||0;s=!0,setTimeout(function(){s=!1},e)},isPauseAdDisabled:function(){return s},initImage:function(){if(!u){Array.prototype.concat(r.startAds,r.pauseAds,r.endAds).map(function(e){(new Image).src=e.image_url});var e,n,o;c=i["default"].createElement("a",{id:"vjs-image-overlay-holder",href:"javascript: void(0);"},t.el()),e=i["default"].createElement("div",{},c),n=i["default"].createElement("div",{textContent:"广告"},e),o=i["default"].createElement("div",{id:"vjs-image-overlay-close-button"},e),l=i["default"].createElement("img",{},e),i["default"].addClass(c,"vjs-hidden"),c.style.width=r.width,c.style.maxWidth=r.maxWidth,c.style.maxHeight=r.maxHeight,i["default"].addClass(n,"video-image-ad-note"),i["default"].addClass(o,"vjs-close-button"),i["default"].addClass(o,"video-image-overlay-close-button"),o.onclick=d.hideImage,u=!0,r.startAds.length&&d.showImage("start")}},showImage:function(e){if(u&&/^(start|pause|end)$/.test(e)){var n=Math.floor(Math.random()*r[e+"Ads"].length);if(i["default"].hasClass(c,"vjs-hidden")||l.src!==r[e+"Ads"][n].image_url){l.src=r[e+"Ads"][n].image_url,l.onclick=d.openAdLink.bind(null,r[e+"Ads"][n].url);var o=new Image;o.src=l.src,o.onload=function(e){t.paused()&&l.src===o.src&&(c.style.width=r.width||o.width+"px",i["default"].removeClass(c,"vjs-hidden"))}}}},hideImage:function(){c&&c.style&&i["default"].addClass(c,"vjs-hidden")},openAdLink:function(e){/^http:\/\/|https:\/\/|\/\//g.test(e)?window.open(e):e.replace(/^\s*|\s*$/g,"")&&window.open("//"+e.replace(/^\s*|\s$/g,""))}};t.one(["loadeddata","loadedmetadata"],d.initImage),t.on("play",d.hideImage),t.on("pause",function(){setTimeout(function(){0!==t.currentTime()&&t.currentTime()!==t.duration()&&0!==r.pauseAds.length&&t.paused()&&(t.hasClass("vjs-ended")||t.scrubbing_||d.isPauseAdDisabled()||d.showImage("pause"))},1)}),t.on("ended",function(){setTimeout(function(){r.endAds.length&&d.showImage("end")},0)}),t.on("firstplay",function(){d.disablePauseAd(1e3)})};videojs.plugin("imageAds",s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=void 0,r=document.getElementById(t),i=document.createElement("div"),a=l["default"].elementDimension(r);s["default"].addClass(i,"jedi-marquee");for(var u in e)if(e.hasOwnProperty(u))switch(u){case"direction":var c=String(e[u]).toLowerCase();switch(c){case"east":n=f["default"].moveRight(i,a.width,Math.round(a.height/2),e);break;case"west":n=f["default"].moveLeft(i,a.width,Math.round(a.height/2),e);break;case"south":n=f["default"].moveDown(i,Math.round(a.width/2),a.height,e);break;case"north":n=f["default"].moveUp(i,Math.round(a.width/2),a.height,e);break;case"northwest":n=f["default"].moveUpLeft(i,a.width,a.height,e);break;case"northeast":n=f["default"].moveUpRight(i,a.width,a.height,e);break;case"southwest":n=f["default"].moveDownLeft(i,a.width,a.height,e);break;case"southeast":n=f["default"].moveDownRight(i,a.width,a.height,e);break;default:p.error("Unsupported marquee option: "+u+" => "+e[u])}break;case"image":e[u]&&(i.innerHTML="\n                            <img src='"+e[u]+"'>\n                            ");break;case"text":e[u]&&(i.innerHTML=e[u]);break;case"text_font":i.style.fontFamily=e[u];break;case"text_color":i.style.color=e[u];break;case"text_size":i.style.fontSize=String(e[u])+"px";break;case"duration":case"loop":case"enabled":break;default:p.error("Unsupported marquee option: "+u+" => "+e[u])}return o(document.querySelectorAll(".jedi-marquee")),r.appendChild(i),n}function o(e){if(e&&!(e.length<=0))for(var t=0,n=e.length;t<n;t+=1)if(e[t].remove)e[t].remove();else{var r=e[t].parentNode();r.removeChild(e[t])}}var a=n(3),s=r(a),u=n(0),l=r(u),c=n(1),d=n(12),f=r(d),p=(0,c.getLogger)(),h=function(e,t){var n=this,r=i(e,t);l["default"].on(window,"resize",function(){r&&(clearInterval(r),r=i(e,t))}),n.on("dispose",function(){r&&clearInterval(r)})};videojs.plugin("marquee",h)},function(e,t,n){"use strict";var r=n(3),i=function(e){return e&&e.__esModule?e:{"default":e}}(r),o={duration:3e3},a={"short":800,normal:3e3,"long":15e3,forever:2147483647},s=function(e){var t=this,n=videojs.mergeOptions(o,e),r=i["default"].createElement("div",{"class":"vjs-notify"},t.el_),s={text:"",hideTimer:null,el:i["default"].createElement("div",{"class":"vjs-notify-inner vjs-hidden"},r)};s.setMsg=function(e){s.text=e.text||"",e.code!==-1&&(s.text+="(错误码:"+e.code+")"),s.el.innerHTML="<p>"+s.text+"</p>"},s.show=function(e){s.hideTimer&&clearTimeout(s.hideTimer),i["default"].removeClass(s.el,"vjs-hidden"),s.hideTimer=setTimeout(function(){s.hide()},e||n.duration)},s.hide=function(){i["default"].addClass(s.el,"vjs-hidden")},t.hideNotification=function(){s.hide()},t.notify=function(e,n){if(e){if("string"==typeof e)return t.notify({code:-1,text:e},n);"string"==typeof n&&(n=/^\d+$/g.test(n)?parseInt(n):a[n]||a.normal),s.setMsg(e),s.show(n)}}};videojs.plugin("notification",s)},function(e,t,n){"use strict";var r={"default":{label:"标清",res:2e3},dynamicLabel:!1},i=void 0,o=1,a=function(e){var t="";return 0===e?t="自动":e<7e5?t="流畅":e<15e5?t="标清":e<3e6?t="高清":e<1e7?t="超清":e>=1e7?t="4K":(t="线路"+o,o++),t},s=videojs.getComponent("MenuItem"),u=videojs.extend(s,{constructor:function(e,t,n,r){this.onClickListener=n,this.label=r,s.call(this,e,t),this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(){this.onClickListener(this),this.showAsLabel(),this.addClass("vjs-selected"),this.options_.switcher.currentLabel=this.options_.label,this.options_.switcher.setSelectPlaylist(this.options_.levelInfo.bitrate)}}),l=videojs.getComponent("MenuButton"),c=videojs.extend(l,{constructor:function(e,t,n){this.label=n,l.call(this,e,t),this.controlText("清晰度"),this.el().appendChild(n)},createItems:function(){if(this.options_.dynamicLabel||this.options_.levels){var e=[],t={id:"",label:"自动",width:undefined,height:undefined,bitrate:0,enabled_:!0},n=this.options_.dynamicLabel?this.player_.qualityLevels().levels_:this.options_.levels,r=function(t){e.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})};n.length>1&&e.push(new u(this.player_,videojs.mergeOptions({},this.options_,{levelInfo:t,label:a(t.bitrate),initialySelected:!0}),r,this.label));for(var i=0;i<n.length;i++){var o=n[i],s=videojs.mergeOptions({},this.options_,{levelInfo:o,label:this.options_.dynamicLabel?a(o.bitrate):o.label});e.push(new u(this.player_,s,r,this.label))}return e}}}),d=function(e,t){return(e||[]).filter(function(e){return e.bitrate===t}).map(function(e){return e.info})[0]};i=function(e){var t=this,n=null,i={menu:null,currentLabel:"",setSelectPlaylist:function(e){if(t.tech_&&t.tech_.hls){var r=t.tech_.hls;r.selectPlaylist=function(){if(void 0===e)return n();try{for(var r=t.qualityLevels().levels_,i=r.filter(function(t){if(t.bitrate===e)return!0})[0],o=i.id||i.label,a=this.playlists.master.playlists,s=0;s<a.length;s++)if(o===a[s].uri)return a[s]}catch(u){return n()}}.bind(r)}}},o=videojs.mergeOptions(r,e,{switcher:i});t.ready(function(){t.tech_.hls&&(n=t.tech_.hls.selectPlaylist),t.on("loadedmetadata",function(){var e=document.createElement("span");e.className="vjs-resolution-button-label";var n=new c(t,o,e);videojs.addClass(n.el(),"vjs-resolution-button"),t.controlBar.resolutionSwitcher=t.controlBar.el_.insertBefore(n.el_,t.controlBar.getChild("fullscreenToggle").el_),t.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)}})}),t.currentResolution=function(){var e={sources:[],label:""},n=t.qualityLevels(),r=n.levels_.map(function(e){return videojs.mergeOptions({},e,{url:e.id},d(o.levels,e.bitrate))})[n.selectedIndex_];return r&&(e.sources=[r],e.label=r.label),e}},videojs.plugin("resolutionSwitcher",i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),a=r(o),s=n(0),u=r(s),l=function(){function e(){i(this,e)}return e.isVideoDRMEnabled=function(e){return!!a["default"].players_[e].videoOptions.protection},e.getVideoDRMLevel=function(e){return a["default"].players_[e].videoOptions.protection},e.getVideoHub=function(e){return a["default"].players_[e].videoOptions.hub},e.getVideoid=function(e){return a["default"].players_[e].videoOptions.vid},e.getVideoUKey=function(e){return a["default"].players_[e].videoOptions.uKey||""},e.isIE=function(){return u["default"].detectIE()&&!0},e.notify=function(e,t,n){return a["default"].players_[e].videoPlayer.notify(t,n)},e}();t["default"]=l,window.Bridge=l},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(r);videojs.plugin("QiniuAds",function(e){var t=this,n=null,r=null,o={debug:!1,stitchedAds:!0,resumePeriod:10,posterPlaceholder:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+ICAgIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJibGFjayIgLz48L3N2Zz4="},a={},s=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t={},n={url:"clickUrl",position:"position",video_url:"src",video_format:"type"};for(var r in e)t[n[r]||r]=e[r];return t},u=function(e){if(a.inventory&&a.inventory[e+"Ads"]){t.ads.startLinearAdMode(),a.adPlaying=!0,t.controls(!1);var i=a.inventory[e+"Ads"],s=i.clickUrl;"flash"===t.techName_.toLowerCase()&&(i=i.src||i),t.src(i);try{t.tech_.el_.setAttribute("poster",o.posterPlaceholder)}catch(l){}if(s){var u=n.className||"";n.className=u+" vjs-video-ad-clickable",n.onclick=function(){/^http:\/\/|https:\/\/|\/\//g.test(s)?window.open(s):window.open("//"+s)},t.one("adended",function(){n.className=u,n.onclick=function(){}})}t.one("adloadedmetadata",function(){"start"===e?t.tech_.setAutoplay(!0):"end"===e&&t.tech_.setAutoplay(!1)}),t.one("adended",function(){t.ads.endLinearAdMode(),a.adPlaying=!1,t.controls(!0),r.innerHTML="","end"===e&&t.one(["loadstart","contentloadstart"],l)})}},l=function(e){setTimeout(function(){t.posterImage&&t.posterImage.show(),t.bigPlayButton&&t.bigPlayButton.show(),t.addClass("vjs-ended"),t.removeClass("vjs-autoplay")},1)};a.inventory=function(){for(var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t={},n=0;e.inventory&&n<e.inventory.length;n++)t.startAds||"op"!==e.inventory[n].position?t.endAds||"ed"!==e.inventory[n].position||(t.endAds=s(e.inventory[n])):t.startAds=s(e.inventory[n]);var r={hls:"application/x-mpegURL",m3u8:"application/x-mpegURL",mp4:"video/mp4"};for(var o in t)i["default"].isMp4ContentType(t[o].type)||i["default"].isHlsContentType(t[o].type)||(t[o].type=r[t[o].type]);return t}(e),e=videojs.mergeOptions(o,e),delete e.inventory,t.ads(e),function(){var e=document.createElement("div");e.className="vjs-video-ad-wrap",n=document.createElement("div"),n.id="vjs-video-ad-mask_"+t.id_,n.className="vjs-video-ad-mask",e.appendChild(n),r=document.createElement("div"),r.className="vjs-video-ad-note",r.innerHTML="",e.appendChild(r),t.el().appendChild(e)}(),t.trigger("adsready"),t.on("contentended",function(){a.inventory.endAds&&!a.postrollPlayed&&"postroll?"===t.ads.state&&(a.postrollPlayed=!0,t.addClass("vjs-video-ad-end-period"),t.one("adtimeupdate",function(){setTimeout(function(){t.removeClass("vjs-video-ad-end-period")},100)}),u("end"))}),t.on("readyforpreroll",function(){a.prerollPlayed||(a.prerollPlayed=!0,u("start"))}),t.on("adtimeupdate",function(){if(t.currentTime()>0){var e=t.remainingTime(),n=Math.abs(e-Math.floor(e));(n<.1||1-n>.1)&&(r.innerHTML='广告剩<i class="vjs-video-ad-time-remained">'+Math.round(e<0?0:e)+"</i>秒")}}),i["default"].isMobileDevice()&&(t.on("adpause",function(){t.bigPlayButton.show()}),t.on("adplay",function(){t.bigPlayButton.hide()})),t.on("adend",function(){t.ads.snapshot.ended||(t.addClass("vjs-video-ad-end-period"),t.one("timeupdate",function(){setTimeout(function(){t.removeClass("vjs-video-ad-end-period")},100)}))})})},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}}]);
/* COMBO: filename = js/course/courseTask.v10.js, type = application/javascript, resp = 200 */
var winWidth = 0, winHeight = 0, iThink = 1, timer = 0;
var course = {'hasStudy': Param.hasStudy, 'video_id': Param.video_id};

/**
 * ck播放器有毒，必须把函数写到外面来(对插件的封装一点都不友好)
 */
function ckXLoadedHandler() {
    ckPlayerLastTenSecondsNum = false;
    player.addListener('error', ckXerrorHandler); //监听视频加载出错
    player.addListener('time', ckXTimeHandler); //监听播放时间
    player.addListener('play', ckXPlayHandler); //监听播放
    player.addListener('pause', ckXPauseHandler); //监听暂停播放
    player.addListener('full', ckXFullHandler); //监听全屏/非全屏切换
}

//播放器加载错误
function ckXerrorHandler() {
    alert('播放错误，请联系客服管理员');
}

//ck播放的方法
function ckXPlayHandler() {
    if (typeof ckPlayerPlayCallback === 'function') {
        ckPlayerPlayCallback();
    }
}

//ck暂停播放
function ckXPauseHandler() {
    if (typeof ckPlayerPauseCallback === 'function') {
        ckPlayerPauseCallback();
    }
}

//ck播放时间改变的方法
function ckXTimeHandler(time) {
    var metaData = player.getMetaDate();
    var totalTime = metaData.duration;   //视频总时长
    if ((totalTime - time <= 10) && (typeof ckPlayerLastTenSecondsCallback === 'function') && (ckPlayerLastTenSecondsNum === false)) {
        ckPlayerLastTenSecondsCallback();
        ckPlayerLastTenSecondsNum = 1;
    }
}

function ckXFullHandler(b) {
    if (b) {
        html = ' 全屏';
    } else {
        html = ' 否';
    }
}

function getWindowSize() {
    var winWidth = 0;
    var winHeight = 0;
    //获取窗口宽度
    if (window.innerWidth) {
        winWidth = window.innerWidth;
    } else if ((document.body) && (document.body.clientWidth)) {
        winWidth = document.body.clientWidth;
    }
    //获取窗口高度
    if (window.innerHeight) {
        winHeight = window.innerHeight;
    }
    else if ((document.body) && (document.body.clientHeight)) {
        winHeight = document.body.clientHeight;
    }
    //通过深入Document内部对body进行检测，获取窗口大小
    if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth) {
        winHeight = document.documentElement.clientHeight;
        winWidth = document.documentElement.clientWidth;
    }
    return {'width': winWidth, 'height': winHeight};
}


function changeSize() {
	var iswider = $('.video-body').hasClass('wider-screen');
    if (iswider) {
        $('.video-body').removeClass('wider-screen')
    }else{
        $('.video-body').addClass('wider-screen')
    }
    //查看右侧边栏是否隐藏
    var bodyRightOpacity = $('.video-body .body-right').css('opacity');
    if (parseInt(bodyRightOpacity) === 0) {
        var width = $('div.body-left').width() - $('div.body-right').width();
        var height = 562;
    } else {
        var width = $('div.body-left').width() + $('div.body-right').width();
        var height = 740;
    }

    var windowSize = getWindowSize();
    if (windowSize.width > 1440) {
        if ($('#wide-srceen-js').hasClass('hide') === false) {
            $('#wide-srceen-js').addClass('hide');
            $('#cancel-wide-srceen-js').removeClass('hide');
            $('.video-body').css({paddingRight: 0});
            $('.video-body .body-right').css({zIndex: '-1', opacity: '0'});
            $('.video-body .left-main').addClass('wideBigScreen').removeClass('wideSmallScreen')
            $('.video-body .left-foot').css({display: 'none'});
            $('#open-wid-screen').addClass('hide');
            $('#close-wid-screen').removeClass('hide');
        } else {
            $('#cancel-wide-srceen-js').addClass('hide');
            $('#wide-srceen-js').removeClass('hide');
            $('.video-body').removeAttr('style');
            $('.video-body .body-right').css({zIndex: 'auto', opacity: '1'});
            $('.video-body .left-foot').css({display: 'block'});
            $('.video-body .left-main').removeClass('wideBigScreen');
            $('#close-wid-screen').addClass('hide');
            $('#open-wide-screen').removeClass('hide');
        }
        if ($('.video-body .left-main').hasClass('wideSmallScreen')) {
            $('.video-body .left-main').removeClass('wideSmallScreen').addClass("wideBigScreen")
        }
    } else {
        if ($('#wide-srceen-js').hasClass('hide') === false) {
            $('#wide-srceen-js').addClass('hide');
            $('#cancel-wide-srceen-js').removeClass('hide');
            $('.video-body').css({paddingRight: 0});
            $('.video-body .body-right').css({zIndex: '-1', opacity: '0'});
            $('.video-body .left-main').addClass('wideSmallScreen').removeClass('wideBigScreen')
            $('.video-body .left-foot').css({display: 'none'});
            $('#open-wid-screen').addClass('hide');
            $('#close-wid-screen').removeClass('hide');
        } else {
            $('#cancel-wide-srceen-js').addClass('hide');
            $('#wide-srceen-js').removeClass('hide');
            $('.video-body').removeAttr('style');
            $('.video-body .body-right').css({zIndex: 'auto', opacity: '1'});
            $('.video-body .left-main').removeClass('wideSmallScreen');
            $('.video-body .left-foot').css({display: 'block'});
            $('#close-wid-screen').addClass('hide');
            $('#open-wide-screen').removeClass('hide');
        }

        if ($('.video-body .left-main').hasClass('wideBigScreen')) {
            $('.video-body .left-main').removeClass('wideBigScreen').addClass("wideSmallScreen")
        }
    }
    player.changeSize(width, height);
}

//跳转到下一个视频
function newToNextVideo() {
    if (Param.classIsLesson && parseInt(Param.toNextVideoId) !== 0) {
        if ($(".next-video").hasClass('hide') && !$(".next-video").hasClass('close')) {
            $(".next-video").removeClass('hide');
        }
        setTimeout(function () {
            window.location.href = Url.toNextVideo;
        }, 10000);
    }
}

function initCkplayer(container, videoUrl, playCallback, pauseCallback, lastTenSecondsCallback) {
    //检测flash、客户端、浏览器
    var mb = myBrowser();
    if (!flashChecker().f && IsPC() && 'Safari' != mb) {
        $('#huke88-video').append(template('flash-js', {}));
        return;
    }

    window.ckPlayerPlayCallback = playCallback;
    window.ckPlayerPauseCallback = pauseCallback;
    window.ckPlayerLastTenSecondsCallback = lastTenSecondsCallback;
    var videoObject = {
        container: container, //容器的ID或className
        variable: 'player', //播放函数名称
        loaded: 'ckXLoadedHandler', //当播放器加载后执行的函数
        config: '', //指定配置函数
        autoplay: true, //是否自动播放
        video: videoUrl
    };
    player = new ckplayer(videoObject);
     
    player.play();

    $('#wide-screen').on('click', function () {
        changeSize();
    });

    $(window).resize(function () {          //当浏览器大小变化时
        changeSize();
    });
}


/**
 * 播放器
 */
(function ($, window, document, undefined) {
    var Player = function (ele, opt) {
        this.$element = $(ele);
        this.defaults = {
            'playerWidth': '920',
            'playerHeight': '562',
            'playerHtml5Dom': '<video id="html5-player" class="video-js vjs-default-skin vjs-big-play-centered"></video>',
            'playerFlashDom': '<div id="flash-player" style="width:100%;height:100%"></div>',
            'playerType': 'html5',
            'playerVideoUrl': 'https://video-sp.huke88.com/video/hls/2017-06-29/32FD5AC7-6D8A-B1ED-2D98-C1986CE602DE.m3u8',
            'loop': true,
            'lastTenSeconds': false,    //倒计时，播放到最后十秒，触发一次时间
            'lastTenSecondsTipsNum': 0,    //倒计时，播放到最后十秒，触发一次时间
            'play': false,    //视频播放事件
            'pause': false   //视频暂停事件
        };
        this.options = $.extend({}, this.defaults, opt);
    };
    Player.prototype = {
        //设置播放模式（html5 || flash）
        setPlayerPattern: function (pattern) {
            this.playerType = pattern;
            return this;
        },
        //获取播放模式（html5 || flash）
        getPlayerPattern: function () {
            return this.playerType;
        },
        //创建不同播放器初始化播放插件对象
        createVideoDom: function (isHtml5) {
            var _this = this;
            if (isHtml5) {
                $('#huke88-video').prepend(_this.options.playerHtml5Dom);
                this.setPlayerPattern('html5');
            } else {
                this.setPlayerPattern('flash');
                $('#huke88-video').prepend(_this.options.playerFlashDom);
            }

            return this;
        },
        playByFlash: function () {
            var _this = this;
            initCkplayer('#flash-player', _this.options.playerVideoUrl, _this.options.play, _this.options.pause, _this.options.lastTenSeconds);
            return this;
        },
        playByHtml5: function () {
            var _this = this;
            var size = _this.getPlayerSize();

            var options = {
                controls: true,
                engineOrder: ['html5', 'flash'],
                url: _this.options.playerVideoUrl,
                type: 'hls',
                preload: 'auto',
                width: size.minWidth,
                height: size.minHeight,
                autoplay: true // 如为 true，则视频将会自动播放
            };
            var player = new QiniuPlayer('html5-player', options);
            player.ready(function () {
                //先删除大按钮
                $('button.vjs-big-play-button').remove();
                var currentPlaybackRate = document.getElementById('html5-player_html5_api').playbackRate;

                var str =
                    '<button class="vjs-control enlarge"><u>宽屏</u></button>' +
                    '<button class="vjs-control " id="play-speed-button"><u>倍速</u></button>' +
                    '<div class="play-speed hide">' +
                    '   <p class="selectorSpeed2" data-speed="2">2x</p>' +
                    '   <p class="selectorSpeed1.5" data-speed="1.5">1.5x</p>' +
                    '   <p class="selectorSpeed1.25" data-speed="1.25">1.25x</p>' +
                    '   <p class="selectorSpeed1" data-speed="1">1x</p>' +
                    '   <p class="selectorSpeed0.75" data-speed="0.75">0.75x</p>' +
                    '</div>';

                $(".vjs-control-bar").append(str);
                $('p.selectorSpeed' + currentPlaybackRate).addClass('active').siblings('p').removeClass('active');
                $('div.play-speed p').on('click', function () {
                    var currentSpeed = $(this).attr('data-speed');
                    document.getElementById('html5-player_html5_api').playbackRate = currentSpeed;
                    $(this).addClass('active').siblings('p').removeClass('active');
                    $('div.play-speed').addClass('hide');
                });

                $('#play-speed-button').on('click', function () {
                    var _clickObj = $(this);
                    _clickObj.siblings('div.play-speed').toggleClass('hide');
                });

                //绑定错误事件
                if (_this.options.error !== false) {
                    player.on("error", function () {
                        _this.options.error();
                    });
                }

                //绑定播放事件
                if (_this.options.play !== false) {
                    player.on("play", _this.options.play);
                }

                //绑定暂停事件
                if (_this.options.pause !== false) {
                    player.on("pause", _this.options.pause);
                }

                player.on("timeupdate", function () {
                    var remainingTime = player.remainingTime();
                    if (remainingTime > 0 && remainingTime < 10 && _this.options.lastTenSeconds !== false && _this.options.lastTenSecondsTipsNum === 0) {
                        _this.options.lastTenSeconds();
                        _this.options.lastTenSecondsTipsNum = 1;
                    }
                });
                _this.enlargeByHtml5();

                //监听键盘事件
                $(document).keydown(function (event) {
                    var hasChecked = false;
                    $('input,textarea').each(function (i) {
                        if ($(this).is(':focus')) {
                            hasChecked = true;
                        }
                    });
                    if (hasChecked === false) {
                        var currentTime = player.currentTime();
                        var volume = player.volume();

                        var preventDefaultKeyCode = [37, 38, 39, 40, 32];
                        var keyCode = parseInt(event.keyCode);
                        if ($.inArray(keyCode, preventDefaultKeyCode) !== -1) {
                            event.preventDefault();
                            if (keyCode === 38) {    //上
                                player.volume(volume + 0.1);
                            }

                            if (keyCode === 40) {    //下
                                player.volume(volume - 0.1);
                            }

                            if (keyCode === 37) {    //左
                                player.currentTime(currentTime - 5);
                            }

                            if (keyCode === 39) {    //右
                                player.currentTime(currentTime + 5);
                            }

                            if (keyCode === 32) {    //空格
                                var isPaused = $('button.vjs-play-control').hasClass('vjs-paused');
                                if (isPaused) {
                                    player.play();
                                } else {
                                    player.pause();
                                }
                            }
                        }
                    }
                });
                player.play();
            });
        },
        //html5宽屏
        enlargeByHtml5: function () {
        	$('.vjs-control-bar').on('click', '.enlarge', function() {
                $('.video-body').addClass('wider-screen');
            });
            $('.vjs-control-bar').on('click', '.narrow', function() {
            	$('.video-body').removeClass('wider-screen');
            });
            var _this = this;
            var windowSize = getWindowSize();
            // 判断浏览器宽度然后触发时间
            if (windowSize.width > 1440) {
                // 宽屏切换
                $('#huke88-video-height').on('click', '#open-wide-screen,#wide-srceen-js,button.enlarge', function () {
                    $('#wide-srceen-js').addClass('hide');
                    $('#cancel-wide-srceen-js').removeClass('hide');
                    $('.video-body').css({paddingRight: 0});
                    $('.video-body .body-right').css({zIndex: '-1', opacity: '0'});
                    $('.video-body .left-main').addClass('wideBigScreen').removeClass('wideSmallScreen')
                    $('.video-body .left-foot').css({display: 'none'});
                    $('#open-wid-screen').addClass('hide');
                    $('#close-wid-screen').removeClass('hide');

                    var size = _this.getPlayerSize();
                    $('#html5-player').css({width: size.maxWidth + 'px', height: size.maxHeight + 'px'});
                    $('button.enlarge').html('窄屏').removeClass('enlarge').addClass('narrow');
                });
                // 恢复
                $('#huke88-video-height').on('click', '#close-wid-screen,#cancel-wide-srceen-js,button.narrow', function () {
                    $('#cancel-wide-srceen-js').addClass('hide');
                    $('#wide-srceen-js').removeClass('hide');
                    $('.video-body').removeAttr('style');
                    $('.video-body .body-right').css({zIndex: 'auto', opacity: '1'});
                    $('.video-body .left-foot').css({display: 'block'});
                    $('.video-body .left-main').removeClass('wideBigScreen');
                    $('#close-wid-screen').addClass('hide');
                    $('#open-wide-screen').removeClass('hide');
                    var size = _this.getPlayerSize();
                    $('#html5-player').css({width: size.minWidth + 'px', height: size.minHeight + 'px'});
                    $('button.narrow').html('宽屏').removeClass('narrow').addClass('enlarge');
                });

                if ($('.video-body .left-main').hasClass('wideSmallScreen')) {
                    $('.video-body .left-main').removeClass('wideSmallScreen').addClass("wideBigScreen");
                }

            } else {
                // 宽屏切换
                $('#huke88-video-height').on('click', '#open-wide-screen,#wide-srceen-js,button.enlarge', function () {
                    $('#wide-srceen-js').addClass('hide');
                    $('#cancel-wide-srceen-js').removeClass('hide');
                    $('.video-body').css({paddingRight: 0});
                    $('.video-body .body-right').css({zIndex: '-1', opacity: '0'});
                    $('.video-body .left-main').addClass('wideSmallScreen').removeClass('wideBigScreen')
                    $('.video-body .left-foot').css({display: 'none'});
                    $('#open-wid-screen').addClass('hide');
                    $('#close-wid-screen').removeClass('hide');
                    var size = _this.getPlayerSize();
                    $('#html5-player').css({width: size.maxWidth + 'px', height: size.maxHeight + 'px'});
                    $('button.enlarge').html('窄屏').removeClass('enlarge').addClass('narrow');
                });
                // 恢复
                $('#huke88-video-height').on('click', '#close-wid-screen,#cancel-wide-srceen-js,button.narrow', function () {
                    $('#cancel-wide-srceen-js').addClass('hide');
                    $('#wide-srceen-js').removeClass('hide');
                    $('.video-body').removeAttr('style');
                    $('.video-body .body-right').css({zIndex: 'auto', opacity: '1'});
                    $('.video-body .left-main').removeClass('wideSmallScreen')
                    $('.video-body .left-foot').css({display: 'block'});
                    $('#close-wid-screen').addClass('hide');
                    $('#open-wide-screen').removeClass('hide');
                    var size = _this.getPlayerSize();
                    $('#html5-player').css({width: size.minWidth + 'px', height: size.minHeight + 'px'});
                    $('button.narrow').html('宽屏').removeClass('narrow').addClass('enlarge');
                });

                if ($('.video-body .left-main').hasClass('wideBigScreen')) {
                    $('.video-body .left-main').removeClass('wideBigScreen').addClass("wideSmallScreen")
                }
            }

            $('div.album-collect-success').addClass('hide');

            $('#wide-screen').removeClass('hide');
            $(window).resize(function () {          //当浏览器大小变化时
                var size = _this.getPlayerSize();
                $('#html5-player').css({width: size.minWidth + 'px', height: size.minHeight + 'px'});
            });
        },
        getPlayerSize: function () {
            var minHeight = this.$element.height();
            var minWidth = this.$element.width();
            var maxHeight = $('div.video-body').height();
            var maxWidth = $('div.video-body').width();
            return {minWidth: minWidth, minHeight: minHeight, maxWidth: maxWidth, maxHeight: maxHeight};
        },
        //初始化
        //判断是否为IE浏览器
        isIE: function () {
            if (!!window.ActiveXobject || "ActiveXObject" in window) {
                return true;
            }
            return false;
        },
        selectPlayer: function () { //返回true 可以使用HTML5 false  使用flash

            var ua = navigator.userAgent;

            var ipad = ua.match(/(iPad).*OS\s([\d_]+)/),

                isIphone = !ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/),

                isAndroid = ua.match(/(Android)\s+([\d.]+)/),

                isMobile = isIphone || isAndroid;
            if (isMobile) {
                return false;
            }

            var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串
            var isOpera = userAgent.indexOf("Opera") > -1;
            if (isOpera) {//判断是否Opera浏览器
                return true;
            }
            if (userAgent.indexOf("Firefox") > -1) {//判断是否Firefox浏览器
                return true;
            }
            if (userAgent.indexOf("Chrome") > -1) {//判断是否谷歌浏览器
                var arr = navigator.userAgent.split(' ');
                var chromeVersion = '';
                for (var i = 0; i < arr.length; i++) {
                    if (/chrome/i.test(arr[i])) {
                        chromeVersion = arr[i];
                    }
                }
                if (chromeVersion) {
                    var version = Number(chromeVersion.split('/')[1].split('.')[0]);
                    if (version >= 40) {
                        return true;
                    }
                }
                return false;
            }
            if (userAgent.indexOf("Safari") > -1) {//判断是否safari浏览器
                return true;
            } //判断是否Safari浏览器

            var isEdge = userAgent.indexOf("Edge") > -1 && !isIE; //判断是否IE的Edge浏览器
            if (isEdge) {
                return true;
            }

            var isIE11 = userAgent.indexOf('Trident') > -1 && userAgent.indexOf("rv:11.0") > -1;
            return false;
        },
        init: function () {
            var _this = this;
            var isHtml5 = _this.selectPlayer();
            _this.createVideoDom(isHtml5);

            if (_this.getPlayerPattern() === 'flash') {
                _this.playByFlash();
            } else {
                _this.playByHtml5();
            }
            $(this).off('click').find('#huke88-video-play').addClass('hide');
        }
    };
    $.fn.hkPlayer = function (options) {
        var player = new Player(this, options);
        return player.init();
    };
})(jQuery, window, document);

(function ($, window, document, undefined) {
    var Plugs = function (sUrl) {
        this.init(sUrl);
    };
    Plugs.prototype = {
        isChrome: function () {
            return navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
        },
        isSafari: function () {
            return navigator.userAgent.toLowerCase().indexOf('safari') > -1;
        },
        init: function (sUrl) {
            var _this = this;
            if (/(iP)/g.test(navigator.userAgent)) {
                alert('请换一个浏览器再试一试...');
                return false;
            }

            if (_this.isChrome() || _this.isSafari()) {
                var link = document.createElement('a');
                link.href = sUrl;

                if (link.download !== undefined) {
                    var fileName = sUrl.substring(sUrl.lastIndexOf('/') + 1, sUrl.length);
                    link.download = fileName;
                }

                if (document.createEvent) {
                    var e = document.createEvent('MouseEvents');
                    e.initEvent('click', true, true);
                    link.dispatchEvent(e);
                    return true;
                }
            }
            sUrl = decodeURIComponent(sUrl);
            var a = document.createElement("a");
            a.setAttribute("href", sUrl);
            a.setAttribute("target", "_blank");
            document.body.appendChild(a);
            a.click();
            return true;
        }
    };
    window.downloadFiles = Plugs;
})(jQuery, window, document);

$(function () {
    //问答消息页过来，直接滑动到指定位置
    if (parseInt(Param.showInterlocution) === 1) {
        $('html, body').animate({
            scrollTop: $("#content-body").offset().top - 120
        }, 1200);
    }

    //从已学教程过来
    if (parseInt(Param.goComment)) {
        $('html, body').animate({
            scrollTop: $("#content-body").offset().top - 120
        }, 1200);
    }

    exposure.type = 4;
    exposure.special();
    //视频分类统计
    videoClassificationStatistics(Param.video_id, '', 'video_id', 1);

    //滚动到评论顶部，兼容顶部导航
    course.scroll = function () {
        $('html, body').animate({
            scrollTop: $("#content-body").offset().top - 120
        }, 200);
    };

    //滚动到具体评论
    course.commentScroll = function ($detailBox) {
        var $srollBox = $("body");
        var header = $("#header");
        var offsetTop = $detailBox.offset().top;
        var navHeaderHeight = header.height();
        var padding = $detailBox.css('padding-bottom');

        if (!header.hasClass('header-fixed')) {
            navHeaderHeight *= 2;
        }

        $srollBox.animate({'scrollTop': offsetTop - navHeaderHeight}, 500);
    };

    course.routeScroll = function () {
        if (Param.isStudyPathAndParentId) {
            var outsideOffset = $("#t2 .dd-list a .active").offset().top;
            if (outsideOffset > 425) {
                $("#t2").scrollTop(outsideOffset - 425);
            }
        }
    };

    course.routeScroll();

    //----------------------------------------- 一、视频播放 start -----------------------------------------------//
    //视频播放 （迭代：由one改为bind）
    $("#huke88-video").bind('click', function () {
        videoPlay(0);
    });

    //视频暂停
    function videoPause() {
        var $object = CKobject.getObjectById('huke88-hls-player');
        if ($object !== null) {
            $object.videoPause();
        }
    }

    //播放视频function
    function videoPlay(confirm) {
        //登陆状态
        login();
        //发送请求
        $.when($.ajax({
            'url': Url.videoPlay, data: {
                id: Param.video_id,
                exposure: Param.exposure,
                studySourceId: Param.studySourceId,
                type: Param.videoTpe,
                confirm: confirm,
                async: false,
                "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
            }, method: 'post',
            xhrFields: {
                withCredentials: true
            },
            'success': function (response) {
                response = JSON.parse(response);
                //播放视频入口：有权限播放/确认学习
                if ($.inArray(response.code, [1, 2, 3, 4, 6]) !== -1 || (response.code && response.confirm === 1)) {
                    $('#huke88-video').unbind('click');
                    $('#no-learn-reply-win-js').remove();
                    $('#reply-publish-js').removeClass('hide');
                    course.hasStudy = 1;
                    $(".unlogin-tip").addClass('hide');
                    $(".login-and-study-dom").removeClass('hide');
                    if (response.give_gold) {
                        layer.msg("学习新教程,恭喜获得10虎课币");
                    }

                    $('#huke88-video img').remove();
                    $("#huke88-video").hkPlayer({
                        'playerVideoUrl': response.video_url,
                        // 'playerVideoUrl': 'http://og9dz2jqu.cvoda.com/Zmlyc3R2b2RiOm9jZWFucy0xLm1wNA==_q00000001.m3u8',
                        'error': function () {
                            console.log('错误，请联系管理员');
                        },
                        'play': function () {
                            $('#huke88-video-play').remove();
                            //暂停弹窗
                            if(!$('#reply-tip').hasClass('hide')){
                                $('#reply-tip').addClass('hide');
                            }
                        },
                        'pause': function () {
                            //暂停弹窗（只第一次点击暂停时出现）
                            var pauseTip = $('#reply-tip');
                            if(!pauseTip.hasClass('beforePlayShow')){
                                pauseTip.removeClass('hide');
                                pauseTip.addClass('beforePlayShow');
                            }else{
                                if(!pauseTip.hasClass('hasShow')){
                                    pauseTip.removeClass('hide');
                                    pauseTip.addClass('hasShow');
                                }
                            }
                        },
                        'lastTenSeconds': function () {
                            newToNextVideo();
                        }
                    });

                    //统计播放
                    if (Param.key.length) {
                        var data = {
                            uv: Param.uv_id,
                            keyword: Param.key,
                            videoId: Param.video_id
                        };
                        $.get(Config.searchPlayUrl, data);
                    }
                } else {
                    iThink = 1;
                    if (response.class === Param.lesssonLimitClass) {
                        $(".qz-win").show();
                        return false;
                    }
                    //##invite_free_60
                    /*if( response.code==14 ){
                    	layer.confirm('<div class="img-w75"><img src="'+Param.imgWin1Url+'"></div><p class="fz16-c6">您的学习次数已经达到上限</p><p class="fz16-c6">你可以通过邀请好友注册解锁更多学习次数</p>', 
                        {
                            btn: ['获取免费学习次数','赞助成为VIP'],//按钮
                            btnColor: ['2','2'] //按钮颜色 1白色 2黄色 3橙色
                        },function(){
                        	window.open(response.inviteUrl);
                        	layer.closeAll();
                        },function(){
                        	window.open(Url.payUrl);
                        	layer.closeAll();
                        }
                       );
                    } else if( response.code==15 ){
                    	layer.confirm('<div class="img-w75"><img src="'+Param.imgWin2Url+'"></div><p class="fz16-c3">确认学习吗？</p><p class="fz16-c6">您的免费学习剩余<span class="cf70">'+response.free_num+'</span>次</p><p class="fz16-c6">你可以通过邀请好友注册解锁更多学习次数</p><p class="af70-l"><a href="'+Url.payUrl+'" target="_blank">我要成为VIP</a></p>', 
                        {
                            btn: ['确认学习','获取免费学习次数'],//按钮
                            btnColor: ['1','3'] //按钮颜色 1白色 2黄色 3橙色
                        },function(){
                        	sure_study();
                        	layer.closeAll();
                        },function(){
                        	window.open(response.inviteUrl);
                        	layer.closeAll();
                        }
                        );
                    }else{
                    	$("div[data-video-modal-id=" + response.code + "]").removeClass('hide');
                    }*/
                    
                    $("div[data-video-modal-id=" + response.code + "]").removeClass('hide');
                }
            }
        })).done(function (response) {
            if (videoPlayResponse(response)) {
                videoExposureLogic(Param.video_id, Param.exposure, 'play_times');
            }

        }).then(function (response) {
            if (videoPlayResponse(response)) {
                videoClassificationStatistics(Param.video_id, 'play', 'video_id', 0);
            }
        });
    }

    function videoPlayResponse(response) {
        data = $.parseJSON(response);
        if ($.inArray(data.code, [1, 2, 3, 4]) !== -1 || (data.code && data.confirm === 1)) {
            return true;
        } else {
            return false;
        }

    }

    //----------------------------------------- 一、视频播放 end -----------------------------------------------//

    //----------------------------------------- 二、文件下载 start-----------------------------------------------//
    //源文件下载
    $("#download-source-js").on('click', function () {
        login();
        //caseAndSourceTips('课程素材及源文件仅供练习学习使用，不可直接商用');
        //setTimeout(function () {
            download(1, 0);
        //}, 2500);
    });

    //素材文件下载
    $("#download-case-js").on('click', function () {
        login();
        //caseAndSourceTips('课程素材及源文件仅供练习学习使用，不可直接商用');
        //setTimeout(function () {
            download(2, 0);
        //}, 3000);
    });

    //下载function
    function download(type, confirm) {
        if (Param.uid) {
            $.ajax({
                'url': Url.download, data: {
                    id: Param.video_id,
                    type: type,
                    studySourceId: Param.studySourceId,
                    confirm: confirm,
                    "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
                }, method: 'post',
                'dataType': 'JSON',
                'success': function (response) {
                    //播放视频入口：有权限播放/确认学习
                    if ($.inArray(response.code, [1, 2, 3, 4]) !== -1 || (response.code && response.confirm === 1)) {
                        new downloadFiles(response.download_url);
                        course.hasStudy = 1;
                        $(".unlogin-tip").addClass('hide');
                        $(".login-and-study-dom").removeClass('hide');
                        $('#no-learn-reply-win-js').remove();
                        $('#reply-publish-js').removeClass('hide');
                        if (response.give_gold) {
                            layer.msg("学习新教程,恭喜获得10虎课币");
                        }
                    } else {
                        iThink = type + 1;
                        //##invite_free_60
                        /*if( response.code==14 ){
                        	layer.confirm('<div class="img-w75"><img src="'+Param.imgWin1Url+'"></div><p class="fz16-c6">您的学习次数已经达到上限</p><p class="fz16-c6">你可以通过邀请好友注册解锁更多学习次数</p>', 
                            {
                                btn: ['获取免费学习次数','赞助成为VIP'],//按钮
                                btnColor: ['2','2'] //按钮颜色 1白色 2黄色 3橙色
                            },function(){
                            	window.open(response.inviteUrl);
                            	layer.closeAll();
                            },function(){
                            	window.open(Url.payUrl);
                            	layer.closeAll();
                            }
                           );
                        } else if( response.code==15 ){
                        	layer.confirm('<div class="img-w75"><img src="'+Param.imgWin2Url+'"></div><p class="fz16-c3">确认学习吗？</p><p class="fz16-c6">您的免费学习剩余<span class="cf70">'+response.free_num+'</span>次</p><p class="fz16-c6">你可以通过邀请好友注册解锁更多学习次数</p><p class="af70-l"><a href="'+Url.payUrl+'" target="_blank">我要成为VIP</a></p>', 
                            {
                                btn: ['确认学习','获取免费学习次数'],//按钮
                                btnColor: ['1','3'] //按钮颜色 1白色 2黄色 3橙色
                            },function(){
                            	sure_study();
                            	layer.closeAll();
                            },function(){
                            	window.open(response.inviteUrl);
                            	layer.closeAll();
                            }
                            );
                        }else{
                        	$("div[data-video-modal-id=" + response.code + "]").removeClass('hide');
                        }*/
                        
                        $("div[data-video-modal-id=" + response.code + "]").removeClass('hide');
                    }
                }
            });
        }
    }

    //下载文件
    function downloadFile(url) {
        try {
            if (isIE()) {
                var a = document.createElement("a");
                a.setAttribute("href", url);
                a.setAttribute("target", "_blank");
                document.body.appendChild(a);
                a.click();
            } else {
                var elemIF = document.createElement("iframe");
                elemIF.src = url;
                elemIF.style.display = "none";
                document.body.appendChild(elemIF);
            }
        } catch (e) {

        }
    }

    function isIE() {
        if (!!window.ActiveXobject || "ActiveXObject" in window) {
            return true;
        } else {
            return false;
        }
    }

    function sure_study(){
    	if (0 == Param.uid) {
            toLogin();
            return false;
        }
        $("#learn-win-js").remove();
        if (1 == iThink) {//创建视频
            videoPlay(1);
        } else if (2 == iThink) {//下载源文件
            download(1, 1);
        } else if (3 == iThink) {//下载素材
            download(2, 1);
        } else if (4 == iThink) {//查看剩余内容
            getVideoContent(1);
        }
    }

    //普通用户点击确定学习下载
    $("#studying").click(function () {
    	sure_study();
    });

    //----------------------------------------- 四、关注与收藏 start -----------------------------------------------//
    //关注讲师
    $('#follow-js,#follow-js1').on('click', function () {
        login();
        var _self = $(this);
        var $follows_num = parseInt($('#teacher-follow').text());
        $.ajax({
            url: Url.teacherFollow,
            data: {
                "_csrf-frontend": $('meta[name="csrf-token"]').attr("content"),
                "UserFlowerTeacherForm[tid]": $(this).attr('data-id')
            },
            type: 'POST',
            dataType: 'JSON',
            success: function (res) {
                if (res.status == 1) {
                    _self.addClass('hide');
                    $('#teacher-follow').text($follows_num + 1);
                    $('#cancel-follow-js,#cancel-follow-js1').removeClass('hide');
                    $('#follow-js,#follow-js1').addClass('hide');
                }
            }
        });
    });

    //取消讲师hover
    $('#cancel-follow-js,#cancel-follow-js1').hover(function () {
        $(this).html('取消关注');
    }, function () {
        $(this).html('已关注');
    });

    //取消关注click
    $('#cancel-follow-js,#cancel-follow-js1').on('click', function () {
        login();
        var _self = $(this);
        var $follows_num = parseInt($('#teacher-follow').text());
        $.ajax({
            url: Url.teacherCancel,
            data: {
                "_csrf-frontend": $('meta[name="csrf-token"]').attr("content"),
                "UserFlowerTeacherForm[tid]": $(this).attr('data-id')
            },
            type: 'POST',
            dataType: 'JSON',
            success: function (res) {
                if (res.status == 1) {
                    _self.addClass('hide');
                    $('#teacher-follow').text($follows_num - 1);
                    $('#follow-js,#follow-js1').removeClass('hide');
                    $('#cancel-follow-js,#cancel-follow-js1').addClass('hide');
                }
            }
        });
    });
    //----------------------------------------- 四、关注与收藏 end -----------------------------------------------//

    //----------------------------------------- 五、评论 start -----------------------------------------------//

    $('.bigImgShow-mask,.bigImgShow-box .close').on('click', function () {
        $('#BigImgShowBox').fadeOut();
    });

    //----------------------------------------- 五、评论 end -----------------------------------------------//

    //----------------------------------------- 六、其他事件及函数 start -----------------------------------------------//
    //登陆权限控制
    function login() {
        if (0 == Param.uid) {
            toLogin();
            return false;
        } else {
            return true;
        }
    }

    //弹窗关闭
    $('.win-close-js').click(function () {
        $('.hkt-win').addClass("hide");
    });
    $('#reply-tip-close').click(function () {
        $('#reply-tip').addClass("hide");
    });

    //选项卡切换
    $('#tag-toggle a').click(function () {
        $(this).addClass('on').siblings('a').removeClass('on');
        //获取当前点击的索引
        var currentClickA = $('#tag-toggle a').index($(this));
        var $contentChildren = $('div.events-cont').children('div:eq(' + currentClickA + ')');
        $contentChildren.removeClass('hide').siblings('div').addClass('hide');

        //如果点击的是问答，异步去取数据
        if (parseInt(currentClickA) === 2) {
            initFun.uploadInterlocutionImage().submitInterlocution().interlocutionList(0, 1).init().cancelUploadImageBtn().clear().toLogin();
        }
    });

    //----------------------------------------- 宽屏 js start -----------------------------------------------//

    function findDimensions() { //函数：获取尺寸
        //获取窗口宽度
        if (window.innerWidth)
            winWidth = window.innerWidth;
        else if ((document.body) && (document.body.clientWidth))
            winWidth = document.body.clientWidth;
        //获取窗口高度
        if (window.innerHeight)
            winHeight = window.innerHeight;
        else if ((document.body) && (document.body.clientHeight))
            winHeight = document.body.clientHeight;
        //通过深入Document内部对body进行检测，获取窗口大小
        if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth) {
            winHeight = document.documentElement.clientHeight;
            winWidth = document.documentElement.clientWidth;
        }
        // 判断浏览器宽度然后触发时间
        if (winWidth > 1440) {
            // 宽屏切换
            $('#huke88-video-height').on('click', '#open-wide-screen,#wide-srceen-js', function () {
                $('#wide-srceen-js').addClass('hide');
                $('#cancel-wide-srceen-js').removeClass('hide');
                $('.video-body').css({
                    paddingRight: 0
                })
                $('.video-body .body-right').css({
                    zIndex: '-1',
                    opacity: '0'
                })
                $('.video-body .left-main').addClass('wideBigScreen').removeClass('wideSmallScreen')
                $('.video-body .left-foot').css({
                    display: 'none'
                })
                $('#open-wid-screen').addClass('hide');
                $('#close-wid-screen').removeClass('hide')
            })
            // 恢复
            $('#huke88-video-height').on('click', '#close-wid-screen,#cancel-wide-srceen-js', function () {
                $('#cancel-wide-srceen-js').addClass('hide');
                $('#wide-srceen-js').removeClass('hide');
                $('.video-body').removeAttr('style')
                $('.video-body .body-right').css({
                    zIndex: 'auto',
                    opacity: '1'
                })
                $('.video-body .left-foot').css({
                    display: 'block'
                })
                $('.video-body .left-main').removeClass('wideBigScreen')
                $('#close-wid-screen').addClass('hide');
                $('#open-wide-screen').removeClass('hide')
            })

            if ($('.video-body .left-main').hasClass('wideSmallScreen')) {
                $('.video-body .left-main').removeClass('wideSmallScreen').addClass("wideBigScreen")
            }
        } else {
            // 宽屏切换
            $('#huke88-video-height').on('click', '#open-wide-screen,#wide-srceen-js', function () {
                $('#wide-srceen-js').addClass('hide');
                $('#cancel-wide-srceen-js').removeClass('hide');
                $('.video-body').css({
                    paddingRight: 0,
                })
                $('.video-body .body-right').css({
                    zIndex: '-1',
                    opacity: '0'
                })
                $('.video-body .left-main').addClass('wideSmallScreen').removeClass('wideBigScreen')
                $('.video-body .left-foot').css({
                    display: 'none'
                })
                $('#open-wid-screen').addClass('hide');
                $('#close-wid-screen').removeClass('hide')
            })
            // 恢复
            $('#huke88-video-height').on('click', '#close-wid-screen,#cancel-wide-srceen-js', function () {
                $('#cancel-wide-srceen-js').addClass('hide');
                $('#wide-srceen-js').removeClass('hide');
                $('.video-body').removeAttr('style')
                $('.video-body .body-right').css({
                    zIndex: 'auto',
                    opacity: '1'
                })
                $('.video-body .left-main').removeClass('wideSmallScreen')
                $('.video-body .left-foot').css({
                    display: 'block'
                })
                $('#close-wid-screen').addClass('hide');
                $('#open-wide-screen').removeClass('hide')
            })

            if ($('.video-body .left-main').hasClass('wideBigScreen')) {
                $('.video-body .left-main').removeClass('wideBigScreen').addClass("wideSmallScreen")
            }
        }
    }

    findDimensions();
    //调用函数，获取数值
    $(window).resize(function () {
        findDimensions();
    });
    // 宽屏的切换效果并保持屏幕的自适应 e
    //----------------------------------------- 宽屏 js end -----------------------------------------------//


    //评论回复
    /*$('span[data-reply-js="publish"]').click(function () {
        if(!login()){
            return false;
        }
        $.ajax({
            'url': Url.getHadStudy, data: {
                id: Param.video_id,
                "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
            }, method: 'post',
            'success': function (response) {
                response = JSON.parse(response);
                if (response.code == 15) {
                    $("div[data-video-modal-id=" + response.code + "]").removeClass('hide');
                    return false;
                }
                $('#tag-toggle a').eq(1).click();
                course.scroll();
            }
        });
    });*/


    //---------------------------------学员评价滚动代码 js start --------------------------------------//
    var scroll_box = $(".roll");
    scroll_box.hover(function () {
        clearInterval(scrollTimer);
    }, function () {
        scrollTimer = window.setInterval(function () {
            scrollRun(scroll_box);
        }, 2000);
    }).trigger("mouseleave");

    function scrollRun(obj) {
        var lineHeight = obj.find("li").height();
        obj.animate({
            "marginTop": -lineHeight + "px"
        }, 500, function () {
            obj.css({
                "marginTop": 0
            }).find("li:first").appendTo(obj);
        });
    }

    //---------------------------------学员评价滚动代码 js end --------------------------------------//
});


/******************** 视频创建对象 js start ********************/
Param.isWideSrceen = 1;
function VideoPlayer() {
    this.HlsObjectHeght = 0;
    this.HlsObjectWidth = 0;
    //初始化视频
    this.showPlayer = function (src, id) {
        //player
        var flashvars = {
            f: 'https://js.huke88.com/assets/revision/js/plugins/ckplayer/hukeplayerhls.swf',
            a: src,
            c: 0,
            s: 4,
            p: 1,
            loaded: 'loadedHandler'
        };
        var params = {bgcolor: '#FFF', allowFullScreen: true, allowScriptAccess: 'always', wmode: 'transparent'};
        var video = [src];
        CKobject.embed('https://js.huke88.com/assets/revision/js/plugins/ckplayer/hukeplayer.swf', id, 'huke88-hls-player', '100%', '100%', false, flashvars, video, params);
    };
    //跑马灯
    this.horseRaceLamp = function () {
        if (!timer) {
            var PositionBottom = parseInt(Math.random() * this.HlsObjectHeght);
            if (null == document.querySelector('#huke88-hls-player>span#horse-race-lamp')) {
                var HlsObject = document.getElementById('huke88-hls-player');
                HlsObject.insertAdjacentHTML('beforeend', '<span id="horse-race-lamp" style="position: absolute;cursor: pointer;opacity:0.5;color: #afafaf;z-index:99;right:15px;bottom: ' + PositionBottom + 'px;">ID:' + Param.uid + '用户正在观看视频</span>');
            }
            timer = setInterval(function () {
                var offsetRight = parseInt($('#horse-race-lamp').css('right'));
                $('#horse-race-lamp').css('right', offsetRight + 5);
                if (offsetRight > parseInt(document.getElementById('huke88-hls-player').offsetWidth) - parseInt(200)) {
                    $('#huke88-hls-player>span#horse-race-lamp').addClass('hide');
                }
                if (offsetRight > parseInt(document.getElementById('huke88-hls-player').offsetWidth) + parseInt(200)) {
                    $('#huke88-hls-player>span#horse-race-lamp').remove();
                    clearInterval(timer);
                    horseRaceLamp();
                }
            }, 200);
        }
    };
}
var HukeVideoObject = new VideoPlayer();
//判断视频是否加载完成，初始化添加宽屏按钮
loadedHandler = function () {
    //监听播放事件
    CKobject.getObjectById('huke88-hls-player').addListener('play', 'playHandler');
    //监听暂停事件
    CKobject.getObjectById('huke88-hls-player').addListener('pause', 'pauseHandler');
    //监听控制栏事件
    CKobject.getObjectById('huke88-hls-player').addListener('controlBarShow', 'controlBarShowHandler');
    //监听播放时间
    CKobject.getObjectById('huke88-hls-player').addListener('time', 'timeHandler');
    //监听播放时间
    CKobject.getObjectById('huke88-hls-player').addListener('totaltime', 'totaltimeHandler');
    //初始化播放器宽高
    var HlsObject = document.getElementById('huke88-video-height');
    HukeVideoObject.HlsObjectHeght = HlsObject.offsetHeight;
    HukeVideoObject.HlsObjectWidth = HlsObject.offsetWidth;
    var mb = myBrowser();
    if ('Safari' != mb) $('#wide-srceen').removeClass('hide');
};


//监听播放时间
function timeHandler(num) {
    Param.long_time = num;
}
//监听总时间
function totaltimeHandler(num) {
    Param.all_time = num;
}
//跑马灯
function horseRaceLamp() {
    HukeVideoObject.horseRaceLamp();
}
//暂停视频触发事件
function pauseHandler() {
    clearInterval(timer);
    timer = 0;
    var parcent = Param.all_time / 2 - Param.long_time,
        dom = $('#reply-tip');
    if (parcent < 0 && 1 == dom.attr('data-before')) {
        dom.attr('data-before', 0);
        dom.removeClass('hide');
    } else if (parcent >= 0 && 1 == dom.attr('data-after')) {
        dom.attr('data-after', 0);
        dom.removeClass('hide');
    }
}
//如果是系列课才执行
if (Param.classIsLesson && Param.toNextVideoId != '0') {
    setInterval("toNextVideo()", "1000");
}
//跳转到下一个视频
function toNextVideo() {
    var percent = (Param.long_time / Param.all_time).toFixed(3);

    if (percent == 1) {
        window.location.href = Url.toNextVideo;
    }
    if (percent > 0.98) {
        if ($(".next-video").hasClass('hide') && !$(".next-video").hasClass('close')) {
            $(".next-video").removeClass('hide');
        }
    }
}

function controlBarShowHandler(a) {
    if (true !== a) {
        $('#wide-srceen').addClass('hide');
    } else {
        $('#wide-srceen').removeClass('hide');
    }
}

//播放视频触发事件
function playHandler() {
    $('#reply-tip').addClass('hide');
    horseRaceLamp();
}

//检测flash
function flashChecker() {
    var hasFlash = 0;　　　　 //是否安装了flash
    var flashVersion = 0;　　 //flash版本

    if (document.all) {
        var swf = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
        if (swf) {
            hasFlash = 1;
            VSwf = swf.GetVariable("$version");
            flashVersion = parseInt(VSwf.split(" ")[1].split(",")[0]);
        }
    } else {
        if (navigator.plugins && navigator.plugins.length > 0) {
            var swf = navigator.plugins["Shockwave Flash"];
            if (swf) {
                hasFlash = 1;
                var words = swf.description.split(" ");
                for (var i = 0; i < words.length; ++i) {
                    if (isNaN(parseInt(words[i]))) continue;
                    flashVersion = parseInt(words[i]);
                }
            }
        }
    }
    return {f: hasFlash, v: flashVersion};
}
//判断是否是PC端
function IsPC() {
    var userAgentInfo = navigator.userAgent;
    var Agents = ["Android", "iPhone",
        "SymbianOS", "Windows Phone",
        "iPad", "iPod"];
    var flag = true;
    for (var v = 0; v < Agents.length; v++) {
        if (userAgentInfo.indexOf(Agents[v]) > 0) {
            flag = false;
            break;
        }
    }
    return flag;
}
//判断是否Safari浏览器
function myBrowser() {
    var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串
    var isOpera = userAgent.indexOf("Opera") > -1;
    if (isOpera) {
        return "Opera"
    }
    //判断是否Opera浏览器
    if (userAgent.indexOf("Firefox") > -1) {
        return "FF";
    } //判断是否Firefox浏览器
    if (userAgent.indexOf("Chrome") > -1) {
        return "Chrome";
    }
    if (userAgent.indexOf("Safari") > -1) {
        return "Safari";
    } //判断是否Safari浏览器
    if (userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera) {
        return "IE";
    }
}

//输入判定
function onInputs(_self) {
    $(_self).parents('div[data-reply-js=form]').find('em[data-reply-js=input-num]').text($(_self).val().length);
}
//视频播放完成
$(window).bind("beforeunload", function () {
    0 < Param.long_time && $.ajax({
        type: "post",
        url: Url.statisticsVideoPlay,
        xhrFields: {
            withCredentials: true
        },
        data: {
            video_id: Param.video_id,
            long_time: Param.long_time,
            video_time: Param.all_time,
            "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
        }
    })
});

// 视频模块简单的tabjs
$(".tab-head").on("click", ".a1", function () {
    $(this).addClass("active").siblings().removeClass("active");
    $("#t2").show();
    $("#t1").hide();
});
$(".tab-head").on("click", ".a2", function () {
    $(this).addClass("active").siblings().removeClass("active");
    $("#t1").show();
    $("#t2").hide();
});
// 视频模块手风琴js
$(".v-list").on("click", ".dt-list", function () {
    var dt = $(this).siblings(".dd-list");
    dd = dt.css("display");
    if (dd == "block") {
        dt.hide()
    } else {
        dt.show()
    }
    sc();
});

// 全站通谈床关闭按钮
$(".qz-win").on("click", ".close", function () {
    $(".qz-win").hide()
});

$(".next-video .fr").on("click", function () {
    $(".next-video").addClass('hide close');
});

//c4d目录
$(".dd-list").on("click", "p", function () {
    var t = $(this)
    t.parents(".right-mid").find(".v-list").removeClass("show").find("p").removeClass("active");
    t.addClass("active").parents(".v-list").addClass("show");
});
//没有全站通而且已经当天看过了系列课，弹出弹框
if (Param.lesssonIsLimit) {
    $(".qz-win").show();
}

// 判断是否有滚动条
function sc() {
    if (Param.isStudyPathAndParentId) {
        $("#t2").scrollTop(1);//控制滚动条下移1px
        if ($("#t2").scrollTop() > 0) {
            document.getElementById('t2').onmousewheel = function (event) {
                if (!event) event = window.event;
                this.scrollTop = this.scrollTop - (event.wheelDelta ? event.wheelDelta : -event.detail * 10);
                return false;
            }
        } else {
            document.getElementById("t2").onmousewheel = null;
        }
        $("#t2").scrollTop(0);//滚动条返回顶部
    }
}
sc();

// 系列课的当前课程定位
function scForList() {
    if (typeof $('#t2') != 'undefined' && $('#t2').length >= 1) {
        $("#t2").scrollTop(1);//控制滚动条下移1px
        if ($("#t2").scrollTop() > 0) {
            var video_now = $('#video-' + course.video_id);
            if (typeof video_now != 'undefined' && video_now.length > 0) {
                var _offset = $('#video-' + course.video_id).position().top;
                $("#t2").animate({
                    scrollTop: _offset - 180
                }, 200);
            }
        }
        $("#t2").scrollTop(0);//滚动条返回顶部
    }
}
scForList();

// 下载素材和案例时的提示框
function caseAndSourceTips(html) {
    $('div.cain-tips').html(html).removeClass('hide');

    setTimeout("$('div.cain-tips').addClass('hide')", 2500);
}


//收藏点击
$("#collect-js").on('click', function () {
    if(Param.uid == 0){
        toLogin();
        return false;
    }
    $.post(Url.videoCollect, {
        "PersonalCollectionFrom[video_id]": Param.video_id,
        "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
    }, function (b) {
        0 == b.isError ? ($("#collect-js").addClass("hide"), $("#re-collect-js").removeClass("hide"), $("#collected-video").html('已收藏')) : ''
    }, "json")
});

//取消收藏点击hover
$('#re-collect-js').hover(function () {
    $(this).html('取消');
}, function () {
    $(this).html('已收藏');
});

//取消收藏点击click
$("#re-collect-js").on('click', function () {
    if(Param.uid == 0){
        toLogin();
        return false;
    }
    $.post(Url.videoCancelCollect, {
        "PersonalCollectionFrom[video_id]": Param.video_id,
        "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")
    }, function (b) {
        0 == b.isError ? ($("#re-collect-js").addClass("hide"), $("#collect-js").removeClass("hide"), $("#collected-video").html('取消')) : ''
    }, "json")
});

//曝光率异步请求判定
$.post(
    Url.ajaxSetExposure,
    {"url": $("#referrer").val(), "_csrf-frontend": $('meta[name="csrf-token"]').attr("content")},
    function (response) {
       if(response.code == 200){
           Param.exposure = response.exposure;
       }
    },
"json")



//星星选择
$('div[data-event-js=star-choose-js] i').click(function () {

    if(Param.uid == 0){
        toLogin();
        return false;
    }
    $(this).parents('div[data-event-js=reply-form-block-js]').find('span[data-event-js=show-tag-js]').removeClass('warning-text');
    $(this).parents('div[data-event-js=reply-form-block-js]').find('span[data-event-js=show-tag-js]').text($(this).attr('data-text'));
    $(this).nextAll('i').removeClass('big-full');
    $(this).prevAll('i').addClass('big-full');
    $(this).addClass('big-full');
    var num = $(".cs-star .big-full").length;
    $(".star_num").val(num);
});

/*************评论改版，外部内容****************/

//图文教程学员评价切换
$('.tabs-head').on('click', 'span', function() {
    var ind = $(this).index();
    $(this).addClass('active').siblings('span').removeClass('active');
    $(this).parents('.tabs-head').siblings('.tabs-m').find('.tabs-wrap').eq(ind).removeClass('hide').siblings().addClass('hide');
});

/**
 * 当没有图文教程和练习题的时候，优先展示评论内容
 */
if($(".video-b .img-course .default-null-page").length > 0){
    $(".tabs-head span:eq(1)").trigger('click');
}

//立即学习
function studyNow() {
    $('body,html').scrollTop(0);
    $("#huke88-video-play").trigger('click');
}
/* COMBO: filename = js/plugins/webupload/webuploader.min.js, type = application/javascript, resp = 200 */
/* WebUploader 0.1.6 */!function(a,b){var c,d={},e=function(a,b){var c,d,e;if("string"==typeof a)return h(a);for(c=[],d=a.length,e=0;d>e;e++)c.push(h(a[e]));return b.apply(null,c)},f=function(a,b,c){2===arguments.length&&(c=b,b=null),e(b||[],function(){g(a,c,arguments)})},g=function(a,b,c){var f,g={exports:b};"function"==typeof b&&(c.length||(c=[e,g.exports,g]),f=b.apply(null,c),void 0!==f&&(g.exports=f)),d[a]=g.exports},h=function(b){var c=d[b]||a[b];if(!c)throw new Error("`"+b+"` is undefined");return c},i=function(a){var b,c,e,f,g,h;h=function(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)};for(b in d)if(c=a,d.hasOwnProperty(b)){for(e=b.split("/"),g=h(e.pop());f=h(e.shift());)c[f]=c[f]||{},c=c[f];c[g]=d[b]}return a},j=function(c){return a.__dollar=c,i(b(a,f,e))};"object"==typeof module&&"object"==typeof module.exports?module.exports=j():"function"==typeof define&&define.amd?define(["jquery"],j):(c=a.WebUploader,a.WebUploader=j(),a.WebUploader.noConflict=function(){a.WebUploader=c})}(window,function(a,b,c){return b("dollar-third",[],function(){var b=a.require,c=a.__dollar||a.jQuery||a.Zepto||b("jquery")||b("zepto");if(!c)throw new Error("jQuery or Zepto not found!");return c}),b("dollar",["dollar-third"],function(a){return a}),b("promise-third",["dollar"],function(a){return{Deferred:a.Deferred,when:a.when,isPromise:function(a){return a&&"function"==typeof a.then}}}),b("promise",["promise-third"],function(a){return a}),b("base",["dollar","promise"],function(b,c){function d(a){return function(){return h.apply(a,arguments)}}function e(a,b){return function(){return a.apply(b,arguments)}}function f(a){var b;return Object.create?Object.create(a):(b=function(){},b.prototype=a,new b)}var g=function(){},h=Function.call;return{version:"0.1.6",$:b,Deferred:c.Deferred,isPromise:c.isPromise,when:c.when,browser:function(a){var b={},c=a.match(/WebKit\/([\d.]+)/),d=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),e=a.match(/MSIE\s([\d\.]+)/)||a.match(/(?:trident)(?:.*rv:([\w.]+))?/i),f=a.match(/Firefox\/([\d.]+)/),g=a.match(/Safari\/([\d.]+)/),h=a.match(/OPR\/([\d.]+)/);return c&&(b.webkit=parseFloat(c[1])),d&&(b.chrome=parseFloat(d[1])),e&&(b.ie=parseFloat(e[1])),f&&(b.firefox=parseFloat(f[1])),g&&(b.safari=parseFloat(g[1])),h&&(b.opera=parseFloat(h[1])),b}(navigator.userAgent),os:function(a){var b={},c=a.match(/(?:Android);?[\s\/]+([\d.]+)?/),d=a.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return c&&(b.android=parseFloat(c[1])),d&&(b.ios=parseFloat(d[1].replace(/_/g,"."))),b}(navigator.userAgent),inherits:function(a,c,d){var e;return"function"==typeof c?(e=c,c=null):e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)},b.extend(!0,e,a,d||{}),e.__super__=a.prototype,e.prototype=f(a.prototype),c&&b.extend(!0,e.prototype,c),e},noop:g,bindFn:e,log:function(){return a.console?e(console.log,console):g}(),nextTick:function(){return function(a){setTimeout(a,1)}}(),slice:d([].slice),guid:function(){var a=0;return function(b){for(var c=(+new Date).toString(32),d=0;5>d;d++)c+=Math.floor(65535*Math.random()).toString(32);return(b||"wu_")+c+(a++).toString(32)}}(),formatSize:function(a,b,c){var d;for(c=c||["B","K","M","G","TB"];(d=c.shift())&&a>1024;)a/=1024;return("B"===d?a:a.toFixed(b||2))+d}}}),b("mediator",["base"],function(a){function b(a,b,c,d){return f.grep(a,function(a){return!(!a||b&&a.e!==b||c&&a.cb!==c&&a.cb._cb!==c||d&&a.ctx!==d)})}function c(a,b,c){f.each((a||"").split(h),function(a,d){c(d,b)})}function d(a,b){for(var c,d=!1,e=-1,f=a.length;++e<f;)if(c=a[e],c.cb.apply(c.ctx2,b)===!1){d=!0;break}return!d}var e,f=a.$,g=[].slice,h=/\s+/;return e={on:function(a,b,d){var e,f=this;return b?(e=this._events||(this._events=[]),c(a,b,function(a,b){var c={e:a};c.cb=b,c.ctx=d,c.ctx2=d||f,c.id=e.length,e.push(c)}),this):this},once:function(a,b,d){var e=this;return b?(c(a,b,function(a,b){var c=function(){return e.off(a,c),b.apply(d||e,arguments)};c._cb=b,e.on(a,c,d)}),e):e},off:function(a,d,e){var g=this._events;return g?a||d||e?(c(a,d,function(a,c){f.each(b(g,a,c,e),function(){delete g[this.id]})}),this):(this._events=[],this):this},trigger:function(a){var c,e,f;return this._events&&a?(c=g.call(arguments,1),e=b(this._events,a),f=b(this._events,"all"),d(e,c)&&d(f,arguments)):this}},f.extend({installTo:function(a){return f.extend(a,e)}},e)}),b("uploader",["base","mediator"],function(a,b){function c(a){this.options=d.extend(!0,{},c.options,a),this._init(this.options)}var d=a.$;return c.options={},b.installTo(c.prototype),d.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(a,b){c.prototype[a]=function(){return this.request(b,arguments)}}),d.extend(c.prototype,{state:"pending",_init:function(a){var b=this;b.request("init",a,function(){b.state="ready",b.trigger("ready")})},option:function(a,b){var c=this.options;return arguments.length>1?(d.isPlainObject(b)&&d.isPlainObject(c[a])?d.extend(c[a],b):c[a]=b,void 0):a?c[a]:c},getStats:function(){var a=this.request("get-stats");return a?{successNum:a.numOfSuccess,progressNum:a.numOfProgress,cancelNum:a.numOfCancel,invalidNum:a.numOfInvalid,uploadFailNum:a.numOfUploadFailed,queueNum:a.numOfQueue,interruptNum:a.numofInterrupt}:{}},trigger:function(a){var c=[].slice.call(arguments,1),e=this.options,f="on"+a.substring(0,1).toUpperCase()+a.substring(1);return b.trigger.apply(this,arguments)===!1||d.isFunction(e[f])&&e[f].apply(this,c)===!1||d.isFunction(this[f])&&this[f].apply(this,c)===!1||b.trigger.apply(b,[this,a].concat(c))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:a.noop}),a.create=c.create=function(a){return new c(a)},a.Uploader=c,c}),b("runtime/runtime",["base","mediator"],function(a,b){function c(b){this.options=d.extend({container:document.body},b),this.uid=a.guid("rt_")}var d=a.$,e={},f=function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null};return d.extend(c.prototype,{getContainer:function(){var a,b,c=this.options;return this._container?this._container:(a=d(c.container||document.body),b=d(document.createElement("div")),b.attr("id","rt_"+this.uid),b.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),a.append(b),a.addClass("webuploader-container"),this._container=b,this._parent=a,b)},init:a.noop,exec:a.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),c.orders="html5,flash",c.addRuntime=function(a,b){e[a]=b},c.hasRuntime=function(a){return!!(a?e[a]:f(e))},c.create=function(a,b){var g,h;if(b=b||c.orders,d.each(b.split(/\s*,\s*/g),function(){return e[this]?(g=this,!1):void 0}),g=g||f(e),!g)throw new Error("Runtime Error");return h=new e[g](a)},b.installTo(c.prototype),c}),b("runtime/client",["base","mediator","runtime/runtime"],function(a,b,c){function d(b,d){var f,g=a.Deferred();this.uid=a.guid("client_"),this.runtimeReady=function(a){return g.done(a)},this.connectRuntime=function(b,h){if(f)throw new Error("already connected!");return g.done(h),"string"==typeof b&&e.get(b)&&(f=e.get(b)),f=f||e.get(null,d),f?(a.$.extend(f.options,b),f.__promise.then(g.resolve),f.__client++):(f=c.create(b,b.runtimeOrder),f.__promise=g.promise(),f.once("ready",g.resolve),f.init(),e.add(f),f.__client=1),d&&(f.__standalone=d),f},this.getRuntime=function(){return f},this.disconnectRuntime=function(){f&&(f.__client--,f.__client<=0&&(e.remove(f),delete f.__promise,f.destroy()),f=null)},this.exec=function(){if(f){var c=a.slice(arguments);return b&&c.unshift(b),f.exec.apply(this,c)}},this.getRuid=function(){return f&&f.uid},this.destroy=function(a){return function(){a&&a.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var e;return e=function(){var a={};return{add:function(b){a[b.uid]=b},get:function(b,c){var d;if(b)return a[b];for(d in a)if(!c||!a[d].__standalone)return a[d];return null},remove:function(b){delete a[b.uid]}}}(),b.installTo(d.prototype),d}),b("lib/dnd",["base","mediator","runtime/client"],function(a,b,c){function d(a){a=this.options=e.extend({},d.options,a),a.container=e(a.container),a.container.length&&c.call(this,"DragAndDrop")}var e=a.$;return d.options={accept:null,disableGlobalDnd:!1},a.inherits(c,{constructor:d,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})}}),b.installTo(d.prototype),d}),b("widgets/widget",["base","uploader"],function(a,b){function c(a){if(!a)return!1;var b=a.length,c=e.type(a);return 1===a.nodeType&&b?!0:"array"===c||"function"!==c&&"string"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){this.owner=a,this.options=a.options}var e=a.$,f=b.prototype._init,g=b.prototype.destroy,h={},i=[];return e.extend(d.prototype,{init:a.noop,invoke:function(a,b){var c=this.responseMap;return c&&a in c&&c[a]in this&&e.isFunction(this[c[a]])?this[c[a]].apply(this,b):h},request:function(){return this.owner.request.apply(this.owner,arguments)}}),e.extend(b.prototype,{_init:function(){var a=this,b=a._widgets=[],c=a.options.disableWidgets||"";return e.each(i,function(d,e){(!c||!~c.indexOf(e._name))&&b.push(new e(a))}),f.apply(a,arguments)},request:function(b,d,e){var f,g,i,j,k=0,l=this._widgets,m=l&&l.length,n=[],o=[];for(d=c(d)?d:[d];m>k;k++)f=l[k],g=f.invoke(b,d),g!==h&&(a.isPromise(g)?o.push(g):n.push(g));return e||o.length?(i=a.when.apply(a,o),j=i.pipe?"pipe":"then",i[j](function(){var b=a.Deferred(),c=arguments;return 1===c.length&&(c=c[0]),setTimeout(function(){b.resolve(c)},1),b.promise()})[e?j:"done"](e||a.noop)):n[0]},destroy:function(){g.apply(this,arguments),this._widgets=null}}),b.register=d.register=function(b,c){var f,g={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(c=b,e.each(c,function(a){return"_"===a[0]||"name"===a?("name"===a&&(g.name=c.name),void 0):(g[a.replace(/[A-Z]/g,"-$&").toLowerCase()]=a,void 0)})):g=e.extend(g,b),c.responseMap=g,f=a.inherits(d,c),f._name=g.name,i.push(f),f},b.unRegister=d.unRegister=function(a){if(a&&"anonymous"!==a)for(var b=i.length;b--;)i[b]._name===a&&i.splice(b,1)},d}),b("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(a,b,c){var d=a.$;return b.options.dnd="",b.register({name:"dnd",init:function(b){if(b.dnd&&"html5"===this.request("predict-runtime-type")){var e,f=this,g=a.Deferred(),h=d.extend({},{disableGlobalDnd:b.disableGlobalDnd,container:b.dnd,accept:b.accept});return this.dnd=e=new c(h),e.once("ready",g.resolve),e.on("drop",function(a){f.request("add-file",[a])}),e.on("accept",function(a){return f.owner.trigger("dndAccept",a)}),e.init(),g.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),b("lib/filepaste",["base","mediator","runtime/client"],function(a,b,c){function d(a){a=this.options=e.extend({},a),a.container=e(a.container||document.body),c.call(this,"FilePaste")}var e=a.$;return a.inherits(c,{constructor:d,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})}}),b.installTo(d.prototype),d}),b("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(a,b,c){var d=a.$;return b.register({name:"paste",init:function(b){if(b.paste&&"html5"===this.request("predict-runtime-type")){var e,f=this,g=a.Deferred(),h=d.extend({},{container:b.paste,accept:b.accept});return this.paste=e=new c(h),e.once("ready",g.resolve),e.on("paste",function(a){f.owner.request("add-file",[a])}),e.init(),g.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),b("lib/blob",["base","runtime/client"],function(a,b){function c(a,c){var d=this;d.source=c,d.ruid=a,this.size=c.size||0,this.type=!c.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?"image/"+("jpg"===this.ext?"jpeg":this.ext):c.type||"application/octet-stream",b.call(d,"Blob"),this.uid=c.uid||this.uid,a&&d.connectRuntime(a)}return a.inherits(b,{constructor:c,slice:function(a,b){return this.exec("slice",a,b)},getSource:function(){return this.source}}),c}),b("lib/file",["base","lib/blob"],function(a,b){function c(a,c){var f;this.name=c.name||"untitled"+d++,f=e.exec(c.name)?RegExp.$1.toLowerCase():"",!f&&c.type&&(f=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(c.type)?RegExp.$1.toLowerCase():"",this.name+="."+f),this.ext=f,this.lastModifiedDate=c.lastModifiedDate||(new Date).toLocaleString(),b.apply(this,arguments)}var d=1,e=/\.([^.]+)$/;return a.inherits(b,c)}),b("lib/filepicker",["base","runtime/client","lib/file"],function(b,c,d){function e(a){if(a=this.options=f.extend({},e.options,a),a.container=f(a.id),!a.container.length)throw new Error("按钮指定错误");a.innerHTML=a.innerHTML||a.label||a.container.html()||"",a.button=f(a.button||document.createElement("div")),a.button.html(a.innerHTML),a.container.html(a.button),c.call(this,"FilePicker",!0)}var f=b.$;return e.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file",style:"webuploader-pick"},b.inherits(c,{constructor:e,init:function(){var c=this,e=c.options,g=e.button,h=e.style;h&&g.addClass("webuploader-pick"),c.on("all",function(a){var b;switch(a){case"mouseenter":h&&g.addClass("webuploader-pick-hover");break;case"mouseleave":h&&g.removeClass("webuploader-pick-hover");break;case"change":b=c.exec("getFiles"),c.trigger("select",f.map(b,function(a){return a=new d(c.getRuid(),a),a._refer=e.container,a}),e.container)}}),c.connectRuntime(e,function(){c.refresh(),c.exec("init",e),c.trigger("ready")}),this._resizeHandler=b.bindFn(this.refresh,this),f(a).on("resize",this._resizeHandler)},refresh:function(){var a=this.getRuntime().getContainer(),b=this.options.button,c=b.outerWidth?b.outerWidth():b.width(),d=b.outerHeight?b.outerHeight():b.height(),e=b.offset();c&&d&&a.css({bottom:"auto",right:"auto",width:c+"px",height:d+"px"}).offset(e)},enable:function(){var a=this.options.button;a.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var a=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),a.addClass("webuploader-pick-disable")},destroy:function(){var b=this.options.button;f(a).off("resize",this._resizeHandler),b.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),e}),b("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(a,b,c){var d=a.$;return d.extend(b.options,{pick:null,accept:null}),b.register({name:"picker",init:function(a){return this.pickers=[],a.pick&&this.addBtn(a.pick)},refresh:function(){d.each(this.pickers,function(){this.refresh()})},addBtn:function(b){var e=this,f=e.options,g=f.accept,h=[];if(b)return d.isPlainObject(b)||(b={id:b}),d(b.id).each(function(){var i,j,k;k=a.Deferred(),i=d.extend({},b,{accept:d.isPlainObject(g)?[g]:g,swf:f.swf,runtimeOrder:f.runtimeOrder,id:this}),j=new c(i),j.once("ready",k.resolve),j.on("select",function(a){e.owner.request("add-file",[a])}),j.on("dialogopen",function(){e.owner.trigger("dialogOpen",j.button)}),j.init(),e.pickers.push(j),h.push(k.promise())}),a.when.apply(a,h)},disable:function(){d.each(this.pickers,function(){this.disable()})},enable:function(){d.each(this.pickers,function(){this.enable()})},destroy:function(){d.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),b("lib/image",["base","runtime/client","lib/blob"],function(a,b,c){function d(a){this.options=e.extend({},d.options,a),b.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var e=a.$;return d.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},a.inherits(b,{constructor:d,info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},loadFromBlob:function(a){var b=this,c=a.getRuid();this.connectRuntime(c,function(){b.exec("init",b.options),b.exec("loadFromBlob",a)})},resize:function(){var b=a.slice(arguments);return this.exec.apply(this,["resize"].concat(b))},crop:function(){var b=a.slice(arguments);return this.exec.apply(this,["crop"].concat(b))},getAsDataUrl:function(a){return this.exec("getAsDataUrl",a)},getAsBlob:function(a){var b=this.exec("getAsBlob",a);return new c(this.getRuid(),b)}}),d}),b("widgets/image",["base","uploader","lib/image","widgets/widget"],function(a,b,c){var d,e=a.$;return d=function(a){var b=0,c=[],d=function(){for(var d;c.length&&a>b;)d=c.shift(),b+=d[0],d[1]()};return function(a,e,f){c.push([e,f]),a.once("destroy",function(){b-=e,setTimeout(d,1)}),setTimeout(d,1)}}(5242880),e.extend(b.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),b.register({name:"image",makeThumb:function(a,b,f,g){var h,i;return a=this.request("get-file",a),a.type.match(/^image/)?(h=e.extend({},this.options.thumb),e.isPlainObject(f)&&(h=e.extend(h,f),f=null),f=f||h.width,g=g||h.height,i=new c(h),i.once("load",function(){a._info=a._info||i.info(),a._meta=a._meta||i.meta(),1>=f&&f>0&&(f=a._info.width*f),1>=g&&g>0&&(g=a._info.height*g),i.resize(f,g)}),i.once("complete",function(){b(!1,i.getAsDataUrl(h.type)),i.destroy()}),i.once("error",function(a){b(a||!0),i.destroy()}),d(i,a.source.size,function(){a._info&&i.info(a._info),a._meta&&i.meta(a._meta),i.loadFromBlob(a.source)}),void 0):(b(!0),void 0)},beforeSendFile:function(b){var d,f,g=this.options.compress||this.options.resize,h=g&&g.compressSize||0,i=g&&g.noCompressIfLarger||!1;return b=this.request("get-file",b),!g||!~"image/jpeg,image/jpg".indexOf(b.type)||b.size<h||b._compressed?void 0:(g=e.extend({},g),f=a.Deferred(),d=new c(g),f.always(function(){d.destroy(),d=null}),d.once("error",f.reject),d.once("load",function(){var a=g.width,c=g.height;b._info=b._info||d.info(),b._meta=b._meta||d.meta(),1>=a&&a>0&&(a=b._info.width*a),1>=c&&c>0&&(c=b._info.height*c),d.resize(a,c)}),d.once("complete",function(){var a,c;try{a=d.getAsBlob(g.type),c=b.size,(!i||a.size<c)&&(b.source=a,b.size=a.size,b.trigger("resize",a.size,c)),b._compressed=!0,f.resolve()}catch(e){f.resolve()}}),b._info&&d.info(b._info),b._meta&&d.meta(b._meta),d.loadFromBlob(b.source),f.promise())}})}),b("file",["base","mediator"],function(a,b){function c(){return f+g++}function d(a){this.name=a.name||"Untitled",this.size=a.size||0,this.type=a.type||"application/octet-stream",this.lastModifiedDate=a.lastModifiedDate||1*new Date,this.id=c(),this.ext=h.exec(this.name)?RegExp.$1:"",this.statusText="",i[this.id]=d.Status.INITED,this.source=a,this.loaded=0,this.on("error",function(a){this.setStatus(d.Status.ERROR,a)})}var e=a.$,f="WU_FILE_",g=0,h=/\.([^.]+)$/,i={};return e.extend(d.prototype,{setStatus:function(a,b){var c=i[this.id];"undefined"!=typeof b&&(this.statusText=b),a!==c&&(i[this.id]=a,this.trigger("statuschange",a,c))},getStatus:function(){return i[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete i[this.id]}}),b.installTo(d.prototype),d.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},d}),b("queue",["base","mediator","file"],function(a,b,c){function d(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var e=a.$,f=c.Status;return e.extend(d.prototype,{append:function(a){return this._queue.push(a),this._fileAdded(a),this},prepend:function(a){return this._queue.unshift(a),this._fileAdded(a),this},getFile:function(a){return"string"!=typeof a?a:this._map[a]},fetch:function(a){var b,c,d=this._queue.length;for(a=a||f.QUEUED,b=0;d>b;b++)if(c=this._queue[b],a===c.getStatus())return c;return null},sort:function(a){"function"==typeof a&&this._queue.sort(a)},getFiles:function(){for(var a,b=[].slice.call(arguments,0),c=[],d=0,f=this._queue.length;f>d;d++)a=this._queue[d],(!b.length||~e.inArray(a.getStatus(),b))&&c.push(a);return c},removeFile:function(a){var b=this._map[a.id];b&&(delete this._map[a.id],a.destroy(),this.stats.numofDeleted++)},_fileAdded:function(a){var b=this,c=this._map[a.id];c||(this._map[a.id]=a,a.on("statuschange",function(a,c){b._onFileStatusChange(a,c)}))},_onFileStatusChange:function(a,b){var c=this.stats;switch(b){case f.PROGRESS:c.numOfProgress--;break;case f.QUEUED:c.numOfQueue--;break;case f.ERROR:c.numOfUploadFailed--;break;case f.INVALID:c.numOfInvalid--;break;case f.INTERRUPT:c.numofInterrupt--}switch(a){case f.QUEUED:c.numOfQueue++;break;case f.PROGRESS:c.numOfProgress++;break;case f.ERROR:c.numOfUploadFailed++;break;case f.COMPLETE:c.numOfSuccess++;break;case f.CANCELLED:c.numOfCancel++;break;case f.INVALID:c.numOfInvalid++;break;case f.INTERRUPT:c.numofInterrupt++}}}),b.installTo(d.prototype),d}),b("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(a,b,c,d,e,f){var g=a.$,h=/\.\w+$/,i=d.Status;return b.register({name:"queue",init:function(b){var d,e,h,i,j,k,l,m=this;if(g.isPlainObject(b.accept)&&(b.accept=[b.accept]),b.accept){for(j=[],h=0,e=b.accept.length;e>h;h++)i=b.accept[h].extensions,i&&j.push(i);j.length&&(k="\\."+j.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),m.accept=new RegExp(k,"i")}return m.queue=new c,m.stats=m.queue.stats,"html5"===this.request("predict-runtime-type")?(d=a.Deferred(),this.placeholder=l=new f("Placeholder"),l.connectRuntime({runtimeOrder:"html5"},function(){m._ruid=l.getRuid(),d.resolve()}),d.promise()):void 0},_wrapFile:function(a){if(!(a instanceof d)){if(!(a instanceof e)){if(!this._ruid)throw new Error("Can't add external files.");a=new e(this._ruid,a)}a=new d(a)}return a},acceptFile:function(a){var b=!a||!a.size||this.accept&&h.exec(a.name)&&!this.accept.test(a.name);return!b},_addFile:function(a){var b=this;return a=b._wrapFile(a),b.owner.trigger("beforeFileQueued",a)?b.acceptFile(a)?(b.queue.append(a),b.owner.trigger("fileQueued",a),a):(b.owner.trigger("error","Q_TYPE_DENIED",a),void 0):void 0},getFile:function(a){return this.queue.getFile(a)},addFile:function(a){var b=this;a.length||(a=[a]),a=g.map(a,function(a){return b._addFile(a)}),a.length&&(b.owner.trigger("filesQueued",a),b.options.auto&&setTimeout(function(){b.request("start-upload")},20))},getStats:function(){return this.stats},removeFile:function(a,b){var c=this;a=a.id?a:c.queue.getFile(a),this.request("cancel-file",a),b&&this.queue.removeFile(a)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(a,b){var c,d,e,f=this;if(a)return a=a.id?a:f.queue.getFile(a),a.setStatus(i.QUEUED),b||f.request("start-upload"),void 0;for(c=f.queue.getFiles(i.ERROR),d=0,e=c.length;e>d;d++)a=c[d],a.setStatus(i.QUEUED);f.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new c,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),b("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(a,b){return a.support=function(){return b.hasRuntime.apply(b,arguments)},a.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var a,c,d=this.options.runtimeOrder||b.orders,e=this.type;if(!e)for(d=d.split(/\s*,\s*/g),a=0,c=d.length;c>a;a++)if(b.hasRuntime(d[a])){this.type=e=d[a];break}return e}})}),b("lib/transport",["base","runtime/client","mediator"],function(a,b,c){function d(a){var c=this;a=c.options=e.extend(!0,{},d.options,a||{}),b.call(this,"Transport"),this._blob=null,this._formData=a.formData||{},this._headers=a.headers||{},this.on("progress",this._timeout),this.on("load error",function(){c.trigger("progress",1),clearTimeout(c._timer)})}var e=a.$;return d.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},e.extend(d.prototype,{appendBlob:function(a,b,c){var d=this,e=d.options;d.getRuid()&&d.disconnectRuntime(),d.connectRuntime(b.ruid,function(){d.exec("init")}),d._blob=b,e.fileVal=a||e.fileVal,e.filename=c||e.filename},append:function(a,b){"object"==typeof a?e.extend(this._formData,a):this._formData[a]=b},setRequestHeader:function(a,b){"object"==typeof a?e.extend(this._headers,a):this._headers[a]=b},send:function(a){this.exec("send",a),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var a=this,b=a.options.timeout;b&&(clearTimeout(a._timer),a._timer=setTimeout(function(){a.abort(),a.trigger("error","timeout")},b))}}),c.installTo(d.prototype),d}),b("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(a,b,c,d){function e(a,b){var c,d,e=[],f=a.source,g=f.size,h=b?Math.ceil(g/b):1,i=0,j=0;for(d={file:a,has:function(){return!!e.length},shift:function(){return e.shift()},unshift:function(a){e.unshift(a)}};h>j;)c=Math.min(b,g-i),e.push({file:a,start:i,end:b?i+c:g,total:g,chunks:h,chunk:j++,cuted:d}),i+=c;return a.blocks=e.concat(),a.remaning=e.length,d}var f=a.$,g=a.isPromise,h=c.Status;f.extend(b.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),b.register({name:"upload",init:function(){var b=this.owner,c=this;this.runing=!1,this.progress=!1,b.on("startUpload",function(){c.progress=!0}).on("uploadFinished",function(){c.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=a.bindFn(this._tick,this),b.on("uploadComplete",function(a){a.blocks&&f.each(a.blocks,function(a,b){b.transport&&(b.transport.abort(),b.transport.destroy()),delete b.transport}),delete a.blocks,delete a.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(b){var c=this;if(f.each(c.request("get-files",h.INVALID),function(){c.request("remove-file",this)}),b?(b=b.id?b:c.request("get-file",b),b.getStatus()===h.INTERRUPT?(b.setStatus(h.QUEUED),f.each(c.pool,function(a,c){c.file===b&&(c.transport&&c.transport.send(),b.setStatus(h.PROGRESS))})):b.getStatus()!==h.PROGRESS&&b.setStatus(h.QUEUED)):f.each(c.request("get-files",[h.INITED]),function(){this.setStatus(h.QUEUED)}),c.runing)return a.nextTick(c.__tick);c.runing=!0;var d=[];b||f.each(c.pool,function(a,b){var e=b.file;e.getStatus()===h.INTERRUPT&&(c._trigged=!1,d.push(e),b.transport&&b.transport.send())}),f.each(d,function(){this.setStatus(h.PROGRESS)}),b||f.each(c.request("get-files",h.INTERRUPT),function(){this.setStatus(h.PROGRESS)}),c._trigged=!1,a.nextTick(c.__tick),c.owner.trigger("startUpload")},stopUpload:function(b,c){var d,e=this;if(b===!0&&(c=b,b=null),e.runing!==!1){if(b){if(b=b.id?b:e.request("get-file",b),b.getStatus()!==h.PROGRESS&&b.getStatus()!==h.QUEUED)return;return b.setStatus(h.INTERRUPT),f.each(e.pool,function(a,c){return c.file===b?(d=c,!1):void 0}),d.transport&&d.transport.abort(),c&&(e._putback(d),e._popBlock(d)),a.nextTick(e.__tick)}e.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(h.INTERRUPT),c&&f.each(e.pool,function(a,b){b.transport&&b.transport.abort(),b.file.setStatus(h.INTERRUPT)}),e.owner.trigger("stopUpload")}},cancelFile:function(a){a=a.id?a:this.request("get-file",a),a.blocks&&f.each(a.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)}),a.setStatus(h.CANCELLED),this.owner.trigger("fileDequeued",a)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(a,b){a=a.id?a:this.request("get-file",a),a.setStatus(b||h.COMPLETE),a.skipped=!0,a.blocks&&f.each(a.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)}),this.owner.trigger("uploadSkip",a)},_tick:function(){var b,c,d=this,e=d.options;return d._promise?d._promise.always(d.__tick):(d.pool.length<e.threads&&(c=d._nextBlock())?(d._trigged=!1,b=function(b){d._promise=null,b&&b.file&&d._startSend(b),a.nextTick(d.__tick)},d._promise=g(c)?c.always(b):b(c)):d.remaning||d._getStats().numOfQueue||d._getStats().numofInterrupt||(d.runing=!1,d._trigged||a.nextTick(function(){d.owner.trigger("uploadFinished")}),d._trigged=!0),void 0)},_putback:function(a){var b;a.cuted.unshift(a),b=this.stack.indexOf(a.cuted),~b||this.stack.unshift(a.cuted)},_getStack:function(){for(var a,b=0;a=this.stack[b++];){if(a.has()&&a.file.getStatus()===h.PROGRESS)return a;(!a.has()||a.file.getStatus()!==h.PROGRESS&&a.file.getStatus()!==h.INTERRUPT)&&this.stack.splice(--b,1)}return null},_nextBlock:function(){var a,b,c,d,f=this,h=f.options;return(a=this._getStack())?(h.prepareNextFile&&!f.pending.length&&f._prepareNextFile(),a.shift()):f.runing?(!f.pending.length&&f._getStats().numOfQueue&&f._prepareNextFile(),b=f.pending.shift(),c=function(b){return b?(a=e(b,h.chunked?h.chunkSize:0),f.stack.push(a),a.shift()):null},g(b)?(d=b.file,b=b[b.pipe?"pipe":"then"](c),b.file=d,b):c(b)):void 0},_prepareNextFile:function(){var a,b=this,c=b.request("fetch-file"),d=b.pending;c&&(a=b.request("before-send-file",c,function(){return c.getStatus()===h.PROGRESS||c.getStatus()===h.INTERRUPT?c:b._finishFile(c)}),b.owner.trigger("uploadStart",c),c.setStatus(h.PROGRESS),a.file=c,a.done(function(){var b=f.inArray(a,d);~b&&d.splice(b,1,c)}),a.fail(function(a){c.setStatus(h.ERROR,a),b.owner.trigger("uploadError",c,a),b.owner.trigger("uploadComplete",c)}),d.push(a))},_popBlock:function(a){var b=f.inArray(a,this.pool);this.pool.splice(b,1),a.file.remaning--,this.remaning--},_startSend:function(b){var c,d=this,e=b.file;return e.getStatus()!==h.PROGRESS?(e.getStatus()===h.INTERRUPT&&d._putback(b),void 0):(d.pool.push(b),d.remaning++,b.blob=1===b.chunks?e.source:e.source.slice(b.start,b.end),c=d.request("before-send",b,function(){e.getStatus()===h.PROGRESS?d._doSend(b):(d._popBlock(b),a.nextTick(d.__tick))}),c.fail(function(){1===e.remaning?d._finishFile(e).always(function(){b.percentage=1,d._popBlock(b),d.owner.trigger("uploadComplete",e),a.nextTick(d.__tick)}):(b.percentage=1,d.updateFileProgress(e),d._popBlock(b),a.nextTick(d.__tick))}),void 0)},_doSend:function(b){var c,e,g=this,i=g.owner,j=g.options,k=b.file,l=new d(j),m=f.extend({},j.formData),n=f.extend({},j.headers);b.transport=l,l.on("destroy",function(){delete b.transport,g._popBlock(b),a.nextTick(g.__tick)}),l.on("progress",function(a){b.percentage=a,g.updateFileProgress(k)}),c=function(a){var c;return e=l.getResponseAsJson()||{},e._raw=l.getResponse(),c=function(b){a=b},i.trigger("uploadAccept",b,e,c)||(a=a||"server"),a},l.on("error",function(a,d){b.retried=b.retried||0,b.chunks>1&&~"http,abort".indexOf(a)&&b.retried<j.chunkRetry?(b.retried++,l.send()):(d||"server"!==a||(a=c(a)),k.setStatus(h.ERROR,a),i.trigger("uploadError",k,a),i.trigger("uploadComplete",k))}),l.on("load",function(){var a;return(a=c())?(l.trigger("error",a,!0),void 0):(1===k.remaning?g._finishFile(k,e):l.destroy(),void 0)}),m=f.extend(m,{id:k.id,name:k.name,type:k.type,lastModifiedDate:k.lastModifiedDate,size:k.size}),b.chunks>1&&f.extend(m,{chunks:b.chunks,chunk:b.chunk}),i.trigger("uploadBeforeSend",b,m,n),l.appendBlob(j.fileVal,b.blob,k.name),l.append(m),l.setRequestHeader(n),l.send()
},_finishFile:function(a,b,c){var d=this.owner;return d.request("after-send-file",arguments,function(){a.setStatus(h.COMPLETE),d.trigger("uploadSuccess",a,b,c)}).fail(function(b){a.getStatus()===h.PROGRESS&&a.setStatus(h.ERROR,b),d.trigger("uploadError",a,b)}).always(function(){d.trigger("uploadComplete",a)})},updateFileProgress:function(a){var b=0,c=0;a.blocks&&(f.each(a.blocks,function(a,b){c+=(b.percentage||0)*(b.end-b.start)}),b=c/a.size,this.owner.trigger("uploadProgress",a,b||0))}})}),b("widgets/validator",["base","uploader","file","widgets/widget"],function(a,b,c){var d,e=a.$,f={};return d={addValidator:function(a,b){f[a]=b},removeValidator:function(a){delete f[a]}},b.register({name:"validator",init:function(){var b=this;a.nextTick(function(){e.each(f,function(){this.call(b.owner)})})}}),d.addValidator("fileNumLimit",function(){var a=this,b=a.options,c=0,d=parseInt(b.fileNumLimit,10),e=!0;d&&(a.on("beforeFileQueued",function(a){return c>=d&&e&&(e=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",d,a),setTimeout(function(){e=!0},1)),c>=d?!1:!0}),a.on("fileQueued",function(){c++}),a.on("fileDequeued",function(){c--}),a.on("reset",function(){c=0}))}),d.addValidator("fileSizeLimit",function(){var a=this,b=a.options,c=0,d=parseInt(b.fileSizeLimit,10),e=!0;d&&(a.on("beforeFileQueued",function(a){var b=c+a.size>d;return b&&e&&(e=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",d,a),setTimeout(function(){e=!0},1)),b?!1:!0}),a.on("fileQueued",function(a){c+=a.size}),a.on("fileDequeued",function(a){c-=a.size}),a.on("reset",function(){c=0}))}),d.addValidator("fileSingleSizeLimit",function(){var a=this,b=a.options,d=b.fileSingleSizeLimit;d&&a.on("beforeFileQueued",function(a){return a.size>d?(a.setStatus(c.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",d,a),!1):void 0})}),d.addValidator("duplicate",function(){function a(a){for(var b,c=0,d=0,e=a.length;e>d;d++)b=a.charCodeAt(d),c=b+(c<<6)+(c<<16)-c;return c}var b=this,c=b.options,d={};c.duplicate||(b.on("beforeFileQueued",function(b){var c=b.__hash||(b.__hash=a(b.name+b.size+b.lastModifiedDate));return d[c]?(this.trigger("error","F_DUPLICATE",b),!1):void 0}),b.on("fileQueued",function(a){var b=a.__hash;b&&(d[b]=!0)}),b.on("fileDequeued",function(a){var b=a.__hash;b&&delete d[b]}),b.on("reset",function(){d={}}))}),d}),b("lib/md5",["runtime/client","mediator"],function(a,b){function c(){a.call(this,"Md5")}return b.installTo(c.prototype),c.prototype.loadFromBlob=function(a){var b=this;b.getRuid()&&b.disconnectRuntime(),b.connectRuntime(a.ruid,function(){b.exec("init"),b.exec("loadFromBlob",a)})},c.prototype.getResult=function(){return this.exec("getResult")},c}),b("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(a,b,c,d){return b.register({name:"md5",md5File:function(b,e,f){var g=new c,h=a.Deferred(),i=b instanceof d?b:this.request("get-file",b).source;return g.on("progress load",function(a){a=a||{},h.notify(a.total?a.loaded/a.total:1)}),g.on("complete",function(){h.resolve(g.getResult())}),g.on("error",function(a){h.reject(a)}),arguments.length>1&&(e=e||0,f=f||0,0>e&&(e=i.size+e),0>f&&(f=i.size+f),f=Math.min(f,i.size),i=i.slice(e,f)),g.loadFromBlob(i),h.promise()}})}),b("runtime/compbase",[],function(){function a(a,b){this.owner=a,this.options=a.options,this.getRuntime=function(){return b},this.getRuid=function(){return b.uid},this.trigger=function(){return a.trigger.apply(a,arguments)}}return a}),b("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(b,c,d){function e(){var a={},d=this,e=this.destroy;c.apply(d,arguments),d.type=f,d.exec=function(c,e){var f,h=this,i=h.uid,j=b.slice(arguments,2);return g[c]&&(f=a[i]=a[i]||new g[c](h,d),f[e])?f[e].apply(f,j):void 0},d.destroy=function(){return e&&e.apply(this,arguments)}}var f="html5",g={};return b.inherits(c,{constructor:e,init:function(){var a=this;setTimeout(function(){a.trigger("ready")},1)}}),e.register=function(a,c){var e=g[a]=b.inherits(d,c);return e},a.Blob&&a.FileReader&&a.DataView&&c.addRuntime(f,e),e}),b("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(a,b){return a.register("Blob",{slice:function(a,c){var d=this.owner.source,e=d.slice||d.webkitSlice||d.mozSlice;return d=e.call(d,a,c),new b(this.getRuid(),d)}})}),b("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(a,b,c){var d=a.$,e="webuploader-dnd-";return b.register("DragAndDrop",{init:function(){var b=this.elem=this.options.container;this.dragEnterHandler=a.bindFn(this._dragEnterHandler,this),this.dragOverHandler=a.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=a.bindFn(this._dragLeaveHandler,this),this.dropHandler=a.bindFn(this._dropHandler,this),this.dndOver=!1,b.on("dragenter",this.dragEnterHandler),b.on("dragover",this.dragOverHandler),b.on("dragleave",this.dragLeaveHandler),b.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).on("dragover",this.dragOverHandler),d(document).on("drop",this.dropHandler))},_dragEnterHandler:function(a){var b,c=this,d=c._denied||!1;return a=a.originalEvent||a,c.dndOver||(c.dndOver=!0,b=a.dataTransfer.items,b&&b.length&&(c._denied=d=!c.trigger("accept",b)),c.elem.addClass(e+"over"),c.elem[d?"addClass":"removeClass"](e+"denied")),a.dataTransfer.dropEffect=d?"none":"copy",!1},_dragOverHandler:function(a){var b=this.elem.parent().get(0);return b&&!d.contains(b,a.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,a),!1)},_dragLeaveHandler:function(){var a,b=this;return a=function(){b.dndOver=!1,b.elem.removeClass(e+"over "+e+"denied")},clearTimeout(b._leaveTimer),b._leaveTimer=setTimeout(a,100),!1},_dropHandler:function(a){var b,f,g=this,h=g.getRuid(),i=g.elem.parent().get(0);if(i&&!d.contains(i,a.currentTarget))return!1;a=a.originalEvent||a,b=a.dataTransfer;try{f=b.getData("text/html")}catch(j){}return g.dndOver=!1,g.elem.removeClass(e+"over"),f?void 0:(g._getTansferFiles(b,function(a){g.trigger("drop",d.map(a,function(a){return new c(h,a)}))}),!1)},_getTansferFiles:function(b,c){var d,e,f,g,h,i,j,k=[],l=[];for(d=b.items,e=b.files,j=!(!d||!d[0].webkitGetAsEntry),h=0,i=e.length;i>h;h++)f=e[h],g=d&&d[h],j&&g.webkitGetAsEntry().isDirectory?l.push(this._traverseDirectoryTree(g.webkitGetAsEntry(),k)):k.push(f);a.when.apply(a,l).done(function(){k.length&&c(k)})},_traverseDirectoryTree:function(b,c){var d=a.Deferred(),e=this;return b.isFile?b.file(function(a){c.push(a),d.resolve()}):b.isDirectory&&b.createReader().readEntries(function(b){var f,g=b.length,h=[],i=[];for(f=0;g>f;f++)h.push(e._traverseDirectoryTree(b[f],i));a.when.apply(a,h).then(function(){c.push.apply(c,i),d.resolve()},d.reject)}),d.promise()},destroy:function(){var a=this.elem;a&&(a.off("dragenter",this.dragEnterHandler),a.off("dragover",this.dragOverHandler),a.off("dragleave",this.dragLeaveHandler),a.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).off("dragover",this.dragOverHandler),d(document).off("drop",this.dropHandler)))}})}),b("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(a,b,c){return b.register("FilePaste",{init:function(){var b,c,d,e,f=this.options,g=this.elem=f.container,h=".*";if(f.accept){for(b=[],c=0,d=f.accept.length;d>c;c++)e=f.accept[c].mimeTypes,e&&b.push(e);b.length&&(h=b.join(","),h=h.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=h=new RegExp(h,"i"),this.hander=a.bindFn(this._pasteHander,this),g.on("paste",this.hander)},_pasteHander:function(a){var b,d,e,f,g,h=[],i=this.getRuid();for(a=a.originalEvent||a,b=a.clipboardData.items,f=0,g=b.length;g>f;f++)d=b[f],"file"===d.kind&&(e=d.getAsFile())&&h.push(new c(i,e));h.length&&(a.preventDefault(),a.stopPropagation(),this.trigger("paste",h))},destroy:function(){this.elem.off("paste",this.hander)}})}),b("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(a,b){var c=a.$;return b.register("FilePicker",{init:function(){var a,b,d,e,f=this.getRuntime().getContainer(),g=this,h=g.owner,i=g.options,j=this.label=c(document.createElement("label")),k=this.input=c(document.createElement("input"));if(k.attr("type","file"),k.attr("capture","camera"),k.attr("name",i.name),k.addClass("webuploader-element-invisible"),j.on("click",function(a){k.trigger("click"),a.stopPropagation(),h.trigger("dialogopen")}),j.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),i.multiple&&k.attr("multiple","multiple"),i.accept&&i.accept.length>0){for(a=[],b=0,d=i.accept.length;d>b;b++)a.push(i.accept[b].mimeTypes);k.attr("accept",a.join(","))}f.append(k),f.append(j),e=function(a){h.trigger(a.type)},k.on("change",function(a){var b,d=arguments.callee;g.files=a.target.files,b=this.cloneNode(!0),b.value=null,this.parentNode.replaceChild(b,this),k.off(),k=c(b).on("change",d).on("mouseenter mouseleave",e),h.trigger("change")}),j.on("mouseenter mouseleave",e)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),b("runtime/html5/util",["base"],function(b){var c=a.createObjectURL&&a||a.URL&&URL.revokeObjectURL&&URL||a.webkitURL,d=b.noop,e=d;return c&&(d=function(){return c.createObjectURL.apply(c,arguments)},e=function(){return c.revokeObjectURL.apply(c,arguments)}),{createObjectURL:d,revokeObjectURL:e,dataURL2Blob:function(a){var b,c,d,e,f,g;for(g=a.split(","),b=~g[0].indexOf("base64")?atob(g[1]):decodeURIComponent(g[1]),d=new ArrayBuffer(b.length),c=new Uint8Array(d),e=0;e<b.length;e++)c[e]=b.charCodeAt(e);return f=g[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(d,f)},dataURL2ArrayBuffer:function(a){var b,c,d,e;for(e=a.split(","),b=~e[0].indexOf("base64")?atob(e[1]):decodeURIComponent(e[1]),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c.buffer},arrayBufferToBlob:function(b,c){var d,e=a.BlobBuilder||a.WebKitBlobBuilder;return e?(d=new e,d.append(b),d.getBlob(c)):new Blob([b],c?{type:c}:{})},canvasToDataUrl:function(a,b,c){return a.toDataURL(b,c/100)},parseMeta:function(a,b){b(!1,{})},updateImageHead:function(a){return a}}}),b("runtime/html5/imagemeta",["runtime/html5/util"],function(a){var b;return b={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(a,b){var c=this,d=new FileReader;d.onload=function(){b(!1,c._parse(this.result)),d=d.onload=d.onerror=null},d.onerror=function(a){b(a.message),d=d.onload=d.onerror=null},a=a.slice(0,c.maxMetaDataSize),d.readAsArrayBuffer(a.getSource())},_parse:function(a,c){if(!(a.byteLength<6)){var d,e,f,g,h=new DataView(a),i=2,j=h.byteLength-4,k=i,l={};if(65496===h.getUint16(0)){for(;j>i&&(d=h.getUint16(i),d>=65504&&65519>=d||65534===d)&&(e=h.getUint16(i+2)+2,!(i+e>h.byteLength));){if(f=b.parsers[d],!c&&f)for(g=0;g<f.length;g+=1)f[g].call(b,h,i,e,l);i+=e,k=i}k>6&&(l.imageHead=a.slice?a.slice(2,k):new Uint8Array(a).subarray(2,k))}return l}},updateImageHead:function(a,b){var c,d,e,f=this._parse(a,!0);return e=2,f.imageHead&&(e=2+f.imageHead.byteLength),d=a.slice?a.slice(e):new Uint8Array(a).subarray(e),c=new Uint8Array(b.byteLength+2+d.byteLength),c[0]=255,c[1]=216,c.set(new Uint8Array(b),2),c.set(new Uint8Array(d),b.byteLength+2),c.buffer}},a.parseMeta=function(){return b.parse.apply(b,arguments)},a.updateImageHead=function(){return b.updateImageHead.apply(b,arguments)},b}),b("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(a,b){var c={};return c.ExifMap=function(){return this},c.ExifMap.prototype.map={Orientation:274},c.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},c.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},c.exifTagTypes[7]=c.exifTagTypes[1],c.getExifValue=function(b,d,e,f,g,h){var i,j,k,l,m,n,o=c.exifTagTypes[f];if(!o)return a.log("Invalid Exif data: Invalid tag type."),void 0;if(i=o.size*g,j=i>4?d+b.getUint32(e+8,h):e+8,j+i>b.byteLength)return a.log("Invalid Exif data: Invalid data offset."),void 0;if(1===g)return o.getValue(b,j,h);for(k=[],l=0;g>l;l+=1)k[l]=o.getValue(b,j+l*o.size,h);if(o.ascii){for(m="",l=0;l<k.length&&(n=k[l],"\0"!==n);l+=1)m+=n;return m}return k},c.parseExifTag=function(a,b,d,e,f){var g=a.getUint16(d,e);f.exif[g]=c.getExifValue(a,b,d,a.getUint16(d+2,e),a.getUint32(d+4,e),e)},c.parseExifTags=function(b,c,d,e,f){var g,h,i;if(d+6>b.byteLength)return a.log("Invalid Exif data: Invalid directory offset."),void 0;if(g=b.getUint16(d,e),h=d+2+12*g,h+4>b.byteLength)return a.log("Invalid Exif data: Invalid directory size."),void 0;for(i=0;g>i;i+=1)this.parseExifTag(b,c,d+2+12*i,e,f);return b.getUint32(h,e)},c.parseExifData=function(b,d,e,f){var g,h,i=d+10;if(1165519206===b.getUint32(d+4)){if(i+8>b.byteLength)return a.log("Invalid Exif data: Invalid segment size."),void 0;if(0!==b.getUint16(d+8))return a.log("Invalid Exif data: Missing byte alignment offset."),void 0;switch(b.getUint16(i)){case 18761:g=!0;break;case 19789:g=!1;break;default:return a.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==b.getUint16(i+2,g))return a.log("Invalid Exif data: Missing TIFF marker."),void 0;h=b.getUint32(i+4,g),f.exif=new c.ExifMap,h=c.parseExifTags(b,i,i+h,g,f)}},b.parsers[65505].push(c.parseExifData),c}),b("runtime/html5/jpegencoder",[],function(){function a(a){function b(a){for(var b=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],c=0;64>c;c++){var d=y((b[c]*a+50)/100);1>d?d=1:d>255&&(d=255),z[P[c]]=d}for(var e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],f=0;64>f;f++){var g=y((e[f]*a+50)/100);1>g?g=1:g>255&&(g=255),A[P[f]]=g}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],i=0,j=0;8>j;j++)for(var k=0;8>k;k++)B[i]=1/(8*z[P[i]]*h[j]*h[k]),C[i]=1/(8*A[P[i]]*h[j]*h[k]),i++}function c(a,b){for(var c=0,d=0,e=new Array,f=1;16>=f;f++){for(var g=1;g<=a[f];g++)e[b[d]]=[],e[b[d]][0]=c,e[b[d]][1]=f,d++,c++;c*=2}return e}function d(){t=c(Q,R),u=c(U,V),v=c(S,T),w=c(W,X)}function e(){for(var a=1,b=2,c=1;15>=c;c++){for(var d=a;b>d;d++)E[32767+d]=c,D[32767+d]=[],D[32767+d][1]=c,D[32767+d][0]=d;for(var e=-(b-1);-a>=e;e++)E[32767+e]=c,D[32767+e]=[],D[32767+e][1]=c,D[32767+e][0]=b-1+e;a<<=1,b<<=1}}function f(){for(var a=0;256>a;a++)O[a]=19595*a,O[a+256>>0]=38470*a,O[a+512>>0]=7471*a+32768,O[a+768>>0]=-11059*a,O[a+1024>>0]=-21709*a,O[a+1280>>0]=32768*a+8421375,O[a+1536>>0]=-27439*a,O[a+1792>>0]=-5329*a}function g(a){for(var b=a[0],c=a[1]-1;c>=0;)b&1<<c&&(I|=1<<J),c--,J--,0>J&&(255==I?(h(255),h(0)):h(I),J=7,I=0)}function h(a){H.push(N[a])}function i(a){h(255&a>>8),h(255&a)}function j(a,b){var c,d,e,f,g,h,i,j,k,l=0,m=8,n=64;for(k=0;m>k;++k){c=a[l],d=a[l+1],e=a[l+2],f=a[l+3],g=a[l+4],h=a[l+5],i=a[l+6],j=a[l+7];var o=c+j,p=c-j,q=d+i,r=d-i,s=e+h,t=e-h,u=f+g,v=f-g,w=o+u,x=o-u,y=q+s,z=q-s;a[l]=w+y,a[l+4]=w-y;var A=.707106781*(z+x);a[l+2]=x+A,a[l+6]=x-A,w=v+t,y=t+r,z=r+p;var B=.382683433*(w-z),C=.5411961*w+B,D=1.306562965*z+B,E=.707106781*y,G=p+E,H=p-E;a[l+5]=H+C,a[l+3]=H-C,a[l+1]=G+D,a[l+7]=G-D,l+=8}for(l=0,k=0;m>k;++k){c=a[l],d=a[l+8],e=a[l+16],f=a[l+24],g=a[l+32],h=a[l+40],i=a[l+48],j=a[l+56];var I=c+j,J=c-j,K=d+i,L=d-i,M=e+h,N=e-h,O=f+g,P=f-g,Q=I+O,R=I-O,S=K+M,T=K-M;a[l]=Q+S,a[l+32]=Q-S;var U=.707106781*(T+R);a[l+16]=R+U,a[l+48]=R-U,Q=P+N,S=N+L,T=L+J;var V=.382683433*(Q-T),W=.5411961*Q+V,X=1.306562965*T+V,Y=.707106781*S,Z=J+Y,$=J-Y;a[l+40]=$+W,a[l+24]=$-W,a[l+8]=Z+X,a[l+56]=Z-X,l++}var _;for(k=0;n>k;++k)_=a[k]*b[k],F[k]=_>0?0|_+.5:0|_-.5;return F}function k(){i(65504),i(16),h(74),h(70),h(73),h(70),h(0),h(1),h(1),h(0),i(1),i(1),h(0),h(0)}function l(a,b){i(65472),i(17),h(8),i(b),i(a),h(3),h(1),h(17),h(0),h(2),h(17),h(1),h(3),h(17),h(1)}function m(){i(65499),i(132),h(0);for(var a=0;64>a;a++)h(z[a]);h(1);for(var b=0;64>b;b++)h(A[b])}function n(){i(65476),i(418),h(0);for(var a=0;16>a;a++)h(Q[a+1]);for(var b=0;11>=b;b++)h(R[b]);h(16);for(var c=0;16>c;c++)h(S[c+1]);for(var d=0;161>=d;d++)h(T[d]);h(1);for(var e=0;16>e;e++)h(U[e+1]);for(var f=0;11>=f;f++)h(V[f]);h(17);for(var g=0;16>g;g++)h(W[g+1]);for(var j=0;161>=j;j++)h(X[j])}function o(){i(65498),i(12),h(3),h(1),h(0),h(2),h(17),h(3),h(17),h(0),h(63),h(0)}function p(a,b,c,d,e){for(var f,h=e[0],i=e[240],k=16,l=63,m=64,n=j(a,b),o=0;m>o;++o)G[P[o]]=n[o];var p=G[0]-c;c=G[0],0==p?g(d[0]):(f=32767+p,g(d[E[f]]),g(D[f]));for(var q=63;q>0&&0==G[q];q--);if(0==q)return g(h),c;for(var r,s=1;q>=s;){for(var t=s;0==G[s]&&q>=s;++s);var u=s-t;if(u>=k){r=u>>4;for(var v=1;r>=v;++v)g(i);u=15&u}f=32767+G[s],g(e[(u<<4)+E[f]]),g(D[f]),s++}return q!=l&&g(h),c}function q(){for(var a=String.fromCharCode,b=0;256>b;b++)N[b]=a(b)}function r(a){if(0>=a&&(a=1),a>100&&(a=100),x!=a){var c=0;c=50>a?Math.floor(5e3/a):Math.floor(200-2*a),b(c),x=a}}function s(){a||(a=50),q(),d(),e(),f(),r(a)}Math.round;var t,u,v,w,x,y=Math.floor,z=new Array(64),A=new Array(64),B=new Array(64),C=new Array(64),D=new Array(65535),E=new Array(65535),F=new Array(64),G=new Array(64),H=[],I=0,J=7,K=new Array(64),L=new Array(64),M=new Array(64),N=new Array(256),O=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(a,b){b&&r(b),H=new Array,I=0,J=7,i(65496),k(),m(),l(a.width,a.height),n(),o();var c=0,d=0,e=0;I=0,J=7,this.encode.displayName="_encode_";for(var f,h,j,q,s,x,y,z,A,D=a.data,E=a.width,F=a.height,G=4*E,N=0;F>N;){for(f=0;G>f;){for(s=G*N+f,x=s,y=-1,z=0,A=0;64>A;A++)z=A>>3,y=4*(7&A),x=s+z*G+y,N+z>=F&&(x-=G*(N+1+z-F)),f+y>=G&&(x-=f+y-G+4),h=D[x++],j=D[x++],q=D[x++],K[A]=(O[h]+O[j+256>>0]+O[q+512>>0]>>16)-128,L[A]=(O[h+768>>0]+O[j+1024>>0]+O[q+1280>>0]>>16)-128,M[A]=(O[h+1280>>0]+O[j+1536>>0]+O[q+1792>>0]>>16)-128;c=p(K,B,c,t,v),d=p(L,C,d,u,w),e=p(M,C,e,u,w),f+=32}N+=8}if(J>=0){var P=[];P[1]=J+1,P[0]=(1<<J+1)-1,g(P)}i(65497);var Q="data:image/jpeg;base64,"+btoa(H.join(""));return H=[],Q},s()}return a.encode=function(b,c){var d=new a(c);return d.encode(b)},a}),b("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(a,b,c){var d,e=a.canvasToDataUrl;a.canvasToDataUrl=function(a,f,g){var h,i,j,k,l;return c.os.android?("image/jpeg"===f&&"undefined"==typeof d&&(k=e.apply(null,arguments),l=k.split(","),k=~l[0].indexOf("base64")?atob(l[1]):decodeURIComponent(l[1]),k=k.substring(0,2),d=255===k.charCodeAt(0)&&216===k.charCodeAt(1)),"image/jpeg"!==f||d?e.apply(null,arguments):(i=a.width,j=a.height,h=a.getContext("2d"),b.encode(h.getImageData(0,0,i,j),g))):e.apply(null,arguments)}}),b("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(a,b,c){var d="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return b.register("Image",{modified:!1,init:function(){var a=this,b=new Image;b.onload=function(){a._info={type:a.type,width:this.width,height:this.height},a._metas||"image/jpeg"!==a.type?a.owner.trigger("load"):c.parseMeta(a._blob,function(b,c){a._metas=c,a.owner.trigger("load")})},b.onerror=function(){a.owner.trigger("error")},a._img=b},loadFromBlob:function(a){var b=this,d=b._img;b._blob=a,b.type=a.type,d.src=c.createObjectURL(a.getSource()),b.owner.once("load",function(){c.revokeObjectURL(d.src)})},resize:function(a,b){var c=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,c,a,b),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(a,b,c,d,e){var f=this._canvas||(this._canvas=document.createElement("canvas")),g=this.options,h=this._img,i=h.naturalWidth,j=h.naturalHeight,k=this.getOrientation();e=e||1,f.width=c,f.height=d,g.preserveHeaders||this._rotate2Orientaion(f,k),this._renderImageToCanvas(f,h,-a,-b,i*e,j*e),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(a){var b,d=this._blob,e=this.options;if(a=a||this.type,this.modified||this.type!==a){if(b=this._canvas,"image/jpeg"===a){if(d=c.canvasToDataUrl(b,a,e.quality),e.preserveHeaders&&this._metas&&this._metas.imageHead)return d=c.dataURL2ArrayBuffer(d),d=c.updateImageHead(d,this._metas.imageHead),d=c.arrayBufferToBlob(d,a)}else d=c.canvasToDataUrl(b,a);d=c.dataURL2Blob(d)}return d},getAsDataUrl:function(a){var b=this.options;return a=a||this.type,"image/jpeg"===a?c.canvasToDataUrl(this._canvas,a,b.quality):this._canvas.toDataURL(a)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._metas=a,this):this._metas},destroy:function(){var a=this._canvas;this._img.onload=null,a&&(a.getContext("2d").clearRect(0,0,a.width,a.height),a.width=a.height=0,this._canvas=null),this._img.src=d,this._img=this._blob=null},_resize:function(a,b,c,d){var e,f,g,h,i,j=this.options,k=a.width,l=a.height,m=this.getOrientation();~[5,6,7,8].indexOf(m)&&(c^=d,d^=c,c^=d),e=Math[j.crop?"max":"min"](c/k,d/l),j.allowMagnify||(e=Math.min(1,e)),f=k*e,g=l*e,j.crop?(b.width=c,b.height=d):(b.width=f,b.height=g),h=(b.width-f)/2,i=(b.height-g)/2,j.preserveHeaders||this._rotate2Orientaion(b,m),this._renderImageToCanvas(b,a,h,i,f,g)},_rotate2Orientaion:function(a,b){var c=a.width,d=a.height,e=a.getContext("2d");switch(b){case 5:case 6:case 7:case 8:a.width=d,a.height=c}switch(b){case 2:e.translate(c,0),e.scale(-1,1);break;case 3:e.translate(c,d),e.rotate(Math.PI);break;case 4:e.translate(0,d),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-d);break;case 7:e.rotate(.5*Math.PI),e.translate(c,-d),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-c,0)}},_renderImageToCanvas:function(){function b(a,b,c){var d,e,f,g=document.createElement("canvas"),h=g.getContext("2d"),i=0,j=c,k=c;for(g.width=1,g.height=c,h.drawImage(a,0,0),d=h.getImageData(0,0,1,c).data;k>i;)e=d[4*(k-1)+3],0===e?j=k:i=k,k=j+i>>1;return f=k/c,0===f?1:f}function c(a){var b,c,d=a.naturalWidth,e=a.naturalHeight;return d*e>1048576?(b=document.createElement("canvas"),b.width=b.height=1,c=b.getContext("2d"),c.drawImage(a,-d+1,0),0===c.getImageData(0,0,1,1).data[3]):!1}return a.os.ios?a.os.ios>=7?function(a,c,d,e,f,g){var h=c.naturalWidth,i=c.naturalHeight,j=b(c,h,i);return a.getContext("2d").drawImage(c,0,0,h*j,i*j,d,e,f,g)}:function(a,d,e,f,g,h){var i,j,k,l,m,n,o,p=d.naturalWidth,q=d.naturalHeight,r=a.getContext("2d"),s=c(d),t="image/jpeg"===this.type,u=1024,v=0,w=0;for(s&&(p/=2,q/=2),r.save(),i=document.createElement("canvas"),i.width=i.height=u,j=i.getContext("2d"),k=t?b(d,p,q):1,l=Math.ceil(u*g/p),m=Math.ceil(u*h/q/k);q>v;){for(n=0,o=0;p>n;)j.clearRect(0,0,u,u),j.drawImage(d,-n,-v),r.drawImage(i,0,0,u,u,e+o,f+w,l,m),n+=u,o+=l;v+=u,w+=m}r.restore(),i=j=null}:function(b){var c=a.slice(arguments,1),d=b.getContext("2d");d.drawImage.apply(d,c)}}()})}),b("runtime/html5/transport",["base","runtime/html5/runtime"],function(a,b){var c=a.noop,d=a.$;return b.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var b,c,e,f=this.owner,g=this.options,h=this._initAjax(),i=f._blob,j=g.server;g.sendAsBinary?(j+=(/\?/.test(j)?"&":"?")+d.param(f._formData),c=i.getSource()):(b=new FormData,d.each(f._formData,function(a,c){b.append(a,c)}),b.append(g.fileVal,i.getSource(),g.filename||f._formData.name||"")),g.withCredentials&&"withCredentials"in h?(h.open(g.method,j,!0),h.withCredentials=!0):h.open(g.method,j),this._setRequestHeader(h,g.headers),c?(h.overrideMimeType&&h.overrideMimeType("application/octet-stream"),a.os.android?(e=new FileReader,e.onload=function(){h.send(this.result),e=e.onload=null},e.readAsArrayBuffer(c)):h.send(c)):h.send(b)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var a=this._xhr;a&&(a.upload.onprogress=c,a.onreadystatechange=c,a.abort(),this._xhr=a=null)},destroy:function(){this.abort()},_initAjax:function(){var a=this,b=new XMLHttpRequest,d=this.options;return!d.withCredentials||"withCredentials"in b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest),b.upload.onprogress=function(b){var c=0;return b.lengthComputable&&(c=b.loaded/b.total),a.trigger("progress",c)},b.onreadystatechange=function(){return 4===b.readyState?(b.upload.onprogress=c,b.onreadystatechange=c,a._xhr=null,a._status=b.status,b.status>=200&&b.status<300?(a._response=b.responseText,a.trigger("load")):b.status>=500&&b.status<600?(a._response=b.responseText,a.trigger("error","server")):a.trigger("error",a._status?"http":"abort")):void 0},a._xhr=b,b},_setRequestHeader:function(a,b){d.each(b,function(b,c){a.setRequestHeader(b,c)})},_parseJson:function(a){var b;try{b=JSON.parse(a)}catch(c){b={}}return b}})}),b("runtime/html5/md5",["runtime/html5/runtime"],function(a){var b=function(a,b){return 4294967295&a+b},c=function(a,c,d,e,f,g){return c=b(b(c,a),b(e,g)),b(c<<f|c>>>32-f,d)},d=function(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)},e=function(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)},f=function(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)},g=function(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)},h=function(a,c){var h=a[0],i=a[1],j=a[2],k=a[3];h=d(h,i,j,k,c[0],7,-680876936),k=d(k,h,i,j,c[1],12,-389564586),j=d(j,k,h,i,c[2],17,606105819),i=d(i,j,k,h,c[3],22,-1044525330),h=d(h,i,j,k,c[4],7,-176418897),k=d(k,h,i,j,c[5],12,1200080426),j=d(j,k,h,i,c[6],17,-1473231341),i=d(i,j,k,h,c[7],22,-45705983),h=d(h,i,j,k,c[8],7,1770035416),k=d(k,h,i,j,c[9],12,-1958414417),j=d(j,k,h,i,c[10],17,-42063),i=d(i,j,k,h,c[11],22,-1990404162),h=d(h,i,j,k,c[12],7,1804603682),k=d(k,h,i,j,c[13],12,-40341101),j=d(j,k,h,i,c[14],17,-1502002290),i=d(i,j,k,h,c[15],22,1236535329),h=e(h,i,j,k,c[1],5,-165796510),k=e(k,h,i,j,c[6],9,-1069501632),j=e(j,k,h,i,c[11],14,643717713),i=e(i,j,k,h,c[0],20,-373897302),h=e(h,i,j,k,c[5],5,-701558691),k=e(k,h,i,j,c[10],9,38016083),j=e(j,k,h,i,c[15],14,-660478335),i=e(i,j,k,h,c[4],20,-405537848),h=e(h,i,j,k,c[9],5,568446438),k=e(k,h,i,j,c[14],9,-1019803690),j=e(j,k,h,i,c[3],14,-187363961),i=e(i,j,k,h,c[8],20,1163531501),h=e(h,i,j,k,c[13],5,-1444681467),k=e(k,h,i,j,c[2],9,-51403784),j=e(j,k,h,i,c[7],14,1735328473),i=e(i,j,k,h,c[12],20,-1926607734),h=f(h,i,j,k,c[5],4,-378558),k=f(k,h,i,j,c[8],11,-2022574463),j=f(j,k,h,i,c[11],16,1839030562),i=f(i,j,k,h,c[14],23,-35309556),h=f(h,i,j,k,c[1],4,-1530992060),k=f(k,h,i,j,c[4],11,1272893353),j=f(j,k,h,i,c[7],16,-155497632),i=f(i,j,k,h,c[10],23,-1094730640),h=f(h,i,j,k,c[13],4,681279174),k=f(k,h,i,j,c[0],11,-358537222),j=f(j,k,h,i,c[3],16,-722521979),i=f(i,j,k,h,c[6],23,76029189),h=f(h,i,j,k,c[9],4,-640364487),k=f(k,h,i,j,c[12],11,-421815835),j=f(j,k,h,i,c[15],16,530742520),i=f(i,j,k,h,c[2],23,-995338651),h=g(h,i,j,k,c[0],6,-198630844),k=g(k,h,i,j,c[7],10,1126891415),j=g(j,k,h,i,c[14],15,-1416354905),i=g(i,j,k,h,c[5],21,-57434055),h=g(h,i,j,k,c[12],6,1700485571),k=g(k,h,i,j,c[3],10,-1894986606),j=g(j,k,h,i,c[10],15,-1051523),i=g(i,j,k,h,c[1],21,-2054922799),h=g(h,i,j,k,c[8],6,1873313359),k=g(k,h,i,j,c[15],10,-30611744),j=g(j,k,h,i,c[6],15,-1560198380),i=g(i,j,k,h,c[13],21,1309151649),h=g(h,i,j,k,c[4],6,-145523070),k=g(k,h,i,j,c[11],10,-1120210379),j=g(j,k,h,i,c[2],15,718787259),i=g(i,j,k,h,c[9],21,-343485551),a[0]=b(h,a[0]),a[1]=b(i,a[1]),a[2]=b(j,a[2]),a[3]=b(k,a[3])},i=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},j=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},k=function(a){var b,c,d,e,f,g,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)h(k,i(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},l=function(a){var b,c,d,e,f,g,i=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;i>=b;b+=64)h(k,j(a.subarray(b-64,b)));for(a=i>b-64?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*i,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(a){var b,c="";for(b=0;4>b;b+=1)c+=m[15&a>>8*b+4]+m[15&a>>8*b];return c},o=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=n(a[b]);return a.join("")},p=function(a){return o(k(a))},q=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(b=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),q.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},q.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var b,c=this._buff.length;for(b=64;c>=b;b+=64)h(this._state,i(this._buff.substring(b-64,b)));return this._buff=this._buff.substr(b-64),this},q.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.prototype._finish=function(a,b){var c,d,e,f=b;if(a[f>>2]|=128<<(f%4<<3),f>55)for(h(this._state,a),f=0;16>f;f+=1)a[f]=0;c=8*this._length,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),e=parseInt(c[1],16)||0,a[14]=d,a[15]=e,h(this._state,a)},q.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},q.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=k(a);return b?c:o(c)
},q.hashBinary=function(a,b){var c=k(a);return b?c:o(c)},q.ArrayBuffer=function(){this.reset()},q.ArrayBuffer.prototype.append=function(a){var b,c=this._concatArrayBuffer(this._buff,a),d=c.length;for(this._length+=a.byteLength,b=64;d>=b;b+=64)h(this._state,j(c.subarray(b-64,b)));return this._buff=d>b-64?c.subarray(b-64):new Uint8Array(0),this},q.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.ArrayBuffer.prototype._finish=q.prototype._finish,q.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.ArrayBuffer.prototype.destroy=q.prototype.destroy,q.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},q.ArrayBuffer.hash=function(a,b){var c=l(new Uint8Array(a));return b?c:o(c)},a.register("Md5",{init:function(){},loadFromBlob:function(a){var b,c,d=a.getSource(),e=2097152,f=Math.ceil(d.size/e),g=0,h=this.owner,i=new q.ArrayBuffer,j=this,k=d.mozSlice||d.webkitSlice||d.slice;c=new FileReader,b=function(){var l,m;l=g*e,m=Math.min(l+e,d.size),c.onload=function(b){i.append(b.target.result),h.trigger("progress",{total:a.size,loaded:m})},c.onloadend=function(){c.onloadend=c.onload=null,++g<f?setTimeout(b,1):setTimeout(function(){h.trigger("load"),j.result=i.end(),b=a=d=i=null,h.trigger("complete")},50)},c.readAsArrayBuffer(k.call(d,l,m))},b()},getResult:function(){return this.result}})}),b("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(b,c,d){function e(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(b){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(c){a="0.0"}}return a=a.match(/\d+/g),parseFloat(a[0]+"."+a[1],10)}function f(){function d(a,b){var c,d,e=a.type||a;c=e.split("::"),d=c[0],e=c[1],"Ready"===e&&d===j.uid?j.trigger("ready"):f[d]&&f[d].trigger(e.toLowerCase(),a,b)}var e={},f={},g=this.destroy,j=this,k=b.guid("webuploader_");c.apply(j,arguments),j.type=h,j.exec=function(a,c){var d,g=this,h=g.uid,k=b.slice(arguments,2);return f[h]=g,i[a]&&(e[h]||(e[h]=new i[a](g,j)),d=e[h],d[c])?d[c].apply(d,k):j.flashExec.apply(g,arguments)},a[k]=function(){var a=arguments;setTimeout(function(){d.apply(null,a)},1)},this.jsreciver=k,this.destroy=function(){return g&&g.apply(this,arguments)},this.flashExec=function(a,c){var d=j.getFlash(),e=b.slice(arguments,2);return d.exec(this.uid,a,c,e)}}var g=b.$,h="flash",i={};return b.inherits(c,{constructor:f,init:function(){var a,c=this.getContainer(),d=this.options;c.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),a='<object id="'+this.uid+'" type="application/'+'x-shockwave-flash" data="'+d.swf+'" ',b.browser.ie&&(a+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),a+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+d.swf+'" />'+'<param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+"</object>",c.html(a)},getFlash:function(){return this._flash?this._flash:(this._flash=g("#"+this.uid).get(0),this._flash)}}),f.register=function(a,c){return c=i[a]=b.inherits(d,g.extend({flashExec:function(){var a=this.owner,b=this.getRuntime();return b.flashExec.apply(a,arguments)}},c))},e()>=11.4&&c.addRuntime(h,f),f}),b("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(a,b){var c=a.$;return b.register("FilePicker",{init:function(a){var b,d,e=c.extend({},a);for(b=e.accept&&e.accept.length,d=0;b>d;d++)e.accept[d].title||(e.accept[d].title="Files");delete e.button,delete e.id,delete e.container,this.flashExec("FilePicker","init",e)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),b("runtime/flash/image",["runtime/flash/runtime"],function(a){return a.register("Image",{loadFromBlob:function(a){var b=this.owner;b.info()&&this.flashExec("Image","info",b.info()),b.meta()&&this.flashExec("Image","meta",b.meta()),this.flashExec("Image","loadFromBlob",a.uid)}})}),b("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(b,c,d){var e=b.$;return c.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var a,b=this.owner,c=this.options,d=this._initAjax(),f=b._blob,g=c.server;d.connectRuntime(f.ruid),c.sendAsBinary?(g+=(/\?/.test(g)?"&":"?")+e.param(b._formData),a=f.uid):(e.each(b._formData,function(a,b){d.exec("append",a,b)}),d.exec("appendBlob",c.fileVal,f.uid,c.filename||b._formData.name||"")),this._setRequestHeader(d,c.headers),d.exec("send",{method:c.method,url:g,forceURLStream:c.forceURLStream,mimeType:"application/octet-stream"},a)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var a=this._xhr;a&&(a.exec("abort"),a.destroy(),this._xhr=a=null)},destroy:function(){this.abort()},_initAjax:function(){var b=this,c=new d("XMLHttpRequest");return c.on("uploadprogress progress",function(a){var c=a.loaded/a.total;return c=Math.min(1,Math.max(0,c)),b.trigger("progress",c)}),c.on("load",function(){var d,e=c.exec("getStatus"),f=!1,g="";return c.off(),b._xhr=null,e>=200&&300>e?f=!0:e>=500&&600>e?(f=!0,g="server"):g="http",f&&(b._response=c.exec("getResponse"),b._response=decodeURIComponent(b._response),d=function(b){try{return a.JSON&&a.JSON.parse?JSON.parse(b):new Function("return "+b).call()}catch(c){return{}}},b._responseJson=b._response?d(b._response):{}),c.destroy(),c=null,g?b.trigger("error",g):b.trigger("load")}),c.on("error",function(){c.off(),b._xhr=null,b.trigger("error","http")}),b._xhr=c,c},_setRequestHeader:function(a,b){e.each(b,function(b,c){a.exec("setRequestHeader",b,c)})}})}),b("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(a,b){return a.register("Blob",{slice:function(a,c){var d=this.flashExec("Blob","slice",a,c);return new b(this.getRuid(),d)}})}),b("runtime/flash/md5",["runtime/flash/runtime"],function(a){return a.register("Md5",{init:function(){},loadFromBlob:function(a){return this.flashExec("Md5","loadFromBlob",a.uid)}})}),b("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(a){return a}),b("widgets/log",["base","uploader","widgets/widget"],function(a,b){function c(a){var b=e.extend({},d,a),c=f.replace(/^(.*)\?/,"$1"+e.param(b)),g=new Image;g.src=c}var d,e=a.$,f=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",g=(location.hostname||location.host||"protected").toLowerCase(),h=g&&/baidu/i.exec(g);if(h)return d={dv:3,master:"webuploader",online:/test/.exec(g)?0:1,module:"",product:g,type:0},b.register({name:"log",init:function(){var a=this.owner,b=0,d=0;a.on("error",function(a){c({type:2,c_error_code:a})}).on("uploadError",function(a,b){c({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+b})}).on("uploadComplete",function(a){b++,d+=a.size}).on("uploadFinished",function(){c({c_count:b,c_size:d}),b=d=0}),c({c_usage:1})}})}),b("webuploader",["preset/all","widgets/log"],function(a){return a}),c("webuploader")});
/* COMBO: filename = js/plugins/jquery/jquery.mousewheel.js, type = application/javascript, resp = 200 */
/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

(function (factory) {
    if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {

    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?
                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice  = Array.prototype.slice,
        nullLowestDeltaTimeout, lowestDelta;

    if ( $.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
        }
    }

    var special = $.event.special.mousewheel = {
        version: '3.1.12',

        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
            // Store the line height and page height for this particular element
            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
            // Clean up the data we added to the element
            $.removeData(this, 'mousewheel-line-height');
            $.removeData(this, 'mousewheel-page-height');
        },

        getLineHeight: function(elem) {
            var $elem = $(elem),
                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();
            if (!$parent.length) {
                $parent = $('body');
            }
            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;
        },

        getPageHeight: function(elem) {
            return $(elem).height();
        },

        settings: {
            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below
            normalizeOffset: true  // calls getBoundingClientRect for each event
        }
    };

    $.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
        },

        unmousewheel: function(fn) {
            return this.unbind('mousewheel', fn);
        }
    });


    function handler(event) {
        var orgEvent   = event || window.event,
            args       = slice.call(arguments, 1),
            delta      = 0,
            deltaX     = 0,
            deltaY     = 0,
            absDelta   = 0,
            offsetX    = 0,
            offsetY    = 0;
        event = $.event.fix(orgEvent);
        event.type = 'mousewheel';

        // Old school scrollwheel delta
        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }
        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }
        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }
        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }

        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
        delta = deltaY === 0 ? deltaX : deltaY;

        // New school wheel delta (wheel event)
        if ( 'deltaY' in orgEvent ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( 'deltaX' in orgEvent ) {
            deltaX = orgEvent.deltaX;
            if ( deltaY === 0 ) { delta  = deltaX * -1; }
        }

        // No change actually happened, no reason to go any further
        if ( deltaY === 0 && deltaX === 0 ) { return; }

        // Need to convert lines and pages to pixels if we aren't already in pixels
        // There are three delta modes:
        //   * deltaMode 0 is by pixels, nothing to do
        //   * deltaMode 1 is by lines
        //   * deltaMode 2 is by pages
        if ( orgEvent.deltaMode === 1 ) {
            var lineHeight = $.data(this, 'mousewheel-line-height');
            delta  *= lineHeight;
            deltaY *= lineHeight;
            deltaX *= lineHeight;
        } else if ( orgEvent.deltaMode === 2 ) {
            var pageHeight = $.data(this, 'mousewheel-page-height');
            delta  *= pageHeight;
            deltaY *= pageHeight;
            deltaX *= pageHeight;
        }

        // Store lowest absolute delta to normalize the delta values
        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );

        if ( !lowestDelta || absDelta < lowestDelta ) {
            lowestDelta = absDelta;

            // Adjust older deltas if necessary
            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
                lowestDelta /= 40;
            }
        }

        // Adjust older deltas if necessary
        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
            // Divide all the things by 40!
            delta  /= 40;
            deltaX /= 40;
            deltaY /= 40;
        }

        // Get a whole, normalized value for the deltas
        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);
        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);
        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);

        // Normalise offsetX and offsetY properties
        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {
            var boundingRect = this.getBoundingClientRect();
            offsetX = event.clientX - boundingRect.left;
            offsetY = event.clientY - boundingRect.top;
        }

        // Add information to the event object
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        event.offsetX = offsetX;
        event.offsetY = offsetY;
        // Go ahead and set deltaMode to 0 since we converted to pixels
        // Although this is a little odd since we overwrite the deltaX/Y
        // properties with normalized deltas.
        event.deltaMode = 0;

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        // Clearout lowestDelta after sometime to better
        // handle multiple device types that give different
        // a different lowestDelta
        // Ex: trackpad = 3 and mouse wheel = 120
        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

        return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
        lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
        // If this is an older event and the delta is divisable by 120,
        // then we are assuming that the browser is treating this as an
        // older mouse wheel event and that we should divide the deltas
        // by 40 to try and get a more usable deltaFactor.
        // Side note, this actually impacts the reported scroll distance
        // in older browsers and can cause scrolling to be slower than native.
        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }

}));

/* COMBO: filename = js/681.js, type = text/plain, resp = 404 */
